3c1bfb4d7d54141261532eae894559ac
/**
 * Jest Setup for E2E Tests
 *
 * LocalStack環境変数を設定し、E2Eテストの実行環境を準備します。
 */

// LocalStack環境変数を設定
if (process.env.NODE_ENV === 'test' || process.env.TEST_ENV === 'e2e') {
  process.env.AWS_ENDPOINT_URL = process.env.AWS_ENDPOINT_URL || 'http://localhost:4566';
  process.env.AWS_REGION = process.env.AWS_REGION || 'ap-northeast-1';
  process.env.AWS_ACCESS_KEY_ID = process.env.AWS_ACCESS_KEY_ID || 'test';
  process.env.AWS_SECRET_ACCESS_KEY = process.env.AWS_SECRET_ACCESS_KEY || 'test';
  process.env.DYNAMODB_TABLE_NAME = process.env.DYNAMODB_TABLE_NAME || 'tdnet-disclosures-local';
  process.env.EXPORT_STATUS_TABLE_NAME = process.env.EXPORT_STATUS_TABLE_NAME || 'tdnet-export-status-local';
  process.env.S3_BUCKET_NAME = process.env.S3_BUCKET_NAME || 'tdnet-pdfs-local';
  process.env.LOG_LEVEL = process.env.LOG_LEVEL || 'error'; // E2Eテスト中はエラーログのみ
  process.env.NODE_ENV = 'test';
}

// テストタイムアウトの延長（E2Eテストは時間がかかる）
jest.setTimeout(60000); // 60秒
