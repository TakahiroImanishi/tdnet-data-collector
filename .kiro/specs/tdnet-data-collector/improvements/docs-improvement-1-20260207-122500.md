# Improvementsフォルダの再構成

**実行日時:** 2026-02-07 12:25:00 JST

## 問題点

`improvements` フォルダが `.kiro/steering/` 配下にあったが、これは不適切だった：

- **steering**: 実装ガイドライン、ベストプラクティス、ルールを格納
- **improvements**: タスク実行後の改善履歴を記録

両者は性質が異なり、steeringフォルダに改善履歴を配置するのは混乱を招く。

## 改善内容

### 1. フォルダの移動

**移動元:**
```
.kiro/steering/improvements/
```

**移動先:**
```
.kiro/specs/tdnet-data-collector/improvements/
```

**理由:**
- 改善履歴はプロジェクトの仕様（specs）に関連する記録
- 要件定義書（requirements.md）や設計書（design.md）の改善記録も含まれる
- specsフォルダに配置することで、仕様関連のドキュメントが一箇所にまとまる

### 2. 移動したファイル

- `README.md` - 改善履歴の記録方法
- `create-improvement.ps1` - 改善履歴ファイル作成スクリプト
- `task-review-improvement-1-20260207-115335.md`
- `steering-review-improvement-1-20260207-115718.md`
- `steering-consistency-check-20260207-120500.md`
- `specs-consistency-check-20260207-130000.md`
- `specs-improvements-2-7-20260207-122259.md`

### 3. 更新したドキュメント

#### `.kiro/steering/core/tdnet-data-collector.md`
- 改善履歴の記録先パスを更新
  - 旧: `.kiro/steering/improvements/`
  - 新: `.kiro/specs/tdnet-data-collector/improvements/`

#### `.kiro/steering/README.md`
- `improvements/` フォルダのセクションを削除
- 関連リンクの改善履歴パスを更新
- ファイル更新ガイドラインの記録先パスを更新

#### `.kiro/specs/tdnet-data-collector/README.md`
- フォルダ構成に `improvements/` を追加
- 改善履歴セクションを追加
- openapi.yamlの記載を追加

## 影響範囲

### 削除されたフォルダ
- `.kiro/steering/improvements/` （空フォルダとして削除）

### 新規作成されたフォルダ
- `.kiro/specs/tdnet-data-collector/improvements/`

### 更新されたファイル
- `.kiro/steering/core/tdnet-data-collector.md` - パス参照を2箇所更新
- `.kiro/steering/README.md` - improvementsセクション削除、パス参照を2箇所更新
- `.kiro/specs/tdnet-data-collector/README.md` - improvementsセクション追加、フォルダ構成更新

### 移動されたファイル
- 7ファイル（README.md、create-improvement.ps1、改善記録5件）

## 検証結果

- ✅ improvementsフォルダが適切な場所（specs配下）に移動された
- ✅ すべてのパス参照が更新された
- ✅ steeringフォルダは実装ガイドラインのみを含むようになった
- ✅ specsフォルダに仕様関連のドキュメントが集約された
- ✅ create-improvement.ps1は相対パス（$PSScriptRoot）を使用しているため、移動後も正常に動作する

## フォルダ構造（更新後）

```
.kiro/
├── steering/                    # 実装ガイドライン
│   ├── core/                    # 基本ルール（常に読み込まれる）
│   ├── development/             # 開発ガイドライン
│   ├── infrastructure/          # インフラ・デプロイ
│   ├── security/                # セキュリティ
│   ├── api/                     # API設計
│   └── README.md
└── specs/
    └── tdnet-data-collector/    # プロジェクト仕様
        ├── docs/                # 要件・設計書
        ├── improvements/        # 改善履歴（移動先）
        ├── templates/           # テンプレート
        └── README.md
```

## 優先度

**Medium** - フォルダ構造の整理により、プロジェクトの保守性が向上

## 次のステップ

1. ✅ フォルダ再構成完了
2. 実装開始前チェックリストの実施
3. 実装開始

## メトリクス

- **移動したファイル数:** 7
- **更新したドキュメント数:** 3
- **削除したフォルダ数:** 1
- **新規作成したフォルダ数:** 1

## 結論

improvementsフォルダを `.kiro/specs/tdnet-data-collector/` 配下に移動することで、以下が達成されました：

1. **明確な責任分離**: steeringは実装ガイドライン、specsは仕様とその改善履歴
2. **論理的な配置**: 改善履歴は仕様の一部として、仕様書と同じ場所に配置
3. **保守性の向上**: 関連するドキュメントが一箇所にまとまり、管理が容易に

この変更により、プロジェクトの構造がより直感的で保守しやすくなりました。
