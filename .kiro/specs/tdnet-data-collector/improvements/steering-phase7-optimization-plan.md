# Steering Phase 7 最適化計画

**作成日時**: 2026-02-22 08:09:51  
**目的**: 250語以上のsteeringファイルを200語以下に削減

## 対象ファイルと削減戦略

### 1. deployment-checklist.md (298語 → 目標: 180語)

**削減項目**:
- ❌ 「なぜこのルールが必要か」の詳細説明（3段落）→ 1行に集約
- ❌ 「このルールを守らないと」セクション（4項目）→ 削除
- ❌ 環境別設定の詳細表（7項目）→ 3項目に削減
- ❌ デプロイタイミングの詳細説明 → 1行に集約
- ❌ ロールバック手順の詳細 → 参照のみ

**残す内容**:
- ✅ 🚨重要セクション（簡略版）
- ✅ デプロイ前チェックリスト
- ✅ デプロイ手順（簡略版）
- ✅ デプロイ後チェックリスト
- ✅ 関連ドキュメント

**推定削減**: 約118語（40%削減）

---

### 2. mcp-documentation-guidelines.md (297語 → 目標: 180語)

**削減項目**:
- ❌ 各パターンのTypeScriptコード例（4個）→ 削除
- ❌ ドキュメント品質ガイドラインの詳細コード例（3個）→ 削除
- ❌ 「複数情報源の検証」の詳細実装 → 削除
- ❌ トークン消費の最適化コード例 → 削除

**残す内容**:
- ✅ 利用可能なMCPサーバー表
- ✅ ドキュメント作成パターン（表形式のみ）
- ✅ 注意事項（箇条書き）
- ✅ 関連ドキュメント

**推定削減**: 約117語（39%削減）

---

### 3. tdnet-scraping-patterns.md (297語 → 目標: 180語)

**削減項目**:
- ❌ 基本実装の完全なコード例（40行）→ 10行に削減
- ❌ レート制限の完全なクラス実装（20行）→ 5行に削減
- ❌ fetchWithRetry関数の完全実装（15行）→ 削除（参照のみ）

**残す内容**:
- ✅ TDnet URL構造
- ✅ CSSセレクタ表
- ✅ 基本実装（最小限のコード）
- ✅ レート制限（基本パターンのみ）
- ✅ ベストプラクティス（箇条書き）
- ✅ 関連ドキュメント

**推定削減**: 約117語（39%削減）

---

### 4. documentation-standards.md (287語 → 目標: 180語)

**削減項目**:
- ❌ コード例（良い例・悪い例の詳細実装）→ 削除
- ❌ エディタ設定の詳細（VS Code、Git）→ 削除
- ❌ ファイル操作のコード例（TypeScript、PowerShell、JavaScript）→ 削除
- ❌ ドキュメント作成の詳細（見出し階層、表、コードブロック、リンク）→ 削除

**残す内容**:
- ✅ 言語規則（表形式）
- ✅ ファイルエンコーディング（表形式）
- ✅ ファイル命名規則
- ✅ 関連ドキュメント

**推定削減**: 約107語（37%削減）

---

### 5. tdnet-implementation-rules.md (283語 → 目標: 180語)

**削減項目**:
- ❌ プロジェクト構造の詳細説明（Lambda関数11個の詳細リスト）→ 簡略化
- ❌ scripts/の詳細分類（4カテゴリ）→ 1行に集約
- ❌ 関連ドキュメントの詳細説明（14項目）→ 削除（リンクのみ）

**残す内容**:
- ✅ 言語設定
- ✅ 技術スタック
- ✅ プロジェクト構造（簡略版）
- ✅ 必須実装ルール（5項目）
- ✅ 関連ドキュメント（リンクのみ）

**推定削減**: 約103語（36%削減）

---

### 6. mcp-server-guidelines.md (276語 → 目標: 180語)

**削減項目**:
- ❌ プロジェクト固有パターンの詳細コード例（4個）→ 削除
- ❌ 検索クエリのベストプラクティスの詳細例 → 削除
- ❌ 注意事項の詳細コード例 → 削除

**残す内容**:
- ✅ 利用可能なMCPサーバー表
- ✅ 活用原則（表形式）
- ✅ プロジェクト固有パターン（表形式のみ）
- ✅ 注意事項（箇条書き）
- ✅ 関連ドキュメント

**推定削減**: 約96語（35%削減）

---

### 7. lambda-implementation.md (269語 → 目標: 180語)

**削減項目**:
- ❌ 環境変数検証の完全なコード例（10行）→ 削除
- ❌ エラーハンドリングの完全なコード例（15行）→ 削除
- ❌ パフォーマンス最適化の完全なコード例（15行）→ 削除

**残す内容**:
- ✅ メモリとタイムアウト表
- ✅ 環境変数検証（参照のみ）
- ✅ エラーハンドリング（参照のみ）
- ✅ パフォーマンス最適化（参照のみ）
- ✅ 実装チェックリスト
- ✅ 関連ドキュメント

**推定削減**: 約89語（33%削減）

---

### 8. workflow-guidelines.md (267語 → 目標: 180語)

**削減項目**:
- ❌ 並列実行パターンの詳細例（3個）→ 削除
- ❌ 並列実行不可パターンの詳細例（2個）→ 削除
- ❌ 並列実行の判断フローチャート（テキスト図）→ 削除

**残す内容**:
- ✅ サブエージェント活用（表形式）
- ✅ context-gatherer使用ルール
- ✅ 並列実行ルール（表形式）
- ✅ 並列実行可能なタスク例（表形式）
- ✅ ベストプラクティス（表形式）
- ✅ 関連ドキュメント

**推定削減**: 約87語（33%削減）

---

### 9. security-best-practices.md (267語 → 目標: 180語)

**削減項目**:
- ❌ IAM権限の禁止コード例（良い例・悪い例）→ 削除
- ❌ 環境変数の禁止コード例（良い例・悪い例）→ 削除
- ❌ APIキーのコード例（5行）→ 削除
- ❌ CORSのコード例（5行）→ 削除
- ❌ ログマスクのコード例（5行）→ 削除

**残す内容**:
- ✅ セキュリティ原則（3項目）
- ✅ IAM権限表
- ✅ 暗号化表
- ✅ 機密情報管理表
- ✅ API Gateway（説明のみ）
- ✅ 監査（説明のみ）
- ✅ チェックリスト
- ✅ 関連ドキュメント（削除）

**推定削減**: 約87語（33%削減）

---

### 10. powershell-encoding-guidelines.md (250語 → 目標: 180語)

**削減項目**:
- ❌ fsWrite使用時のTypeScriptコード例 → 削除
- ❌ Out-File使用時の4つの例（悪い例3個、良い例1個）→ 2個に削減
- ❌ ConvertTo-Json使用時の例 → 削除
- ❌ Set-Content使用時の例（悪い例・良い例）→ 削除
- ❌ 既存スクリプトの修正パターン → 削除
- ❌ PowerShellバージョン別の違い表 → 削除

**残す内容**:
- ✅ 必須ルール（説明のみ）
- ✅ Out-File使用時（最小限の例）
- ✅ チェックリスト
- ✅ トラブルシューティング表
- ✅ 関連ドキュメント

**推定削減**: 約70語（28%削減）

---

## 合計削減見込み

| ファイル | 現在 | 目標 | 削減 | 削減率 |
|---------|------|------|------|--------|
| deployment-checklist.md | 298語 | 180語 | 118語 | 40% |
| mcp-documentation-guidelines.md | 297語 | 180語 | 117語 | 39% |
| tdnet-scraping-patterns.md | 297語 | 180語 | 117語 | 39% |
| documentation-standards.md | 287語 | 180語 | 107語 | 37% |
| tdnet-implementation-rules.md | 283語 | 180語 | 103語 | 36% |
| mcp-server-guidelines.md | 276語 | 180語 | 96語 | 35% |
| lambda-implementation.md | 269語 | 180語 | 89語 | 33% |
| workflow-guidelines.md | 267語 | 180語 | 87語 | 33% |
| security-best-practices.md | 267語 | 180語 | 87語 | 33% |
| powershell-encoding-guidelines.md | 250語 | 180語 | 70語 | 28% |
| **合計** | **2,791語** | **1,800語** | **991語** | **35%** |

## 最適化原則

1. **コード例の削除**: 詳細な実装コードは削除し、参照のみ残す
2. **表形式への変換**: 長文説明を表形式に変換
3. **重複情報の削除**: 他のsteeringファイルと重複する内容を削除
4. **チェックリスト維持**: 実装時に即座に使える情報は維持
5. **関連ドキュメントの簡略化**: 詳細説明を削除し、リンクのみ残す

## 実施方法

Supervisedモードのため、ユーザーの承認後に順次実施します。

1. 各ファイルを順次最適化
2. 最適化後の語数を確認
3. 作業記録に結果を記録
4. IMPROVEMENT-PLAN.mdを更新

## 期待される効果

- トークン消費: 約991語（約1,500トークン）削減
- 全ファイルが200語以下に最適化
- 実装時の認知負荷がさらに軽減
- 必要な情報への素早いアクセス

