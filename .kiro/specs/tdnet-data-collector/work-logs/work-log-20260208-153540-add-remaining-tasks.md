# 残タスクの追加

**作成日時:** 2026-02-08 15:35:40  
**作業概要:** 整合性レビューで発見された残タスクをtasks.mdに追加

---

## タスク概要

整合性レビューサマリー（work-log-20260208-151324-implementation-consistency-review-summary.md）で特定された改善項目を、tasks.mdのPhase 2セクション（タスク15.14の前）に追加する。

### 追加するタスク

#### Phase 2（1週間以内）: 監視機能とAPI修正

1. **監視・アラート機能の実装**（8時間）
   - CloudWatch Logs実装（2時間）
   - CloudWatch Alarms実装（2時間）
   - SNS Topic実装（2時間）
   - CloudTrail実装（2時間）

2. **Query Lambdaのエラーレスポンス形式修正**（1時間）
   - エラーレスポンス形式を標準化

3. **環境分離の実装**（3時間）
   - 開発環境と本番環境の分離

#### Phase 3（2週間以内）: テストとバリデーション改善

4. **日付バリデーションのエラーハンドリング改善**（2時間）
   - 存在しない日付のバリデーション強化

5. **Branchesカバレッジの改善**（3時間）
   - 74.81% → 75%以上に改善

6. **Property 14（暗号化の有効性）の実装**（2時間）
   - S3とDynamoDBの暗号化検証

#### Phase 4（1ヶ月以内）: 長期的改善

7. **CloudFront OAIの実装**（2時間）
   - ダッシュボードバケットにOAI設定

8. **CORS設定の環境別制限**（1時間）
   - 本番環境でのCORS制限

---

## 実施内容

### 1. tasks.mdの構造確認

- ✅ tasks.mdを読み込み、構造を確認
- ✅ タスク15.14の位置を特定（Phase 2完了確認セクション）
- ✅ 追加すべきタスクの位置を決定（15.14の前に挿入）

### 2. 残タスクの追加

tasks.mdのタスク15.13（CI/CD統合の準備）の後、タスク15.14（Phase 2完了確認）の前に、以下のタスクを追加：

#### 追加タスク一覧

**15.14 監視・アラート機能の実装（Phase 2 Critical）**
- 15.14.1 CloudWatch Logs実装
- 15.14.2 CloudWatch Alarms実装
- 15.14.3 SNS Topic実装
- 15.14.4 CloudTrail実装

**15.15 Query Lambdaのエラーレスポンス形式修正（Phase 2 High）**

**15.16 環境分離の実装（Phase 2 High）**

**15.17 日付バリデーションのエラーハンドリング改善（Phase 3 Medium）**

**15.18 Branchesカバレッジの改善（Phase 3 Medium）**

**15.19 Property 14（暗号化の有効性）の実装（Phase 3 Medium）**

**15.20 CloudFront OAIの実装（Phase 4 Medium）**

**15.21 CORS設定の環境別制限（Phase 4 Medium）**

### 3. タスク番号の調整

既存のタスク15.14以降の番号を繰り下げ：
- 15.14 → 15.22（Phase 2完了確認（最終））

---

## 成果物

- ✅ tasks.md更新（8つの新規タスク追加）
  - 15.14: 監視・アラート機能の実装（4サブタスク）
  - 15.15: Query Lambdaのエラーレスポンス形式修正
  - 15.16: 環境分離の実装
  - 15.17: 日付バリデーションのエラーハンドリング改善
  - 15.18: Branchesカバレッジの改善
  - 15.19: Property 14（暗号化の有効性）の実装
  - 15.20: CloudFront OAIの実装
  - 15.21: CORS設定の環境別制限
- ✅ 既存タスク15.14を15.22に繰り下げ
- ✅ 作業記録作成（work-log-20260208-153540-add-remaining-tasks.md）

### 追加タスクの詳細

| タスク番号 | タスク名 | 優先度 | 工数 | Phase |
|-----------|---------|--------|------|-------|
| 15.14 | 監視・アラート機能の実装 | 🟠 High | 8時間 | Phase 2 |
| 15.14.1 | CloudWatch Logs実装 | - | 2時間 | Phase 2 |
| 15.14.2 | CloudWatch Alarms実装 | - | 2時間 | Phase 2 |
| 15.14.3 | SNS Topic実装 | - | 2時間 | Phase 2 |
| 15.14.4 | CloudTrail実装 | - | 2時間 | Phase 2 |
| 15.15 | Query Lambdaエラーレスポンス修正 | 🟠 High | 1時間 | Phase 2 |
| 15.16 | 環境分離の実装 | 🟠 High | 3時間 | Phase 2 |
| 15.17 | 日付バリデーション改善 | 🟡 Medium | 2時間 | Phase 3 |
| 15.18 | Branchesカバレッジ改善 | 🟡 Medium | 3時間 | Phase 3 |
| 15.19 | Property 14実装 | 🟡 Medium | 2時間 | Phase 3 |
| 15.20 | CloudFront OAI実装 | 🟡 Medium | 2時間 | Phase 4 |
| 15.21 | CORS設定環境別制限 | 🟡 Medium | 1時間 | Phase 4 |

**総追加工数:** 24時間

---

## 次回への申し送り

- ✅ タスク追加完了、Gitコミット＆プッシュを実施
- 整合性レビューサマリーの改善計画と完全に整合
- Phase 2移行前にCritical/High優先度タスク（15.14-15.16）の実施を推奨
- Phase 3移行前にMedium優先度タスク（15.17-15.19）の実施を推奨
- Phase 4でのLong-term改善タスク（15.20-15.21）の計画的実施

---

**作業完了日時:** 2026-02-08 15:42:00
