# 作業記録: Steering Files Critical Review

## タスク概要
全steeringファイルの厳格なレビューと改善提案

## 実施内容

### レビュー観点
1. **簡潔性**: 冗長な説明、重複情報の削除
2. **明確性**: 曖昧な表現、不明確な指示の改善
3. **実用性**: 実装時に即座に使える具体的な情報
4. **一貫性**: ファイル間の矛盾、用語の統一
5. **トークン効率**: 不要な情報の削減

### 発見された問題点

#### 1. README.md
- ❌ **冗長**: 参照関係図が過度に詳細（DAG構造の説明は不要）
- ❌ **重複**: fileMatchパターン対応表とファイル一覧が重複
- ❌ **不要な説明**: トークン最適化の説明は自明
- ✅ **改善案**: 必要最小限の情報のみ残す

#### 2. tdnet-implementation-rules.md
- ❌ **冗長**: 「詳細: xxx.md」が多すぎる
- ❌ **不明確**: 実装原則が抽象的
- ✅ **改善案**: 具体的なルールのみ記載、詳細リンクは関連ドキュメントセクションに集約

#### 3. tdnet-data-collector.md
- ❌ **冗長**: 3ステップの説明が詳しすぎる
- ❌ **重複**: 作業記録の説明が他ファイルと重複
- ✅ **改善案**: チェックリスト形式に簡略化

#### 4. error-handling-patterns.md
- ⚠️ **やや冗長**: コード例が長い
- ✅ **概ね良好**: 実用的な情報が中心
- ✅ **改善案**: コード例を最小限に



## 改善実施

### 1. README.md
**削減**: 約70%のトークン削減

**変更点**:
- ❌ 削除: 冗長なDAG構造の詳細説明
- ❌ 削除: fileMatchパターン対応表の詳細（重複情報）
- ❌ 削除: トークン最適化の自明な説明
- ❌ 削除: 関連リンクセクション（不要）
- ✅ 簡略化: 参照関係を階層別に要約
- ✅ 簡略化: fileMatchパターンを表形式で集約

**改善後の構成**:
```
- フォルダ構造（簡潔なリスト）
- 読み込み制御（最小限の説明）
- fileMatchパターン（表形式、主要パターンのみ）
- 参照関係（階層別要約）
- メンテナンス（必須手順のみ）
```

### 2. tdnet-implementation-rules.md
**削減**: 約50%のトークン削減

**変更点**:
- ❌ 削除: 各原則の「詳細: xxx.md」リンク（冗長）
- ✅ 具体化: 抽象的な原則を具体的なルールに変更
- ✅ 統合: 実装原則を「必須実装ルール」に統合
- ✅ 保持: 関連ドキュメントセクション（参照用）

**改善例**:
```
Before: コスト最適化最優先。詳細: xxx.md
After: AWS無料枠内で運用（Lambda 100万リクエスト/月、DynamoDB 25GB、S3 5GB）
      Lambda: メモリ128-512MB、タイムアウト最小化
```

### 3. tdnet-data-collector.md
**削減**: 約60%のトークン削減

**変更点**:
- ❌ 削除: 3ステップの冗長な説明
- ❌ 削除: 作業記録の詳細説明（他ファイルと重複）
- ❌ 削除: Git commitの詳細説明
- ❌ 削除: 改善記録の詳細説明
- ✅ 簡略化: チェックリスト形式に統一
- ✅ 統合: サブエージェント関連情報を集約

**改善後の構成**:
```
- タスク実行チェックリスト（開始時/実行中/完了時）
- サブエージェント活用（利用可能/必須指示/責任）
```

### 4. error-handling-patterns.md
**削減**: 約40%のトークン削減

**変更点**:
- ❌ 削除: 「詳細実装: xxx.md」の冗長な説明
- ❌ 削除: 「完全な実装: xxx.md を参照」の重複
- ❌ 削除: ベストプラクティスセクション（実装チェックリストと重複）
- ✅ 簡略化: コード例を最小限に
- ✅ 統合: 実装チェックリストにDLQ・Alarmsを追加

**改善後の構成**:
```
- エラー分類（表形式、簡潔な例）
- 再試行戦略（最小限のコード例）
- ログ構造（最小限のコード例）
- 必須実装（チェックリスト、DLQ・Alarms含む）
```

## 成果物

### 更新ファイル
1. `.kiro/steering/README.md` - 70%削減
2. `.kiro/steering/core/tdnet-implementation-rules.md` - 50%削減
3. `.kiro/steering/core/tdnet-data-collector.md` - 60%削減
4. `.kiro/steering/core/error-handling-patterns.md` - 40%削減

### トークン削減効果
- **README.md**: 約2,500トークン → 約750トークン
- **tdnet-implementation-rules.md**: 約600トークン → 約300トークン
- **tdnet-data-collector.md**: 約800トークン → 約320トークン
- **error-handling-patterns.md**: 約700トークン → 約420トークン
- **合計削減**: 約2,610トークン（約58%削減）

## 改善の原則

### 1. 冗長性の排除
- 「詳細: xxx.md」の繰り返しを削除
- 重複情報の統合
- 自明な説明の削除

### 2. 具体性の向上
- 抽象的な原則 → 具体的なルール
- 「適切に」「徹底」→ 数値・具体例

### 3. 構造の最適化
- 長文説明 → チェックリスト
- 複数セクション → 統合
- 表形式の活用

### 4. 実用性の重視
- 実装時に即座に使える情報のみ
- コード例は最小限
- 参照先は関連ドキュメントセクションに集約

## 次回への申し送り

### 残タスク
1. development/配下のsteeringファイルレビュー
2. infrastructure/配下のsteeringファイルレビュー
3. security/, api/, meta/配下のsteeringファイルレビュー

### 推奨アプローチ
- 同じ原則を適用（冗長性排除、具体性向上、構造最適化、実用性重視）
- 特にコード例が多いファイルは要注意
- fileMatchPatternの検証も実施

### 検証項目
- [ ] 全steeringファイルのトークン数測定
- [ ] fileMatchPatternの動作確認
- [ ] 参照関係の整合性確認
- [ ] 実装時の使いやすさ検証
