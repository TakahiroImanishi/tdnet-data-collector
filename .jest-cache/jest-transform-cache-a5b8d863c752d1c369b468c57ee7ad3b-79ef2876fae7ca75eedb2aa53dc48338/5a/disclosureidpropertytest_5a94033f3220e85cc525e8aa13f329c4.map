{"file":"C:\\Users\\ti198\\investment_analysis_opopo\\src\\utils\\__tests__\\disclosure-id.property.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\ti198\\investment_analysis_opopo\\src\\utils\\__tests__\\disclosure-id.property.test.ts"],"sourcesContent":["/**\r\n * 開示ID生成のプロパティベーステスト\r\n *\r\n * Property 4: 開示IDの一意性\r\n * - 異なる入力は異なるIDを生成\r\n * - 同じ入力は同じIDを生成\r\n *\r\n * Requirements: 要件2.3（開示ID生成）\r\n */\r\n\r\nimport * as fc from 'fast-check';\r\nimport { generateDisclosureId } from '../disclosure-id';\r\nimport { ValidationError } from '../../errors';\r\n\r\ndescribe('generateDisclosureId - Property Tests', () => {\r\n  describe('Property 4: 開示IDの一意性', () => {\r\n    it('異なる入力は異なるIDを生成', () => {\r\n      fc.assert(\r\n        fc.property(\r\n          fc.array(\r\n            fc.record({\r\n              disclosedAt: fc\r\n                .date({ min: new Date('2020-01-01'), max: new Date('2030-12-31') })\r\n                .map((d) => d.toISOString()),\r\n              companyCode: fc.integer({ min: 1000, max: 9999 }).map(String),\r\n              sequence: fc.integer({ min: 1, max: 999 }),\r\n            }),\r\n            { minLength: 2, maxLength: 100 }\r\n          ),\r\n          (inputs) => {\r\n            const ids = inputs.map((input) =>\r\n              generateDisclosureId(input.disclosedAt, input.companyCode, input.sequence)\r\n            );\r\n\r\n            // すべてのIDが一意であることを確認\r\n            const uniqueIds = new Set(ids);\r\n            expect(uniqueIds.size).toBe(ids.length);\r\n          }\r\n        ),\r\n        { numRuns: 100 }\r\n      );\r\n    });\r\n\r\n    it('同じ入力は同じIDを生成（冪等性）', () => {\r\n      fc.assert(\r\n        fc.property(\r\n          fc.record({\r\n            disclosedAt: fc\r\n              .date({ min: new Date('2020-01-01'), max: new Date('2030-12-31') })\r\n              .map((d) => d.toISOString()),\r\n            companyCode: fc.integer({ min: 1000, max: 9999 }).map(String),\r\n            sequence: fc.integer({ min: 1, max: 999 }),\r\n          }),\r\n          (input) => {\r\n            const id1 = generateDisclosureId(input.disclosedAt, input.companyCode, input.sequence);\r\n            const id2 = generateDisclosureId(input.disclosedAt, input.companyCode, input.sequence);\r\n\r\n            expect(id1).toBe(id2);\r\n          }\r\n        ),\r\n        { numRuns: 100 }\r\n      );\r\n    });\r\n  });\r\n\r\n  describe('Unit Tests', () => {\r\n    it('正しいフォーマットでIDを生成', () => {\r\n      const disclosedAt = '2024-01-15T10:30:00Z';\r\n      const companyCode = '1234';\r\n      const sequence = 1;\r\n\r\n      const id = generateDisclosureId(disclosedAt, companyCode, sequence);\r\n\r\n      expect(id).toBe('20240115_1234_001');\r\n    });\r\n\r\n    it('連番を3桁にゼロパディング', () => {\r\n      const disclosedAt = '2024-01-15T10:30:00Z';\r\n      const companyCode = '1234';\r\n\r\n      expect(generateDisclosureId(disclosedAt, companyCode, 1)).toBe('20240115_1234_001');\r\n      expect(generateDisclosureId(disclosedAt, companyCode, 10)).toBe('20240115_1234_010');\r\n      expect(generateDisclosureId(disclosedAt, companyCode, 100)).toBe('20240115_1234_100');\r\n      expect(generateDisclosureId(disclosedAt, companyCode, 999)).toBe('20240115_1234_999');\r\n    });\r\n\r\n    it('異なる日付で異なるIDを生成', () => {\r\n      const companyCode = '1234';\r\n      const sequence = 1;\r\n\r\n      const id1 = generateDisclosureId('2024-01-15T10:30:00Z', companyCode, sequence);\r\n      const id2 = generateDisclosureId('2024-01-16T10:30:00Z', companyCode, sequence);\r\n\r\n      expect(id1).not.toBe(id2);\r\n      expect(id1).toBe('20240115_1234_001');\r\n      expect(id2).toBe('20240116_1234_001');\r\n    });\r\n\r\n    it('異なる企業コードで異なるIDを生成', () => {\r\n      const disclosedAt = '2024-01-15T10:30:00Z';\r\n      const sequence = 1;\r\n\r\n      const id1 = generateDisclosureId(disclosedAt, '1234', sequence);\r\n      const id2 = generateDisclosureId(disclosedAt, '5678', sequence);\r\n\r\n      expect(id1).not.toBe(id2);\r\n      expect(id1).toBe('20240115_1234_001');\r\n      expect(id2).toBe('20240115_5678_001');\r\n    });\r\n\r\n    it('異なる連番で異なるIDを生成', () => {\r\n      const disclosedAt = '2024-01-15T10:30:00Z';\r\n      const companyCode = '1234';\r\n\r\n      const id1 = generateDisclosureId(disclosedAt, companyCode, 1);\r\n      const id2 = generateDisclosureId(disclosedAt, companyCode, 2);\r\n\r\n      expect(id1).not.toBe(id2);\r\n      expect(id1).toBe('20240115_1234_001');\r\n      expect(id2).toBe('20240115_1234_002');\r\n    });\r\n  });\r\n\r\n  describe('Validation Tests', () => {\r\n    it('不正な日付フォーマットでエラー', () => {\r\n      expect(() => generateDisclosureId('invalid', '1234', 1)).toThrow(ValidationError);\r\n      expect(() => generateDisclosureId('2024/01/15', '1234', 1)).toThrow(ValidationError);\r\n      expect(() => generateDisclosureId('', '1234', 1)).toThrow(ValidationError);\r\n    });\r\n\r\n    it('不正な企業コードでエラー', () => {\r\n      const disclosedAt = '2024-01-15T10:30:00Z';\r\n\r\n      expect(() => generateDisclosureId(disclosedAt, '123', 1)).toThrow(ValidationError); // 3桁\r\n      expect(() => generateDisclosureId(disclosedAt, '12345', 1)).toThrow(ValidationError); // 5桁\r\n      expect(() => generateDisclosureId(disclosedAt, 'ABCD', 1)).toThrow(ValidationError); // 非数字\r\n      expect(() => generateDisclosureId(disclosedAt, '', 1)).toThrow(ValidationError); // 空文字\r\n    });\r\n\r\n    it('不正な連番でエラー', () => {\r\n      const disclosedAt = '2024-01-15T10:30:00Z';\r\n      const companyCode = '1234';\r\n\r\n      expect(() => generateDisclosureId(disclosedAt, companyCode, -1)).toThrow(ValidationError); // 負数\r\n      expect(() => generateDisclosureId(disclosedAt, companyCode, 1000)).toThrow(ValidationError); // 1000以上\r\n    });\r\n  });\r\n\r\n  describe('Edge Cases', () => {\r\n    it('月またぎの日付を正しく処理', () => {\r\n      // UTC: 2024-01-31 23:59:59 → JST: 2024-02-01 08:59:59 (翌日)\r\n      const id1 = generateDisclosureId('2024-01-31T23:59:59Z', '1234', 1);\r\n      // UTC: 2024-02-01 00:00:00 → JST: 2024-02-01 09:00:00 (同日)\r\n      const id2 = generateDisclosureId('2024-02-01T00:00:00Z', '1234', 1);\r\n\r\n      // JST基準で日付を抽出するため、両方とも2024-02-01になる\r\n      expect(id1).toBe('20240201_1234_001');\r\n      expect(id2).toBe('20240201_1234_001');\r\n    });\r\n\r\n    it('年またぎの日付を正しく処理', () => {\r\n      // UTC: 2023-12-31 23:59:59 → JST: 2024-01-01 08:59:59 (翌年)\r\n      const id1 = generateDisclosureId('2023-12-31T23:59:59Z', '1234', 1);\r\n      // UTC: 2024-01-01 00:00:00 → JST: 2024-01-01 09:00:00 (同日)\r\n      const id2 = generateDisclosureId('2024-01-01T00:00:00Z', '1234', 1);\r\n\r\n      // JST基準で日付を抽出するため、両方とも2024-01-01になる\r\n      expect(id1).toBe('20240101_1234_001');\r\n      expect(id2).toBe('20240101_1234_001');\r\n    });\r\n\r\n    it('うるう年の日付を正しく処理', () => {\r\n      const id = generateDisclosureId('2024-02-29T12:00:00Z', '1234', 1);\r\n      expect(id).toBe('20240229_1234_001');\r\n    });\r\n\r\n    it('タイムゾーン付き日付を正しく処理', () => {\r\n      const id1 = generateDisclosureId('2024-01-15T10:30:00Z', '1234', 1);\r\n      const id2 = generateDisclosureId('2024-01-15T10:30:00+09:00', '1234', 1);\r\n\r\n      // JST基準で日付を抽出\r\n      // UTC 2024-01-15T10:30:00Z → JST 2024-01-15T19:30:00+09:00 → 20240115\r\n      // JST 2024-01-15T10:30:00+09:00 → UTC 2024-01-15T01:30:00Z → JST 2024-01-15T10:30:00+09:00 → 20240115\r\n      expect(id1).toBe('20240115_1234_001');\r\n      expect(id2).toBe('20240115_1234_001');\r\n    });\r\n\r\n    it('月またぎのエッジケース（UTC深夜→JST翌日）を正しく処理', () => {\r\n      // UTC: 2024-01-31T15:30:00Z → JST: 2024-02-01T00:30:00+09:00\r\n      // UTCでは1月31日だが、JSTでは2月1日になる\r\n      const id = generateDisclosureId('2024-01-31T15:30:00Z', '1234', 1);\r\n      expect(id).toBe('20240201_1234_001'); // JST基準で2月1日\r\n    });\r\n\r\n    it('年またぎのエッジケース（UTC深夜→JST翌年）を正しく処理', () => {\r\n      // UTC: 2023-12-31T15:30:00Z → JST: 2024-01-01T00:30:00+09:00\r\n      // UTCでは2023年12月31日だが、JSTでは2024年1月1日になる\r\n      const id = generateDisclosureId('2023-12-31T15:30:00Z', '1234', 1);\r\n      expect(id).toBe('20240101_1234_001'); // JST基準で2024年1月1日\r\n    });\r\n  });\r\n});\r\n"],"version":3}