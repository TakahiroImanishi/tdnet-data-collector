{"file":"C:\\Users\\ti198\\investment_analysis_opopo\\src\\models\\__tests__\\disclosure.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\ti198\\investment_analysis_opopo\\src\\models\\__tests__\\disclosure.test.ts"],"sourcesContent":["/**\r\n * disclosure.test.ts\r\n *\r\n * Disclosureモデルと変換関数のテスト\r\n *\r\n * Steering準拠チェック:\r\n * - 必須フィールドの検証\r\n * - disclosed_atフォーマット検証\r\n * - date_partition自動生成\r\n * - ValidationErrorのスロー\r\n * - 構造化ログの記録\r\n */\r\n\r\nimport {\r\n  validateDisclosure,\r\n  toDynamoDBItem,\r\n  fromDynamoDBItem,\r\n  createDisclosure,\r\n  generateDisclosureId,\r\n} from '../disclosure';\r\nimport { Disclosure, DynamoDBItem } from '../../types';\r\nimport { ValidationError } from '../../errors';\r\n\r\ndescribe('validateDisclosure', () => {\r\n  const validDisclosure: Disclosure = {\r\n    disclosure_id: '20240115_1234_001',\r\n    company_code: '1234',\r\n    company_name: 'テスト株式会社',\r\n    disclosure_type: '決算短信',\r\n    title: '2024年3月期 第3四半期決算短信',\r\n    disclosed_at: '2024-01-15T10:30:00Z',\r\n    pdf_url: 'https://www.release.tdnet.info/inbs/example.pdf',\r\n    s3_key: 'pdfs/2024/01/20240115_1234_001.pdf',\r\n    collected_at: '2024-01-15T10:35:00Z',\r\n    date_partition: '2024-01',\r\n  };\r\n\r\n  describe('正常系: 有効なDisclosure', () => {\r\n    it('すべての必須フィールドが存在する場合は成功', () => {\r\n      expect(() => validateDisclosure(validDisclosure)).not.toThrow();\r\n    });\r\n  });\r\n\r\n  describe('異常系: 必須フィールドの欠落', () => {\r\n    it('disclosure_idが欠落している場合はValidationErrorをスロー', () => {\r\n      const invalid = { ...validDisclosure, disclosure_id: undefined };\r\n      expect(() => validateDisclosure(invalid as any)).toThrow(ValidationError);\r\n      expect(() => validateDisclosure(invalid as any)).toThrow(/Missing required fields/);\r\n    });\r\n\r\n    it('company_codeが欠落している場合はValidationErrorをスロー', () => {\r\n      const invalid = { ...validDisclosure, company_code: undefined };\r\n      expect(() => validateDisclosure(invalid as any)).toThrow(ValidationError);\r\n    });\r\n\r\n    it('disclosed_atが欠落している場合はValidationErrorをスロー', () => {\r\n      const invalid = { ...validDisclosure, disclosed_at: undefined };\r\n      expect(() => validateDisclosure(invalid as any)).toThrow(ValidationError);\r\n    });\r\n\r\n    it('date_partitionが欠落している場合はValidationErrorをスロー', () => {\r\n      const invalid = { ...validDisclosure, date_partition: undefined };\r\n      expect(() => validateDisclosure(invalid as any)).toThrow(ValidationError);\r\n    });\r\n\r\n    it('複数のフィールドが欠落している場合はすべてのフィールド名を含むエラーをスロー', () => {\r\n      const invalid = {\r\n        ...validDisclosure,\r\n        disclosure_id: undefined,\r\n        company_code: undefined,\r\n      };\r\n      expect(() => validateDisclosure(invalid as any)).toThrow(/disclosure_id/);\r\n      expect(() => validateDisclosure(invalid as any)).toThrow(/company_code/);\r\n    });\r\n  });\r\n\r\n  describe('異常系: フォーマット検証', () => {\r\n    it('disclosed_atが不正なフォーマットの場合はValidationErrorをスロー', () => {\r\n      const invalid = { ...validDisclosure, disclosed_at: '2024-01-15' };\r\n      expect(() => validateDisclosure(invalid)).toThrow(ValidationError);\r\n      expect(() => validateDisclosure(invalid)).toThrow(/Invalid disclosed_at format/);\r\n    });\r\n\r\n    it('collected_atが不正なフォーマットの場合はValidationErrorをスロー', () => {\r\n      const invalid = { ...validDisclosure, collected_at: '2024/01/15 10:35:00' };\r\n      expect(() => validateDisclosure(invalid)).toThrow(ValidationError);\r\n    });\r\n\r\n    it('company_codeが4桁の数字でない場合はValidationErrorをスロー', () => {\r\n      const invalid1 = { ...validDisclosure, company_code: '123' }; // 3桁\r\n      expect(() => validateDisclosure(invalid1)).toThrow(ValidationError);\r\n      expect(() => validateDisclosure(invalid1)).toThrow(/Invalid company_code format/);\r\n\r\n      const invalid2 = { ...validDisclosure, company_code: '12345' }; // 5桁\r\n      expect(() => validateDisclosure(invalid2)).toThrow(ValidationError);\r\n\r\n      const invalid3 = { ...validDisclosure, company_code: 'ABCD' }; // 英字\r\n      expect(() => validateDisclosure(invalid3)).toThrow(ValidationError);\r\n    });\r\n\r\n    it('date_partitionがYYYY-MM形式でない場合はValidationErrorをスロー', () => {\r\n      const invalid1 = { ...validDisclosure, date_partition: '2024-1' }; // 月が1桁\r\n      expect(() => validateDisclosure(invalid1)).toThrow(ValidationError);\r\n      expect(() => validateDisclosure(invalid1)).toThrow(/Invalid date_partition format/);\r\n\r\n      const invalid2 = { ...validDisclosure, date_partition: '202401' }; // ハイフンなし\r\n      expect(() => validateDisclosure(invalid2)).toThrow(ValidationError);\r\n\r\n      const invalid3 = { ...validDisclosure, date_partition: '2024/01' }; // スラッシュ\r\n      expect(() => validateDisclosure(invalid3)).toThrow(ValidationError);\r\n    });\r\n  });\r\n});\r\n\r\ndescribe('toDynamoDBItem', () => {\r\n  const validDisclosure: Disclosure = {\r\n    disclosure_id: '20240115_1234_001',\r\n    company_code: '1234',\r\n    company_name: 'テスト株式会社',\r\n    disclosure_type: '決算短信',\r\n    title: '2024年3月期 第3四半期決算短信',\r\n    disclosed_at: '2024-01-15T10:30:00Z',\r\n    pdf_url: 'https://www.release.tdnet.info/inbs/example.pdf',\r\n    s3_key: 'pdfs/2024/01/20240115_1234_001.pdf',\r\n    collected_at: '2024-01-15T10:35:00Z',\r\n    date_partition: '2024-01',\r\n  };\r\n\r\n  describe('正常系: DynamoDBアイテムへの変換', () => {\r\n    it('有効なDisclosureをDynamoDBアイテムに変換', () => {\r\n      const item = toDynamoDBItem(validDisclosure);\r\n\r\n      expect(item.disclosure_id.S).toBe('20240115_1234_001');\r\n      expect(item.company_code.S).toBe('1234');\r\n      expect(item.company_name.S).toBe('テスト株式会社');\r\n      expect(item.disclosure_type.S).toBe('決算短信');\r\n      expect(item.title.S).toBe('2024年3月期 第3四半期決算短信');\r\n      expect(item.disclosed_at.S).toBe('2024-01-15T10:30:00Z');\r\n      expect(item.pdf_url.S).toBe('https://www.release.tdnet.info/inbs/example.pdf');\r\n      expect(item.s3_key.S).toBe('pdfs/2024/01/20240115_1234_001.pdf');\r\n      expect(item.collected_at.S).toBe('2024-01-15T10:35:00Z');\r\n      expect(item.date_partition.S).toBe('2024-01');\r\n    });\r\n  });\r\n\r\n  describe('異常系: バリデーションエラー', () => {\r\n    it('不正なDisclosureの場合はValidationErrorをスロー', () => {\r\n      const invalid = { ...validDisclosure, company_code: '123' };\r\n      expect(() => toDynamoDBItem(invalid)).toThrow(ValidationError);\r\n    });\r\n  });\r\n});\r\n\r\ndescribe('fromDynamoDBItem', () => {\r\n  const validItem: DynamoDBItem = {\r\n    disclosure_id: { S: '20240115_1234_001' },\r\n    company_code: { S: '1234' },\r\n    company_name: { S: 'テスト株式会社' },\r\n    disclosure_type: { S: '決算短信' },\r\n    title: { S: '2024年3月期 第3四半期決算短信' },\r\n    disclosed_at: { S: '2024-01-15T10:30:00Z' },\r\n    pdf_url: { S: 'https://www.release.tdnet.info/inbs/example.pdf' },\r\n    s3_key: { S: 'pdfs/2024/01/20240115_1234_001.pdf' },\r\n    collected_at: { S: '2024-01-15T10:35:00Z' },\r\n    date_partition: { S: '2024-01' },\r\n  };\r\n\r\n  describe('正常系: DynamoDBアイテムからDisclosureへの変換', () => {\r\n    it('有効なDynamoDBアイテムをDisclosureに変換', () => {\r\n      const disclosure = fromDynamoDBItem(validItem);\r\n\r\n      expect(disclosure.disclosure_id).toBe('20240115_1234_001');\r\n      expect(disclosure.company_code).toBe('1234');\r\n      expect(disclosure.company_name).toBe('テスト株式会社');\r\n      expect(disclosure.disclosure_type).toBe('決算短信');\r\n      expect(disclosure.title).toBe('2024年3月期 第3四半期決算短信');\r\n      expect(disclosure.disclosed_at).toBe('2024-01-15T10:30:00Z');\r\n      expect(disclosure.pdf_url).toBe('https://www.release.tdnet.info/inbs/example.pdf');\r\n      expect(disclosure.s3_key).toBe('pdfs/2024/01/20240115_1234_001.pdf');\r\n      expect(disclosure.collected_at).toBe('2024-01-15T10:35:00Z');\r\n      expect(disclosure.date_partition).toBe('2024-01');\r\n    });\r\n  });\r\n\r\n  describe('異常系: 必須フィールドの欠落', () => {\r\n    it('disclosure_idが欠落している場合はValidationErrorをスロー', () => {\r\n      const invalid = { ...validItem };\r\n      delete invalid.disclosure_id;\r\n      expect(() => fromDynamoDBItem(invalid)).toThrow(ValidationError);\r\n      expect(() => fromDynamoDBItem(invalid)).toThrow(/Missing required fields/);\r\n    });\r\n\r\n    it('date_partitionが欠落している場合はValidationErrorをスロー', () => {\r\n      const invalid = { ...validItem };\r\n      delete invalid.date_partition;\r\n      expect(() => fromDynamoDBItem(invalid)).toThrow(ValidationError);\r\n    });\r\n  });\r\n\r\n  describe('エッジケース: nullish coalescing演算子のテスト', () => {\r\n    it('DynamoDBアイテムのフィールドがundefinedの場合は空文字列にフォールバック', () => {\r\n      // フィールドが存在するが、Sプロパティがundefinedの場合\r\n      const itemWithUndefined: DynamoDBItem = {\r\n        disclosure_id: { S: '20240115_1234_001' },\r\n        company_code: { S: '1234' },\r\n        company_name: { S: 'テスト株式会社' },\r\n        disclosure_type: { S: '決算短信' },\r\n        title: { S: '2024年3月期 第3四半期決算短信' },\r\n        disclosed_at: { S: '2024-01-15T10:30:00Z' },\r\n        pdf_url: { S: undefined as any }, // Sがundefined\r\n        s3_key: { S: 'pdfs/2024/01/20240115_1234_001.pdf' },\r\n        collected_at: { S: '2024-01-15T10:35:00Z' },\r\n        date_partition: { S: '2024-01' },\r\n      };\r\n\r\n      // バリデーションエラーになるはずだが、nullish coalescingで空文字列になることを確認\r\n      expect(() => fromDynamoDBItem(itemWithUndefined)).toThrow(ValidationError);\r\n    });\r\n\r\n    it('すべてのフィールドのSプロパティがundefinedの場合は空文字列にフォールバック', () => {\r\n      const itemAllUndefined: DynamoDBItem = {\r\n        disclosure_id: { S: undefined as any },\r\n        company_code: { S: undefined as any },\r\n        company_name: { S: undefined as any },\r\n        disclosure_type: { S: undefined as any },\r\n        title: { S: undefined as any },\r\n        disclosed_at: { S: undefined as any },\r\n        pdf_url: { S: undefined as any },\r\n        s3_key: { S: undefined as any },\r\n        collected_at: { S: undefined as any },\r\n        date_partition: { S: undefined as any },\r\n      };\r\n\r\n      // すべて空文字列になり、バリデーションエラーになることを確認\r\n      expect(() => fromDynamoDBItem(itemAllUndefined)).toThrow(ValidationError);\r\n    });\r\n\r\n    it('一部のフィールドのSプロパティがundefinedの場合', () => {\r\n      const itemPartialUndefined: DynamoDBItem = {\r\n        disclosure_id: { S: '20240115_1234_001' },\r\n        company_code: { S: undefined as any },\r\n        company_name: { S: 'テスト株式会社' },\r\n        disclosure_type: { S: undefined as any },\r\n        title: { S: '2024年3月期 第3四半期決算短信' },\r\n        disclosed_at: { S: '2024-01-15T10:30:00Z' },\r\n        pdf_url: { S: 'https://www.release.tdnet.info/inbs/example.pdf' },\r\n        s3_key: { S: undefined as any },\r\n        collected_at: { S: '2024-01-15T10:35:00Z' },\r\n        date_partition: { S: '2024-01' },\r\n      };\r\n\r\n      // 空文字列になったフィールドがあり、バリデーションエラーになることを確認\r\n      expect(() => fromDynamoDBItem(itemPartialUndefined)).toThrow(ValidationError);\r\n    });\r\n\r\n    it('Sプロパティがnullの場合も空文字列にフォールバック', () => {\r\n      const itemWithNull: DynamoDBItem = {\r\n        disclosure_id: { S: '20240115_1234_001' },\r\n        company_code: { S: '1234' },\r\n        company_name: { S: null as any },\r\n        disclosure_type: { S: '決算短信' },\r\n        title: { S: '2024年3月期 第3四半期決算短信' },\r\n        disclosed_at: { S: '2024-01-15T10:30:00Z' },\r\n        pdf_url: { S: 'https://www.release.tdnet.info/inbs/example.pdf' },\r\n        s3_key: { S: 'pdfs/2024/01/20240115_1234_001.pdf' },\r\n        collected_at: { S: '2024-01-15T10:35:00Z' },\r\n        date_partition: { S: '2024-01' },\r\n      };\r\n\r\n      // nullも空文字列になり、バリデーションエラーになることを確認\r\n      expect(() => fromDynamoDBItem(itemWithNull)).toThrow(ValidationError);\r\n    });\r\n\r\n    it('複数のフィールドがnullまたはundefinedの場合', () => {\r\n      const itemMixed: DynamoDBItem = {\r\n        disclosure_id: { S: '20240115_1234_001' },\r\n        company_code: { S: null as any },\r\n        company_name: { S: undefined as any },\r\n        disclosure_type: { S: '決算短信' },\r\n        title: { S: null as any },\r\n        disclosed_at: { S: '2024-01-15T10:30:00Z' },\r\n        pdf_url: { S: undefined as any },\r\n        s3_key: { S: 'pdfs/2024/01/20240115_1234_001.pdf' },\r\n        collected_at: { S: null as any },\r\n        date_partition: { S: '2024-01' },\r\n      };\r\n\r\n      // すべて空文字列になり、バリデーションエラーになることを確認\r\n      expect(() => fromDynamoDBItem(itemMixed)).toThrow(ValidationError);\r\n    });\r\n  });\r\n});\r\n\r\ndescribe('createDisclosure', () => {\r\n  const baseParams = {\r\n    disclosure_id: '20240115_1234_001',\r\n    company_code: '1234',\r\n    company_name: 'テスト株式会社',\r\n    disclosure_type: '決算短信',\r\n    title: '2024年3月期 第3四半期決算短信',\r\n    disclosed_at: '2024-01-15T10:30:00Z',\r\n    pdf_url: 'https://www.release.tdnet.info/inbs/example.pdf',\r\n    s3_key: 'pdfs/2024/01/20240115_1234_001.pdf',\r\n  };\r\n\r\n  describe('正常系: date_partitionの自動生成', () => {\r\n    it('date_partitionが指定されていない場合は自動生成', () => {\r\n      const disclosure = createDisclosure(baseParams);\r\n\r\n      expect(disclosure.date_partition).toBe('2024-01');\r\n      expect(disclosure.collected_at).toBeDefined();\r\n      expect(disclosure.collected_at).toMatch(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$/);\r\n    });\r\n\r\n    it('date_partitionが指定されている場合はそれを使用', () => {\r\n      const disclosure = createDisclosure({\r\n        ...baseParams,\r\n        date_partition: '2024-02',\r\n      });\r\n\r\n      expect(disclosure.date_partition).toBe('2024-02');\r\n    });\r\n\r\n    it('collected_atが指定されている場合はそれを使用', () => {\r\n      const disclosure = createDisclosure({\r\n        ...baseParams,\r\n        collected_at: '2024-01-15T10:35:00Z',\r\n      });\r\n\r\n      expect(disclosure.collected_at).toBe('2024-01-15T10:35:00Z');\r\n    });\r\n  });\r\n\r\n  describe('正常系: JST基準でdate_partitionを生成', () => {\r\n    it('UTC: 2024-01-31T15:30:00Z → JST: 2024-02-01 → date_partition: \"2024-02\"', () => {\r\n      const disclosure = createDisclosure({\r\n        ...baseParams,\r\n        disclosed_at: '2024-01-31T15:30:00Z',\r\n      });\r\n\r\n      expect(disclosure.date_partition).toBe('2024-02');\r\n    });\r\n\r\n    it('UTC: 2023-12-31T15:30:00Z → JST: 2024-01-01 → date_partition: \"2024-01\"', () => {\r\n      const disclosure = createDisclosure({\r\n        ...baseParams,\r\n        disclosed_at: '2023-12-31T15:30:00Z',\r\n      });\r\n\r\n      expect(disclosure.date_partition).toBe('2024-01');\r\n    });\r\n  });\r\n\r\n  describe('異常系: バリデーションエラー', () => {\r\n    it('不正なdisclosed_atの場合はValidationErrorをスロー', () => {\r\n      expect(() =>\r\n        createDisclosure({\r\n          ...baseParams,\r\n          disclosed_at: '2024-01-15',\r\n        })\r\n      ).toThrow(ValidationError);\r\n    });\r\n\r\n    it('不正なcompany_codeの場合はValidationErrorをスロー', () => {\r\n      expect(() =>\r\n        createDisclosure({\r\n          ...baseParams,\r\n          company_code: '123',\r\n        })\r\n      ).toThrow(ValidationError);\r\n    });\r\n  });\r\n});\r\n\r\ndescribe('generateDisclosureId', () => {\r\n  describe('正常系: 開示IDの生成', () => {\r\n    it('JST基準で日付を抽出してIDを生成', () => {\r\n      const id = generateDisclosureId('2024-01-15T10:30:00Z', '1234', 1);\r\n      expect(id).toBe('20240115_1234_001');\r\n    });\r\n\r\n    it('連番を3桁にゼロパディング', () => {\r\n      const id1 = generateDisclosureId('2024-01-15T10:30:00Z', '1234', 0);\r\n      expect(id1).toBe('20240115_1234_000');\r\n\r\n      const id2 = generateDisclosureId('2024-01-15T10:30:00Z', '1234', 99);\r\n      expect(id2).toBe('20240115_1234_099');\r\n\r\n      const id3 = generateDisclosureId('2024-01-15T10:30:00Z', '1234', 999);\r\n      expect(id3).toBe('20240115_1234_999');\r\n    });\r\n  });\r\n\r\n  describe('エッジケース: 月またぎ（UTC→JST変換）', () => {\r\n    it('UTC: 2024-01-31T15:30:00Z → JST: 2024-02-01 → ID: 20240201_xxxx_xxx', () => {\r\n      const id = generateDisclosureId('2024-01-31T15:30:00Z', '1234', 1);\r\n      expect(id).toBe('20240201_1234_001');\r\n    });\r\n\r\n    it('UTC: 2023-12-31T15:30:00Z → JST: 2024-01-01 → ID: 20240101_xxxx_xxx', () => {\r\n      const id = generateDisclosureId('2023-12-31T15:30:00Z', '1234', 1);\r\n      expect(id).toBe('20240101_1234_001');\r\n    });\r\n  });\r\n\r\n  describe('異常系: バリデーションエラー', () => {\r\n    it('不正なdisclosed_atの場合はValidationErrorをスロー', () => {\r\n      expect(() => generateDisclosureId('2024-01-15', '1234', 1)).toThrow(ValidationError);\r\n      expect(() => generateDisclosureId('invalid-date', '1234', 1)).toThrow(ValidationError);\r\n    });\r\n\r\n    it('不正なcompany_codeの場合はValidationErrorをスロー', () => {\r\n      expect(() => generateDisclosureId('2024-01-15T10:30:00Z', '123', 1)).toThrow(\r\n        ValidationError\r\n      );\r\n      expect(() => generateDisclosureId('2024-01-15T10:30:00Z', '12345', 1)).toThrow(\r\n        ValidationError\r\n      );\r\n      expect(() => generateDisclosureId('2024-01-15T10:30:00Z', 'ABCD', 1)).toThrow(\r\n        ValidationError\r\n      );\r\n    });\r\n\r\n    it('不正なsequenceの場合はValidationErrorをスロー', () => {\r\n      expect(() => generateDisclosureId('2024-01-15T10:30:00Z', '1234', -1)).toThrow(\r\n        ValidationError\r\n      );\r\n      expect(() => generateDisclosureId('2024-01-15T10:30:00Z', '1234', 1.5)).toThrow(\r\n        ValidationError\r\n      );\r\n      expect(() => generateDisclosureId('2024-01-15T10:30:00Z', '1234', NaN)).toThrow(\r\n        ValidationError\r\n      );\r\n    });\r\n  });\r\n});\r\n"],"version":3}