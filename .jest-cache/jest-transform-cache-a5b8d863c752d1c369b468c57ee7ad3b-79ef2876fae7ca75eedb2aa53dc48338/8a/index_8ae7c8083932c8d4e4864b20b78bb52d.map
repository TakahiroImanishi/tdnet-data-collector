{"version":3,"names":["cov_2pcdwzwj5t","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","s","f","b","inputSourceMap","file","mappings","names","sources","sourcesContent","version","_coverageSchema","coverage","actualCoverage","TDnetError","Error","cause","constructor","message","captureStackTrace","exports","RetryableError","ValidationError","details","NotFoundError","resourceId","RateLimitError","retryAfter","AuthenticationError","ConfigurationError","configKey"],"sources":["C:\\Users\\ti198\\investment_analysis_opopo\\src\\errors\\index.ts"],"sourcesContent":["/**\n * カスタムエラークラス\n *\n * TDnet Data Collectorで使用するカスタムエラークラスを定義します。\n * エラーの種類に応じて適切なエラークラスを使用することで、\n * エラーハンドリングを統一し、再試行ロジックを適切に適用できます。\n *\n * Requirements: 要件6.1, 6.2（エラーハンドリング）\n */\n\n/**\n * 基底エラークラス\n */\nexport class TDnetError extends Error {\n  constructor(\n    message: string,\n    public readonly cause?: Error\n  ) {\n    super(message);\n    this.name = this.constructor.name;\n    Error.captureStackTrace(this, this.constructor);\n  }\n}\n\n/**\n * 再試行可能なエラー\n *\n * 一時的な問題である可能性が高いため、再試行すべきエラー：\n * - ネットワークエラー（ECONNRESET, ETIMEDOUT, ENOTFOUND）\n * - HTTPタイムアウト\n * - 5xxエラー（500 Internal Server Error, 503 Service Unavailable）\n * - AWS一時的エラー（ThrottlingException, ServiceUnavailable）\n * - レート制限（429 Too Many Requests）\n */\nexport class RetryableError extends TDnetError {\n  constructor(message: string, cause?: Error) {\n    super(message, cause);\n  }\n}\n\n/**\n * バリデーションエラー\n *\n * 入力データが不正な場合のエラー。再試行しても解決しないため、\n * 即座に失敗として扱います。\n *\n * 例：\n * - 不正なフォーマット（ISO8601以外）\n * - 存在しない日付（2024-02-30）\n * - 範囲外の日付（1970年以前、現在+1日以降）\n * - 必須フィールドの欠落\n */\nexport class ValidationError extends TDnetError {\n  constructor(\n    message: string,\n    public readonly details?: Record<string, unknown>\n  ) {\n    super(message);\n  }\n}\n\n/**\n * リソース不存在エラー\n *\n * 指定されたリソースが存在しない場合のエラー。\n * 再試行しても解決しないため、即座に失敗として扱います。\n *\n * 例：\n * - 404 Not Found\n * - DynamoDBアイテムが存在しない\n * - S3オブジェクトが存在しない\n */\nexport class NotFoundError extends TDnetError {\n  constructor(\n    message: string,\n    public readonly resourceId?: string\n  ) {\n    super(message);\n  }\n}\n\n/**\n * レート制限エラー\n *\n * レート制限に達した場合のエラー。\n * 再試行可能ですが、適切な遅延時間を設けてから再試行する必要があります。\n *\n * 例：\n * - 429 Too Many Requests\n * - TDnetサーバーからのレート制限\n */\nexport class RateLimitError extends RetryableError {\n  constructor(\n    message: string,\n    public readonly retryAfter?: number, // 秒単位\n    cause?: Error\n  ) {\n    super(message, cause);\n  }\n}\n\n/**\n * 認証エラー\n *\n * 認証に失敗した場合のエラー。\n * 再試行しても解決しないため、即座に失敗として扱います。\n *\n * 例：\n * - 401 Unauthorized\n * - 403 Forbidden\n * - 無効なAPIキー\n */\nexport class AuthenticationError extends TDnetError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\n/**\n * 設定エラー\n *\n * 設定が不正な場合のエラー。\n * 再試行しても解決しないため、即座に失敗として扱います。\n *\n * 例：\n * - 環境変数未設定\n * - 不正な設定値\n */\nexport class ConfigurationError extends TDnetError {\n  constructor(\n    message: string,\n    public readonly configKey?: string\n  ) {\n    super(message);\n  }\n}\n"],"mappings":"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","ignoreList":[]}