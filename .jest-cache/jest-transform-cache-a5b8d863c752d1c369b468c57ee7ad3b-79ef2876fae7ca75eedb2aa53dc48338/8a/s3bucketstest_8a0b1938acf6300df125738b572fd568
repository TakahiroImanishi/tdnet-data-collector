be26179b0b3004fcb1bff26b6f5775e2
"use strict";
/**
 * S3 Bucket Structure Verification Test
 *
 * Task 4.2: S3バケット構造の検証テスト
 * Requirements: 要件3.5, 12.4, 13.3（ファイルストレージ、コスト最適化、暗号化）
 *
 * このテストは、CDKで定義されたS3バケットが設計通りに構成されていることを検証します。
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const cdk = __importStar(require("aws-cdk-lib"));
const assertions_1 = require("aws-cdk-lib/assertions");
const tdnet_data_collector_stack_1 = require("../lib/tdnet-data-collector-stack");
describe('S3 Buckets', () => {
    let template;
    const testAccountId = '123456789012';
    beforeAll(() => {
        const app = new cdk.App();
        const stack = new tdnet_data_collector_stack_1.TdnetDataCollectorStack(app, 'TestStack', {
            env: { account: testAccountId, region: 'ap-northeast-1' },
        });
        template = assertions_1.Template.fromStack(stack);
    });
    describe('PDFs Bucket', () => {
        it('should be created with correct name', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-pdfs-dev-', { Ref: 'AWS::AccountId' }]] },
            });
        });
        it('should have encryption enabled', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-pdfs-dev-', { Ref: 'AWS::AccountId' }]] },
                BucketEncryption: {
                    ServerSideEncryptionConfiguration: [
                        {
                            ServerSideEncryptionByDefault: {
                                SSEAlgorithm: 'AES256', // S3マネージド暗号化
                            },
                        },
                    ],
                },
            });
        });
        it('should have public access blocked', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-pdfs-dev-', { Ref: 'AWS::AccountId' }]] },
                PublicAccessBlockConfiguration: {
                    BlockPublicAcls: true,
                    BlockPublicPolicy: true,
                    IgnorePublicAcls: true,
                    RestrictPublicBuckets: true,
                },
            });
        });
        it('should have versioning enabled', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-pdfs-dev-', { Ref: 'AWS::AccountId' }]] },
                VersioningConfiguration: {
                    Status: 'Enabled',
                },
            });
        });
        it('should have lifecycle rules for cost optimization', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-pdfs-dev-', { Ref: 'AWS::AccountId' }]] },
                LifecycleConfiguration: {
                    Rules: [
                        {
                            Id: 'TransitionToStandardIA',
                            Status: 'Enabled',
                            Transitions: [
                                {
                                    StorageClass: 'STANDARD_IA',
                                    TransitionInDays: 90, // 90日後にStandard-IAに移行
                                },
                                {
                                    StorageClass: 'GLACIER',
                                    TransitionInDays: 365, // 365日後にGlacierに移行
                                },
                            ],
                        },
                    ],
                },
            });
        });
    });
    describe('Exports Bucket', () => {
        it('should be created with correct name', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-exports-dev-', { Ref: 'AWS::AccountId' }]] },
            });
        });
        it('should have encryption enabled', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-exports-dev-', { Ref: 'AWS::AccountId' }]] },
                BucketEncryption: {
                    ServerSideEncryptionConfiguration: [
                        {
                            ServerSideEncryptionByDefault: {
                                SSEAlgorithm: 'AES256',
                            },
                        },
                    ],
                },
            });
        });
        it('should have public access blocked', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-exports-dev-', { Ref: 'AWS::AccountId' }]] },
                PublicAccessBlockConfiguration: {
                    BlockPublicAcls: true,
                    BlockPublicPolicy: true,
                    IgnorePublicAcls: true,
                    RestrictPublicBuckets: true,
                },
            });
        });
        it('should have versioning enabled', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-exports-dev-', { Ref: 'AWS::AccountId' }]] },
                VersioningConfiguration: {
                    Status: 'Enabled',
                },
            });
        });
        it('should have lifecycle rule to delete after 7 days', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-exports-dev-', { Ref: 'AWS::AccountId' }]] },
                LifecycleConfiguration: {
                    Rules: [
                        {
                            Id: 'DeleteAfter7Days',
                            Status: 'Enabled',
                            ExpirationInDays: 7, // 7日後に自動削除
                        },
                    ],
                },
            });
        });
    });
    describe('Dashboard Bucket', () => {
        it('should be created with correct name', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-dashboard-dev-', { Ref: 'AWS::AccountId' }]] },
            });
        });
        it('should have encryption enabled', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-dashboard-dev-', { Ref: 'AWS::AccountId' }]] },
                BucketEncryption: {
                    ServerSideEncryptionConfiguration: [
                        {
                            ServerSideEncryptionByDefault: {
                                SSEAlgorithm: 'AES256',
                            },
                        },
                    ],
                },
            });
        });
        it('should have public access blocked', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-dashboard-dev-', { Ref: 'AWS::AccountId' }]] },
                PublicAccessBlockConfiguration: {
                    BlockPublicAcls: true,
                    BlockPublicPolicy: true,
                    IgnorePublicAcls: true,
                    RestrictPublicBuckets: true,
                },
            });
        });
        it('should have versioning enabled', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-dashboard-dev-', { Ref: 'AWS::AccountId' }]] },
                VersioningConfiguration: {
                    Status: 'Enabled',
                },
            });
        });
        it('should not have lifecycle rules (static files persist)', () => {
            // ダッシュボードバケットはライフサイクルルールを持たない
            const resources = template.toJSON().Resources;
            const dashboardBucket = Object.values(resources).find((r) => r.Type === 'AWS::S3::Bucket' &&
                r.Properties?.BucketName?.['Fn::Join']?.[1]?.[0] === 'tdnet-dashboard-dev-');
            expect(dashboardBucket).toBeDefined();
            expect(dashboardBucket.Properties.LifecycleConfiguration).toBeUndefined();
        });
    });
    describe('CloudTrail Logs Bucket', () => {
        it('should be created with correct name', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: `tdnet-cloudtrail-logs-${testAccountId}`,
            });
        });
        it('should have encryption enabled', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: `tdnet-cloudtrail-logs-${testAccountId}`,
                BucketEncryption: {
                    ServerSideEncryptionConfiguration: [
                        {
                            ServerSideEncryptionByDefault: {
                                SSEAlgorithm: 'AES256',
                            },
                        },
                    ],
                },
            });
        });
        it('should have public access blocked', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: `tdnet-cloudtrail-logs-${testAccountId}`,
                PublicAccessBlockConfiguration: {
                    BlockPublicAcls: true,
                    BlockPublicPolicy: true,
                    IgnorePublicAcls: true,
                    RestrictPublicBuckets: true,
                },
            });
        });
        it('should have versioning enabled', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: `tdnet-cloudtrail-logs-${testAccountId}`,
                VersioningConfiguration: {
                    Status: 'Enabled',
                },
            });
        });
        it('should have lifecycle rules for compliance', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: `tdnet-cloudtrail-logs-${testAccountId}`,
                LifecycleConfiguration: {
                    Rules: [
                        {
                            Id: 'ArchiveAndDelete',
                            Status: 'Enabled',
                            Transitions: [
                                {
                                    StorageClass: 'GLACIER',
                                    TransitionInDays: 90, // 90日後にGlacierに移行
                                },
                            ],
                            ExpirationInDays: 2555, // 7年後に自動削除（コンプライアンス要件）
                        },
                    ],
                },
            });
        });
    });
    describe('CloudFormation Outputs', () => {
        it('should export PdfsBucketName', () => {
            template.hasOutput('PdfsBucketName', {
                Value: {
                    Ref: assertions_1.Match.stringLikeRegexp('PdfsBucket'),
                },
                Export: {
                    Name: 'TdnetPdfsBucketName',
                },
            });
        });
        it('should export ExportsBucketName', () => {
            template.hasOutput('ExportsBucketName', {
                Value: {
                    Ref: assertions_1.Match.stringLikeRegexp('ExportsBucket'),
                },
                Export: {
                    Name: 'TdnetExportsBucketName',
                },
            });
        });
        it('should export DashboardBucketName', () => {
            template.hasOutput('DashboardBucketName', {
                Value: {
                    Ref: assertions_1.Match.stringLikeRegexp('DashboardBucket'),
                },
                Export: {
                    Name: 'TdnetDashboardBucketName',
                },
            });
        });
        it('should export CloudTrailLogsBucketName', () => {
            template.hasOutput('CloudTrailLogsBucketName', {
                Value: {
                    Ref: assertions_1.Match.stringLikeRegexp('CloudTrailLogsBucket'),
                },
                Export: {
                    Name: 'TdnetCloudTrailLogsBucketName',
                },
            });
        });
    });
    describe('Security and Compliance', () => {
        it('should have encryption enabled on all buckets', () => {
            // すべてのS3バケットで暗号化が有効化されていることを確認
            const buckets = template.findResources('AWS::S3::Bucket');
            const bucketKeys = Object.keys(buckets);
            expect(bucketKeys.length).toBeGreaterThanOrEqual(4);
            bucketKeys.forEach((key) => {
                const bucket = buckets[key];
                expect(bucket.Properties.BucketEncryption).toBeDefined();
                expect(bucket.Properties.BucketEncryption.ServerSideEncryptionConfiguration).toBeDefined();
                expect(bucket.Properties.BucketEncryption
                    .ServerSideEncryptionConfiguration[0].ServerSideEncryptionByDefault
                    .SSEAlgorithm).toBe('AES256');
            });
        });
        it('should have public access blocked on all buckets', () => {
            // すべてのS3バケットでパブリックアクセスがブロックされていることを確認
            const buckets = template.findResources('AWS::S3::Bucket');
            const bucketKeys = Object.keys(buckets);
            bucketKeys.forEach((key) => {
                const bucket = buckets[key];
                expect(bucket.Properties.PublicAccessBlockConfiguration).toBeDefined();
                expect(bucket.Properties.PublicAccessBlockConfiguration.BlockPublicAcls).toBe(true);
                expect(bucket.Properties.PublicAccessBlockConfiguration.BlockPublicPolicy).toBe(true);
                expect(bucket.Properties.PublicAccessBlockConfiguration.IgnorePublicAcls).toBe(true);
                expect(bucket.Properties.PublicAccessBlockConfiguration
                    .RestrictPublicBuckets).toBe(true);
            });
        });
        it('should have versioning enabled on all buckets', () => {
            // すべてのS3バケットでバージョニングが有効化されていることを確認
            const buckets = template.findResources('AWS::S3::Bucket');
            const bucketKeys = Object.keys(buckets);
            bucketKeys.forEach((key) => {
                const bucket = buckets[key];
                expect(bucket.Properties.VersioningConfiguration).toBeDefined();
                expect(bucket.Properties.VersioningConfiguration.Status).toBe('Enabled');
            });
        });
        it('should have lifecycle rules for cost optimization', () => {
            // PDFバケットとCloudTrailログバケットにライフサイクルルールが設定されていることを確認
            const pdfsBucket = template.findResources('AWS::S3::Bucket', {
                Properties: {
                    BucketName: `tdnet-data-collector-pdfs-${testAccountId}`,
                },
            });
            const cloudtrailBucket = template.findResources('AWS::S3::Bucket', {
                Properties: {
                    BucketName: `tdnet-cloudtrail-logs-${testAccountId}`,
                },
            });
            const pdfsBucketKey = Object.keys(pdfsBucket)[0];
            const cloudtrailBucketKey = Object.keys(cloudtrailBucket)[0];
            // バケットが見つかった場合のみライフサイクル設定を確認
            if (pdfsBucketKey && pdfsBucket[pdfsBucketKey]?.Properties) {
                expect(pdfsBucket[pdfsBucketKey].Properties.LifecycleConfiguration).toBeDefined();
            }
            if (cloudtrailBucketKey && cloudtrailBucket[cloudtrailBucketKey]?.Properties) {
                expect(cloudtrailBucket[cloudtrailBucketKey].Properties.LifecycleConfiguration).toBeDefined();
            }
        });
    });
    describe('Bucket Count', () => {
        it('should have exactly 4 S3 buckets', () => {
            // S3バケットが正確に4つ存在することを確認
            template.resourceCountIs('AWS::S3::Bucket', 4);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcY2RrXFxfX3Rlc3RzX19cXHMzLWJ1Y2tldHMudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7R0FPRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFSCxpREFBbUM7QUFDbkMsdURBQXlEO0FBQ3pELGtGQUE0RTtBQUU1RSxRQUFRLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRTtJQUMxQixJQUFJLFFBQWtCLENBQUM7SUFDdkIsTUFBTSxhQUFhLEdBQUcsY0FBYyxDQUFDO0lBRXJDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDYixNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUMxQixNQUFNLEtBQUssR0FBRyxJQUFJLG9EQUF1QixDQUFDLEdBQUcsRUFBRSxXQUFXLEVBQUU7WUFDMUQsR0FBRyxFQUFFLEVBQUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLEVBQUUsZ0JBQWdCLEVBQUU7U0FDMUQsQ0FBQyxDQUFDO1FBQ0gsUUFBUSxHQUFHLHFCQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3ZDLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUU7UUFDM0IsRUFBRSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtZQUM3QyxRQUFRLENBQUMscUJBQXFCLENBQUMsaUJBQWlCLEVBQUU7Z0JBQ2hELFVBQVUsRUFBRSxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLGdDQUFnQyxFQUFFLEVBQUUsR0FBRyxFQUFFLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxFQUFFO2FBQ2hHLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGdDQUFnQyxFQUFFLEdBQUcsRUFBRTtZQUN4QyxRQUFRLENBQUMscUJBQXFCLENBQUMsaUJBQWlCLEVBQUU7Z0JB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O2dCQUNqRSxVQUFVLEVBQUU7b0JBQ1YsVUFBVSxFQUFFLHlCQUF5QixhQUFhLEVBQUU7aUJBQ3JEO2FBQ0YsQ0FBQyxDQUFDO1lBRUgsTUFBTSxhQUFhLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNqRCxNQUFNLG1CQUFtQixHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUU3RCw2QkFBNkI7WUFDN0IsSUFBSSxhQUFhLElBQUksVUFBVSxDQUFDLGFBQWEsQ0FBQyxFQUFFLFVBQVUsRUFBRSxDQUFDO2dCQUMzRCxNQUFNLENBQ0osVUFBVSxDQUFDLGFBQWEsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxzQkFBc0IsQ0FDNUQsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUNsQixDQUFDO1lBRUQsSUFBSSxtQkFBbUIsSUFBSSxnQkFBZ0IsQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFLFVBQVUsRUFBRSxDQUFDO2dCQUM3RSxNQUFNLENBQ0osZ0JBQWdCLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxVQUFVLENBQUMsc0JBQXNCLENBQ3hFLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDbEIsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsY0FBYyxFQUFFLEdBQUcsRUFBRTtRQUM1QixFQUFFLENBQUMsa0NBQWtDLEVBQUUsR0FBRyxFQUFFO1lBQzFDLHdCQUF3QjtZQUN4QixRQUFRLENBQUMsZUFBZSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2pELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXHRpMTk4XFxpbnZlc3RtZW50X2FuYWx5c2lzX29wb3BvXFxjZGtcXF9fdGVzdHNfX1xcczMtYnVja2V0cy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBTMyBCdWNrZXQgU3RydWN0dXJlIFZlcmlmaWNhdGlvbiBUZXN0XHJcbiAqXHJcbiAqIFRhc2sgNC4yOiBTM+ODkOOCseODg+ODiOani+mAoOOBruaknOiovOODhuOCueODiFxyXG4gKiBSZXF1aXJlbWVudHM6IOimgeS7tjMuNSwgMTIuNCwgMTMuM++8iOODleOCoeOCpOODq+OCueODiOODrOODvOOCuOOAgeOCs+OCueODiOacgOmBqeWMluOAgeaal+WPt+WMlu+8iVxyXG4gKlxyXG4gKiDjgZPjga7jg4bjgrnjg4jjga/jgIFDREvjgaflrprnvqnjgZXjgozjgZ9TM+ODkOOCseODg+ODiOOBjOioreioiOmAmuOCiuOBq+ani+aIkOOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkuaknOiovOOBl+OBvuOBmeOAglxyXG4gKi9cclxuXHJcbmltcG9ydCAqIGFzIGNkayBmcm9tICdhd3MtY2RrLWxpYic7XHJcbmltcG9ydCB7IFRlbXBsYXRlLCBNYXRjaCB9IGZyb20gJ2F3cy1jZGstbGliL2Fzc2VydGlvbnMnO1xyXG5pbXBvcnQgeyBUZG5ldERhdGFDb2xsZWN0b3JTdGFjayB9IGZyb20gJy4uL2xpYi90ZG5ldC1kYXRhLWNvbGxlY3Rvci1zdGFjayc7XHJcblxyXG5kZXNjcmliZSgnUzMgQnVja2V0cycsICgpID0+IHtcclxuICBsZXQgdGVtcGxhdGU6IFRlbXBsYXRlO1xyXG4gIGNvbnN0IHRlc3RBY2NvdW50SWQgPSAnMTIzNDU2Nzg5MDEyJztcclxuXHJcbiAgYmVmb3JlQWxsKCgpID0+IHtcclxuICAgIGNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKCk7XHJcbiAgICBjb25zdCBzdGFjayA9IG5ldyBUZG5ldERhdGFDb2xsZWN0b3JTdGFjayhhcHAsICdUZXN0U3RhY2snLCB7XHJcbiAgICAgIGVudjogeyBhY2NvdW50OiB0ZXN0QWNjb3VudElkLCByZWdpb246ICdhcC1ub3J0aGVhc3QtMScgfSxcclxuICAgIH0pO1xyXG4gICAgdGVtcGxhdGUgPSBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUERGcyBCdWNrZXQnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGJlIGNyZWF0ZWQgd2l0aCBjb3JyZWN0IG5hbWUnLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgIEJ1Y2tldE5hbWU6IHsgJ0ZuOjpKb2luJzogWycnLCBbJ3RkbmV0LWRhdGEtY29sbGVjdG9yLXBkZnMtZGV2LScsIHsgUmVmOiAnQVdTOjpBY2NvdW50SWQnIH1dXSB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGF2ZSBlbmNyeXB0aW9uIGVuYWJsZWQnLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgIEJ1Y2tldE5hbWU6IHsgJ0ZuOjpKb2luJzogWycnLCBbJ3RkbmV0LWRhdGEtY29sbGVjdG9yLXBkZnMtZGV2LScsIHsgUmVmOiAnQVdTOjpBY2NvdW50SWQnIH1dXSB9LFxyXG4gICAgICAgIEJ1Y2tldEVuY3J5cHRpb246IHtcclxuICAgICAgICAgIFNlcnZlclNpZGVFbmNyeXB0aW9uQ29uZmlndXJhdGlvbjogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgU2VydmVyU2lkZUVuY3J5cHRpb25CeURlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgIFNTRUFsZ29yaXRobTogJ0FFUzI1NicsIC8vIFMz44Oe44ON44O844K444OJ5pqX5Y+35YyWXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgcHVibGljIGFjY2VzcyBibG9ja2VkJywgKCkgPT4ge1xyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6UzM6OkJ1Y2tldCcsIHtcclxuICAgICAgICBCdWNrZXROYW1lOiB7ICdGbjo6Sm9pbic6IFsnJywgWyd0ZG5ldC1kYXRhLWNvbGxlY3Rvci1wZGZzLWRldi0nLCB7IFJlZjogJ0FXUzo6QWNjb3VudElkJyB9XV0gfSxcclxuICAgICAgICBQdWJsaWNBY2Nlc3NCbG9ja0NvbmZpZ3VyYXRpb246IHtcclxuICAgICAgICAgIEJsb2NrUHVibGljQWNsczogdHJ1ZSxcclxuICAgICAgICAgIEJsb2NrUHVibGljUG9saWN5OiB0cnVlLFxyXG4gICAgICAgICAgSWdub3JlUHVibGljQWNsczogdHJ1ZSxcclxuICAgICAgICAgIFJlc3RyaWN0UHVibGljQnVja2V0czogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGF2ZSB2ZXJzaW9uaW5nIGVuYWJsZWQnLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgIEJ1Y2tldE5hbWU6IHsgJ0ZuOjpKb2luJzogWycnLCBbJ3RkbmV0LWRhdGEtY29sbGVjdG9yLXBkZnMtZGV2LScsIHsgUmVmOiAnQVdTOjpBY2NvdW50SWQnIH1dXSB9LFxyXG4gICAgICAgIFZlcnNpb25pbmdDb25maWd1cmF0aW9uOiB7XHJcbiAgICAgICAgICBTdGF0dXM6ICdFbmFibGVkJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGF2ZSBsaWZlY3ljbGUgcnVsZXMgZm9yIGNvc3Qgb3B0aW1pemF0aW9uJywgKCkgPT4ge1xyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6UzM6OkJ1Y2tldCcsIHtcclxuICAgICAgICBCdWNrZXROYW1lOiB7ICdGbjo6Sm9pbic6IFsnJywgWyd0ZG5ldC1kYXRhLWNvbGxlY3Rvci1wZGZzLWRldi0nLCB7IFJlZjogJ0FXUzo6QWNjb3VudElkJyB9XV0gfSxcclxuICAgICAgICBMaWZlY3ljbGVDb25maWd1cmF0aW9uOiB7XHJcbiAgICAgICAgICBSdWxlczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgSWQ6ICdUcmFuc2l0aW9uVG9TdGFuZGFyZElBJyxcclxuICAgICAgICAgICAgICBTdGF0dXM6ICdFbmFibGVkJyxcclxuICAgICAgICAgICAgICBUcmFuc2l0aW9uczogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBTdG9yYWdlQ2xhc3M6ICdTVEFOREFSRF9JQScsXHJcbiAgICAgICAgICAgICAgICAgIFRyYW5zaXRpb25JbkRheXM6IDkwLCAvLyA5MOaXpeW+jOOBq1N0YW5kYXJkLUlB44Gr56e76KGMXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBTdG9yYWdlQ2xhc3M6ICdHTEFDSUVSJyxcclxuICAgICAgICAgICAgICAgICAgVHJhbnNpdGlvbkluRGF5czogMzY1LCAvLyAzNjXml6XlvozjgatHbGFjaWVy44Gr56e76KGMXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdFeHBvcnRzIEJ1Y2tldCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgYmUgY3JlYXRlZCB3aXRoIGNvcnJlY3QgbmFtZScsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgQnVja2V0TmFtZTogeyAnRm46OkpvaW4nOiBbJycsIFsndGRuZXQtZGF0YS1jb2xsZWN0b3ItZXhwb3J0cy1kZXYtJywgeyBSZWY6ICdBV1M6OkFjY291bnRJZCcgfV1dIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGVuY3J5cHRpb24gZW5hYmxlZCcsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgQnVja2V0TmFtZTogeyAnRm46OkpvaW4nOiBbJycsIFsndGRuZXQtZGF0YS1jb2xsZWN0b3ItZXhwb3J0cy1kZXYtJywgeyBSZWY6ICdBV1M6OkFjY291bnRJZCcgfV1dIH0sXHJcbiAgICAgICAgQnVja2V0RW5jcnlwdGlvbjoge1xyXG4gICAgICAgICAgU2VydmVyU2lkZUVuY3J5cHRpb25Db25maWd1cmF0aW9uOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBTZXJ2ZXJTaWRlRW5jcnlwdGlvbkJ5RGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgU1NFQWxnb3JpdGhtOiAnQUVTMjU2JyxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGF2ZSBwdWJsaWMgYWNjZXNzIGJsb2NrZWQnLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgIEJ1Y2tldE5hbWU6IHsgJ0ZuOjpKb2luJzogWycnLCBbJ3RkbmV0LWRhdGEtY29sbGVjdG9yLWV4cG9ydHMtZGV2LScsIHsgUmVmOiAnQVdTOjpBY2NvdW50SWQnIH1dXSB9LFxyXG4gICAgICAgIFB1YmxpY0FjY2Vzc0Jsb2NrQ29uZmlndXJhdGlvbjoge1xyXG4gICAgICAgICAgQmxvY2tQdWJsaWNBY2xzOiB0cnVlLFxyXG4gICAgICAgICAgQmxvY2tQdWJsaWNQb2xpY3k6IHRydWUsXHJcbiAgICAgICAgICBJZ25vcmVQdWJsaWNBY2xzOiB0cnVlLFxyXG4gICAgICAgICAgUmVzdHJpY3RQdWJsaWNCdWNrZXRzOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHZlcnNpb25pbmcgZW5hYmxlZCcsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgQnVja2V0TmFtZTogeyAnRm46OkpvaW4nOiBbJycsIFsndGRuZXQtZGF0YS1jb2xsZWN0b3ItZXhwb3J0cy1kZXYtJywgeyBSZWY6ICdBV1M6OkFjY291bnRJZCcgfV1dIH0sXHJcbiAgICAgICAgVmVyc2lvbmluZ0NvbmZpZ3VyYXRpb246IHtcclxuICAgICAgICAgIFN0YXR1czogJ0VuYWJsZWQnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGxpZmVjeWNsZSBydWxlIHRvIGRlbGV0ZSBhZnRlciA3IGRheXMnLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgIEJ1Y2tldE5hbWU6IHsgJ0ZuOjpKb2luJzogWycnLCBbJ3RkbmV0LWRhdGEtY29sbGVjdG9yLWV4cG9ydHMtZGV2LScsIHsgUmVmOiAnQVdTOjpBY2NvdW50SWQnIH1dXSB9LFxyXG4gICAgICAgIExpZmVjeWNsZUNvbmZpZ3VyYXRpb246IHtcclxuICAgICAgICAgIFJ1bGVzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBJZDogJ0RlbGV0ZUFmdGVyN0RheXMnLFxyXG4gICAgICAgICAgICAgIFN0YXR1czogJ0VuYWJsZWQnLFxyXG4gICAgICAgICAgICAgIEV4cGlyYXRpb25JbkRheXM6IDcsIC8vIDfml6Xlvozjgavoh6rli5XliYrpmaRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0Rhc2hib2FyZCBCdWNrZXQnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGJlIGNyZWF0ZWQgd2l0aCBjb3JyZWN0IG5hbWUnLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgIEJ1Y2tldE5hbWU6IHsgJ0ZuOjpKb2luJzogWycnLCBbJ3RkbmV0LWRhc2hib2FyZC1kZXYtJywgeyBSZWY6ICdBV1M6OkFjY291bnRJZCcgfV1dIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGVuY3J5cHRpb24gZW5hYmxlZCcsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgQnVja2V0TmFtZTogeyAnRm46OkpvaW4nOiBbJycsIFsndGRuZXQtZGFzaGJvYXJkLWRldi0nLCB7IFJlZjogJ0FXUzo6QWNjb3VudElkJyB9XV0gfSxcclxuICAgICAgICBCdWNrZXRFbmNyeXB0aW9uOiB7XHJcbiAgICAgICAgICBTZXJ2ZXJTaWRlRW5jcnlwdGlvbkNvbmZpZ3VyYXRpb246IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIFNlcnZlclNpZGVFbmNyeXB0aW9uQnlEZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICBTU0VBbGdvcml0aG06ICdBRVMyNTYnLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHB1YmxpYyBhY2Nlc3MgYmxvY2tlZCcsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgQnVja2V0TmFtZTogeyAnRm46OkpvaW4nOiBbJycsIFsndGRuZXQtZGFzaGJvYXJkLWRldi0nLCB7IFJlZjogJ0FXUzo6QWNjb3VudElkJyB9XV0gfSxcclxuICAgICAgICBQdWJsaWNBY2Nlc3NCbG9ja0NvbmZpZ3VyYXRpb246IHtcclxuICAgICAgICAgIEJsb2NrUHVibGljQWNsczogdHJ1ZSxcclxuICAgICAgICAgIEJsb2NrUHVibGljUG9saWN5OiB0cnVlLFxyXG4gICAgICAgICAgSWdub3JlUHVibGljQWNsczogdHJ1ZSxcclxuICAgICAgICAgIFJlc3RyaWN0UHVibGljQnVja2V0czogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGF2ZSB2ZXJzaW9uaW5nIGVuYWJsZWQnLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgIEJ1Y2tldE5hbWU6IHsgJ0ZuOjpKb2luJzogWycnLCBbJ3RkbmV0LWRhc2hib2FyZC1kZXYtJywgeyBSZWY6ICdBV1M6OkFjY291bnRJZCcgfV1dIH0sXHJcbiAgICAgICAgVmVyc2lvbmluZ0NvbmZpZ3VyYXRpb246IHtcclxuICAgICAgICAgIFN0YXR1czogJ0VuYWJsZWQnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBub3QgaGF2ZSBsaWZlY3ljbGUgcnVsZXMgKHN0YXRpYyBmaWxlcyBwZXJzaXN0KScsICgpID0+IHtcclxuICAgICAgLy8g44OA44OD44K344Ol44Oc44O844OJ44OQ44Kx44OD44OI44Gv44Op44Kk44OV44K144Kk44Kv44Or44Or44O844Or44KS5oyB44Gf44Gq44GEXHJcbiAgICAgIGNvbnN0IHJlc291cmNlcyA9IHRlbXBsYXRlLnRvSlNPTigpLlJlc291cmNlcztcclxuICAgICAgY29uc3QgZGFzaGJvYXJkQnVja2V0ID0gT2JqZWN0LnZhbHVlcyhyZXNvdXJjZXMpLmZpbmQoXHJcbiAgICAgICAgKHI6IGFueSkgPT4gci5UeXBlID09PSAnQVdTOjpTMzo6QnVja2V0JyAmJiBcclxuICAgICAgICByLlByb3BlcnRpZXM/LkJ1Y2tldE5hbWU/LlsnRm46OkpvaW4nXT8uWzFdPy5bMF0gPT09ICd0ZG5ldC1kYXNoYm9hcmQtZGV2LSdcclxuICAgICAgKSBhcyBhbnk7XHJcblxyXG4gICAgICBleHBlY3QoZGFzaGJvYXJkQnVja2V0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoZGFzaGJvYXJkQnVja2V0LlByb3BlcnRpZXMuTGlmZWN5Y2xlQ29uZmlndXJhdGlvbikudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdDbG91ZFRyYWlsIExvZ3MgQnVja2V0JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBiZSBjcmVhdGVkIHdpdGggY29ycmVjdCBuYW1lJywgKCkgPT4ge1xyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6UzM6OkJ1Y2tldCcsIHtcclxuICAgICAgICBCdWNrZXROYW1lOiBgdGRuZXQtY2xvdWR0cmFpbC1sb2dzLSR7dGVzdEFjY291bnRJZH1gLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGF2ZSBlbmNyeXB0aW9uIGVuYWJsZWQnLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgIEJ1Y2tldE5hbWU6IGB0ZG5ldC1jbG91ZHRyYWlsLWxvZ3MtJHt0ZXN0QWNjb3VudElkfWAsXHJcbiAgICAgICAgQnVja2V0RW5jcnlwdGlvbjoge1xyXG4gICAgICAgICAgU2VydmVyU2lkZUVuY3J5cHRpb25Db25maWd1cmF0aW9uOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBTZXJ2ZXJTaWRlRW5jcnlwdGlvbkJ5RGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgU1NFQWxnb3JpdGhtOiAnQUVTMjU2JyxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGF2ZSBwdWJsaWMgYWNjZXNzIGJsb2NrZWQnLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgIEJ1Y2tldE5hbWU6IGB0ZG5ldC1jbG91ZHRyYWlsLWxvZ3MtJHt0ZXN0QWNjb3VudElkfWAsXHJcbiAgICAgICAgUHVibGljQWNjZXNzQmxvY2tDb25maWd1cmF0aW9uOiB7XHJcbiAgICAgICAgICBCbG9ja1B1YmxpY0FjbHM6IHRydWUsXHJcbiAgICAgICAgICBCbG9ja1B1YmxpY1BvbGljeTogdHJ1ZSxcclxuICAgICAgICAgIElnbm9yZVB1YmxpY0FjbHM6IHRydWUsXHJcbiAgICAgICAgICBSZXN0cmljdFB1YmxpY0J1Y2tldHM6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgdmVyc2lvbmluZyBlbmFibGVkJywgKCkgPT4ge1xyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6UzM6OkJ1Y2tldCcsIHtcclxuICAgICAgICBCdWNrZXROYW1lOiBgdGRuZXQtY2xvdWR0cmFpbC1sb2dzLSR7dGVzdEFjY291bnRJZH1gLFxyXG4gICAgICAgIFZlcnNpb25pbmdDb25maWd1cmF0aW9uOiB7XHJcbiAgICAgICAgICBTdGF0dXM6ICdFbmFibGVkJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGF2ZSBsaWZlY3ljbGUgcnVsZXMgZm9yIGNvbXBsaWFuY2UnLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgIEJ1Y2tldE5hbWU6IGB0ZG5ldC1jbG91ZHRyYWlsLWxvZ3MtJHt0ZXN0QWNjb3VudElkfWAsXHJcbiAgICAgICAgTGlmZWN5Y2xlQ29uZmlndXJhdGlvbjoge1xyXG4gICAgICAgICAgUnVsZXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIElkOiAnQXJjaGl2ZUFuZERlbGV0ZScsXHJcbiAgICAgICAgICAgICAgU3RhdHVzOiAnRW5hYmxlZCcsXHJcbiAgICAgICAgICAgICAgVHJhbnNpdGlvbnM6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgU3RvcmFnZUNsYXNzOiAnR0xBQ0lFUicsXHJcbiAgICAgICAgICAgICAgICAgIFRyYW5zaXRpb25JbkRheXM6IDkwLCAvLyA5MOaXpeW+jOOBq0dsYWNpZXLjgavnp7vooYxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICBFeHBpcmF0aW9uSW5EYXlzOiAyNTU1LCAvLyA35bm05b6M44Gr6Ieq5YuV5YmK6Zmk77yI44Kz44Oz44OX44Op44Kk44Ki44Oz44K56KaB5Lu277yJXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdDbG91ZEZvcm1hdGlvbiBPdXRwdXRzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBleHBvcnQgUGRmc0J1Y2tldE5hbWUnLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc091dHB1dCgnUGRmc0J1Y2tldE5hbWUnLCB7XHJcbiAgICAgICAgVmFsdWU6IHtcclxuICAgICAgICAgIFJlZjogTWF0Y2guc3RyaW5nTGlrZVJlZ2V4cCgnUGRmc0J1Y2tldCcpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgRXhwb3J0OiB7XHJcbiAgICAgICAgICBOYW1lOiAnVGRuZXRQZGZzQnVja2V0TmFtZScsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGV4cG9ydCBFeHBvcnRzQnVja2V0TmFtZScsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzT3V0cHV0KCdFeHBvcnRzQnVja2V0TmFtZScsIHtcclxuICAgICAgICBWYWx1ZToge1xyXG4gICAgICAgICAgUmVmOiBNYXRjaC5zdHJpbmdMaWtlUmVnZXhwKCdFeHBvcnRzQnVja2V0JyksXHJcbiAgICAgICAgfSxcclxuICAgICAgICBFeHBvcnQ6IHtcclxuICAgICAgICAgIE5hbWU6ICdUZG5ldEV4cG9ydHNCdWNrZXROYW1lJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZXhwb3J0IERhc2hib2FyZEJ1Y2tldE5hbWUnLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc091dHB1dCgnRGFzaGJvYXJkQnVja2V0TmFtZScsIHtcclxuICAgICAgICBWYWx1ZToge1xyXG4gICAgICAgICAgUmVmOiBNYXRjaC5zdHJpbmdMaWtlUmVnZXhwKCdEYXNoYm9hcmRCdWNrZXQnKSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIEV4cG9ydDoge1xyXG4gICAgICAgICAgTmFtZTogJ1RkbmV0RGFzaGJvYXJkQnVja2V0TmFtZScsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGV4cG9ydCBDbG91ZFRyYWlsTG9nc0J1Y2tldE5hbWUnLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc091dHB1dCgnQ2xvdWRUcmFpbExvZ3NCdWNrZXROYW1lJywge1xyXG4gICAgICAgIFZhbHVlOiB7XHJcbiAgICAgICAgICBSZWY6IE1hdGNoLnN0cmluZ0xpa2VSZWdleHAoJ0Nsb3VkVHJhaWxMb2dzQnVja2V0JyksXHJcbiAgICAgICAgfSxcclxuICAgICAgICBFeHBvcnQ6IHtcclxuICAgICAgICAgIE5hbWU6ICdUZG5ldENsb3VkVHJhaWxMb2dzQnVja2V0TmFtZScsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1NlY3VyaXR5IGFuZCBDb21wbGlhbmNlJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGVuY3J5cHRpb24gZW5hYmxlZCBvbiBhbGwgYnVja2V0cycsICgpID0+IHtcclxuICAgICAgLy8g44GZ44G544Gm44GuUzPjg5DjgrHjg4Pjg4jjgafmmpflj7fljJbjgYzmnInlirnljJbjgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgY29uc3QgYnVja2V0cyA9IHRlbXBsYXRlLmZpbmRSZXNvdXJjZXMoJ0FXUzo6UzM6OkJ1Y2tldCcpO1xyXG4gICAgICBjb25zdCBidWNrZXRLZXlzID0gT2JqZWN0LmtleXMoYnVja2V0cyk7XHJcblxyXG4gICAgICBleHBlY3QoYnVja2V0S2V5cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoNCk7XHJcblxyXG4gICAgICBidWNrZXRLZXlzLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJ1Y2tldCA9IGJ1Y2tldHNba2V5XTtcclxuICAgICAgICBleHBlY3QoYnVja2V0LlByb3BlcnRpZXMuQnVja2V0RW5jcnlwdGlvbikudG9CZURlZmluZWQoKTtcclxuICAgICAgICBleHBlY3QoXHJcbiAgICAgICAgICBidWNrZXQuUHJvcGVydGllcy5CdWNrZXRFbmNyeXB0aW9uLlNlcnZlclNpZGVFbmNyeXB0aW9uQ29uZmlndXJhdGlvblxyXG4gICAgICAgICkudG9CZURlZmluZWQoKTtcclxuICAgICAgICBleHBlY3QoXHJcbiAgICAgICAgICBidWNrZXQuUHJvcGVydGllcy5CdWNrZXRFbmNyeXB0aW9uXHJcbiAgICAgICAgICAgIC5TZXJ2ZXJTaWRlRW5jcnlwdGlvbkNvbmZpZ3VyYXRpb25bMF0uU2VydmVyU2lkZUVuY3J5cHRpb25CeURlZmF1bHRcclxuICAgICAgICAgICAgLlNTRUFsZ29yaXRobVxyXG4gICAgICAgICkudG9CZSgnQUVTMjU2Jyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHB1YmxpYyBhY2Nlc3MgYmxvY2tlZCBvbiBhbGwgYnVja2V0cycsICgpID0+IHtcclxuICAgICAgLy8g44GZ44G544Gm44GuUzPjg5DjgrHjg4Pjg4jjgafjg5Hjg5bjg6rjg4Pjgq/jgqLjgq/jgrvjgrnjgYzjg5bjg63jg4Pjgq/jgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgY29uc3QgYnVja2V0cyA9IHRlbXBsYXRlLmZpbmRSZXNvdXJjZXMoJ0FXUzo6UzM6OkJ1Y2tldCcpO1xyXG4gICAgICBjb25zdCBidWNrZXRLZXlzID0gT2JqZWN0LmtleXMoYnVja2V0cyk7XHJcblxyXG4gICAgICBidWNrZXRLZXlzLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJ1Y2tldCA9IGJ1Y2tldHNba2V5XTtcclxuICAgICAgICBleHBlY3QoYnVja2V0LlByb3BlcnRpZXMuUHVibGljQWNjZXNzQmxvY2tDb25maWd1cmF0aW9uKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICAgIGV4cGVjdChcclxuICAgICAgICAgIGJ1Y2tldC5Qcm9wZXJ0aWVzLlB1YmxpY0FjY2Vzc0Jsb2NrQ29uZmlndXJhdGlvbi5CbG9ja1B1YmxpY0FjbHNcclxuICAgICAgICApLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgZXhwZWN0KFxyXG4gICAgICAgICAgYnVja2V0LlByb3BlcnRpZXMuUHVibGljQWNjZXNzQmxvY2tDb25maWd1cmF0aW9uLkJsb2NrUHVibGljUG9saWN5XHJcbiAgICAgICAgKS50b0JlKHRydWUpO1xyXG4gICAgICAgIGV4cGVjdChcclxuICAgICAgICAgIGJ1Y2tldC5Qcm9wZXJ0aWVzLlB1YmxpY0FjY2Vzc0Jsb2NrQ29uZmlndXJhdGlvbi5JZ25vcmVQdWJsaWNBY2xzXHJcbiAgICAgICAgKS50b0JlKHRydWUpO1xyXG4gICAgICAgIGV4cGVjdChcclxuICAgICAgICAgIGJ1Y2tldC5Qcm9wZXJ0aWVzLlB1YmxpY0FjY2Vzc0Jsb2NrQ29uZmlndXJhdGlvblxyXG4gICAgICAgICAgICAuUmVzdHJpY3RQdWJsaWNCdWNrZXRzXHJcbiAgICAgICAgKS50b0JlKHRydWUpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGF2ZSB2ZXJzaW9uaW5nIGVuYWJsZWQgb24gYWxsIGJ1Y2tldHMnLCAoKSA9PiB7XHJcbiAgICAgIC8vIOOBmeOBueOBpuOBrlMz44OQ44Kx44OD44OI44Gn44OQ44O844K444On44OL44Oz44Kw44GM5pyJ5Yq55YyW44GV44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIGNvbnN0IGJ1Y2tldHMgPSB0ZW1wbGF0ZS5maW5kUmVzb3VyY2VzKCdBV1M6OlMzOjpCdWNrZXQnKTtcclxuICAgICAgY29uc3QgYnVja2V0S2V5cyA9IE9iamVjdC5rZXlzKGJ1Y2tldHMpO1xyXG5cclxuICAgICAgYnVja2V0S2V5cy5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICBjb25zdCBidWNrZXQgPSBidWNrZXRzW2tleV07XHJcbiAgICAgICAgZXhwZWN0KGJ1Y2tldC5Qcm9wZXJ0aWVzLlZlcnNpb25pbmdDb25maWd1cmF0aW9uKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICAgIGV4cGVjdChidWNrZXQuUHJvcGVydGllcy5WZXJzaW9uaW5nQ29uZmlndXJhdGlvbi5TdGF0dXMpLnRvQmUoXHJcbiAgICAgICAgICAnRW5hYmxlZCdcclxuICAgICAgICApO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGF2ZSBsaWZlY3ljbGUgcnVsZXMgZm9yIGNvc3Qgb3B0aW1pemF0aW9uJywgKCkgPT4ge1xyXG4gICAgICAvLyBQREbjg5DjgrHjg4Pjg4jjgahDbG91ZFRyYWls44Ot44Kw44OQ44Kx44OD44OI44Gr44Op44Kk44OV44K144Kk44Kv44Or44Or44O844Or44GM6Kit5a6a44GV44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIGNvbnN0IHBkZnNCdWNrZXQgPSB0ZW1wbGF0ZS5maW5kUmVzb3VyY2VzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgUHJvcGVydGllczoge1xyXG4gICAgICAgICAgQnVja2V0TmFtZTogYHRkbmV0LWRhdGEtY29sbGVjdG9yLXBkZnMtJHt0ZXN0QWNjb3VudElkfWAsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBjbG91ZHRyYWlsQnVja2V0ID0gdGVtcGxhdGUuZmluZFJlc291cmNlcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgIFByb3BlcnRpZXM6IHtcclxuICAgICAgICAgIEJ1Y2tldE5hbWU6IGB0ZG5ldC1jbG91ZHRyYWlsLWxvZ3MtJHt0ZXN0QWNjb3VudElkfWAsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBwZGZzQnVja2V0S2V5ID0gT2JqZWN0LmtleXMocGRmc0J1Y2tldClbMF07XHJcbiAgICAgIGNvbnN0IGNsb3VkdHJhaWxCdWNrZXRLZXkgPSBPYmplY3Qua2V5cyhjbG91ZHRyYWlsQnVja2V0KVswXTtcclxuXHJcbiAgICAgIC8vIOODkOOCseODg+ODiOOBjOimi+OBpOOBi+OBo+OBn+WgtOWQiOOBruOBv+ODqeOCpOODleOCteOCpOOCr+ODq+ioreWumuOCkueiuuiqjVxyXG4gICAgICBpZiAocGRmc0J1Y2tldEtleSAmJiBwZGZzQnVja2V0W3BkZnNCdWNrZXRLZXldPy5Qcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgZXhwZWN0KFxyXG4gICAgICAgICAgcGRmc0J1Y2tldFtwZGZzQnVja2V0S2V5XS5Qcm9wZXJ0aWVzLkxpZmVjeWNsZUNvbmZpZ3VyYXRpb25cclxuICAgICAgICApLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmIChjbG91ZHRyYWlsQnVja2V0S2V5ICYmIGNsb3VkdHJhaWxCdWNrZXRbY2xvdWR0cmFpbEJ1Y2tldEtleV0/LlByb3BlcnRpZXMpIHtcclxuICAgICAgICBleHBlY3QoXHJcbiAgICAgICAgICBjbG91ZHRyYWlsQnVja2V0W2Nsb3VkdHJhaWxCdWNrZXRLZXldLlByb3BlcnRpZXMuTGlmZWN5Y2xlQ29uZmlndXJhdGlvblxyXG4gICAgICAgICkudG9CZURlZmluZWQoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdCdWNrZXQgQ291bnQnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgZXhhY3RseSA0IFMzIGJ1Y2tldHMnLCAoKSA9PiB7XHJcbiAgICAgIC8vIFMz44OQ44Kx44OD44OI44GM5q2j56K644GrNOOBpOWtmOWcqOOBmeOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6UzM6OkJ1Y2tldCcsIDQpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=