04c3ba94be6019c0ed9063c25bfe171b
"use strict";
/**
 * CloudWatchメトリクスヘルパーのユニットテスト
 *
 * メトリクス送信機能の動作を検証します。
 * Lambda実装チェックリストの「エラーメトリクス送信」に対応。
 *
 * Requirements: 要件6.4（エラーメトリクス）
 */
Object.defineProperty(exports, "__esModule", { value: true });
// AWS SDK v3のモック
jest.mock('@aws-sdk/client-cloudwatch', () => {
    const mockSend = jest.fn().mockResolvedValue({});
    return {
        CloudWatchClient: jest.fn(() => ({
            send: mockSend,
        })),
        PutMetricDataCommand: jest.fn((params) => params),
    };
});
const metrics_1 = require("../metrics");
const errors_1 = require("../../errors");
describe('CloudWatch Metrics', () => {
    beforeEach(() => {
        jest.clearAllMocks();
    });
    describe('sendMetric', () => {
        it('should send metric with default options', async () => {
            await (0, metrics_1.sendMetric)('TestMetric', 1);
            const { CloudWatchClient, PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            const mockClient = new CloudWatchClient();
            expect(mockClient.send).toHaveBeenCalledTimes(1);
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                Namespace: 'TDnetDataCollector',
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'TestMetric',
                        Value: 1,
                        Unit: 'Count',
                    }),
                ]),
            }));
        });
        it('should send metric with custom namespace', async () => {
            await (0, metrics_1.sendMetric)('TestMetric', 1, {
                namespace: 'CustomNamespace',
            });
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                Namespace: 'CustomNamespace',
            }));
        });
        it('should send metric with dimensions', async () => {
            await (0, metrics_1.sendMetric)('TestMetric', 1, {
                dimensions: [
                    { Name: 'ErrorType', Value: 'ValidationError' },
                    { Name: 'FunctionName', Value: 'TestFunction' },
                ],
            });
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        Dimensions: [
                            { Name: 'ErrorType', Value: 'ValidationError' },
                            { Name: 'FunctionName', Value: 'TestFunction' },
                        ],
                    }),
                ]),
            }));
        });
        it('should send metric with custom unit', async () => {
            await (0, metrics_1.sendMetric)('ExecutionTime', 1234, {
                unit: 'Milliseconds',
            });
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        Unit: 'Milliseconds',
                        Value: 1234,
                    }),
                ]),
            }));
        });
        it('should not throw error on metric send failure', async () => {
            const { CloudWatchClient } = require('@aws-sdk/client-cloudwatch');
            const mockClient = new CloudWatchClient();
            mockClient.send.mockRejectedValueOnce(new Error('Network error'));
            // メトリクス送信失敗でもエラーをスローしない
            await expect((0, metrics_1.sendMetric)('TestMetric', 1)).resolves.not.toThrow();
        });
    });
    describe('sendErrorMetric', () => {
        it('should send error metric with error type', async () => {
            const error = new errors_1.ValidationError('Invalid input');
            await (0, metrics_1.sendErrorMetric)(error);
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'LambdaError',
                        Value: 1,
                        Dimensions: [
                            { Name: 'ErrorType', Value: 'ValidationError' },
                        ],
                    }),
                ]),
            }));
        });
        it('should send error metric with function name', async () => {
            const error = new errors_1.RetryableError('Network error');
            await (0, metrics_1.sendErrorMetric)(error, 'CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        Dimensions: [
                            { Name: 'ErrorType', Value: 'RetryableError' },
                            { Name: 'FunctionName', Value: 'CollectorFunction' },
                        ],
                    }),
                ]),
            }));
        });
        it('should handle standard Error objects', async () => {
            const error = new Error('Standard error');
            await (0, metrics_1.sendErrorMetric)(error);
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        Dimensions: [
                            { Name: 'ErrorType', Value: 'Error' },
                        ],
                    }),
                ]),
            }));
        });
    });
    describe('sendSuccessMetric', () => {
        it('should send success metric without function name', async () => {
            await (0, metrics_1.sendSuccessMetric)();
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'LambdaSuccess',
                        Value: 1,
                        Dimensions: [],
                    }),
                ]),
            }));
        });
        it('should send success metric with function name', async () => {
            await (0, metrics_1.sendSuccessMetric)('CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        Dimensions: [
                            { Name: 'FunctionName', Value: 'CollectorFunction' },
                        ],
                    }),
                ]),
            }));
        });
    });
    describe('sendExecutionTimeMetric', () => {
        it('should send execution time metric', async () => {
            await (0, metrics_1.sendExecutionTimeMetric)(1234);
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'ExecutionTime',
                        Value: 1234,
                        Unit: 'Milliseconds',
                    }),
                ]),
            }));
        });
        it('should send execution time metric with function name', async () => {
            await (0, metrics_1.sendExecutionTimeMetric)(1234, 'CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        Dimensions: [
                            { Name: 'FunctionName', Value: 'CollectorFunction' },
                        ],
                    }),
                ]),
            }));
        });
    });
    describe('sendBatchResultMetrics', () => {
        it('should send batch success and failed metrics', async () => {
            await (0, metrics_1.sendBatchResultMetrics)(95, 5);
            const { CloudWatchClient } = require('@aws-sdk/client-cloudwatch');
            const mockClient = new CloudWatchClient();
            // 2回呼ばれる（success + failed）
            expect(mockClient.send).toHaveBeenCalledTimes(2);
        });
        it('should send batch metrics with function name', async () => {
            await (0, metrics_1.sendBatchResultMetrics)(95, 5, 'CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            // BatchSuccessとBatchFailedの両方が送信される
            const calls = PutMetricDataCommand.mock.calls;
            expect(calls.length).toBe(2);
            // 各呼び出しにFunctionNameディメンションが含まれる
            calls.forEach((call) => {
                expect(call[0].MetricData[0].Dimensions).toContainEqual({
                    Name: 'FunctionName',
                    Value: 'CollectorFunction',
                });
            });
        });
        it('should send correct values for success and failed', async () => {
            await (0, metrics_1.sendBatchResultMetrics)(95, 5);
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            const calls = PutMetricDataCommand.mock.calls;
            // BatchSuccessメトリクス
            const successCall = calls.find((call) => call[0].MetricData[0].MetricName === 'BatchSuccess');
            expect(successCall[0].MetricData[0].Value).toBe(95);
            // BatchFailedメトリクス
            const failedCall = calls.find((call) => call[0].MetricData[0].MetricName === 'BatchFailed');
            expect(failedCall[0].MetricData[0].Value).toBe(5);
        });
    });
    describe('Lambda Integration Example', () => {
        it('should demonstrate complete Lambda error handling with metrics', async () => {
            // Lambda実装チェックリストに準拠した実装例
            const mockHandler = async (_event, context) => {
                const startTime = Date.now();
                try {
                    // メイン処理（成功）
                    await Promise.resolve({ success: true });
                    // 成功メトリクス送信
                    await (0, metrics_1.sendSuccessMetric)(context.functionName);
                    // 実行時間メトリクス送信
                    const executionTime = Date.now() - startTime;
                    await (0, metrics_1.sendExecutionTimeMetric)(executionTime, context.functionName);
                    return { statusCode: 200, body: JSON.stringify({ success: true }) };
                }
                catch (error) {
                    // エラーメトリクス送信
                    await (0, metrics_1.sendErrorMetric)(error, context.functionName);
                    throw error;
                }
            };
            const mockContext = {
                functionName: 'TestFunction',
                requestId: 'test-request-id',
            };
            await mockHandler({}, mockContext);
            const { CloudWatchClient } = require('@aws-sdk/client-cloudwatch');
            const mockClient = new CloudWatchClient();
            // 成功メトリクスと実行時間メトリクスが送信される
            expect(mockClient.send).toHaveBeenCalledTimes(2);
        });
        it('should demonstrate batch processing with metrics', async () => {
            const items = Array.from({ length: 100 }, (_, i) => ({ id: i }));
            let success = 0;
            let failed = 0;
            for (const _item of items) {
                try {
                    // 5%の確率で失敗
                    if (Math.random() < 0.05) {
                        throw new Error('Random failure');
                    }
                    success++;
                }
                catch (error) {
                    failed++;
                }
            }
            // バッチ結果メトリクス送信
            await (0, metrics_1.sendBatchResultMetrics)(success, failed, 'BatchFunction');
            const { CloudWatchClient } = require('@aws-sdk/client-cloudwatch');
            const mockClient = new CloudWatchClient();
            expect(mockClient.send).toHaveBeenCalledTimes(2);
        });
    });
    describe('sendDisclosuresCollectedMetric', () => {
        it('should send disclosures collected metric without function name', async () => {
            await sendDisclosuresCollectedMetric(150);
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'DisclosuresCollected',
                        Value: 150,
                        Dimensions: [],
                    }),
                ]),
            }));
        });
        it('should send disclosures collected metric with function name', async () => {
            await sendDisclosuresCollectedMetric(150, 'CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'DisclosuresCollected',
                        Value: 150,
                        Dimensions: [
                            { Name: 'FunctionName', Value: 'CollectorFunction' },
                        ],
                    }),
                ]),
            }));
        });
    });
    describe('sendDisclosuresFailedMetric', () => {
        it('should send disclosures failed metric without function name', async () => {
            await sendDisclosuresFailedMetric(5);
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'DisclosuresFailed',
                        Value: 5,
                        Dimensions: [],
                    }),
                ]),
            }));
        });
        it('should send disclosures failed metric with function name', async () => {
            await sendDisclosuresFailedMetric(5, 'CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'DisclosuresFailed',
                        Value: 5,
                        Dimensions: [
                            { Name: 'FunctionName', Value: 'CollectorFunction' },
                        ],
                    }),
                ]),
            }));
        });
    });
    describe('sendCollectionSuccessRateMetric', () => {
        it('should send collection success rate metric without function name', async () => {
            await sendCollectionSuccessRateMetric(96.77);
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'CollectionSuccessRate',
                        Value: 96.77,
                        Unit: 'Count',
                        Dimensions: [],
                    }),
                ]),
            }));
        });
        it('should send collection success rate metric with function name', async () => {
            await sendCollectionSuccessRateMetric(96.77, 'CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'CollectionSuccessRate',
                        Value: 96.77,
                        Unit: 'Count',
                        Dimensions: [
                            { Name: 'FunctionName', Value: 'CollectorFunction' },
                        ],
                    }),
                ]),
            }));
        });
        it('should handle 100% success rate', async () => {
            await sendCollectionSuccessRateMetric(100, 'CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        Value: 100,
                    }),
                ]),
            }));
        });
        it('should handle 0% success rate', async () => {
            await sendCollectionSuccessRateMetric(0, 'CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        Value: 0,
                    }),
                ]),
            }));
        });
    });
    describe('Custom Metrics Integration Example', () => {
        it('should demonstrate complete collection metrics workflow', async () => {
            // 収集結果のシミュレーション
            const collectedCount = 150;
            const failedCount = 5;
            const totalCount = collectedCount + failedCount;
            const successRate = (collectedCount / totalCount) * 100;
            // カスタムメトリクスを送信
            await Promise.all([
                sendDisclosuresCollectedMetric(collectedCount, 'CollectorFunction'),
                sendDisclosuresFailedMetric(failedCount, 'CollectorFunction'),
                sendCollectionSuccessRateMetric(successRate, 'CollectorFunction'),
            ]);
            const { CloudWatchClient } = require('@aws-sdk/client-cloudwatch');
            const mockClient = new CloudWatchClient();
            // 3つのメトリクスが送信される
            expect(mockClient.send).toHaveBeenCalledTimes(3);
        });
        it('should calculate success rate correctly', async () => {
            const testCases = [
                { collected: 100, failed: 0, expectedRate: 100 },
                { collected: 95, failed: 5, expectedRate: 95 },
                { collected: 150, failed: 5, expectedRate: 96.77419354838710 },
                { collected: 0, failed: 10, expectedRate: 0 },
            ];
            for (const testCase of testCases) {
                const totalCount = testCase.collected + testCase.failed;
                const successRate = totalCount > 0
                    ? (testCase.collected / totalCount) * 100
                    : 0;
                expect(successRate).toBeCloseTo(testCase.expectedRate, 2);
            }
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFx1dGlsc1xcX190ZXN0c19fXFxtZXRyaWNzLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7O0dBT0c7O0FBV0gsaUJBQWlCO0FBQ2pCLElBQUksQ0FBQyxJQUFJLENBQUMsNEJBQTRCLEVBQUUsR0FBRyxFQUFFO0lBQzNDLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUVqRCxPQUFPO1FBQ0wsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQy9CLElBQUksRUFBRSxRQUFRO1NBQ2YsQ0FBQyxDQUFDO1FBQ0gsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDO0tBQ2xELENBQUM7QUFDSixDQUFDLENBQUMsQ0FBQztBQW5CSCx3Q0FNb0I7QUFDcEIseUNBQStEO0FBYy9ELFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLEVBQUU7SUFDbEMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxZQUFZLEVBQUUsR0FBRyxFQUFFO1FBQzFCLEVBQUUsQ0FBQyx5Q0FBeUMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN2RCxNQUFNLElBQUEsb0JBQVUsRUFBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFFbEMsTUFBTSxFQUFFLGdCQUFnQixFQUFFLG9CQUFvQixFQUFFLEdBQUcsT0FBTyxDQUFDLDRCQUE0QixDQUFDLENBQUM7WUFDekYsTUFBTSxVQUFVLEdBQUcsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO1lBRTFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMscUJBQXFCLENB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QUMsRUFBRTthQUM5QyxDQUFDO1lBRUYsS0FBSyxNQUFNLFFBQVEsSUFBSSxTQUFTLEVBQUUsQ0FBQztnQkFDakMsTUFBTSxVQUFVLEdBQUcsUUFBUSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDO2dCQUN4RCxNQUFNLFdBQVcsR0FBRyxVQUFVLEdBQUcsQ0FBQztvQkFDaEMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLFNBQVMsR0FBRyxVQUFVLENBQUMsR0FBRyxHQUFHO29CQUN6QyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUVOLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQztZQUM1RCxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcdGkxOThcXGludmVzdG1lbnRfYW5hbHlzaXNfb3BvcG9cXHNyY1xcdXRpbHNcXF9fdGVzdHNfX1xcbWV0cmljcy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDbG91ZFdhdGNo44Oh44OI44Oq44Kv44K544OY44Or44OR44O844Gu44Om44OL44OD44OI44OG44K544OIXHJcbiAqXHJcbiAqIOODoeODiOODquOCr+OCuemAgeS/oeapn+iDveOBruWLleS9nOOCkuaknOiovOOBl+OBvuOBmeOAglxyXG4gKiBMYW1iZGHlrp/oo4Xjg4Hjgqfjg4Pjgq/jg6rjgrnjg4jjga7jgIzjgqjjg6njg7zjg6Hjg4jjg6rjgq/jgrnpgIHkv6HjgI3jgavlr77lv5zjgIJcclxuICpcclxuICogUmVxdWlyZW1lbnRzOiDopoHku7Y2LjTvvIjjgqjjg6njg7zjg6Hjg4jjg6rjgq/jgrnvvIlcclxuICovXHJcblxyXG5pbXBvcnQge1xyXG4gIHNlbmRNZXRyaWMsXHJcbiAgc2VuZEVycm9yTWV0cmljLFxyXG4gIHNlbmRTdWNjZXNzTWV0cmljLFxyXG4gIHNlbmRFeGVjdXRpb25UaW1lTWV0cmljLFxyXG4gIHNlbmRCYXRjaFJlc3VsdE1ldHJpY3MsXHJcbn0gZnJvbSAnLi4vbWV0cmljcyc7XHJcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciwgUmV0cnlhYmxlRXJyb3IgfSBmcm9tICcuLi8uLi9lcnJvcnMnO1xyXG5cclxuLy8gQVdTIFNESyB2M+OBruODouODg+OCr1xyXG5qZXN0Lm1vY2soJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJywgKCkgPT4ge1xyXG4gIGNvbnN0IG1vY2tTZW5kID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KTtcclxuICBcclxuICByZXR1cm4ge1xyXG4gICAgQ2xvdWRXYXRjaENsaWVudDogamVzdC5mbigoKSA9PiAoe1xyXG4gICAgICBzZW5kOiBtb2NrU2VuZCxcclxuICAgIH0pKSxcclxuICAgIFB1dE1ldHJpY0RhdGFDb21tYW5kOiBqZXN0LmZuKChwYXJhbXMpID0+IHBhcmFtcyksXHJcbiAgfTtcclxufSk7XHJcblxyXG5kZXNjcmliZSgnQ2xvdWRXYXRjaCBNZXRyaWNzJywgKCkgPT4ge1xyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdzZW5kTWV0cmljJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBzZW5kIG1ldHJpYyB3aXRoIGRlZmF1bHQgb3B0aW9ucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VuZE1ldHJpYygnVGVzdE1ldHJpYycsIDEpO1xyXG5cclxuICAgICAgY29uc3QgeyBDbG91ZFdhdGNoQ2xpZW50LCBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgY29uc3QgbW9ja0NsaWVudCA9IG5ldyBDbG91ZFdhdGNoQ2xpZW50KCk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QobW9ja0NsaWVudC5zZW5kKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XHJcbiAgICAgIGV4cGVjdChQdXRNZXRyaWNEYXRhQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgTmFtZXNwYWNlOiAnVERuZXREYXRhQ29sbGVjdG9yJyxcclxuICAgICAgICAgIE1ldHJpY0RhdGE6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xyXG4gICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgTWV0cmljTmFtZTogJ1Rlc3RNZXRyaWMnLFxyXG4gICAgICAgICAgICAgIFZhbHVlOiAxLFxyXG4gICAgICAgICAgICAgIFVuaXQ6ICdDb3VudCcsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2VuZCBtZXRyaWMgd2l0aCBjdXN0b20gbmFtZXNwYWNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZW5kTWV0cmljKCdUZXN0TWV0cmljJywgMSwge1xyXG4gICAgICAgIG5hbWVzcGFjZTogJ0N1c3RvbU5hbWVzcGFjZScsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChQdXRNZXRyaWNEYXRhQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgTmFtZXNwYWNlOiAnQ3VzdG9tTmFtZXNwYWNlJyxcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzZW5kIG1ldHJpYyB3aXRoIGRpbWVuc2lvbnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlbmRNZXRyaWMoJ1Rlc3RNZXRyaWMnLCAxLCB7XHJcbiAgICAgICAgZGltZW5zaW9uczogW1xyXG4gICAgICAgICAgeyBOYW1lOiAnRXJyb3JUeXBlJywgVmFsdWU6ICdWYWxpZGF0aW9uRXJyb3InIH0sXHJcbiAgICAgICAgICB7IE5hbWU6ICdGdW5jdGlvbk5hbWUnLCBWYWx1ZTogJ1Rlc3RGdW5jdGlvbicgfSxcclxuICAgICAgICBdLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHsgUHV0TWV0cmljRGF0YUNvbW1hbmQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoUHV0TWV0cmljRGF0YUNvbW1hbmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIE1ldHJpY0RhdGE6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xyXG4gICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgRGltZW5zaW9uczogW1xyXG4gICAgICAgICAgICAgICAgeyBOYW1lOiAnRXJyb3JUeXBlJywgVmFsdWU6ICdWYWxpZGF0aW9uRXJyb3InIH0sXHJcbiAgICAgICAgICAgICAgICB7IE5hbWU6ICdGdW5jdGlvbk5hbWUnLCBWYWx1ZTogJ1Rlc3RGdW5jdGlvbicgfSxcclxuICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNlbmQgbWV0cmljIHdpdGggY3VzdG9tIHVuaXQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlbmRNZXRyaWMoJ0V4ZWN1dGlvblRpbWUnLCAxMjM0LCB7XHJcbiAgICAgICAgdW5pdDogJ01pbGxpc2Vjb25kcycsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChQdXRNZXRyaWNEYXRhQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgTWV0cmljRGF0YTogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICBVbml0OiAnTWlsbGlzZWNvbmRzJyxcclxuICAgICAgICAgICAgICBWYWx1ZTogMTIzNCxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICBdKSxcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBub3QgdGhyb3cgZXJyb3Igb24gbWV0cmljIHNlbmQgZmFpbHVyZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgeyBDbG91ZFdhdGNoQ2xpZW50IH0gPSByZXF1aXJlKCdAYXdzLXNkay9jbGllbnQtY2xvdWR3YXRjaCcpO1xyXG4gICAgICBjb25zdCBtb2NrQ2xpZW50ID0gbmV3IENsb3VkV2F0Y2hDbGllbnQoKTtcclxuICAgICAgbW9ja0NsaWVudC5zZW5kLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKSk7XHJcblxyXG4gICAgICAvLyDjg6Hjg4jjg6rjgq/jgrnpgIHkv6HlpLHmlZfjgafjgoLjgqjjg6njg7zjgpLjgrnjg63jg7zjgZfjgarjgYRcclxuICAgICAgYXdhaXQgZXhwZWN0KHNlbmRNZXRyaWMoJ1Rlc3RNZXRyaWMnLCAxKSkucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnc2VuZEVycm9yTWV0cmljJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBzZW5kIGVycm9yIG1ldHJpYyB3aXRoIGVycm9yIHR5cGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IFZhbGlkYXRpb25FcnJvcignSW52YWxpZCBpbnB1dCcpO1xyXG4gICAgICBcclxuICAgICAgYXdhaXQgc2VuZEVycm9yTWV0cmljKGVycm9yKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgUHV0TWV0cmljRGF0YUNvbW1hbmQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoUHV0TWV0cmljRGF0YUNvbW1hbmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIE1ldHJpY0RhdGE6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xyXG4gICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgTWV0cmljTmFtZTogJ0xhbWJkYUVycm9yJyxcclxuICAgICAgICAgICAgICBWYWx1ZTogMSxcclxuICAgICAgICAgICAgICBEaW1lbnNpb25zOiBbXHJcbiAgICAgICAgICAgICAgICB7IE5hbWU6ICdFcnJvclR5cGUnLCBWYWx1ZTogJ1ZhbGlkYXRpb25FcnJvcicgfSxcclxuICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNlbmQgZXJyb3IgbWV0cmljIHdpdGggZnVuY3Rpb24gbmFtZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgUmV0cnlhYmxlRXJyb3IoJ05ldHdvcmsgZXJyb3InKTtcclxuICAgICAgXHJcbiAgICAgIGF3YWl0IHNlbmRFcnJvck1ldHJpYyhlcnJvciwgJ0NvbGxlY3RvckZ1bmN0aW9uJyk7XHJcblxyXG4gICAgICBjb25zdCB7IFB1dE1ldHJpY0RhdGFDb21tYW5kIH0gPSByZXF1aXJlKCdAYXdzLXNkay9jbGllbnQtY2xvdWR3YXRjaCcpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KFB1dE1ldHJpY0RhdGFDb21tYW5kKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICBNZXRyaWNEYXRhOiBleHBlY3QuYXJyYXlDb250YWluaW5nKFtcclxuICAgICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgICAgIERpbWVuc2lvbnM6IFtcclxuICAgICAgICAgICAgICAgIHsgTmFtZTogJ0Vycm9yVHlwZScsIFZhbHVlOiAnUmV0cnlhYmxlRXJyb3InIH0sXHJcbiAgICAgICAgICAgICAgICB7IE5hbWU6ICdGdW5jdGlvbk5hbWUnLCBWYWx1ZTogJ0NvbGxlY3RvckZ1bmN0aW9uJyB9LFxyXG4gICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHN0YW5kYXJkIEVycm9yIG9iamVjdHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdTdGFuZGFyZCBlcnJvcicpO1xyXG4gICAgICBcclxuICAgICAgYXdhaXQgc2VuZEVycm9yTWV0cmljKGVycm9yKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgUHV0TWV0cmljRGF0YUNvbW1hbmQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoUHV0TWV0cmljRGF0YUNvbW1hbmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIE1ldHJpY0RhdGE6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xyXG4gICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgRGltZW5zaW9uczogW1xyXG4gICAgICAgICAgICAgICAgeyBOYW1lOiAnRXJyb3JUeXBlJywgVmFsdWU6ICdFcnJvcicgfSxcclxuICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3NlbmRTdWNjZXNzTWV0cmljJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBzZW5kIHN1Y2Nlc3MgbWV0cmljIHdpdGhvdXQgZnVuY3Rpb24gbmFtZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VuZFN1Y2Nlc3NNZXRyaWMoKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgUHV0TWV0cmljRGF0YUNvbW1hbmQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoUHV0TWV0cmljRGF0YUNvbW1hbmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIE1ldHJpY0RhdGE6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xyXG4gICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgTWV0cmljTmFtZTogJ0xhbWJkYVN1Y2Nlc3MnLFxyXG4gICAgICAgICAgICAgIFZhbHVlOiAxLFxyXG4gICAgICAgICAgICAgIERpbWVuc2lvbnM6IFtdLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNlbmQgc3VjY2VzcyBtZXRyaWMgd2l0aCBmdW5jdGlvbiBuYW1lJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZW5kU3VjY2Vzc01ldHJpYygnQ29sbGVjdG9yRnVuY3Rpb24nKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgUHV0TWV0cmljRGF0YUNvbW1hbmQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoUHV0TWV0cmljRGF0YUNvbW1hbmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIE1ldHJpY0RhdGE6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xyXG4gICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgRGltZW5zaW9uczogW1xyXG4gICAgICAgICAgICAgICAgeyBOYW1lOiAnRnVuY3Rpb25OYW1lJywgVmFsdWU6ICdDb2xsZWN0b3JGdW5jdGlvbicgfSxcclxuICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3NlbmRFeGVjdXRpb25UaW1lTWV0cmljJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBzZW5kIGV4ZWN1dGlvbiB0aW1lIG1ldHJpYycsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VuZEV4ZWN1dGlvblRpbWVNZXRyaWMoMTIzNCk7XHJcblxyXG4gICAgICBjb25zdCB7IFB1dE1ldHJpY0RhdGFDb21tYW5kIH0gPSByZXF1aXJlKCdAYXdzLXNkay9jbGllbnQtY2xvdWR3YXRjaCcpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KFB1dE1ldHJpY0RhdGFDb21tYW5kKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICBNZXRyaWNEYXRhOiBleHBlY3QuYXJyYXlDb250YWluaW5nKFtcclxuICAgICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgICAgIE1ldHJpY05hbWU6ICdFeGVjdXRpb25UaW1lJyxcclxuICAgICAgICAgICAgICBWYWx1ZTogMTIzNCxcclxuICAgICAgICAgICAgICBVbml0OiAnTWlsbGlzZWNvbmRzJyxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICBdKSxcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzZW5kIGV4ZWN1dGlvbiB0aW1lIG1ldHJpYyB3aXRoIGZ1bmN0aW9uIG5hbWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlbmRFeGVjdXRpb25UaW1lTWV0cmljKDEyMzQsICdDb2xsZWN0b3JGdW5jdGlvbicpO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChQdXRNZXRyaWNEYXRhQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgTWV0cmljRGF0YTogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICBEaW1lbnNpb25zOiBbXHJcbiAgICAgICAgICAgICAgICB7IE5hbWU6ICdGdW5jdGlvbk5hbWUnLCBWYWx1ZTogJ0NvbGxlY3RvckZ1bmN0aW9uJyB9LFxyXG4gICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnc2VuZEJhdGNoUmVzdWx0TWV0cmljcycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgc2VuZCBiYXRjaCBzdWNjZXNzIGFuZCBmYWlsZWQgbWV0cmljcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VuZEJhdGNoUmVzdWx0TWV0cmljcyg5NSwgNSk7XHJcblxyXG4gICAgICBjb25zdCB7IENsb3VkV2F0Y2hDbGllbnQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIGNvbnN0IG1vY2tDbGllbnQgPSBuZXcgQ2xvdWRXYXRjaENsaWVudCgpO1xyXG4gICAgICBcclxuICAgICAgLy8gMuWbnuWRvOOBsOOCjOOCi++8iHN1Y2Nlc3MgKyBmYWlsZWTvvIlcclxuICAgICAgZXhwZWN0KG1vY2tDbGllbnQuc2VuZCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzZW5kIGJhdGNoIG1ldHJpY3Mgd2l0aCBmdW5jdGlvbiBuYW1lJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZW5kQmF0Y2hSZXN1bHRNZXRyaWNzKDk1LCA1LCAnQ29sbGVjdG9yRnVuY3Rpb24nKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgUHV0TWV0cmljRGF0YUNvbW1hbmQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBCYXRjaFN1Y2Nlc3PjgahCYXRjaEZhaWxlZOOBruS4oeaWueOBjOmAgeS/oeOBleOCjOOCi1xyXG4gICAgICBjb25zdCBjYWxscyA9IFB1dE1ldHJpY0RhdGFDb21tYW5kLm1vY2suY2FsbHM7XHJcbiAgICAgIGV4cGVjdChjYWxscy5sZW5ndGgpLnRvQmUoMik7XHJcbiAgICAgIFxyXG4gICAgICAvLyDlkITlkbzjgbPlh7rjgZfjgatGdW5jdGlvbk5hbWXjg4fjgqPjg6Hjg7Pjgrfjg6fjg7PjgYzlkKvjgb7jgozjgotcclxuICAgICAgY2FsbHMuZm9yRWFjaCgoY2FsbDogYW55KSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KGNhbGxbMF0uTWV0cmljRGF0YVswXS5EaW1lbnNpb25zKS50b0NvbnRhaW5FcXVhbCh7XHJcbiAgICAgICAgICBOYW1lOiAnRnVuY3Rpb25OYW1lJyxcclxuICAgICAgICAgIFZhbHVlOiAnQ29sbGVjdG9yRnVuY3Rpb24nLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2VuZCBjb3JyZWN0IHZhbHVlcyBmb3Igc3VjY2VzcyBhbmQgZmFpbGVkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZW5kQmF0Y2hSZXN1bHRNZXRyaWNzKDk1LCA1KTtcclxuXHJcbiAgICAgIGNvbnN0IHsgUHV0TWV0cmljRGF0YUNvbW1hbmQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBjYWxscyA9IFB1dE1ldHJpY0RhdGFDb21tYW5kLm1vY2suY2FsbHM7XHJcbiAgICAgIFxyXG4gICAgICAvLyBCYXRjaFN1Y2Nlc3Pjg6Hjg4jjg6rjgq/jgrlcclxuICAgICAgY29uc3Qgc3VjY2Vzc0NhbGwgPSBjYWxscy5maW5kKFxyXG4gICAgICAgIChjYWxsOiBhbnkpID0+IGNhbGxbMF0uTWV0cmljRGF0YVswXS5NZXRyaWNOYW1lID09PSAnQmF0Y2hTdWNjZXNzJ1xyXG4gICAgICApO1xyXG4gICAgICBleHBlY3Qoc3VjY2Vzc0NhbGxbMF0uTWV0cmljRGF0YVswXS5WYWx1ZSkudG9CZSg5NSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBCYXRjaEZhaWxlZOODoeODiOODquOCr+OCuVxyXG4gICAgICBjb25zdCBmYWlsZWRDYWxsID0gY2FsbHMuZmluZChcclxuICAgICAgICAoY2FsbDogYW55KSA9PiBjYWxsWzBdLk1ldHJpY0RhdGFbMF0uTWV0cmljTmFtZSA9PT0gJ0JhdGNoRmFpbGVkJ1xyXG4gICAgICApO1xyXG4gICAgICBleHBlY3QoZmFpbGVkQ2FsbFswXS5NZXRyaWNEYXRhWzBdLlZhbHVlKS50b0JlKDUpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdMYW1iZGEgSW50ZWdyYXRpb24gRXhhbXBsZScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgZGVtb25zdHJhdGUgY29tcGxldGUgTGFtYmRhIGVycm9yIGhhbmRsaW5nIHdpdGggbWV0cmljcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gTGFtYmRh5a6f6KOF44OB44Kn44OD44Kv44Oq44K544OI44Gr5rqW5oug44GX44Gf5a6f6KOF5L6LXHJcbiAgICAgIGNvbnN0IG1vY2tIYW5kbGVyID0gYXN5bmMgKF9ldmVudDogYW55LCBjb250ZXh0OiBhbnkpID0+IHtcclxuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAvLyDjg6HjgqTjg7Plh6bnkIbvvIjmiJDlip/vvIlcclxuICAgICAgICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUgfSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIOaIkOWKn+ODoeODiOODquOCr+OCuemAgeS/oVxyXG4gICAgICAgICAgYXdhaXQgc2VuZFN1Y2Nlc3NNZXRyaWMoY29udGV4dC5mdW5jdGlvbk5hbWUpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyDlrp/ooYzmmYLplpPjg6Hjg4jjg6rjgq/jgrnpgIHkv6FcclxuICAgICAgICAgIGNvbnN0IGV4ZWN1dGlvblRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xyXG4gICAgICAgICAgYXdhaXQgc2VuZEV4ZWN1dGlvblRpbWVNZXRyaWMoZXhlY3V0aW9uVGltZSwgY29udGV4dC5mdW5jdGlvbk5hbWUpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICByZXR1cm4geyBzdGF0dXNDb2RlOiAyMDAsIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgc3VjY2VzczogdHJ1ZSB9KSB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAvLyDjgqjjg6njg7zjg6Hjg4jjg6rjgq/jgrnpgIHkv6FcclxuICAgICAgICAgIGF3YWl0IHNlbmRFcnJvck1ldHJpYyhlcnJvciBhcyBFcnJvciwgY29udGV4dC5mdW5jdGlvbk5hbWUpO1xyXG4gICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgbW9ja0NvbnRleHQgPSB7XHJcbiAgICAgICAgZnVuY3Rpb25OYW1lOiAnVGVzdEZ1bmN0aW9uJyxcclxuICAgICAgICByZXF1ZXN0SWQ6ICd0ZXN0LXJlcXVlc3QtaWQnLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgYXdhaXQgbW9ja0hhbmRsZXIoe30sIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIGNvbnN0IHsgQ2xvdWRXYXRjaENsaWVudCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgY29uc3QgbW9ja0NsaWVudCA9IG5ldyBDbG91ZFdhdGNoQ2xpZW50KCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyDmiJDlip/jg6Hjg4jjg6rjgq/jgrnjgajlrp/ooYzmmYLplpPjg6Hjg4jjg6rjgq/jgrnjgYzpgIHkv6HjgZXjgozjgotcclxuICAgICAgZXhwZWN0KG1vY2tDbGllbnQuc2VuZCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBkZW1vbnN0cmF0ZSBiYXRjaCBwcm9jZXNzaW5nIHdpdGggbWV0cmljcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDAgfSwgKF8sIGkpID0+ICh7IGlkOiBpIH0pKTtcclxuICAgICAgbGV0IHN1Y2Nlc3MgPSAwO1xyXG4gICAgICBsZXQgZmFpbGVkID0gMDtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgX2l0ZW0gb2YgaXRlbXMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgLy8gNSXjga7norrnjofjgaflpLHmlZdcclxuICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4wNSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JhbmRvbSBmYWlsdXJlJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBzdWNjZXNzKys7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGZhaWxlZCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g44OQ44OD44OB57WQ5p6c44Oh44OI44Oq44Kv44K56YCB5L+hXHJcbiAgICAgIGF3YWl0IHNlbmRCYXRjaFJlc3VsdE1ldHJpY3Moc3VjY2VzcywgZmFpbGVkLCAnQmF0Y2hGdW5jdGlvbicpO1xyXG5cclxuICAgICAgY29uc3QgeyBDbG91ZFdhdGNoQ2xpZW50IH0gPSByZXF1aXJlKCdAYXdzLXNkay9jbGllbnQtY2xvdWR3YXRjaCcpO1xyXG4gICAgICBjb25zdCBtb2NrQ2xpZW50ID0gbmV3IENsb3VkV2F0Y2hDbGllbnQoKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChtb2NrQ2xpZW50LnNlbmQpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnc2VuZERpc2Nsb3N1cmVzQ29sbGVjdGVkTWV0cmljJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBzZW5kIGRpc2Nsb3N1cmVzIGNvbGxlY3RlZCBtZXRyaWMgd2l0aG91dCBmdW5jdGlvbiBuYW1lJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZW5kRGlzY2xvc3VyZXNDb2xsZWN0ZWRNZXRyaWMoMTUwKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgUHV0TWV0cmljRGF0YUNvbW1hbmQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoUHV0TWV0cmljRGF0YUNvbW1hbmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIE1ldHJpY0RhdGE6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xyXG4gICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgTWV0cmljTmFtZTogJ0Rpc2Nsb3N1cmVzQ29sbGVjdGVkJyxcclxuICAgICAgICAgICAgICBWYWx1ZTogMTUwLFxyXG4gICAgICAgICAgICAgIERpbWVuc2lvbnM6IFtdLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNlbmQgZGlzY2xvc3VyZXMgY29sbGVjdGVkIG1ldHJpYyB3aXRoIGZ1bmN0aW9uIG5hbWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlbmREaXNjbG9zdXJlc0NvbGxlY3RlZE1ldHJpYygxNTAsICdDb2xsZWN0b3JGdW5jdGlvbicpO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChQdXRNZXRyaWNEYXRhQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgTWV0cmljRGF0YTogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICBNZXRyaWNOYW1lOiAnRGlzY2xvc3VyZXNDb2xsZWN0ZWQnLFxyXG4gICAgICAgICAgICAgIFZhbHVlOiAxNTAsXHJcbiAgICAgICAgICAgICAgRGltZW5zaW9uczogW1xyXG4gICAgICAgICAgICAgICAgeyBOYW1lOiAnRnVuY3Rpb25OYW1lJywgVmFsdWU6ICdDb2xsZWN0b3JGdW5jdGlvbicgfSxcclxuICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3NlbmREaXNjbG9zdXJlc0ZhaWxlZE1ldHJpYycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgc2VuZCBkaXNjbG9zdXJlcyBmYWlsZWQgbWV0cmljIHdpdGhvdXQgZnVuY3Rpb24gbmFtZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VuZERpc2Nsb3N1cmVzRmFpbGVkTWV0cmljKDUpO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChQdXRNZXRyaWNEYXRhQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgTWV0cmljRGF0YTogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICBNZXRyaWNOYW1lOiAnRGlzY2xvc3VyZXNGYWlsZWQnLFxyXG4gICAgICAgICAgICAgIFZhbHVlOiA1LFxyXG4gICAgICAgICAgICAgIERpbWVuc2lvbnM6IFtdLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNlbmQgZGlzY2xvc3VyZXMgZmFpbGVkIG1ldHJpYyB3aXRoIGZ1bmN0aW9uIG5hbWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlbmREaXNjbG9zdXJlc0ZhaWxlZE1ldHJpYyg1LCAnQ29sbGVjdG9yRnVuY3Rpb24nKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgUHV0TWV0cmljRGF0YUNvbW1hbmQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoUHV0TWV0cmljRGF0YUNvbW1hbmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIE1ldHJpY0RhdGE6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xyXG4gICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgTWV0cmljTmFtZTogJ0Rpc2Nsb3N1cmVzRmFpbGVkJyxcclxuICAgICAgICAgICAgICBWYWx1ZTogNSxcclxuICAgICAgICAgICAgICBEaW1lbnNpb25zOiBbXHJcbiAgICAgICAgICAgICAgICB7IE5hbWU6ICdGdW5jdGlvbk5hbWUnLCBWYWx1ZTogJ0NvbGxlY3RvckZ1bmN0aW9uJyB9LFxyXG4gICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnc2VuZENvbGxlY3Rpb25TdWNjZXNzUmF0ZU1ldHJpYycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgc2VuZCBjb2xsZWN0aW9uIHN1Y2Nlc3MgcmF0ZSBtZXRyaWMgd2l0aG91dCBmdW5jdGlvbiBuYW1lJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZW5kQ29sbGVjdGlvblN1Y2Nlc3NSYXRlTWV0cmljKDk2Ljc3KTtcclxuXHJcbiAgICAgIGNvbnN0IHsgUHV0TWV0cmljRGF0YUNvbW1hbmQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoUHV0TWV0cmljRGF0YUNvbW1hbmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIE1ldHJpY0RhdGE6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xyXG4gICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgTWV0cmljTmFtZTogJ0NvbGxlY3Rpb25TdWNjZXNzUmF0ZScsXHJcbiAgICAgICAgICAgICAgVmFsdWU6IDk2Ljc3LFxyXG4gICAgICAgICAgICAgIFVuaXQ6ICdDb3VudCcsXHJcbiAgICAgICAgICAgICAgRGltZW5zaW9uczogW10sXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2VuZCBjb2xsZWN0aW9uIHN1Y2Nlc3MgcmF0ZSBtZXRyaWMgd2l0aCBmdW5jdGlvbiBuYW1lJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZW5kQ29sbGVjdGlvblN1Y2Nlc3NSYXRlTWV0cmljKDk2Ljc3LCAnQ29sbGVjdG9yRnVuY3Rpb24nKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgUHV0TWV0cmljRGF0YUNvbW1hbmQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoUHV0TWV0cmljRGF0YUNvbW1hbmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIE1ldHJpY0RhdGE6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xyXG4gICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgTWV0cmljTmFtZTogJ0NvbGxlY3Rpb25TdWNjZXNzUmF0ZScsXHJcbiAgICAgICAgICAgICAgVmFsdWU6IDk2Ljc3LFxyXG4gICAgICAgICAgICAgIFVuaXQ6ICdDb3VudCcsXHJcbiAgICAgICAgICAgICAgRGltZW5zaW9uczogW1xyXG4gICAgICAgICAgICAgICAgeyBOYW1lOiAnRnVuY3Rpb25OYW1lJywgVmFsdWU6ICdDb2xsZWN0b3JGdW5jdGlvbicgfSxcclxuICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSAxMDAlIHN1Y2Nlc3MgcmF0ZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VuZENvbGxlY3Rpb25TdWNjZXNzUmF0ZU1ldHJpYygxMDAsICdDb2xsZWN0b3JGdW5jdGlvbicpO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChQdXRNZXRyaWNEYXRhQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgTWV0cmljRGF0YTogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICBWYWx1ZTogMTAwLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSAwJSBzdWNjZXNzIHJhdGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlbmRDb2xsZWN0aW9uU3VjY2Vzc1JhdGVNZXRyaWMoMCwgJ0NvbGxlY3RvckZ1bmN0aW9uJyk7XHJcblxyXG4gICAgICBjb25zdCB7IFB1dE1ldHJpY0RhdGFDb21tYW5kIH0gPSByZXF1aXJlKCdAYXdzLXNkay9jbGllbnQtY2xvdWR3YXRjaCcpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KFB1dE1ldHJpY0RhdGFDb21tYW5kKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICBNZXRyaWNEYXRhOiBleHBlY3QuYXJyYXlDb250YWluaW5nKFtcclxuICAgICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgICAgIFZhbHVlOiAwLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0N1c3RvbSBNZXRyaWNzIEludGVncmF0aW9uIEV4YW1wbGUnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGRlbW9uc3RyYXRlIGNvbXBsZXRlIGNvbGxlY3Rpb24gbWV0cmljcyB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8g5Y+O6ZuG57WQ5p6c44Gu44K344Of44Ol44Os44O844K344On44OzXHJcbiAgICAgIGNvbnN0IGNvbGxlY3RlZENvdW50ID0gMTUwO1xyXG4gICAgICBjb25zdCBmYWlsZWRDb3VudCA9IDU7XHJcbiAgICAgIGNvbnN0IHRvdGFsQ291bnQgPSBjb2xsZWN0ZWRDb3VudCArIGZhaWxlZENvdW50O1xyXG4gICAgICBjb25zdCBzdWNjZXNzUmF0ZSA9IChjb2xsZWN0ZWRDb3VudCAvIHRvdGFsQ291bnQpICogMTAwO1xyXG5cclxuICAgICAgLy8g44Kr44K544K/44Og44Oh44OI44Oq44Kv44K544KS6YCB5L+hXHJcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICBzZW5kRGlzY2xvc3VyZXNDb2xsZWN0ZWRNZXRyaWMoY29sbGVjdGVkQ291bnQsICdDb2xsZWN0b3JGdW5jdGlvbicpLFxyXG4gICAgICAgIHNlbmREaXNjbG9zdXJlc0ZhaWxlZE1ldHJpYyhmYWlsZWRDb3VudCwgJ0NvbGxlY3RvckZ1bmN0aW9uJyksXHJcbiAgICAgICAgc2VuZENvbGxlY3Rpb25TdWNjZXNzUmF0ZU1ldHJpYyhzdWNjZXNzUmF0ZSwgJ0NvbGxlY3RvckZ1bmN0aW9uJyksXHJcbiAgICAgIF0pO1xyXG5cclxuICAgICAgY29uc3QgeyBDbG91ZFdhdGNoQ2xpZW50IH0gPSByZXF1aXJlKCdAYXdzLXNkay9jbGllbnQtY2xvdWR3YXRjaCcpO1xyXG4gICAgICBjb25zdCBtb2NrQ2xpZW50ID0gbmV3IENsb3VkV2F0Y2hDbGllbnQoKTtcclxuICAgICAgXHJcbiAgICAgIC8vIDPjgaTjga7jg6Hjg4jjg6rjgq/jgrnjgYzpgIHkv6HjgZXjgozjgotcclxuICAgICAgZXhwZWN0KG1vY2tDbGllbnQuc2VuZCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgc3VjY2VzcyByYXRlIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdGVzdENhc2VzID0gW1xyXG4gICAgICAgIHsgY29sbGVjdGVkOiAxMDAsIGZhaWxlZDogMCwgZXhwZWN0ZWRSYXRlOiAxMDAgfSxcclxuICAgICAgICB7IGNvbGxlY3RlZDogOTUsIGZhaWxlZDogNSwgZXhwZWN0ZWRSYXRlOiA5NSB9LFxyXG4gICAgICAgIHsgY29sbGVjdGVkOiAxNTAsIGZhaWxlZDogNSwgZXhwZWN0ZWRSYXRlOiA5Ni43NzQxOTM1NDgzODcxMCB9LFxyXG4gICAgICAgIHsgY29sbGVjdGVkOiAwLCBmYWlsZWQ6IDEwLCBleHBlY3RlZFJhdGU6IDAgfSxcclxuICAgICAgXTtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgdGVzdENhc2Ugb2YgdGVzdENhc2VzKSB7XHJcbiAgICAgICAgY29uc3QgdG90YWxDb3VudCA9IHRlc3RDYXNlLmNvbGxlY3RlZCArIHRlc3RDYXNlLmZhaWxlZDtcclxuICAgICAgICBjb25zdCBzdWNjZXNzUmF0ZSA9IHRvdGFsQ291bnQgPiAwIFxyXG4gICAgICAgICAgPyAodGVzdENhc2UuY29sbGVjdGVkIC8gdG90YWxDb3VudCkgKiAxMDAgXHJcbiAgICAgICAgICA6IDA7XHJcblxyXG4gICAgICAgIGV4cGVjdChzdWNjZXNzUmF0ZSkudG9CZUNsb3NlVG8odGVzdENhc2UuZXhwZWN0ZWRSYXRlLCAyKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=