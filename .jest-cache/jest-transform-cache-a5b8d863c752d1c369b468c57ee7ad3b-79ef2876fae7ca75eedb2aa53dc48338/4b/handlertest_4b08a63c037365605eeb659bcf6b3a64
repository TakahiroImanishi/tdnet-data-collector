78363170c3cf6b1707c094c20a1625fc
"use strict";
/**
* Lambda Collect Handler Tests
*
* POST /collect エンド�Eイント�EユニットテスチE
*/
Object.defineProperty(exports, "__esModule", { value: true });
const handler_1 = require("../handler");
const client_lambda_1 = require("@aws-sdk/client-lambda");
const client_secrets_manager_1 = require("@aws-sdk/client-secrets-manager");
const aws_sdk_client_mock_1 = require("aws-sdk-client-mock");
// AWS SDK Mocks
const lambdaMock = (0, aws_sdk_client_mock_1.mockClient)(client_lambda_1.LambdaClient);
const secretsMock = (0, aws_sdk_client_mock_1.mockClient)(client_secrets_manager_1.SecretsManagerClient);
// Mock Context
const mockContext = {
    callbackWaitsForEmptyEventLoop: false,
    functionName: 'tdnet-collect',
    functionVersion: '1',
    invokedFunctionArn: 'arn:aws:lambda:ap-northeast-1:123456789012:function:tdnet-collect',
    memoryLimitInMB: '256',
    awsRequestId: 'test-request-id-12345',
    logGroupName: '/aws/lambda/tdnet-collect',
    logStreamName: '2024/01/15/[$LATEST]abcdef',
    getRemainingTimeInMillis: () => 30000,
    done: () => { },
    fail: () => { },
    succeed: () => { },
};
/**
 * チE��ト用の日付を動的に生�E
 * 現在日から相対皁E��日付を返すことで、テストが常に有効な日付篁E��を使用できるようにする
 */
const getTestDates = () => {
    const today = new Date();
    const startDate = new Date(today);
    startDate.setDate(startDate.getDate() - 7); // 7日剁E
    const endDate = new Date(today);
    endDate.setDate(endDate.getDate() - 2); // 2日剁E
    return {
        start_date: startDate.toISOString().split('T')[0],
        end_date: endDate.toISOString().split('T')[0],
    };
};
/**
 * 持E��日数前�E日付を取征E
 */
const getDaysAgo = (days) => {
    const date = new Date();
    date.setDate(date.getDate() - days);
    return date.toISOString().split('T')[0];
};
/**
 * 持E��日数後�E日付を取征E
 */
const getDaysLater = (days) => {
    const date = new Date();
    date.setDate(date.getDate() + days);
    return date.toISOString().split('T')[0];
};
/**
 * テスト用のAPIGatewayProxyEventを作成
 */
const createTestEvent = (body, apiKey = 'test-api-key-12345') => {
    return {
        body: body === null ? null : JSON.stringify(body),
        headers: {
            'x-api-key': apiKey,
        },
        multiValueHeaders: {},
        httpMethod: 'POST',
        isBase64Encoded: false,
        path: '/collect',
        pathParameters: null,
        queryStringParameters: null,
        multiValueQueryStringParameters: null,
        stageVariables: null,
        requestContext: {},
        resource: '',
    };
};
describe('POST /collect Handler', () => {
    beforeEach(() => {
        lambdaMock.reset();
        secretsMock.reset();
        // Secrets Managerのモック設定（APIキーを返す）
        secretsMock.on(client_secrets_manager_1.GetSecretValueCommand).resolves({
            SecretString: 'test-api-key-12345',
        });
        process.env.COLLECTOR_FUNCTION_NAME = 'tdnet-collector';
        process.env.AWS_REGION = 'ap-northeast-1';
        process.env.API_KEY_SECRET_ARN = 'arn:aws:secretsmanager:ap-northeast-1:123456789012:secret:tdnet-api-key';
        // APIキーキャッシュをクリア（テスト間の影響を防ぐ）
        // Note: キャッシュはモジュールスコープにあるため、直接アクセスできない
        // 代わりに、各テストで新しいAPIキーを使用するか、TEST_ENVを設定する
        delete process.env.TEST_ENV;
        delete process.env.API_KEY;
    });
    afterEach(() => {
        delete process.env.COLLECTOR_FUNCTION_NAME;
        delete process.env.AWS_REGION;
        delete process.env.API_KEY_SECRET_ARN;
        delete process.env.TEST_ENV;
        delete process.env.API_KEY;
    });
    describe('正常系', () => {
        it('有効なリクエストで200を返す', async () => {
            // Lambda Collectorの呼び出しをモチE���E�同期呼び出し！E
            const mockCollectorResponse = {
                execution_id: 'exec_1234567890_abc123_test1234',
                status: 'success',
                message: 'Collection started',
                collected_count: 0,
                failed_count: 0,
            };
            lambdaMock.on(client_lambda_1.InvokeCommand).resolves({
                StatusCode: 200,
                Payload: Buffer.from(JSON.stringify(mockCollectorResponse)),
            });
            const testDates = getTestDates();
            const event = createTestEvent(testDates);
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(200);
            expect(result.headers?.['Content-Type']).toBe('application/json');
            expect(result.headers?.['Access-Control-Allow-Origin']).toBe('*');
            const body = JSON.parse(result.body);
            expect(body.status).toBe('success');
            expect(body.data).toHaveProperty('execution_id');
            expect(body.data).toHaveProperty('status', 'pending');
            expect(body.data).toHaveProperty('message');
            expect(body.data).toHaveProperty('started_at');
        });
        it('Lambda Collectorから返されたexecution_idを使用する', async () => {
            const mockCollectorResponse = {
                execution_id: 'exec_1234567890_abc123_test1234',
                status: 'success',
                message: 'Collection started',
                collected_count: 0,
                failed_count: 0,
            };
            lambdaMock.on(client_lambda_1.InvokeCommand).resolves({
                StatusCode: 200,
                Payload: Buffer.from(JSON.stringify(mockCollectorResponse)),
            });
            const testDates = getTestDates();
            const event = createTestEvent(testDates);
            const result = await (0, handler_1.handler)(event, mockContext);
            const body = JSON.parse(result.body);
            // Lambda Collectorから返されたexecution_idが使用されてぁE��ことを確誁E
            expect(body.data.execution_id).toBe('exec_1234567890_abc123_test1234');
        });
        it('Lambda呼び出しがRequestResponseモードで実行される', async () => {
            const mockCollectorResponse = {
                execution_id: 'exec_1234567890_abc123_test1234',
                status: 'success',
                message: 'Collection started',
                collected_count: 0,
                failed_count: 0,
            };
            lambdaMock.on(client_lambda_1.InvokeCommand).resolves({
                StatusCode: 200,
                Payload: Buffer.from(JSON.stringify(mockCollectorResponse)),
            });
            const testDates = getTestDates();
            const event = createTestEvent(testDates);
            await (0, handler_1.handler)(event, mockContext);
            // InvokeCommandが正しいパラメータで呼ばれたことを確認
            const calls = lambdaMock.commandCalls(client_lambda_1.InvokeCommand);
            expect(calls.length).toBe(1);
            expect(calls[0].args[0].input.InvocationType).toBe('RequestResponse');
            expect(calls[0].args[0].input.FunctionName).toBe('test-collector-function');
        });
    });
    describe('バリチE�Eションエラー', () => {
        it('リクエスト�EチE��がなぁE��合�E400を返す', async () => {
            const event = createTestEvent(null);
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('Request body is required');
        });
        it('start_dateがなぁE��合�E400を返す', async () => {
            const event = {
                body: JSON.stringify({
                    end_date: getDaysAgo(2),
                }),
                headers: {
                    'x-api-key': 'test-api-key-12345',
                },
                multiValueHeaders: {},
                httpMethod: 'POST',
                isBase64Encoded: false,
                path: '/collect',
                pathParameters: null,
                queryStringParameters: null,
                multiValueQueryStringParameters: null,
                stageVariables: null,
                requestContext: {},
                resource: '',
            };
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('start_date is required');
        });
        it('end_dateがなぁE��合�E400を返す', async () => {
            const event = {
                body: JSON.stringify({
                    start_date: getDaysAgo(7),
                }),
                headers: {
                    'x-api-key': 'test-api-key-12345',
                },
                multiValueHeaders: {},
                httpMethod: 'POST',
                isBase64Encoded: false,
                path: '/collect',
                pathParameters: null,
                queryStringParameters: null,
                multiValueQueryStringParameters: null,
                stageVariables: null,
                requestContext: {},
                resource: '',
            };
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('end_date is required');
        });
        it('start_dateのフォーマットが不正な場合�E400を返す', async () => {
            const event = {
                body: JSON.stringify({
                    start_date: '2024/01/15', // 不正なフォーマッチE
                    end_date: getDaysAgo(2),
                }),
                headers: {
                    'x-api-key': 'test-api-key-12345',
                },
                multiValueHeaders: {},
                httpMethod: 'POST',
                isBase64Encoded: false,
                path: '/collect',
                pathParameters: null,
                queryStringParameters: null,
                multiValueQueryStringParameters: null,
                stageVariables: null,
                requestContext: {},
                resource: '',
            };
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('Invalid start_date format');
        });
        it('start_dateが存在しなぁE��付�E場合�E400を返す', async () => {
            // 存在しなぁE��付を使用�E�E朁E0日は存在しなぁE��E
            // ただし、E年以冁E�E日付を使用する忁E��がある
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth() + 1; // 現在の朁E
            const event = createTestEvent({
                start_date: `${year}-02-30`, // 2朁E0日は存在しなぁE
                end_date: `${year}-03-01`,
            });
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            // 日付�E整合性チェチE��で無効な日付を検�E
            expect(body.error.message).toContain('Invalid start_date');
        });
        it('start_dateがend_dateより後�E場合�E400を返す', async () => {
            const event = {
                body: JSON.stringify({
                    start_date: getDaysAgo(2),
                    end_date: getDaysAgo(7),
                }),
                headers: {
                    'x-api-key': 'test-api-key-12345',
                },
                multiValueHeaders: {},
                httpMethod: 'POST',
                isBase64Encoded: false,
                path: '/collect',
                pathParameters: null,
                queryStringParameters: null,
                multiValueQueryStringParameters: null,
                stageVariables: null,
                requestContext: {},
                resource: '',
            };
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('must be before or equal to');
        });
        it('start_dateぁE年以上前の場合�E400を返す', async () => {
            const twoYearsAgo = getDaysAgo(730); // 2年剁E
            const event = {
                body: JSON.stringify({
                    start_date: twoYearsAgo,
                    end_date: getDaysAgo(2),
                }),
                headers: {
                    'x-api-key': 'test-api-key-12345',
                },
                multiValueHeaders: {},
                httpMethod: 'POST',
                isBase64Encoded: false,
                path: '/collect',
                pathParameters: null,
                queryStringParameters: null,
                multiValueQueryStringParameters: null,
                stageVariables: null,
                requestContext: {},
                resource: '',
            };
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('too old');
        });
        it('end_dateが未来日の場合�E400を返す', async () => {
            const twoDaysLater = getDaysLater(2); // 2日征E
            const event = {
                body: JSON.stringify({
                    start_date: getDaysAgo(7),
                    end_date: twoDaysLater,
                }),
                headers: {
                    'x-api-key': 'test-api-key-12345',
                },
                multiValueHeaders: {},
                httpMethod: 'POST',
                isBase64Encoded: false,
                path: '/collect',
                pathParameters: null,
                queryStringParameters: null,
                multiValueQueryStringParameters: null,
                stageVariables: null,
                requestContext: {},
                resource: '',
            };
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('cannot be in the future');
        });
    });
    describe('Lambda呼び出しエラー', () => {
        it('Lambda Collectorの呼び出しに失敗した場合�E500を返す', async () => {
            lambdaMock.on(client_lambda_1.InvokeCommand).rejects(new Error('Lambda invocation failed'));
            const testDates = getTestDates();
            const event = createTestEvent(testDates);
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(500);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('INTERNAL_ERROR');
            expect(body.error.message).toContain('Failed to start data collection');
        });
        it('Lambda Collectorが空のPayloadを返した場合�E500を返す', async () => {
            lambdaMock.on(client_lambda_1.InvokeCommand).resolves({
                StatusCode: 200,
                Payload: undefined,
            });
            const testDates = getTestDates();
            const event = createTestEvent(testDates);
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(500);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('INTERNAL_ERROR');
        });
        it('Lambda Collectorがexecution_idを返さなぁE��合�E500を返す', async () => {
            const mockCollectorResponse = {
                status: 'success',
                message: 'Collection started',
                collected_count: 0,
                failed_count: 0,
                // execution_idがなぁE
            };
            lambdaMock.on(client_lambda_1.InvokeCommand).resolves({
                StatusCode: 200,
                Payload: Buffer.from(JSON.stringify(mockCollectorResponse)),
            });
            const testDates = getTestDates();
            const event = createTestEvent(testDates);
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(500);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('INTERNAL_ERROR');
        });
    });
    describe('APIキー認証エラー', () => {
        it('APIキーヘッダーがない場合は401を返す', async () => {
            const testDates = getTestDates();
            const event = createTestEvent(testDates, '');
            delete event.headers['x-api-key'];
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('UNAUTHORIZED');
            expect(body.error.message).toContain('API key is required');
        });
        it('無効なAPIキーの場合は401を返す', async () => {
            const testDates = getTestDates();
            const event = createTestEvent(testDates, 'invalid-api-key');
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('UNAUTHORIZED');
            expect(body.error.message).toContain('Invalid API key');
        });
        it('Secrets Manager取得エラーの場合は401を返す', async () => {
            // キャッシュをクリアするために、異なるAPIキーを使用
            // これにより、キャッシュされたAPIキーと一致しなくなり、Secrets Managerが呼び出される
            const testDates = getTestDates();
            const event = createTestEvent(testDates, 'different-api-key-to-bypass-cache');
            // Secrets Managerのモックを完全にリセットして、エラーを発生させる
            secretsMock.reset();
            secretsMock.on(client_secrets_manager_1.GetSecretValueCommand).rejects(new Error('Secrets Manager error'));
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('UNAUTHORIZED');
            // Secrets Manager取得エラーの場合は"Failed to retrieve API key"が返される
            expect(body.error.message).toContain('Failed to retrieve API key');
        });
        it('Secrets ManagerがSecretStringを返さない場合は401を返す', async () => {
            // キャッシュをクリアするために、異なるAPIキーを使用
            const testDates = getTestDates();
            const event = createTestEvent(testDates, 'another-different-api-key');
            // Secrets Managerのモックをリセットして空のレスポンスを返す
            secretsMock.reset();
            secretsMock.on(client_secrets_manager_1.GetSecretValueCommand).resolves({
                SecretString: undefined,
            });
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('UNAUTHORIZED');
            // SecretStringが空の場合は"Failed to retrieve API key"が返される
            expect(body.error.message).toContain('Failed to retrieve API key');
        });
        it('API_KEY_SECRET_ARN環境変数が設定されていない場合は401を返す', async () => {
            const originalArn = process.env.API_KEY_SECRET_ARN;
            delete process.env.API_KEY_SECRET_ARN;
            // キャッシュをクリアするために、異なるAPIキーを使用
            const testDates = getTestDates();
            const event = createTestEvent(testDates, 'yet-another-different-api-key');
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('UNAUTHORIZED');
            // API_KEY_SECRET_ARNが未設定の場合は"Failed to retrieve API key"が返される
            expect(body.error.message).toContain('Failed to retrieve API key');
            // 環境変数を復元
            if (originalArn) {
                process.env.API_KEY_SECRET_ARN = originalArn;
            }
        });
    });
    describe('バリデーションエラー（追加）', () => {
        it('end_dateのフォーマットが不正な場合は400を返す', async () => {
            const event = {
                body: JSON.stringify({
                    start_date: getDaysAgo(7),
                    end_date: '2024/01/15', // 不正なフォーマット
                }),
                headers: {
                    'x-api-key': 'test-api-key-12345',
                },
                multiValueHeaders: {},
                httpMethod: 'POST',
                isBase64Encoded: false,
                path: '/collect',
                pathParameters: null,
                queryStringParameters: null,
                multiValueQueryStringParameters: null,
                stageVariables: null,
                requestContext: {},
                resource: '',
            };
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('Invalid end_date format');
        });
        it('end_dateが存在しない日付の場合は400を返す', async () => {
            const today = new Date();
            const year = today.getFullYear();
            const event = createTestEvent({
                start_date: `${year}-02-01`,
                end_date: `${year}-02-30`, // 2月30日は存在しない
            });
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('Invalid end_date');
        });
        it('end_dateが無効な日付（NaN）の場合は400を返す', async () => {
            const event = createTestEvent({
                start_date: getDaysAgo(7),
                end_date: '2024-13-01', // 13月は存在しない
            });
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('Invalid end_date');
        });
        it('start_dateが無効な日付（NaN）の場合は400を返す', async () => {
            const event = createTestEvent({
                start_date: '2024-13-01', // 13月は存在しない
                end_date: getDaysAgo(2),
            });
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('Invalid start_date');
        });
    });
    describe('APIキー認証（追加）', () => {
        it('X-Api-Key（大文字）ヘッダーでも認証できる', async () => {
            const mockCollectorResponse = {
                execution_id: 'exec_1234567890_abc123_test1234',
                status: 'success',
                message: 'Collection started',
                collected_count: 0,
                failed_count: 0,
            };
            lambdaMock.on(client_lambda_1.InvokeCommand).resolves({
                StatusCode: 200,
                Payload: Buffer.from(JSON.stringify(mockCollectorResponse)),
            });
            const testDates = getTestDates();
            const event = createTestEvent(testDates);
            // x-api-keyを削除してX-Api-Keyを設定
            delete event.headers['x-api-key'];
            event.headers['X-Api-Key'] = 'test-api-key-12345';
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(200);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('success');
        });
    });
    describe('Secrets Managerエラーハンドリング', () => {
        beforeEach(() => {
            // TEST_ENV='test'を設定してキャッシュを無効化
            process.env.TEST_ENV = 'test';
            delete process.env.API_KEY;
            // API_KEY_SECRET_ARNを設定
            process.env.API_KEY_SECRET_ARN = 'arn:aws:secretsmanager:ap-northeast-1:123456789012:secret:tdnet-api-key';
            // Secrets Managerモックをリセット
            secretsMock.reset();
        });
        afterEach(() => {
            // 環境変数を復元
            process.env.TEST_ENV = 'e2e';
            process.env.API_KEY = 'test-api-key-12345';
            // Secrets Managerモックを復元
            secretsMock.reset();
            secretsMock.on(client_secrets_manager_1.GetSecretValueCommand).resolves({
                SecretString: 'test-api-key-12345',
            });
        });
        it('SecretStringが空の場合は401エラーを返す', async () => {
            secretsMock.on(client_secrets_manager_1.GetSecretValueCommand).resolves({
                SecretString: '', // 空文字列
            });
            const testDates = getTestDates();
            // 異なるAPIキーを使用してキャッシュをバイパス
            const event = createTestEvent(testDates, 'unique-key-for-empty-secret-test');
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('UNAUTHORIZED');
            expect(body.error.message).toContain('Failed to retrieve API key');
        });
        it('Secrets Manager取得エラーの場合は401エラーを返す', async () => {
            secretsMock.on(client_secrets_manager_1.GetSecretValueCommand).rejects(new Error('AccessDeniedException: User is not authorized'));
            const testDates = getTestDates();
            // 異なるAPIキーを使用してキャッシュをバイパス
            const event = createTestEvent(testDates, 'unique-key-for-access-denied-test');
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('UNAUTHORIZED');
            expect(body.error.message).toContain('Failed to retrieve API key');
        });
        it('Secrets Managerネットワークエラーの場合は401エラーを返す', async () => {
            secretsMock.on(client_secrets_manager_1.GetSecretValueCommand).rejects(new Error('NetworkingError: Connection timeout'));
            const testDates = getTestDates();
            // 異なるAPIキーを使用してキャッシュをバイパス
            const event = createTestEvent(testDates, 'unique-key-for-network-error-test');
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('UNAUTHORIZED');
        });
    });
    describe('APIキーキャッシュ', () => {
        beforeEach(() => {
            // キャッシュをクリア
            delete process.env.TEST_ENV;
            delete process.env.API_KEY;
            // Secrets Managerモックをリセット
            secretsMock.reset();
            secretsMock.on(client_secrets_manager_1.GetSecretValueCommand).resolves({
                SecretString: 'test-api-key-12345',
            });
        });
        it('TEST_ENV=e2eの場合はAPI_KEY環境変数から取得する', async () => {
            // TEST_ENV=e2eを設定
            process.env.TEST_ENV = 'e2e';
            process.env.API_KEY = 'e2e-test-api-key';
            const mockCollectorResponse = {
                execution_id: 'exec_1234567890_abc123_test1234',
                status: 'success',
                message: 'Collection started',
                collected_count: 0,
                failed_count: 0,
            };
            lambdaMock.on(client_lambda_1.InvokeCommand).resolves({
                StatusCode: 200,
                Payload: Buffer.from(JSON.stringify(mockCollectorResponse)),
            });
            const testDates = getTestDates();
            const event = createTestEvent(testDates, 'e2e-test-api-key');
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(200);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('success');
            // Secrets Managerが呼ばれていないことを確認
            const secretsCalls = secretsMock.commandCalls(client_secrets_manager_1.GetSecretValueCommand);
            expect(secretsCalls.length).toBe(0);
        });
        it('キャッシュが有効な場合はSecrets Managerを呼ばない', async () => {
            // 最初のリクエスト（キャッシュミス）
            const mockCollectorResponse = {
                execution_id: 'exec_1234567890_abc123_test1234',
                status: 'success',
                message: 'Collection started',
                collected_count: 0,
                failed_count: 0,
            };
            lambdaMock.on(client_lambda_1.InvokeCommand).resolves({
                StatusCode: 200,
                Payload: Buffer.from(JSON.stringify(mockCollectorResponse)),
            });
            const testDates = getTestDates();
            const event1 = createTestEvent(testDates, 'test-api-key-12345');
            await (0, handler_1.handler)(event1, mockContext);
            // Secrets Managerが1回呼ばれたことを確認
            let secretsCalls = secretsMock.commandCalls(client_secrets_manager_1.GetSecretValueCommand);
            expect(secretsCalls.length).toBe(1);
            // 2回目のリクエスト（キャッシュヒット）
            secretsMock.reset();
            secretsMock.on(client_secrets_manager_1.GetSecretValueCommand).resolves({
                SecretString: 'test-api-key-12345',
            });
            const event2 = createTestEvent(testDates, 'test-api-key-12345');
            await (0, handler_1.handler)(event2, mockContext);
            // Secrets Managerが呼ばれていないことを確認（キャッシュから取得）
            secretsCalls = secretsMock.commandCalls(client_secrets_manager_1.GetSecretValueCommand);
            expect(secretsCalls.length).toBe(0);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxsYW1iZGFcXGNvbGxlY3RcXF9fdGVzdHNfX1xcaGFuZGxlci50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQzs7OztFQUlFOztBQUdILHdDQUFxQztBQUNyQywwREFBcUU7QUFDckUsNEVBQThGO0FBQzlGLDZEQUFpRDtBQUVqRCxnQkFBZ0I7QUFDaEIsTUFBTSxVQUFVLEdBQUcsSUFBQSxnQ0FBVSxFQUFDLDRCQUFZLENBQUMsQ0FBQztBQUM1QyxNQUFNLFdBQVcsR0FBRyxJQUFBLGdDQUFVLEVBQUMsNkNBQW9CLENBQUMsQ0FBQztBQUVyRCxlQUFlO0FBQ2YsTUFBTSxXQUFXLEdBQVk7SUFDM0IsOEJBQThCLEVBQUUsS0FBSztJQUNyQyxZQUFZLEVBQUUsZUFBZTtJQUM3QixlQUFlLEVBQUUsR0FBRztJQUNwQixrQkFBa0IsRUFBRSxtRUFBbUU7SUFDdkYsZUFBZSxFQUFFLEtBQUs7SUFDdEIsWUFBWSxFQUFFLHVCQUF1QjtJQUNyQyxZQUFZLEVBQUUsMkJBQTJCO0lBQ3pDLGFBQWEsRUFBRSw0QkFBNEI7SUFDM0Msd0JBQXdCLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSztJQUNyQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztJQUNkLElBQUksRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO0lBQ2QsT0FBTyxFQUFFLEdBQUcsRUFBRSxHQUFFLENBQUM7Q0FDbEIsQ0FBQztBQUVGOzs7R0FHRztBQUNILE1BQU0sWUFBWSxHQUFHLEdBQUcsRUFBRTtJQUN4QixNQUFNLEtBQUssR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO0lBQ3pCLE1BQU0sU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2xDLFNBQVMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTztJQUNuRCxNQUFNLE9BQU8sR0FBRyxJ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QUMsQ0FBQztZQUVILE1BQU0sU0FBUyxHQUFHLFlBQVksRUFBRSxDQUFDO1lBQ2pDLE1BQU0sTUFBTSxHQUFHLGVBQWUsQ0FBQyxTQUFTLEVBQUUsb0JBQW9CLENBQUMsQ0FBQztZQUVoRSxNQUFNLElBQUEsaUJBQU8sRUFBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLENBQUM7WUFFbkMsOEJBQThCO1lBQzlCLElBQUksWUFBWSxHQUFHLFdBQVcsQ0FBQyxZQUFZLENBQUMsOENBQXFCLENBQUMsQ0FBQztZQUNuRSxNQUFNLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVwQyxzQkFBc0I7WUFDdEIsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ3BCLFdBQVcsQ0FBQyxFQUFFLENBQUMsOENBQXFCLENBQUMsQ0FBQyxRQUFRLENBQUM7Z0JBQzdDLFlBQVksRUFBRSxvQkFBb0I7YUFDbkMsQ0FBQyxDQUFDO1lBRUgsTUFBTSxNQUFNLEdBQUcsZUFBZSxDQUFDLFNBQVMsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO1lBQ2hFLE1BQU0sSUFBQSxpQkFBTyxFQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsQ0FBQztZQUVuQywwQ0FBMEM7WUFDMUMsWUFBWSxHQUFHLFdBQVcsQ0FBQyxZQUFZLENBQUMsOENBQXFCLENBQUMsQ0FBQztZQUMvRCxNQUFNLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxsYW1iZGFcXGNvbGxlY3RcXF9fdGVzdHNfX1xcaGFuZGxlci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIu+7vy8qKlxyXG4gKiBMYW1iZGEgQ29sbGVjdCBIYW5kbGVyIFRlc3RzXHJcbiAqXHJcbiAqIFBPU1QgL2NvbGxlY3Qg44Ko44Oz44OJ77+9ReOCpOODs+ODiO+/vUXjg6bjg4vjg4Pjg4jjg4bjgrnjg4FFXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQVBJR2F0ZXdheVByb3h5RXZlbnQsIENvbnRleHQgfSBmcm9tICdhd3MtbGFtYmRhJztcclxuaW1wb3J0IHsgaGFuZGxlciB9IGZyb20gJy4uL2hhbmRsZXInO1xyXG5pbXBvcnQgeyBMYW1iZGFDbGllbnQsIEludm9rZUNvbW1hbmQgfSBmcm9tICdAYXdzLXNkay9jbGllbnQtbGFtYmRhJztcclxuaW1wb3J0IHsgU2VjcmV0c01hbmFnZXJDbGllbnQsIEdldFNlY3JldFZhbHVlQ29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1zZWNyZXRzLW1hbmFnZXInO1xyXG5pbXBvcnQgeyBtb2NrQ2xpZW50IH0gZnJvbSAnYXdzLXNkay1jbGllbnQtbW9jayc7XHJcblxyXG4vLyBBV1MgU0RLIE1vY2tzXHJcbmNvbnN0IGxhbWJkYU1vY2sgPSBtb2NrQ2xpZW50KExhbWJkYUNsaWVudCk7XHJcbmNvbnN0IHNlY3JldHNNb2NrID0gbW9ja0NsaWVudChTZWNyZXRzTWFuYWdlckNsaWVudCk7XHJcblxyXG4vLyBNb2NrIENvbnRleHRcclxuY29uc3QgbW9ja0NvbnRleHQ6IENvbnRleHQgPSB7XHJcbiAgY2FsbGJhY2tXYWl0c0ZvckVtcHR5RXZlbnRMb29wOiBmYWxzZSxcclxuICBmdW5jdGlvbk5hbWU6ICd0ZG5ldC1jb2xsZWN0JyxcclxuICBmdW5jdGlvblZlcnNpb246ICcxJyxcclxuICBpbnZva2VkRnVuY3Rpb25Bcm46ICdhcm46YXdzOmxhbWJkYTphcC1ub3J0aGVhc3QtMToxMjM0NTY3ODkwMTI6ZnVuY3Rpb246dGRuZXQtY29sbGVjdCcsXHJcbiAgbWVtb3J5TGltaXRJbk1COiAnMjU2JyxcclxuICBhd3NSZXF1ZXN0SWQ6ICd0ZXN0LXJlcXVlc3QtaWQtMTIzNDUnLFxyXG4gIGxvZ0dyb3VwTmFtZTogJy9hd3MvbGFtYmRhL3RkbmV0LWNvbGxlY3QnLFxyXG4gIGxvZ1N0cmVhbU5hbWU6ICcyMDI0LzAxLzE1L1skTEFURVNUXWFiY2RlZicsXHJcbiAgZ2V0UmVtYWluaW5nVGltZUluTWlsbGlzOiAoKSA9PiAzMDAwMCxcclxuICBkb25lOiAoKSA9PiB7fSxcclxuICBmYWlsOiAoKSA9PiB7fSxcclxuICBzdWNjZWVkOiAoKSA9PiB7fSxcclxufTtcclxuXHJcbi8qKlxyXG4gKiDjg4FF77+977+944OI55So44Gu5pel5LuY44KS5YuV55qE44Gr55Sf77+9RVxyXG4gKiDnj77lnKjml6XjgYvjgonnm7jlr77nmoFF77+977+95pel5LuY44KS6L+U44GZ44GT44Go44Gn44CB44OG44K544OI44GM5bi444Gr5pyJ5Yq544Gq5pel5LuY56+BRe+/ve+/veOCkuS9v+eUqOOBp+OBjeOCi+OCiOOBhuOBq+OBmeOCi1xyXG4gKi9cclxuY29uc3QgZ2V0VGVzdERhdGVzID0gKCkgPT4ge1xyXG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSh0b2RheSk7XHJcbiAgc3RhcnREYXRlLnNldERhdGUoc3RhcnREYXRlLmdldERhdGUoKSAtIDcpOyAvLyA35pel5YmBRVxyXG4gIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZSh0b2RheSk7XHJcbiAgZW5kRGF0ZS5zZXREYXRlKGVuZERhdGUuZ2V0RGF0ZSgpIC0gMik7IC8vIDLml6XliYFFXHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIHN0YXJ0X2RhdGU6IHN0YXJ0RGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXHJcbiAgICBlbmRfZGF0ZTogZW5kRGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXHJcbiAgfTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiDmjIFF77+977+95pel5pWw5YmN77+9ReaXpeS7mOOCkuWPluW+gUVcclxuICovXHJcbmNvbnN0IGdldERheXNBZ28gPSAoZGF5czogbnVtYmVyKTogc3RyaW5nID0+IHtcclxuICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTtcclxuICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBkYXlzKTtcclxuICByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XHJcbn07XHJcblxyXG4vKipcclxuICog5oyBRe+/ve+/veaXpeaVsOW+jO+/vUXml6Xku5jjgpLlj5blvoFFXHJcbiAqL1xyXG5jb25zdCBnZXREYXlzTGF0ZXIgPSAoZGF5czogbnVtYmVyKTogc3RyaW5nID0+IHtcclxuICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTtcclxuICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyBkYXlzKTtcclxuICByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XHJcbn07XHJcblxyXG4vKipcclxuICog44OG44K544OI55So44GuQVBJR2F0ZXdheVByb3h5RXZlbnTjgpLkvZzmiJBcclxuICovXHJcbmNvbnN0IGNyZWF0ZVRlc3RFdmVudCA9IChib2R5OiBhbnksIGFwaUtleTogc3RyaW5nID0gJ3Rlc3QtYXBpLWtleS0xMjM0NScpOiBBUElHYXRld2F5UHJveHlFdmVudCA9PiB7XHJcbiAgcmV0dXJuIHtcclxuICAgIGJvZHk6IGJvZHkgPT09IG51bGwgPyBudWxsIDogSlNPTi5zdHJpbmdpZnkoYm9keSksXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICd4LWFwaS1rZXknOiBhcGlLZXksXHJcbiAgICB9LFxyXG4gICAgbXVsdGlWYWx1ZUhlYWRlcnM6IHt9LFxyXG4gICAgaHR0cE1ldGhvZDogJ1BPU1QnLFxyXG4gICAgaXNCYXNlNjRFbmNvZGVkOiBmYWxzZSxcclxuICAgIHBhdGg6ICcvY29sbGVjdCcsXHJcbiAgICBwYXRoUGFyYW1ldGVyczogbnVsbCxcclxuICAgIHF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogbnVsbCxcclxuICAgIG11bHRpVmFsdWVRdWVyeVN0cmluZ1BhcmFtZXRlcnM6IG51bGwsXHJcbiAgICBzdGFnZVZhcmlhYmxlczogbnVsbCxcclxuICAgIHJlcXVlc3RDb250ZXh0OiB7fSBhcyBhbnksXHJcbiAgICByZXNvdXJjZTogJycsXHJcbiAgfTtcclxufTtcclxuXHJcbmRlc2NyaWJlKCdQT1NUIC9jb2xsZWN0IEhhbmRsZXInLCAoKSA9PiB7XHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBsYW1iZGFNb2NrLnJlc2V0KCk7XHJcbiAgICBzZWNyZXRzTW9jay5yZXNldCgpO1xyXG4gICAgXHJcbiAgICAvLyBTZWNyZXRzIE1hbmFnZXLjga7jg6Ljg4Pjgq/oqK3lrprvvIhBUEnjgq3jg7zjgpLov5TjgZnvvIlcclxuICAgIHNlY3JldHNNb2NrLm9uKEdldFNlY3JldFZhbHVlQ29tbWFuZCkucmVzb2x2ZXMoe1xyXG4gICAgICBTZWNyZXRTdHJpbmc6ICd0ZXN0LWFwaS1rZXktMTIzNDUnLFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHByb2Nlc3MuZW52LkNPTExFQ1RPUl9GVU5DVElPTl9OQU1FID0gJ3RkbmV0LWNvbGxlY3Rvcic7XHJcbiAgICBwcm9jZXNzLmVudi5BV1NfUkVHSU9OID0gJ2FwLW5vcnRoZWFzdC0xJztcclxuICAgIHByb2Nlc3MuZW52LkFQSV9LRVlfU0VDUkVUX0FSTiA9ICdhcm46YXdzOnNlY3JldHNtYW5hZ2VyOmFwLW5vcnRoZWFzdC0xOjEyMzQ1Njc4OTAxMjpzZWNyZXQ6dGRuZXQtYXBpLWtleSc7XHJcbiAgICBcclxuICAgIC8vIEFQSeOCreODvOOCreODo+ODg+OCt+ODpeOCkuOCr+ODquOCou+8iOODhuOCueODiOmWk+OBruW9semfv+OCkumYsuOBkO+8iVxyXG4gICAgLy8gTm90ZTog44Kt44Oj44OD44K344Ol44Gv44Oi44K444Ol44O844Or44K544Kz44O844OX44Gr44GC44KL44Gf44KB44CB55u05o6l44Ki44Kv44K744K544Gn44GN44Gq44GEXHJcbiAgICAvLyDku6Pjgo/jgorjgavjgIHlkITjg4bjgrnjg4jjgafmlrDjgZfjgYRBUEnjgq3jg7zjgpLkvb/nlKjjgZnjgovjgYvjgIFURVNUX0VOVuOCkuioreWumuOBmeOCi1xyXG4gICAgZGVsZXRlIHByb2Nlc3MuZW52LlRFU1RfRU5WO1xyXG4gICAgZGVsZXRlIHByb2Nlc3MuZW52LkFQSV9LRVk7XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICBkZWxldGUgcHJvY2Vzcy5lbnYuQ09MTEVDVE9SX0ZVTkNUSU9OX05BTUU7XHJcbiAgICBkZWxldGUgcHJvY2Vzcy5lbnYuQVdTX1JFR0lPTjtcclxuICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5BUElfS0VZX1NFQ1JFVF9BUk47XHJcbiAgICBkZWxldGUgcHJvY2Vzcy5lbnYuVEVTVF9FTlY7XHJcbiAgICBkZWxldGUgcHJvY2Vzcy5lbnYuQVBJX0tFWTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+ato+W4uOezuycsICgpID0+IHtcclxuICAgIGl0KCfmnInlirnjgarjg6rjgq/jgqjjgrnjg4jjgacyMDDjgpLov5TjgZknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIExhbWJkYSBDb2xsZWN0b3Ljga7lkbzjgbPlh7rjgZfjgpLjg6Ljg4FF77+977+977+9Re+/veWQjOacn+WRvOOBs+WHuuOBl++8gUVcclxuICAgICAgY29uc3QgbW9ja0NvbGxlY3RvclJlc3BvbnNlID0ge1xyXG4gICAgICAgIGV4ZWN1dGlvbl9pZDogJ2V4ZWNfMTIzNDU2Nzg5MF9hYmMxMjNfdGVzdDEyMzQnLFxyXG4gICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdDb2xsZWN0aW9uIHN0YXJ0ZWQnLFxyXG4gICAgICAgIGNvbGxlY3RlZF9jb3VudDogMCxcclxuICAgICAgICBmYWlsZWRfY291bnQ6IDAsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBsYW1iZGFNb2NrLm9uKEludm9rZUNvbW1hbmQpLnJlc29sdmVzKHtcclxuICAgICAgICBTdGF0dXNDb2RlOiAyMDAsXHJcbiAgICAgICAgUGF5bG9hZDogQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkobW9ja0NvbGxlY3RvclJlc3BvbnNlKSksXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgdGVzdERhdGVzID0gZ2V0VGVzdERhdGVzKCk7XHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gY3JlYXRlVGVzdEV2ZW50KHRlc3REYXRlcyk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5oZWFkZXJzPy5bJ0NvbnRlbnQtVHlwZSddKS50b0JlKCdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaGVhZGVycz8uWydBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nXSkudG9CZSgnKicpO1xyXG5cclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5zdGF0dXMpLnRvQmUoJ3N1Y2Nlc3MnKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZGF0YSkudG9IYXZlUHJvcGVydHkoJ2V4ZWN1dGlvbl9pZCcpO1xyXG4gICAgICBleHBlY3QoYm9keS5kYXRhKS50b0hhdmVQcm9wZXJ0eSgnc3RhdHVzJywgJ3BlbmRpbmcnKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZGF0YSkudG9IYXZlUHJvcGVydHkoJ21lc3NhZ2UnKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZGF0YSkudG9IYXZlUHJvcGVydHkoJ3N0YXJ0ZWRfYXQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdMYW1iZGEgQ29sbGVjdG9y44GL44KJ6L+U44GV44KM44GfZXhlY3V0aW9uX2lk44KS5L2/55So44GZ44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrQ29sbGVjdG9yUmVzcG9uc2UgPSB7XHJcbiAgICAgICAgZXhlY3V0aW9uX2lkOiAnZXhlY18xMjM0NTY3ODkwX2FiYzEyM190ZXN0MTIzNCcsXHJcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgICAgbWVzc2FnZTogJ0NvbGxlY3Rpb24gc3RhcnRlZCcsXHJcbiAgICAgICAgY29sbGVjdGVkX2NvdW50OiAwLFxyXG4gICAgICAgIGZhaWxlZF9jb3VudDogMCxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGxhbWJkYU1vY2sub24oSW52b2tlQ29tbWFuZCkucmVzb2x2ZXMoe1xyXG4gICAgICAgIFN0YXR1c0NvZGU6IDIwMCxcclxuICAgICAgICBQYXlsb2FkOiBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShtb2NrQ29sbGVjdG9yUmVzcG9uc2UpKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0ZXN0RGF0ZXMgPSBnZXRUZXN0RGF0ZXMoKTtcclxuICAgICAgY29uc3QgZXZlbnQgPSBjcmVhdGVUZXN0RXZlbnQodGVzdERhdGVzKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG5cclxuICAgICAgLy8gTGFtYmRhIENvbGxlY3RvcuOBi+OCiei/lOOBleOCjOOBn2V4ZWN1dGlvbl9pZOOBjOS9v+eUqOOBleOCjOOBpuOBgUXvv73vv73jgZPjgajjgpLnorroqoFFXHJcbiAgICAgIGV4cGVjdChib2R5LmRhdGEuZXhlY3V0aW9uX2lkKS50b0JlKCdleGVjXzEyMzQ1Njc4OTBfYWJjMTIzX3Rlc3QxMjM0Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnTGFtYmRh5ZG844Gz5Ye644GX44GMUmVxdWVzdFJlc3BvbnNl44Oi44O844OJ44Gn5a6f6KGM44GV44KM44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrQ29sbGVjdG9yUmVzcG9uc2UgPSB7XHJcbiAgICAgICAgZXhlY3V0aW9uX2lkOiAnZXhlY18xMjM0NTY3ODkwX2FiYzEyM190ZXN0MTIzNCcsXHJcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgICAgbWVzc2FnZTogJ0NvbGxlY3Rpb24gc3RhcnRlZCcsXHJcbiAgICAgICAgY29sbGVjdGVkX2NvdW50OiAwLFxyXG4gICAgICAgIGZhaWxlZF9jb3VudDogMCxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGxhbWJkYU1vY2sub24oSW52b2tlQ29tbWFuZCkucmVzb2x2ZXMoe1xyXG4gICAgICAgIFN0YXR1c0NvZGU6IDIwMCxcclxuICAgICAgICBQYXlsb2FkOiBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShtb2NrQ29sbGVjdG9yUmVzcG9uc2UpKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0ZXN0RGF0ZXMgPSBnZXRUZXN0RGF0ZXMoKTtcclxuICAgICAgY29uc3QgZXZlbnQgPSBjcmVhdGVUZXN0RXZlbnQodGVzdERhdGVzKTtcclxuXHJcbiAgICAgIGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIEludm9rZUNvbW1hbmTjgYzmraPjgZfjgYTjg5Hjg6njg6Hjg7zjgr/jgaflkbzjgbDjgozjgZ/jgZPjgajjgpLnorroqo1cclxuICAgICAgY29uc3QgY2FsbHMgPSBsYW1iZGFNb2NrLmNvbW1hbmRDYWxscyhJbnZva2VDb21tYW5kKTtcclxuICAgICAgZXhwZWN0KGNhbGxzLmxlbmd0aCkudG9CZSgxKTtcclxuICAgICAgZXhwZWN0KGNhbGxzWzBdLmFyZ3NbMF0uaW5wdXQuSW52b2NhdGlvblR5cGUpLnRvQmUoJ1JlcXVlc3RSZXNwb25zZScpO1xyXG4gICAgICBleHBlY3QoY2FsbHNbMF0uYXJnc1swXS5pbnB1dC5GdW5jdGlvbk5hbWUpLnRvQmUoJ3Rlc3QtY29sbGVjdG9yLWZ1bmN0aW9uJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+ODkOODquODgUXvv71F44K344On44Oz44Ko44Op44O8JywgKCkgPT4ge1xyXG4gICAgaXQoJ+ODquOCr+OCqOOCueODiO+/vUXjg4FF77+977+944GM44Gq44GBRe+/ve+/veWQiO+/vUU0MDDjgpLov5TjgZknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gY3JlYXRlVGVzdEV2ZW50KG51bGwpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDQwMCk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkuc3RhdHVzKS50b0JlKCdlcnJvcicpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignUmVxdWVzdCBib2R5IGlzIHJlcXVpcmVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc3RhcnRfZGF0ZeOBjOOBquOBgUXvv73vv73lkIjvv71FNDAw44KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBldmVudDogQVBJR2F0ZXdheVByb3h5RXZlbnQgPSB7XHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgZW5kX2RhdGU6IGdldERheXNBZ28oMiksXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ3gtYXBpLWtleSc6ICd0ZXN0LWFwaS1rZXktMTIzNDUnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbXVsdGlWYWx1ZUhlYWRlcnM6IHt9LFxyXG4gICAgICAgIGh0dHBNZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBpc0Jhc2U2NEVuY29kZWQ6IGZhbHNlLFxyXG4gICAgICAgIHBhdGg6ICcvY29sbGVjdCcsXHJcbiAgICAgICAgcGF0aFBhcmFtZXRlcnM6IG51bGwsXHJcbiAgICAgICAgcXVlcnlTdHJpbmdQYXJhbWV0ZXJzOiBudWxsLFxyXG4gICAgICAgIG11bHRpVmFsdWVRdWVyeVN0cmluZ1BhcmFtZXRlcnM6IG51bGwsXHJcbiAgICAgICAgc3RhZ2VWYXJpYWJsZXM6IG51bGwsXHJcbiAgICAgICAgcmVxdWVzdENvbnRleHQ6IHt9IGFzIGFueSxcclxuICAgICAgICByZXNvdXJjZTogJycsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignc3RhcnRfZGF0ZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2VuZF9kYXRl44GM44Gq44GBRe+/ve+/veWQiO+/vUU0MDDjgpLov5TjgZknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGV2ZW50OiBBUElHYXRld2F5UHJveHlFdmVudCA9IHtcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBzdGFydF9kYXRlOiBnZXREYXlzQWdvKDcpLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICd4LWFwaS1rZXknOiAndGVzdC1hcGkta2V5LTEyMzQ1JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIG11bHRpVmFsdWVIZWFkZXJzOiB7fSxcclxuICAgICAgICBodHRwTWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaXNCYXNlNjRFbmNvZGVkOiBmYWxzZSxcclxuICAgICAgICBwYXRoOiAnL2NvbGxlY3QnLFxyXG4gICAgICAgIHBhdGhQYXJhbWV0ZXJzOiBudWxsLFxyXG4gICAgICAgIHF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogbnVsbCxcclxuICAgICAgICBtdWx0aVZhbHVlUXVlcnlTdHJpbmdQYXJhbWV0ZXJzOiBudWxsLFxyXG4gICAgICAgIHN0YWdlVmFyaWFibGVzOiBudWxsLFxyXG4gICAgICAgIHJlcXVlc3RDb250ZXh0OiB7fSBhcyBhbnksXHJcbiAgICAgICAgcmVzb3VyY2U6ICcnLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDQwMCk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ2VuZF9kYXRlIGlzIHJlcXVpcmVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc3RhcnRfZGF0ZeOBruODleOCqeODvOODnuODg+ODiOOBjOS4jeato+OBquWgtOWQiO+/vUU0MDDjgpLov5TjgZknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGV2ZW50OiBBUElHYXRld2F5UHJveHlFdmVudCA9IHtcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBzdGFydF9kYXRlOiAnMjAyNC8wMS8xNScsIC8vIOS4jeato+OBquODleOCqeODvOODnuODg+ODgUVcclxuICAgICAgICAgIGVuZF9kYXRlOiBnZXREYXlzQWdvKDIpLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICd4LWFwaS1rZXknOiAndGVzdC1hcGkta2V5LTEyMzQ1JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIG11bHRpVmFsdWVIZWFkZXJzOiB7fSxcclxuICAgICAgICBodHRwTWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaXNCYXNlNjRFbmNvZGVkOiBmYWxzZSxcclxuICAgICAgICBwYXRoOiAnL2NvbGxlY3QnLFxyXG4gICAgICAgIHBhdGhQYXJhbWV0ZXJzOiBudWxsLFxyXG4gICAgICAgIHF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogbnVsbCxcclxuICAgICAgICBtdWx0aVZhbHVlUXVlcnlTdHJpbmdQYXJhbWV0ZXJzOiBudWxsLFxyXG4gICAgICAgIHN0YWdlVmFyaWFibGVzOiBudWxsLFxyXG4gICAgICAgIHJlcXVlc3RDb250ZXh0OiB7fSBhcyBhbnksXHJcbiAgICAgICAgcmVzb3VyY2U6ICcnLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDQwMCk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ0ludmFsaWQgc3RhcnRfZGF0ZSBmb3JtYXQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzdGFydF9kYXRl44GM5a2Y5Zyo44GX44Gq44GBRe+/ve+/veS7mO+/vUXloLTlkIjvv71FNDAw44KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyDlrZjlnKjjgZfjgarjgYFF77+977+95LuY44KS5L2/55So77+9Re+/vUXmnIFFMOaXpeOBr+WtmOWcqOOBl+OBquOBgUXvv73vv71FXHJcbiAgICAgIC8vIOOBn+OBoOOBl+OAgUXlubTku6XlhoFF77+9ReaXpeS7mOOCkuS9v+eUqOOBmeOCi+W/gUXvv73vv73jgYzjgYLjgotcclxuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICBjb25zdCB5ZWFyID0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgY29uc3QgbW9udGggPSB0b2RheS5nZXRNb250aCgpICsgMTsgLy8g54++5Zyo44Gu5pyBRVxyXG4gICAgICBcclxuICAgICAgY29uc3QgZXZlbnQgPSBjcmVhdGVUZXN0RXZlbnQoe1xyXG4gICAgICAgICAgc3RhcnRfZGF0ZTogYCR7eWVhcn0tMDItMzBgLCAvLyAy5pyBRTDml6Xjga/lrZjlnKjjgZfjgarjgYFFXHJcbiAgICAgICAgICBlbmRfZGF0ZTogYCR7eWVhcn0tMDMtMDFgLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDQwMCk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xyXG4gICAgICAvLyDml6Xku5jvv71F5pW05ZCI5oCn44OB44Kn44OBRe+/ve+/veOBp+eEoeWKueOBquaXpeS7mOOCkuaknO+/vUVcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdJbnZhbGlkIHN0YXJ0X2RhdGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzdGFydF9kYXRl44GMZW5kX2RhdGXjgojjgorlvozvv71F5aC05ZCI77+9RTQwMOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZXZlbnQ6IEFQSUdhdGV3YXlQcm94eUV2ZW50ID0ge1xyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIHN0YXJ0X2RhdGU6IGdldERheXNBZ28oMiksXHJcbiAgICAgICAgICBlbmRfZGF0ZTogZ2V0RGF5c0Fnbyg3KSxcclxuICAgICAgICB9KSxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAneC1hcGkta2V5JzogJ3Rlc3QtYXBpLWtleS0xMjM0NScsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtdWx0aVZhbHVlSGVhZGVyczoge30sXHJcbiAgICAgICAgaHR0cE1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGlzQmFzZTY0RW5jb2RlZDogZmFsc2UsXHJcbiAgICAgICAgcGF0aDogJy9jb2xsZWN0JyxcclxuICAgICAgICBwYXRoUGFyYW1ldGVyczogbnVsbCxcclxuICAgICAgICBxdWVyeVN0cmluZ1BhcmFtZXRlcnM6IG51bGwsXHJcbiAgICAgICAgbXVsdGlWYWx1ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogbnVsbCxcclxuICAgICAgICBzdGFnZVZhcmlhYmxlczogbnVsbCxcclxuICAgICAgICByZXF1ZXN0Q29udGV4dDoge30gYXMgYW55LFxyXG4gICAgICAgIHJlc291cmNlOiAnJyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdtdXN0IGJlIGJlZm9yZSBvciBlcXVhbCB0bycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3N0YXJ0X2RhdGXjgYFF5bm05Lul5LiK5YmN44Gu5aC05ZCI77+9RTQwMOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdHdvWWVhcnNBZ28gPSBnZXREYXlzQWdvKDczMCk7IC8vIDLlubTliYFFXHJcblxyXG4gICAgICBjb25zdCBldmVudDogQVBJR2F0ZXdheVByb3h5RXZlbnQgPSB7XHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgc3RhcnRfZGF0ZTogdHdvWWVhcnNBZ28sXHJcbiAgICAgICAgICBlbmRfZGF0ZTogZ2V0RGF5c0FnbygyKSxcclxuICAgICAgICB9KSxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAneC1hcGkta2V5JzogJ3Rlc3QtYXBpLWtleS0xMjM0NScsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtdWx0aVZhbHVlSGVhZGVyczoge30sXHJcbiAgICAgICAgaHR0cE1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGlzQmFzZTY0RW5jb2RlZDogZmFsc2UsXHJcbiAgICAgICAgcGF0aDogJy9jb2xsZWN0JyxcclxuICAgICAgICBwYXRoUGFyYW1ldGVyczogbnVsbCxcclxuICAgICAgICBxdWVyeVN0cmluZ1BhcmFtZXRlcnM6IG51bGwsXHJcbiAgICAgICAgbXVsdGlWYWx1ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogbnVsbCxcclxuICAgICAgICBzdGFnZVZhcmlhYmxlczogbnVsbCxcclxuICAgICAgICByZXF1ZXN0Q29udGV4dDoge30gYXMgYW55LFxyXG4gICAgICAgIHJlc291cmNlOiAnJyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCd0b28gb2xkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnZW5kX2RhdGXjgYzmnKrmnaXml6Xjga7loLTlkIjvv71FNDAw44KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0d29EYXlzTGF0ZXIgPSBnZXREYXlzTGF0ZXIoMik7IC8vIDLml6XlvoFFXHJcblxyXG4gICAgICBjb25zdCBldmVudDogQVBJR2F0ZXdheVByb3h5RXZlbnQgPSB7XHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgc3RhcnRfZGF0ZTogZ2V0RGF5c0Fnbyg3KSxcclxuICAgICAgICAgIGVuZF9kYXRlOiB0d29EYXlzTGF0ZXIsXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ3gtYXBpLWtleSc6ICd0ZXN0LWFwaS1rZXktMTIzNDUnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbXVsdGlWYWx1ZUhlYWRlcnM6IHt9LFxyXG4gICAgICAgIGh0dHBNZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBpc0Jhc2U2NEVuY29kZWQ6IGZhbHNlLFxyXG4gICAgICAgIHBhdGg6ICcvY29sbGVjdCcsXHJcbiAgICAgICAgcGF0aFBhcmFtZXRlcnM6IG51bGwsXHJcbiAgICAgICAgcXVlcnlTdHJpbmdQYXJhbWV0ZXJzOiBudWxsLFxyXG4gICAgICAgIG11bHRpVmFsdWVRdWVyeVN0cmluZ1BhcmFtZXRlcnM6IG51bGwsXHJcbiAgICAgICAgc3RhZ2VWYXJpYWJsZXM6IG51bGwsXHJcbiAgICAgICAgcmVxdWVzdENvbnRleHQ6IHt9IGFzIGFueSxcclxuICAgICAgICByZXNvdXJjZTogJycsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignY2Fubm90IGJlIGluIHRoZSBmdXR1cmUnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnTGFtYmRh5ZG844Gz5Ye644GX44Ko44Op44O8JywgKCkgPT4ge1xyXG4gICAgaXQoJ0xhbWJkYSBDb2xsZWN0b3Ljga7lkbzjgbPlh7rjgZfjgavlpLHmlZfjgZfjgZ/loLTlkIjvv71FNTAw44KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBsYW1iZGFNb2NrLm9uKEludm9rZUNvbW1hbmQpLnJlamVjdHMobmV3IEVycm9yKCdMYW1iZGEgaW52b2NhdGlvbiBmYWlsZWQnKSk7XHJcblxyXG4gICAgICBjb25zdCB0ZXN0RGF0ZXMgPSBnZXRUZXN0RGF0ZXMoKTtcclxuICAgICAgY29uc3QgZXZlbnQgPSBjcmVhdGVUZXN0RXZlbnQodGVzdERhdGVzKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg1MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LnN0YXR1cykudG9CZSgnZXJyb3InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IuY29kZSkudG9CZSgnSU5URVJOQUxfRVJST1InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdGYWlsZWQgdG8gc3RhcnQgZGF0YSBjb2xsZWN0aW9uJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnTGFtYmRhIENvbGxlY3RvcuOBjOepuuOBrlBheWxvYWTjgpLov5TjgZfjgZ/loLTlkIjvv71FNTAw44KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBsYW1iZGFNb2NrLm9uKEludm9rZUNvbW1hbmQpLnJlc29sdmVzKHtcclxuICAgICAgICBTdGF0dXNDb2RlOiAyMDAsXHJcbiAgICAgICAgUGF5bG9hZDogdW5kZWZpbmVkLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHRlc3REYXRlcyA9IGdldFRlc3REYXRlcygpO1xyXG4gICAgICBjb25zdCBldmVudCA9IGNyZWF0ZVRlc3RFdmVudCh0ZXN0RGF0ZXMpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDUwMCk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkuc3RhdHVzKS50b0JlKCdlcnJvcicpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5jb2RlKS50b0JlKCdJTlRFUk5BTF9FUlJPUicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ0xhbWJkYSBDb2xsZWN0b3LjgYxleGVjdXRpb25faWTjgpLov5TjgZXjgarjgYFF77+977+95ZCI77+9RTUwMOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0NvbGxlY3RvclJlc3BvbnNlID0ge1xyXG4gICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdDb2xsZWN0aW9uIHN0YXJ0ZWQnLFxyXG4gICAgICAgIGNvbGxlY3RlZF9jb3VudDogMCxcclxuICAgICAgICBmYWlsZWRfY291bnQ6IDAsXHJcbiAgICAgICAgLy8gZXhlY3V0aW9uX2lk44GM44Gq44GBRVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbGFtYmRhTW9jay5vbihJbnZva2VDb21tYW5kKS5yZXNvbHZlcyh7XHJcbiAgICAgICAgU3RhdHVzQ29kZTogMjAwLFxyXG4gICAgICAgIFBheWxvYWQ6IEJ1ZmZlci5mcm9tKEpTT04uc3RyaW5naWZ5KG1vY2tDb2xsZWN0b3JSZXNwb25zZSkpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHRlc3REYXRlcyA9IGdldFRlc3REYXRlcygpO1xyXG4gICAgICBjb25zdCBldmVudCA9IGNyZWF0ZVRlc3RFdmVudCh0ZXN0RGF0ZXMpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDUwMCk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkuc3RhdHVzKS50b0JlKCdlcnJvcicpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5jb2RlKS50b0JlKCdJTlRFUk5BTF9FUlJPUicpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdBUEnjgq3jg7zoqo3oqLzjgqjjg6njg7wnLCAoKSA9PiB7XHJcbiAgICBpdCgnQVBJ44Kt44O844OY44OD44OA44O844GM44Gq44GE5aC05ZCI44GvNDAx44KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0ZXN0RGF0ZXMgPSBnZXRUZXN0RGF0ZXMoKTtcclxuICAgICAgY29uc3QgZXZlbnQgPSBjcmVhdGVUZXN0RXZlbnQodGVzdERhdGVzLCAnJyk7XHJcbiAgICAgIGRlbGV0ZSBldmVudC5oZWFkZXJzWyd4LWFwaS1rZXknXTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDEpO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LnN0YXR1cykudG9CZSgnZXJyb3InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IuY29kZSkudG9CZSgnVU5BVVRIT1JJWkVEJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignQVBJIGtleSBpcyByZXF1aXJlZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+eEoeWKueOBqkFQSeOCreODvOOBruWgtOWQiOOBrzQwMeOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdGVzdERhdGVzID0gZ2V0VGVzdERhdGVzKCk7XHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gY3JlYXRlVGVzdEV2ZW50KHRlc3REYXRlcywgJ2ludmFsaWQtYXBpLWtleScpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDQwMSk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkuc3RhdHVzKS50b0JlKCdlcnJvcicpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5jb2RlKS50b0JlKCdVTkFVVEhPUklaRUQnKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdJbnZhbGlkIEFQSSBrZXknKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdTZWNyZXRzIE1hbmFnZXLlj5blvpfjgqjjg6njg7zjga7loLTlkIjjga80MDHjgpLov5TjgZknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIOOCreODo+ODg+OCt+ODpeOCkuOCr+ODquOCouOBmeOCi+OBn+OCgeOBq+OAgeeVsOOBquOCi0FQSeOCreODvOOCkuS9v+eUqFxyXG4gICAgICAvLyDjgZPjgozjgavjgojjgorjgIHjgq3jg6Pjg4Pjgrfjg6XjgZXjgozjgZ9BUEnjgq3jg7zjgajkuIDoh7TjgZfjgarjgY/jgarjgorjgIFTZWNyZXRzIE1hbmFnZXLjgYzlkbzjgbPlh7rjgZXjgozjgotcclxuICAgICAgY29uc3QgdGVzdERhdGVzID0gZ2V0VGVzdERhdGVzKCk7XHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gY3JlYXRlVGVzdEV2ZW50KHRlc3REYXRlcywgJ2RpZmZlcmVudC1hcGkta2V5LXRvLWJ5cGFzcy1jYWNoZScpO1xyXG5cclxuICAgICAgLy8gU2VjcmV0cyBNYW5hZ2Vy44Gu44Oi44OD44Kv44KS5a6M5YWo44Gr44Oq44K744OD44OI44GX44Gm44CB44Ko44Op44O844KS55m655Sf44GV44Gb44KLXHJcbiAgICAgIHNlY3JldHNNb2NrLnJlc2V0KCk7XHJcbiAgICAgIHNlY3JldHNNb2NrLm9uKEdldFNlY3JldFZhbHVlQ29tbWFuZCkucmVqZWN0cyhuZXcgRXJyb3IoJ1NlY3JldHMgTWFuYWdlciBlcnJvcicpKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDEpO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LnN0YXR1cykudG9CZSgnZXJyb3InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IuY29kZSkudG9CZSgnVU5BVVRIT1JJWkVEJyk7XHJcbiAgICAgIC8vIFNlY3JldHMgTWFuYWdlcuWPluW+l+OCqOODqeODvOOBruWgtOWQiOOBr1wiRmFpbGVkIHRvIHJldHJpZXZlIEFQSSBrZXlcIuOBjOi/lOOBleOCjOOCi1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ0ZhaWxlZCB0byByZXRyaWV2ZSBBUEkga2V5Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnU2VjcmV0cyBNYW5hZ2Vy44GMU2VjcmV0U3RyaW5n44KS6L+U44GV44Gq44GE5aC05ZCI44GvNDAx44KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyDjgq3jg6Pjg4Pjgrfjg6XjgpLjgq/jg6rjgqLjgZnjgovjgZ/jgoHjgavjgIHnlbDjgarjgotBUEnjgq3jg7zjgpLkvb/nlKhcclxuICAgICAgY29uc3QgdGVzdERhdGVzID0gZ2V0VGVzdERhdGVzKCk7XHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gY3JlYXRlVGVzdEV2ZW50KHRlc3REYXRlcywgJ2Fub3RoZXItZGlmZmVyZW50LWFwaS1rZXknKTtcclxuXHJcbiAgICAgIC8vIFNlY3JldHMgTWFuYWdlcuOBruODouODg+OCr+OCkuODquOCu+ODg+ODiOOBl+OBpuepuuOBruODrOOCueODneODs+OCueOCkui/lOOBmVxyXG4gICAgICBzZWNyZXRzTW9jay5yZXNldCgpO1xyXG4gICAgICBzZWNyZXRzTW9jay5vbihHZXRTZWNyZXRWYWx1ZUNvbW1hbmQpLnJlc29sdmVzKHtcclxuICAgICAgICBTZWNyZXRTdHJpbmc6IHVuZGVmaW5lZCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDAxKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5zdGF0dXMpLnRvQmUoJ2Vycm9yJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLmNvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xyXG4gICAgICAvLyBTZWNyZXRTdHJpbmfjgYznqbrjga7loLTlkIjjga9cIkZhaWxlZCB0byByZXRyaWV2ZSBBUEkga2V5XCLjgYzov5TjgZXjgozjgotcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdGYWlsZWQgdG8gcmV0cmlldmUgQVBJIGtleScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ0FQSV9LRVlfU0VDUkVUX0FSTueSsOWig+WkieaVsOOBjOioreWumuOBleOCjOOBpuOBhOOBquOBhOWgtOWQiOOBrzQwMeOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgb3JpZ2luYWxBcm4gPSBwcm9jZXNzLmVudi5BUElfS0VZX1NFQ1JFVF9BUk47XHJcbiAgICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5BUElfS0VZX1NFQ1JFVF9BUk47XHJcblxyXG4gICAgICAvLyDjgq3jg6Pjg4Pjgrfjg6XjgpLjgq/jg6rjgqLjgZnjgovjgZ/jgoHjgavjgIHnlbDjgarjgotBUEnjgq3jg7zjgpLkvb/nlKhcclxuICAgICAgY29uc3QgdGVzdERhdGVzID0gZ2V0VGVzdERhdGVzKCk7XHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gY3JlYXRlVGVzdEV2ZW50KHRlc3REYXRlcywgJ3lldC1hbm90aGVyLWRpZmZlcmVudC1hcGkta2V5Jyk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDAxKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5zdGF0dXMpLnRvQmUoJ2Vycm9yJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLmNvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xyXG4gICAgICAvLyBBUElfS0VZX1NFQ1JFVF9BUk7jgYzmnKroqK3lrprjga7loLTlkIjjga9cIkZhaWxlZCB0byByZXRyaWV2ZSBBUEkga2V5XCLjgYzov5TjgZXjgozjgotcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdGYWlsZWQgdG8gcmV0cmlldmUgQVBJIGtleScpO1xyXG5cclxuICAgICAgLy8g55Kw5aKD5aSJ5pWw44KS5b6p5YWDXHJcbiAgICAgIGlmIChvcmlnaW5hbEFybikge1xyXG4gICAgICAgIHByb2Nlc3MuZW52LkFQSV9LRVlfU0VDUkVUX0FSTiA9IG9yaWdpbmFsQXJuO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+ODkOODquODh+ODvOOCt+ODp+ODs+OCqOODqeODvO+8iOi/veWKoO+8iScsICgpID0+IHtcclxuICAgIGl0KCdlbmRfZGF0ZeOBruODleOCqeODvOODnuODg+ODiOOBjOS4jeato+OBquWgtOWQiOOBrzQwMOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZXZlbnQ6IEFQSUdhdGV3YXlQcm94eUV2ZW50ID0ge1xyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIHN0YXJ0X2RhdGU6IGdldERheXNBZ28oNyksXHJcbiAgICAgICAgICBlbmRfZGF0ZTogJzIwMjQvMDEvMTUnLCAvLyDkuI3mraPjgarjg5Xjgqnjg7zjg57jg4Pjg4hcclxuICAgICAgICB9KSxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAneC1hcGkta2V5JzogJ3Rlc3QtYXBpLWtleS0xMjM0NScsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtdWx0aVZhbHVlSGVhZGVyczoge30sXHJcbiAgICAgICAgaHR0cE1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGlzQmFzZTY0RW5jb2RlZDogZmFsc2UsXHJcbiAgICAgICAgcGF0aDogJy9jb2xsZWN0JyxcclxuICAgICAgICBwYXRoUGFyYW1ldGVyczogbnVsbCxcclxuICAgICAgICBxdWVyeVN0cmluZ1BhcmFtZXRlcnM6IG51bGwsXHJcbiAgICAgICAgbXVsdGlWYWx1ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogbnVsbCxcclxuICAgICAgICBzdGFnZVZhcmlhYmxlczogbnVsbCxcclxuICAgICAgICByZXF1ZXN0Q29udGV4dDoge30gYXMgYW55LFxyXG4gICAgICAgIHJlc291cmNlOiAnJyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdJbnZhbGlkIGVuZF9kYXRlIGZvcm1hdCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2VuZF9kYXRl44GM5a2Y5Zyo44GX44Gq44GE5pel5LuY44Gu5aC05ZCI44GvNDAw44KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIGNvbnN0IHllYXIgPSB0b2RheS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZXZlbnQgPSBjcmVhdGVUZXN0RXZlbnQoe1xyXG4gICAgICAgIHN0YXJ0X2RhdGU6IGAke3llYXJ9LTAyLTAxYCxcclxuICAgICAgICBlbmRfZGF0ZTogYCR7eWVhcn0tMDItMzBgLCAvLyAy5pyIMzDml6Xjga/lrZjlnKjjgZfjgarjgYRcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignSW52YWxpZCBlbmRfZGF0ZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2VuZF9kYXRl44GM54Sh5Yq544Gq5pel5LuY77yITmFO77yJ44Gu5aC05ZCI44GvNDAw44KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBldmVudCA9IGNyZWF0ZVRlc3RFdmVudCh7XHJcbiAgICAgICAgc3RhcnRfZGF0ZTogZ2V0RGF5c0Fnbyg3KSxcclxuICAgICAgICBlbmRfZGF0ZTogJzIwMjQtMTMtMDEnLCAvLyAxM+aciOOBr+WtmOWcqOOBl+OBquOBhFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdJbnZhbGlkIGVuZF9kYXRlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc3RhcnRfZGF0ZeOBjOeEoeWKueOBquaXpeS7mO+8iE5hTu+8ieOBruWgtOWQiOOBrzQwMOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZXZlbnQgPSBjcmVhdGVUZXN0RXZlbnQoe1xyXG4gICAgICAgIHN0YXJ0X2RhdGU6ICcyMDI0LTEzLTAxJywgLy8gMTPmnIjjga/lrZjlnKjjgZfjgarjgYRcclxuICAgICAgICBlbmRfZGF0ZTogZ2V0RGF5c0FnbygyKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignSW52YWxpZCBzdGFydF9kYXRlJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0FQSeOCreODvOiqjeiovO+8iOi/veWKoO+8iScsICgpID0+IHtcclxuICAgIGl0KCdYLUFwaS1LZXnvvIjlpKfmloflrZfvvInjg5jjg4Pjg4Djg7zjgafjgoLoqo3oqLzjgafjgY3jgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tDb2xsZWN0b3JSZXNwb25zZSA9IHtcclxuICAgICAgICBleGVjdXRpb25faWQ6ICdleGVjXzEyMzQ1Njc4OTBfYWJjMTIzX3Rlc3QxMjM0JyxcclxuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgICBtZXNzYWdlOiAnQ29sbGVjdGlvbiBzdGFydGVkJyxcclxuICAgICAgICBjb2xsZWN0ZWRfY291bnQ6IDAsXHJcbiAgICAgICAgZmFpbGVkX2NvdW50OiAwLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbGFtYmRhTW9jay5vbihJbnZva2VDb21tYW5kKS5yZXNvbHZlcyh7XHJcbiAgICAgICAgU3RhdHVzQ29kZTogMjAwLFxyXG4gICAgICAgIFBheWxvYWQ6IEJ1ZmZlci5mcm9tKEpTT04uc3RyaW5naWZ5KG1vY2tDb2xsZWN0b3JSZXNwb25zZSkpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHRlc3REYXRlcyA9IGdldFRlc3REYXRlcygpO1xyXG4gICAgICBjb25zdCBldmVudCA9IGNyZWF0ZVRlc3RFdmVudCh0ZXN0RGF0ZXMpO1xyXG4gICAgICAvLyB4LWFwaS1rZXnjgpLliYrpmaTjgZfjgaZYLUFwaS1LZXnjgpLoqK3lrppcclxuICAgICAgZGVsZXRlIGV2ZW50LmhlYWRlcnNbJ3gtYXBpLWtleSddO1xyXG4gICAgICBldmVudC5oZWFkZXJzWydYLUFwaS1LZXknXSA9ICd0ZXN0LWFwaS1rZXktMTIzNDUnO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDIwMCk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkuc3RhdHVzKS50b0JlKCdzdWNjZXNzJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1NlY3JldHMgTWFuYWdlcuOCqOODqeODvOODj+ODs+ODieODquODs+OCsCcsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAvLyBURVNUX0VOVj0ndGVzdCfjgpLoqK3lrprjgZfjgabjgq3jg6Pjg4Pjgrfjg6XjgpLnhKHlirnljJZcclxuICAgICAgcHJvY2Vzcy5lbnYuVEVTVF9FTlYgPSAndGVzdCc7XHJcbiAgICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5BUElfS0VZO1xyXG4gICAgICBcclxuICAgICAgLy8gQVBJX0tFWV9TRUNSRVRfQVJO44KS6Kit5a6aXHJcbiAgICAgIHByb2Nlc3MuZW52LkFQSV9LRVlfU0VDUkVUX0FSTiA9ICdhcm46YXdzOnNlY3JldHNtYW5hZ2VyOmFwLW5vcnRoZWFzdC0xOjEyMzQ1Njc4OTAxMjpzZWNyZXQ6dGRuZXQtYXBpLWtleSc7XHJcbiAgICAgIFxyXG4gICAgICAvLyBTZWNyZXRzIE1hbmFnZXLjg6Ljg4Pjgq/jgpLjg6rjgrvjg4Pjg4hcclxuICAgICAgc2VjcmV0c01vY2sucmVzZXQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICAgIC8vIOeSsOWig+WkieaVsOOCkuW+qeWFg1xyXG4gICAgICBwcm9jZXNzLmVudi5URVNUX0VOViA9ICdlMmUnO1xyXG4gICAgICBwcm9jZXNzLmVudi5BUElfS0VZID0gJ3Rlc3QtYXBpLWtleS0xMjM0NSc7XHJcbiAgICAgIFxyXG4gICAgICAvLyBTZWNyZXRzIE1hbmFnZXLjg6Ljg4Pjgq/jgpLlvqnlhYNcclxuICAgICAgc2VjcmV0c01vY2sucmVzZXQoKTtcclxuICAgICAgc2VjcmV0c01vY2sub24oR2V0U2VjcmV0VmFsdWVDb21tYW5kKS5yZXNvbHZlcyh7XHJcbiAgICAgICAgU2VjcmV0U3RyaW5nOiAndGVzdC1hcGkta2V5LTEyMzQ1JyxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnU2VjcmV0U3RyaW5n44GM56m644Gu5aC05ZCI44GvNDAx44Ko44Op44O844KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBzZWNyZXRzTW9jay5vbihHZXRTZWNyZXRWYWx1ZUNvbW1hbmQpLnJlc29sdmVzKHtcclxuICAgICAgICBTZWNyZXRTdHJpbmc6ICcnLCAvLyDnqbrmloflrZfliJdcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0ZXN0RGF0ZXMgPSBnZXRUZXN0RGF0ZXMoKTtcclxuICAgICAgLy8g55Ww44Gq44KLQVBJ44Kt44O844KS5L2/55So44GX44Gm44Kt44Oj44OD44K344Ol44KS44OQ44Kk44OR44K5XHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gY3JlYXRlVGVzdEV2ZW50KHRlc3REYXRlcywgJ3VuaXF1ZS1rZXktZm9yLWVtcHR5LXNlY3JldC10ZXN0Jyk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDAxKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5jb2RlKS50b0JlKCdVTkFVVEhPUklaRUQnKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdGYWlsZWQgdG8gcmV0cmlldmUgQVBJIGtleScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ1NlY3JldHMgTWFuYWdlcuWPluW+l+OCqOODqeODvOOBruWgtOWQiOOBrzQwMeOCqOODqeODvOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgc2VjcmV0c01vY2sub24oR2V0U2VjcmV0VmFsdWVDb21tYW5kKS5yZWplY3RzKFxyXG4gICAgICAgIG5ldyBFcnJvcignQWNjZXNzRGVuaWVkRXhjZXB0aW9uOiBVc2VyIGlzIG5vdCBhdXRob3JpemVkJylcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnN0IHRlc3REYXRlcyA9IGdldFRlc3REYXRlcygpO1xyXG4gICAgICAvLyDnlbDjgarjgotBUEnjgq3jg7zjgpLkvb/nlKjjgZfjgabjgq3jg6Pjg4Pjgrfjg6XjgpLjg5DjgqTjg5HjgrlcclxuICAgICAgY29uc3QgZXZlbnQgPSBjcmVhdGVUZXN0RXZlbnQodGVzdERhdGVzLCAndW5pcXVlLWtleS1mb3ItYWNjZXNzLWRlbmllZC10ZXN0Jyk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDAxKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5jb2RlKS50b0JlKCdVTkFVVEhPUklaRUQnKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdGYWlsZWQgdG8gcmV0cmlldmUgQVBJIGtleScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ1NlY3JldHMgTWFuYWdlcuODjeODg+ODiOODr+ODvOOCr+OCqOODqeODvOOBruWgtOWQiOOBrzQwMeOCqOODqeODvOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgc2VjcmV0c01vY2sub24oR2V0U2VjcmV0VmFsdWVDb21tYW5kKS5yZWplY3RzKFxyXG4gICAgICAgIG5ldyBFcnJvcignTmV0d29ya2luZ0Vycm9yOiBDb25uZWN0aW9uIHRpbWVvdXQnKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgdGVzdERhdGVzID0gZ2V0VGVzdERhdGVzKCk7XHJcbiAgICAgIC8vIOeVsOOBquOCi0FQSeOCreODvOOCkuS9v+eUqOOBl+OBpuOCreODo+ODg+OCt+ODpeOCkuODkOOCpOODkeOCuVxyXG4gICAgICBjb25zdCBldmVudCA9IGNyZWF0ZVRlc3RFdmVudCh0ZXN0RGF0ZXMsICd1bmlxdWUta2V5LWZvci1uZXR3b3JrLWVycm9yLXRlc3QnKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDEpO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLmNvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdBUEnjgq3jg7zjgq3jg6Pjg4Pjgrfjg6UnLCAoKSA9PiB7XHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgLy8g44Kt44Oj44OD44K344Ol44KS44Kv44Oq44KiXHJcbiAgICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5URVNUX0VOVjtcclxuICAgICAgZGVsZXRlIHByb2Nlc3MuZW52LkFQSV9LRVk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBTZWNyZXRzIE1hbmFnZXLjg6Ljg4Pjgq/jgpLjg6rjgrvjg4Pjg4hcclxuICAgICAgc2VjcmV0c01vY2sucmVzZXQoKTtcclxuICAgICAgc2VjcmV0c01vY2sub24oR2V0U2VjcmV0VmFsdWVDb21tYW5kKS5yZXNvbHZlcyh7XHJcbiAgICAgICAgU2VjcmV0U3RyaW5nOiAndGVzdC1hcGkta2V5LTEyMzQ1JyxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnVEVTVF9FTlY9ZTJl44Gu5aC05ZCI44GvQVBJX0tFWeeSsOWig+WkieaVsOOBi+OCieWPluW+l+OBmeOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gVEVTVF9FTlY9ZTJl44KS6Kit5a6aXHJcbiAgICAgIHByb2Nlc3MuZW52LlRFU1RfRU5WID0gJ2UyZSc7XHJcbiAgICAgIHByb2Nlc3MuZW52LkFQSV9LRVkgPSAnZTJlLXRlc3QtYXBpLWtleSc7XHJcblxyXG4gICAgICBjb25zdCBtb2NrQ29sbGVjdG9yUmVzcG9uc2UgPSB7XHJcbiAgICAgICAgZXhlY3V0aW9uX2lkOiAnZXhlY18xMjM0NTY3ODkwX2FiYzEyM190ZXN0MTIzNCcsXHJcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgICAgbWVzc2FnZTogJ0NvbGxlY3Rpb24gc3RhcnRlZCcsXHJcbiAgICAgICAgY29sbGVjdGVkX2NvdW50OiAwLFxyXG4gICAgICAgIGZhaWxlZF9jb3VudDogMCxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGxhbWJkYU1vY2sub24oSW52b2tlQ29tbWFuZCkucmVzb2x2ZXMoe1xyXG4gICAgICAgIFN0YXR1c0NvZGU6IDIwMCxcclxuICAgICAgICBQYXlsb2FkOiBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShtb2NrQ29sbGVjdG9yUmVzcG9uc2UpKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0ZXN0RGF0ZXMgPSBnZXRUZXN0RGF0ZXMoKTtcclxuICAgICAgY29uc3QgZXZlbnQgPSBjcmVhdGVUZXN0RXZlbnQodGVzdERhdGVzLCAnZTJlLXRlc3QtYXBpLWtleScpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDIwMCk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkuc3RhdHVzKS50b0JlKCdzdWNjZXNzJyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBTZWNyZXRzIE1hbmFnZXLjgYzlkbzjgbDjgozjgabjgYTjgarjgYTjgZPjgajjgpLnorroqo1cclxuICAgICAgY29uc3Qgc2VjcmV0c0NhbGxzID0gc2VjcmV0c01vY2suY29tbWFuZENhbGxzKEdldFNlY3JldFZhbHVlQ29tbWFuZCk7XHJcbiAgICAgIGV4cGVjdChzZWNyZXRzQ2FsbHMubGVuZ3RoKS50b0JlKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+OCreODo+ODg+OCt+ODpeOBjOacieWKueOBquWgtOWQiOOBr1NlY3JldHMgTWFuYWdlcuOCkuWRvOOBsOOBquOBhCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8g5pyA5Yid44Gu44Oq44Kv44Ko44K544OI77yI44Kt44Oj44OD44K344Ol44Of44K577yJXHJcbiAgICAgIGNvbnN0IG1vY2tDb2xsZWN0b3JSZXNwb25zZSA9IHtcclxuICAgICAgICBleGVjdXRpb25faWQ6ICdleGVjXzEyMzQ1Njc4OTBfYWJjMTIzX3Rlc3QxMjM0JyxcclxuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgICBtZXNzYWdlOiAnQ29sbGVjdGlvbiBzdGFydGVkJyxcclxuICAgICAgICBjb2xsZWN0ZWRfY291bnQ6IDAsXHJcbiAgICAgICAgZmFpbGVkX2NvdW50OiAwLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbGFtYmRhTW9jay5vbihJbnZva2VDb21tYW5kKS5yZXNvbHZlcyh7XHJcbiAgICAgICAgU3RhdHVzQ29kZTogMjAwLFxyXG4gICAgICAgIFBheWxvYWQ6IEJ1ZmZlci5mcm9tKEpTT04uc3RyaW5naWZ5KG1vY2tDb2xsZWN0b3JSZXNwb25zZSkpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHRlc3REYXRlcyA9IGdldFRlc3REYXRlcygpO1xyXG4gICAgICBjb25zdCBldmVudDEgPSBjcmVhdGVUZXN0RXZlbnQodGVzdERhdGVzLCAndGVzdC1hcGkta2V5LTEyMzQ1Jyk7XHJcblxyXG4gICAgICBhd2FpdCBoYW5kbGVyKGV2ZW50MSwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgLy8gU2VjcmV0cyBNYW5hZ2Vy44GMMeWbnuWRvOOBsOOCjOOBn+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICBsZXQgc2VjcmV0c0NhbGxzID0gc2VjcmV0c01vY2suY29tbWFuZENhbGxzKEdldFNlY3JldFZhbHVlQ29tbWFuZCk7XHJcbiAgICAgIGV4cGVjdChzZWNyZXRzQ2FsbHMubGVuZ3RoKS50b0JlKDEpO1xyXG5cclxuICAgICAgLy8gMuWbnuebruOBruODquOCr+OCqOOCueODiO+8iOOCreODo+ODg+OCt+ODpeODkuODg+ODiO+8iVxyXG4gICAgICBzZWNyZXRzTW9jay5yZXNldCgpO1xyXG4gICAgICBzZWNyZXRzTW9jay5vbihHZXRTZWNyZXRWYWx1ZUNvbW1hbmQpLnJlc29sdmVzKHtcclxuICAgICAgICBTZWNyZXRTdHJpbmc6ICd0ZXN0LWFwaS1rZXktMTIzNDUnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGV2ZW50MiA9IGNyZWF0ZVRlc3RFdmVudCh0ZXN0RGF0ZXMsICd0ZXN0LWFwaS1rZXktMTIzNDUnKTtcclxuICAgICAgYXdhaXQgaGFuZGxlcihldmVudDIsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIFNlY3JldHMgTWFuYWdlcuOBjOWRvOOBsOOCjOOBpuOBhOOBquOBhOOBk+OBqOOCkueiuuiqje+8iOOCreODo+ODg+OCt+ODpeOBi+OCieWPluW+l++8iVxyXG4gICAgICBzZWNyZXRzQ2FsbHMgPSBzZWNyZXRzTW9jay5jb21tYW5kQ2FsbHMoR2V0U2VjcmV0VmFsdWVDb21tYW5kKTtcclxuICAgICAgZXhwZWN0KHNlY3JldHNDYWxscy5sZW5ndGgpLnRvQmUoMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJ2ZXJzaW9uIjozfQ==