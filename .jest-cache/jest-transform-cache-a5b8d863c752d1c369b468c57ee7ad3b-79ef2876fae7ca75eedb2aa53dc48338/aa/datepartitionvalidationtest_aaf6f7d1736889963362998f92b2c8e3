54cb68e8d0c62c695c269714c937f7b2
"use strict";
/**
 * date_partition バリデーションのユニットテスト
 *
 * generateDatePartition関数のバリデーション機能をテストします。
 * 不正な入力に対して適切にValidationErrorをスローすることを確認します。
 *
 * Requirements: 要件6.1, 6.2（エラーハンドリング）
 * Task: 2.4 - date_partitionバリデーションのユニットテスト
 */
Object.defineProperty(exports, "__esModule", { value: true });
const date_partition_1 = require("../date-partition");
const errors_1 = require("../../errors");
describe('date_partition validation', () => {
    describe('validateDisclosedAt', () => {
        describe('不正なフォーマット（ISO8601以外）', () => {
            it('should throw ValidationError for non-ISO8601 format', () => {
                const invalidFormats = [
                    '2024-01-15',
                    '2024/01/15 10:30:00',
                    '15-01-2024T10:30:00Z',
                    '2024-01-15 10:30:00',
                    '2024-01-15T10:30:00',
                    '2024-01-15T10:30',
                    'invalid-date',
                    '',
                    '2024-1-15T10:30:00Z',
                    '2024-01-1T10:30:00Z',
                ];
                invalidFormats.forEach((format) => {
                    expect(() => (0, date_partition_1.validateDisclosedAt)(format)).toThrow(errors_1.ValidationError);
                    expect(() => (0, date_partition_1.validateDisclosedAt)(format)).toThrow(/Invalid disclosed_at format.*Expected ISO 8601 format/);
                });
            });
            it('should throw ValidationError with details', () => {
                try {
                    (0, date_partition_1.validateDisclosedAt)('2024-01-15');
                    fail('Expected ValidationError to be thrown');
                }
                catch (error) {
                    expect(error).toBeInstanceOf(errors_1.ValidationError);
                    expect(error.details).toEqual({
                        disclosed_at: '2024-01-15',
                    });
                }
            });
        });
        describe('存在しない日付', () => {
            it('should throw ValidationError for non-existent dates', () => {
                const invalidDates = [
                    '2024-02-30T10:30:00Z',
                    '2024-02-31T10:30:00Z',
                    '2024-04-31T10:30:00Z',
                    '2024-06-31T10:30:00Z',
                    '2024-09-31T10:30:00Z',
                    '2024-11-31T10:30:00Z',
                    '2023-02-29T10:30:00Z',
                    '2024-13-01T10:30:00Z',
                    '2024-00-01T10:30:00Z',
                ];
                invalidDates.forEach((date) => {
                    expect(() => (0, date_partition_1.validateDisclosedAt)(date)).toThrow(errors_1.ValidationError);
                    expect(() => (0, date_partition_1.validateDisclosedAt)(date)).toThrow(/Invalid date.*Date does not exist/);
                });
            });
            it('should accept leap year February 29', () => {
                expect(() => (0, date_partition_1.validateDisclosedAt)('2024-02-29T10:30:00Z')).not.toThrow();
            });
            it('should reject non-leap year February 29', () => {
                expect(() => (0, date_partition_1.validateDisclosedAt)('2023-02-29T10:30:00Z')).toThrow(errors_1.ValidationError);
            });
        });
        describe('範囲外の日付', () => {
            it('should throw ValidationError for dates before 1970-01-01', () => {
                const oldDates = [
                    '1969-12-31T23:59:59Z',
                    '1969-01-01T00:00:00Z',
                    '1900-01-01T00:00:00Z',
                ];
                oldDates.forEach((date) => {
                    expect(() => (0, date_partition_1.validateDisclosedAt)(date)).toThrow(errors_1.ValidationError);
                    expect(() => (0, date_partition_1.validateDisclosedAt)(date)).toThrow(/Date out of range.*Must be between/);
                });
            });
            it('should accept 1970-01-01', () => {
                expect(() => (0, date_partition_1.validateDisclosedAt)('1970-01-01T00:00:00Z')).not.toThrow();
            });
            it('should throw ValidationError for dates after current time + 1 day', () => {
                const futureDate = new Date(Date.now() + 2 * 24 * 60 * 60 * 1000);
                const futureDateStr = futureDate.toISOString();
                expect(() => (0, date_partition_1.validateDisclosedAt)(futureDateStr)).toThrow(errors_1.ValidationError);
                expect(() => (0, date_partition_1.validateDisclosedAt)(futureDateStr)).toThrow(/Date out of range.*Must be between/);
            });
            it('should accept current time', () => {
                const now = new Date().toISOString();
                expect(() => (0, date_partition_1.validateDisclosedAt)(now)).not.toThrow();
            });
            it('should accept current time + 1 day', () => {
                const tomorrow = new Date(Date.now() + 24 * 60 * 60 * 1000);
                const tomorrowStr = tomorrow.toISOString();
                expect(() => (0, date_partition_1.validateDisclosedAt)(tomorrowStr)).not.toThrow();
            });
            it('should throw ValidationError with range details', () => {
                try {
                    (0, date_partition_1.validateDisclosedAt)('1969-12-31T23:59:59Z');
                    fail('Expected ValidationError to be thrown');
                }
                catch (error) {
                    expect(error).toBeInstanceOf(errors_1.ValidationError);
                    expect(error.details).toHaveProperty('disclosed_at');
                    expect(error.details).toHaveProperty('min_date');
                    expect(error.details).toHaveProperty('max_date');
                }
            });
        });
        describe('有効な日付', () => {
            it('should accept valid ISO8601 dates with Z timezone', () => {
                const validDates = [
                    '2024-01-15T10:30:00Z',
                    '2024-01-15T10:30:00.000Z',
                    '2024-12-31T23:59:59Z',
                    '2024-12-31T23:59:59.999Z',
                    '1970-01-01T00:00:00Z',
                ];
                validDates.forEach((date) => {
                    expect(() => (0, date_partition_1.validateDisclosedAt)(date)).not.toThrow();
                });
            });
            it('should accept valid ISO8601 dates with offset timezone', () => {
                const validDates = [
                    '2024-01-15T10:30:00+09:00',
                    '2024-01-15T10:30:00-05:00',
                    '2024-01-15T10:30:00+00:00',
                ];
                validDates.forEach((date) => {
                    expect(() => (0, date_partition_1.validateDisclosedAt)(date)).not.toThrow();
                });
            });
        });
    });
    describe('generateDatePartition', () => {
        describe('不正な入力でValidationErrorをスロー', () => {
            it('should throw ValidationError for invalid format', () => {
                expect(() => (0, date_partition_1.generateDatePartition)('2024-01-15')).toThrow(errors_1.ValidationError);
            });
            it('should throw ValidationError for non-existent date', () => {
                expect(() => (0, date_partition_1.generateDatePartition)('2024-02-30T10:30:00Z')).toThrow(errors_1.ValidationError);
            });
            it('should throw ValidationError for out-of-range date', () => {
                expect(() => (0, date_partition_1.generateDatePartition)('1969-12-31T23:59:59Z')).toThrow(errors_1.ValidationError);
            });
        });
        describe('有効な入力でdate_partitionを生成', () => {
            it('should generate date_partition for valid dates', () => {
                expect((0, date_partition_1.generateDatePartition)('2024-01-15T10:30:00Z')).toBe('2024-01');
                expect((0, date_partition_1.generateDatePartition)('2024-12-31T23:59:59Z')).toBe('2025-01');
                expect((0, date_partition_1.generateDatePartition)('1970-01-01T00:00:00Z')).toBe('1970-01');
            });
        });
    });
    describe('エッジケース', () => {
        describe('月またぎ（UTC → JST）', () => {
            it('should handle month boundary correctly', () => {
                // UTC: 2024-01-31T15:30:00Z → JST: 2024-02-01T00:30:00 → "2024-02"
                expect((0, date_partition_1.generateDatePartition)('2024-01-31T15:30:00Z')).toBe('2024-02');
                // UTC: 2024-02-01T14:59:59Z → JST: 2024-01-31T23:59:59 → "2024-01"
                // Note: 14:59:59 UTC + 9 hours = 23:59:59 JST (same day in JST)
                expect((0, date_partition_1.generateDatePartition)('2024-02-01T14:59:59Z')).toBe('2024-02');
            });
            it('should handle leap year February correctly', () => {
                expect((0, date_partition_1.generateDatePartition)('2024-02-29T15:00:00Z')).toBe('2024-03');
            });
            it('should handle year boundary correctly', () => {
                expect((0, date_partition_1.generateDatePartition)('2023-12-31T15:30:00Z')).toBe('2024-01');
            });
            it('should handle non-leap year February correctly', () => {
                expect((0, date_partition_1.generateDatePartition)('2023-02-28T15:00:00Z')).toBe('2023-03');
            });
        });
        describe('タイムゾーンオフセット', () => {
            it('should handle JST timezone offset', () => {
                expect((0, date_partition_1.generateDatePartition)('2024-01-31T15:30:00+09:00')).toBe('2024-01');
            });
            it('should handle negative timezone offset', () => {
                expect((0, date_partition_1.generateDatePartition)('2024-01-31T15:30:00-05:00')).toBe('2024-02');
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFx1dGlsc1xcX190ZXN0c19fXFxkYXRlLXBhcnRpdGlvbi52YWxpZGF0aW9uLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7OztHQVFHOztBQUVILHNEQUErRTtBQUMvRSx5Q0FBK0M7QUFFL0MsUUFBUSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtJQUN6QyxRQUFRLENBQUMscUJBQXFCLEVBQUUsR0FBRyxFQUFFO1FBQ25DLFFBQVEsQ0FBQyxzQkFBc0IsRUFBRSxHQUFHLEVBQUU7WUFDcEMsRUFBRSxDQUFDLHFEQUFxRCxFQUFFLEdBQUcsRUFBRTtnQkFDN0QsTUFBTSxjQUFjLEdBQUc7b0JBQ3JCLFlBQVk7b0JBQ1oscUJBQXFCO29CQUNyQixzQkFBc0I7b0JBQ3RCLHFCQUFxQjtvQkFDckIscUJBQXFCO29CQUNyQixrQkFBa0I7b0JBQ2xCLGNBQWM7b0JBQ2QsRUFBRTtvQkFDRixxQkFBcUI7b0JBQ3JCLHFCQUFxQjtpQkFDdEIsQ0FBQztnQkFFRixjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUU7b0JBQ2hDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFBLG9DQUFtQixFQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLHdCQUFlLENBQUMsQ0FBQztvQkFDbkUsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUEsb0NBQW1CLEVBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQy9DLHVEQUF1RCxDQUN4RCxDQUFDO2dCQUNKLENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQyxDQUFDLENBQUM7WUFFSCxFQUFFLENBQUMsMkNBQTJDLEVBQUUsR0FBRyxFQUFFO2dCQUNuRCxJQUFJLENBQUM7b0JBQ0gsSUFBQSxvQ0FBbUIsRUFBQyxZQUFZLENBQUMsQ0FBQztvQkFDbEMsSUFBSSxDQUFDLHVDQUF1QyxDQUFDLENBQUM7Z0JBQ2hELENB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QUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUN4RSxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsUUFBUSxDQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUU7WUFDM0IsRUFBRSxDQUFDLG1DQUFtQyxFQUFFLEdBQUcsRUFBRTtnQkFDM0MsTUFBTSxDQUFDLElBQUEsc0NBQXFCLEVBQUMsMkJBQTJCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUM3RSxDQUFDLENBQUMsQ0FBQztZQUVILEVBQUUsQ0FBQyx3Q0FBd0MsRUFBRSxHQUFHLEVBQUU7Z0JBQ2hELE1BQU0sQ0FBQyxJQUFBLHNDQUFxQixFQUFDLDJCQUEyQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDN0UsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFx1dGlsc1xcX190ZXN0c19fXFxkYXRlLXBhcnRpdGlvbi52YWxpZGF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIGRhdGVfcGFydGl0aW9uIOODkOODquODh+ODvOOCt+ODp+ODs+OBruODpuODi+ODg+ODiOODhuOCueODiFxyXG4gKlxyXG4gKiBnZW5lcmF0ZURhdGVQYXJ0aXRpb27plqLmlbDjga7jg5Djg6rjg4fjg7zjgrfjg6fjg7PmqZ/og73jgpLjg4bjgrnjg4jjgZfjgb7jgZnjgIJcclxuICog5LiN5q2j44Gq5YWl5Yqb44Gr5a++44GX44Gm6YGp5YiH44GrVmFsaWRhdGlvbkVycm9y44KS44K544Ot44O844GZ44KL44GT44Go44KS56K66KqN44GX44G+44GZ44CCXHJcbiAqXHJcbiAqIFJlcXVpcmVtZW50czog6KaB5Lu2Ni4xLCA2LjLvvIjjgqjjg6njg7zjg4/jg7Pjg4njg6rjg7PjgrDvvIlcclxuICogVGFzazogMi40IC0gZGF0ZV9wYXJ0aXRpb27jg5Djg6rjg4fjg7zjgrfjg6fjg7Pjga7jg6bjg4vjg4Pjg4jjg4bjgrnjg4hcclxuICovXHJcblxyXG5pbXBvcnQgeyBnZW5lcmF0ZURhdGVQYXJ0aXRpb24sIHZhbGlkYXRlRGlzY2xvc2VkQXQgfSBmcm9tICcuLi9kYXRlLXBhcnRpdGlvbic7XHJcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciB9IGZyb20gJy4uLy4uL2Vycm9ycyc7XHJcblxyXG5kZXNjcmliZSgnZGF0ZV9wYXJ0aXRpb24gdmFsaWRhdGlvbicsICgpID0+IHtcclxuICBkZXNjcmliZSgndmFsaWRhdGVEaXNjbG9zZWRBdCcsICgpID0+IHtcclxuICAgIGRlc2NyaWJlKCfkuI3mraPjgarjg5Xjgqnjg7zjg57jg4Pjg4jvvIhJU084NjAx5Lul5aSW77yJJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIHRocm93IFZhbGlkYXRpb25FcnJvciBmb3Igbm9uLUlTTzg2MDEgZm9ybWF0JywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGludmFsaWRGb3JtYXRzID0gW1xyXG4gICAgICAgICAgJzIwMjQtMDEtMTUnLFxyXG4gICAgICAgICAgJzIwMjQvMDEvMTUgMTA6MzA6MDAnLFxyXG4gICAgICAgICAgJzE1LTAxLTIwMjRUMTA6MzA6MDBaJyxcclxuICAgICAgICAgICcyMDI0LTAxLTE1IDEwOjMwOjAwJyxcclxuICAgICAgICAgICcyMDI0LTAxLTE1VDEwOjMwOjAwJyxcclxuICAgICAgICAgICcyMDI0LTAxLTE1VDEwOjMwJyxcclxuICAgICAgICAgICdpbnZhbGlkLWRhdGUnLFxyXG4gICAgICAgICAgJycsXHJcbiAgICAgICAgICAnMjAyNC0xLTE1VDEwOjMwOjAwWicsXHJcbiAgICAgICAgICAnMjAyNC0wMS0xVDEwOjMwOjAwWicsXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgaW52YWxpZEZvcm1hdHMuZm9yRWFjaCgoZm9ybWF0KSA9PiB7XHJcbiAgICAgICAgICBleHBlY3QoKCkgPT4gdmFsaWRhdGVEaXNjbG9zZWRBdChmb3JtYXQpKS50b1Rocm93KFZhbGlkYXRpb25FcnJvcik7XHJcbiAgICAgICAgICBleHBlY3QoKCkgPT4gdmFsaWRhdGVEaXNjbG9zZWRBdChmb3JtYXQpKS50b1Rocm93KFxyXG4gICAgICAgICAgICAvSW52YWxpZCBkaXNjbG9zZWRfYXQgZm9ybWF0LipFeHBlY3RlZCBJU08gODYwMSBmb3JtYXQvXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgdGhyb3cgVmFsaWRhdGlvbkVycm9yIHdpdGggZGV0YWlscycsICgpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgdmFsaWRhdGVEaXNjbG9zZWRBdCgnMjAyNC0wMS0xNScpO1xyXG4gICAgICAgICAgZmFpbCgnRXhwZWN0ZWQgVmFsaWRhdGlvbkVycm9yIHRvIGJlIHRocm93bicpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvQmVJbnN0YW5jZU9mKFZhbGlkYXRpb25FcnJvcik7XHJcbiAgICAgICAgICBleHBlY3QoKGVycm9yIGFzIFZhbGlkYXRpb25FcnJvcikuZGV0YWlscykudG9FcXVhbCh7XHJcbiAgICAgICAgICAgIGRpc2Nsb3NlZF9hdDogJzIwMjQtMDEtMTUnLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCflrZjlnKjjgZfjgarjgYTml6Xku5gnLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgdGhyb3cgVmFsaWRhdGlvbkVycm9yIGZvciBub24tZXhpc3RlbnQgZGF0ZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW52YWxpZERhdGVzID0gW1xyXG4gICAgICAgICAgJzIwMjQtMDItMzBUMTA6MzA6MDBaJyxcclxuICAgICAgICAgICcyMDI0LTAyLTMxVDEwOjMwOjAwWicsXHJcbiAgICAgICAgICAnMjAyNC0wNC0zMVQxMDozMDowMFonLFxyXG4gICAgICAgICAgJzIwMjQtMDYtMzFUMTA6MzA6MDBaJyxcclxuICAgICAgICAgICcyMDI0LTA5LTMxVDEwOjMwOjAwWicsXHJcbiAgICAgICAgICAnMjAyNC0xMS0zMVQxMDozMDowMFonLFxyXG4gICAgICAgICAgJzIwMjMtMDItMjlUMTA6MzA6MDBaJyxcclxuICAgICAgICAgICcyMDI0LTEzLTAxVDEwOjMwOjAwWicsXHJcbiAgICAgICAgICAnMjAyNC0wMC0wMVQxMDozMDowMFonLFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGludmFsaWREYXRlcy5mb3JFYWNoKChkYXRlKSA9PiB7XHJcbiAgICAgICAgICBleHBlY3QoKCkgPT4gdmFsaWRhdGVEaXNjbG9zZWRBdChkYXRlKSkudG9UaHJvdyhWYWxpZGF0aW9uRXJyb3IpO1xyXG4gICAgICAgICAgZXhwZWN0KCgpID0+IHZhbGlkYXRlRGlzY2xvc2VkQXQoZGF0ZSkpLnRvVGhyb3coL0ludmFsaWQgZGF0ZS4qRGF0ZSBkb2VzIG5vdCBleGlzdC8pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgYWNjZXB0IGxlYXAgeWVhciBGZWJydWFyeSAyOScsICgpID0+IHtcclxuICAgICAgICBleHBlY3QoKCkgPT4gdmFsaWRhdGVEaXNjbG9zZWRBdCgnMjAyNC0wMi0yOVQxMDozMDowMFonKSkubm90LnRvVGhyb3coKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHJlamVjdCBub24tbGVhcCB5ZWFyIEZlYnJ1YXJ5IDI5JywgKCkgPT4ge1xyXG4gICAgICAgIGV4cGVjdCgoKSA9PiB2YWxpZGF0ZURpc2Nsb3NlZEF0KCcyMDIzLTAyLTI5VDEwOjMwOjAwWicpKS50b1Rocm93KFZhbGlkYXRpb25FcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ+evhOWbsuWkluOBruaXpeS7mCcsICgpID0+IHtcclxuICAgICAgaXQoJ3Nob3VsZCB0aHJvdyBWYWxpZGF0aW9uRXJyb3IgZm9yIGRhdGVzIGJlZm9yZSAxOTcwLTAxLTAxJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9sZERhdGVzID0gW1xyXG4gICAgICAgICAgJzE5NjktMTItMzFUMjM6NTk6NTlaJyxcclxuICAgICAgICAgICcxOTY5LTAxLTAxVDAwOjAwOjAwWicsXHJcbiAgICAgICAgICAnMTkwMC0wMS0wMVQwMDowMDowMFonLFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIG9sZERhdGVzLmZvckVhY2goKGRhdGUpID0+IHtcclxuICAgICAgICAgIGV4cGVjdCgoKSA9PiB2YWxpZGF0ZURpc2Nsb3NlZEF0KGRhdGUpKS50b1Rocm93KFZhbGlkYXRpb25FcnJvcik7XHJcbiAgICAgICAgICBleHBlY3QoKCkgPT4gdmFsaWRhdGVEaXNjbG9zZWRBdChkYXRlKSkudG9UaHJvdygvRGF0ZSBvdXQgb2YgcmFuZ2UuKk11c3QgYmUgYmV0d2Vlbi8pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgYWNjZXB0IDE5NzAtMDEtMDEnLCAoKSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KCgpID0+IHZhbGlkYXRlRGlzY2xvc2VkQXQoJzE5NzAtMDEtMDFUMDA6MDA6MDBaJykpLm5vdC50b1Rocm93KCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCB0aHJvdyBWYWxpZGF0aW9uRXJyb3IgZm9yIGRhdGVzIGFmdGVyIGN1cnJlbnQgdGltZSArIDEgZGF5JywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZ1dHVyZURhdGUgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgMiAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xyXG4gICAgICAgIGNvbnN0IGZ1dHVyZURhdGVTdHIgPSBmdXR1cmVEYXRlLnRvSVNPU3RyaW5nKCk7XHJcblxyXG4gICAgICAgIGV4cGVjdCgoKSA9PiB2YWxpZGF0ZURpc2Nsb3NlZEF0KGZ1dHVyZURhdGVTdHIpKS50b1Rocm93KFZhbGlkYXRpb25FcnJvcik7XHJcbiAgICAgICAgZXhwZWN0KCgpID0+IHZhbGlkYXRlRGlzY2xvc2VkQXQoZnV0dXJlRGF0ZVN0cikpLnRvVGhyb3coXHJcbiAgICAgICAgICAvRGF0ZSBvdXQgb2YgcmFuZ2UuKk11c3QgYmUgYmV0d2Vlbi9cclxuICAgICAgICApO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgYWNjZXB0IGN1cnJlbnQgdGltZScsICgpID0+IHtcclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgZXhwZWN0KCgpID0+IHZhbGlkYXRlRGlzY2xvc2VkQXQobm93KSkubm90LnRvVGhyb3coKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGFjY2VwdCBjdXJyZW50IHRpbWUgKyAxIGRheScsICgpID0+IHtcclxuICAgICAgICBjb25zdCB0b21vcnJvdyA9IG5ldyBEYXRlKERhdGUubm93KCkgKyAyNCAqIDYwICogNjAgKiAxMDAwKTtcclxuICAgICAgICBjb25zdCB0b21vcnJvd1N0ciA9IHRvbW9ycm93LnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgZXhwZWN0KCgpID0+IHZhbGlkYXRlRGlzY2xvc2VkQXQodG9tb3Jyb3dTdHIpKS5ub3QudG9UaHJvdygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgdGhyb3cgVmFsaWRhdGlvbkVycm9yIHdpdGggcmFuZ2UgZGV0YWlscycsICgpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgdmFsaWRhdGVEaXNjbG9zZWRBdCgnMTk2OS0xMi0zMVQyMzo1OTo1OVonKTtcclxuICAgICAgICAgIGZhaWwoJ0V4cGVjdGVkIFZhbGlkYXRpb25FcnJvciB0byBiZSB0aHJvd24nKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgZXhwZWN0KGVycm9yKS50b0JlSW5zdGFuY2VPZihWYWxpZGF0aW9uRXJyb3IpO1xyXG4gICAgICAgICAgZXhwZWN0KChlcnJvciBhcyBWYWxpZGF0aW9uRXJyb3IpLmRldGFpbHMpLnRvSGF2ZVByb3BlcnR5KCdkaXNjbG9zZWRfYXQnKTtcclxuICAgICAgICAgIGV4cGVjdCgoZXJyb3IgYXMgVmFsaWRhdGlvbkVycm9yKS5kZXRhaWxzKS50b0hhdmVQcm9wZXJ0eSgnbWluX2RhdGUnKTtcclxuICAgICAgICAgIGV4cGVjdCgoZXJyb3IgYXMgVmFsaWRhdGlvbkVycm9yKS5kZXRhaWxzKS50b0hhdmVQcm9wZXJ0eSgnbWF4X2RhdGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ+acieWKueOBquaXpeS7mCcsICgpID0+IHtcclxuICAgICAgaXQoJ3Nob3VsZCBhY2NlcHQgdmFsaWQgSVNPODYwMSBkYXRlcyB3aXRoIFogdGltZXpvbmUnLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsaWREYXRlcyA9IFtcclxuICAgICAgICAgICcyMDI0LTAxLTE1VDEwOjMwOjAwWicsXHJcbiAgICAgICAgICAnMjAyNC0wMS0xNVQxMDozMDowMC4wMDBaJyxcclxuICAgICAgICAgICcyMDI0LTEyLTMxVDIzOjU5OjU5WicsXHJcbiAgICAgICAgICAnMjAyNC0xMi0zMVQyMzo1OTo1OS45OTlaJyxcclxuICAgICAgICAgICcxOTcwLTAxLTAxVDAwOjAwOjAwWicsXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgdmFsaWREYXRlcy5mb3JFYWNoKChkYXRlKSA9PiB7XHJcbiAgICAgICAgICBleHBlY3QoKCkgPT4gdmFsaWRhdGVEaXNjbG9zZWRBdChkYXRlKSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGFjY2VwdCB2YWxpZCBJU084NjAxIGRhdGVzIHdpdGggb2Zmc2V0IHRpbWV6b25lJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbGlkRGF0ZXMgPSBbXHJcbiAgICAgICAgICAnMjAyNC0wMS0xNVQxMDozMDowMCswOTowMCcsXHJcbiAgICAgICAgICAnMjAyNC0wMS0xNVQxMDozMDowMC0wNTowMCcsXHJcbiAgICAgICAgICAnMjAyNC0wMS0xNVQxMDozMDowMCswMDowMCcsXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgdmFsaWREYXRlcy5mb3JFYWNoKChkYXRlKSA9PiB7XHJcbiAgICAgICAgICBleHBlY3QoKCkgPT4gdmFsaWRhdGVEaXNjbG9zZWRBdChkYXRlKSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2dlbmVyYXRlRGF0ZVBhcnRpdGlvbicsICgpID0+IHtcclxuICAgIGRlc2NyaWJlKCfkuI3mraPjgarlhaXlipvjgadWYWxpZGF0aW9uRXJyb3LjgpLjgrnjg63jg7wnLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgdGhyb3cgVmFsaWRhdGlvbkVycm9yIGZvciBpbnZhbGlkIGZvcm1hdCcsICgpID0+IHtcclxuICAgICAgICBleHBlY3QoKCkgPT4gZ2VuZXJhdGVEYXRlUGFydGl0aW9uKCcyMDI0LTAxLTE1JykpLnRvVGhyb3coVmFsaWRhdGlvbkVycm9yKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHRocm93IFZhbGlkYXRpb25FcnJvciBmb3Igbm9uLWV4aXN0ZW50IGRhdGUnLCAoKSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KCgpID0+IGdlbmVyYXRlRGF0ZVBhcnRpdGlvbignMjAyNC0wMi0zMFQxMDozMDowMFonKSkudG9UaHJvdyhWYWxpZGF0aW9uRXJyb3IpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgdGhyb3cgVmFsaWRhdGlvbkVycm9yIGZvciBvdXQtb2YtcmFuZ2UgZGF0ZScsICgpID0+IHtcclxuICAgICAgICBleHBlY3QoKCkgPT4gZ2VuZXJhdGVEYXRlUGFydGl0aW9uKCcxOTY5LTEyLTMxVDIzOjU5OjU5WicpKS50b1Rocm93KFZhbGlkYXRpb25FcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ+acieWKueOBquWFpeWKm+OBp2RhdGVfcGFydGl0aW9u44KS55Sf5oiQJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIGRhdGVfcGFydGl0aW9uIGZvciB2YWxpZCBkYXRlcycsICgpID0+IHtcclxuICAgICAgICBleHBlY3QoZ2VuZXJhdGVEYXRlUGFydGl0aW9uKCcyMDI0LTAxLTE1VDEwOjMwOjAwWicpKS50b0JlKCcyMDI0LTAxJyk7XHJcbiAgICAgICAgZXhwZWN0KGdlbmVyYXRlRGF0ZVBhcnRpdGlvbignMjAyNC0xMi0zMVQyMzo1OTo1OVonKSkudG9CZSgnMjAyNS0wMScpO1xyXG4gICAgICAgIGV4cGVjdChnZW5lcmF0ZURhdGVQYXJ0aXRpb24oJzE5NzAtMDEtMDFUMDA6MDA6MDBaJykpLnRvQmUoJzE5NzAtMDEnKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+OCqOODg+OCuOOCseODvOOCuScsICgpID0+IHtcclxuICAgIGRlc2NyaWJlKCfmnIjjgb7jgZ/jgY7vvIhVVEMg4oaSIEpTVO+8iScsICgpID0+IHtcclxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgbW9udGggYm91bmRhcnkgY29ycmVjdGx5JywgKCkgPT4ge1xyXG4gICAgICAgIC8vIFVUQzogMjAyNC0wMS0zMVQxNTozMDowMFog4oaSIEpTVDogMjAyNC0wMi0wMVQwMDozMDowMCDihpIgXCIyMDI0LTAyXCJcclxuICAgICAgICBleHBlY3QoZ2VuZXJhdGVEYXRlUGFydGl0aW9uKCcyMDI0LTAxLTMxVDE1OjMwOjAwWicpKS50b0JlKCcyMDI0LTAyJyk7XHJcbiAgICAgICAgLy8gVVRDOiAyMDI0LTAyLTAxVDE0OjU5OjU5WiDihpIgSlNUOiAyMDI0LTAxLTMxVDIzOjU5OjU5IOKGkiBcIjIwMjQtMDFcIlxyXG4gICAgICAgIC8vIE5vdGU6IDE0OjU5OjU5IFVUQyArIDkgaG91cnMgPSAyMzo1OTo1OSBKU1QgKHNhbWUgZGF5IGluIEpTVClcclxuICAgICAgICBleHBlY3QoZ2VuZXJhdGVEYXRlUGFydGl0aW9uKCcyMDI0LTAyLTAxVDE0OjU5OjU5WicpKS50b0JlKCcyMDI0LTAyJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgbGVhcCB5ZWFyIEZlYnJ1YXJ5IGNvcnJlY3RseScsICgpID0+IHtcclxuICAgICAgICBleHBlY3QoZ2VuZXJhdGVEYXRlUGFydGl0aW9uKCcyMDI0LTAyLTI5VDE1OjAwOjAwWicpKS50b0JlKCcyMDI0LTAzJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgeWVhciBib3VuZGFyeSBjb3JyZWN0bHknLCAoKSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KGdlbmVyYXRlRGF0ZVBhcnRpdGlvbignMjAyMy0xMi0zMVQxNTozMDowMFonKSkudG9CZSgnMjAyNC0wMScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG5vbi1sZWFwIHllYXIgRmVicnVhcnkgY29ycmVjdGx5JywgKCkgPT4ge1xyXG4gICAgICAgIGV4cGVjdChnZW5lcmF0ZURhdGVQYXJ0aXRpb24oJzIwMjMtMDItMjhUMTU6MDA6MDBaJykpLnRvQmUoJzIwMjMtMDMnKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgn44K/44Kk44Og44K+44O844Oz44Kq44OV44K744OD44OIJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBKU1QgdGltZXpvbmUgb2Zmc2V0JywgKCkgPT4ge1xyXG4gICAgICAgIGV4cGVjdChnZW5lcmF0ZURhdGVQYXJ0aXRpb24oJzIwMjQtMDEtMzFUMTU6MzA6MDArMDk6MDAnKSkudG9CZSgnMjAyNC0wMScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG5lZ2F0aXZlIHRpbWV6b25lIG9mZnNldCcsICgpID0+IHtcclxuICAgICAgICBleHBlY3QoZ2VuZXJhdGVEYXRlUGFydGl0aW9uKCcyMDI0LTAxLTMxVDE1OjMwOjAwLTA1OjAwJykpLnRvQmUoJzIwMjQtMDInKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJ2ZXJzaW9uIjozfQ==