{"file":"C:\\Users\\ti198\\investment_analysis_opopo\\cdk\\__tests__\\cloudwatch-integration.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\ti198\\investment_analysis_opopo\\cdk\\__tests__\\cloudwatch-integration.test.ts"],"sourcesContent":["/**\r\n * CloudWatch Integration Tests\r\n * \r\n * すべてのCloudWatchコンポーネント（メトリクス、アラーム、ダッシュボード）が\r\n * 正しく統合されていることを検証します。\r\n * \r\n * Requirements: 要件14.1（テスト）\r\n */\r\n\r\nimport * as cdk from 'aws-cdk-lib';\r\nimport * as lambda from 'aws-cdk-lib/aws-lambda';\r\nimport * as dynamodb from 'aws-cdk-lib/aws-dynamodb';\r\nimport * as s3 from 'aws-cdk-lib/aws-s3';\r\nimport * as apigateway from 'aws-cdk-lib/aws-apigateway';\r\nimport { Template, Match } from 'aws-cdk-lib/assertions';\r\nimport { CloudWatchAlarms } from '../lib/constructs/cloudwatch-alarms';\r\nimport { CloudWatchDashboard } from '../lib/constructs/cloudwatch-dashboard';\r\n\r\ndescribe('CloudWatch Integration Tests', () => {\r\n  let stack: cdk.Stack;\r\n  let mockLambdaFunctions: {\r\n    collector: lambda.IFunction;\r\n    query: lambda.IFunction;\r\n    export: lambda.IFunction;\r\n  };\r\n  let mockDynamodbTables: {\r\n    disclosures: dynamodb.ITable;\r\n    executions: dynamodb.ITable;\r\n    exportStatus: dynamodb.ITable;\r\n  };\r\n  let mockS3Buckets: {\r\n    pdfs: s3.IBucket;\r\n    exports: s3.IBucket;\r\n  };\r\n  let mockApiGateway: apigateway.IRestApi;\r\n\r\n  beforeEach(() => {\r\n    stack = new cdk.Stack();\r\n\r\n    // モックLambda関数を作成\r\n    const createMockLambda = (id: string): lambda.IFunction => {\r\n      return new lambda.Function(stack, id, {\r\n        runtime: lambda.Runtime.NODEJS_20_X,\r\n        handler: 'index.handler',\r\n        code: lambda.Code.fromInline('exports.handler = async () => {};'),\r\n        functionName: `test-${id.toLowerCase()}`,\r\n      });\r\n    };\r\n\r\n    mockLambdaFunctions = {\r\n      collector: createMockLambda('CollectorFunction'),\r\n      query: createMockLambda('QueryFunction'),\r\n      export: createMockLambda('ExportFunction'),\r\n    };\r\n\r\n    // モックDynamoDBテーブルを作成\r\n    mockDynamodbTables = {\r\n      disclosures: new dynamodb.Table(stack, 'DisclosuresTable', {\r\n        partitionKey: { name: 'disclosure_id', type: dynamodb.AttributeType.STRING },\r\n      }),\r\n      executions: new dynamodb.Table(stack, 'ExecutionsTable', {\r\n        partitionKey: { name: 'execution_id', type: dynamodb.AttributeType.STRING },\r\n      }),\r\n      exportStatus: new dynamodb.Table(stack, 'ExportStatusTable', {\r\n        partitionKey: { name: 'export_id', type: dynamodb.AttributeType.STRING },\r\n      }),\r\n    };\r\n\r\n    // モックS3バケットを作成\r\n    mockS3Buckets = {\r\n      pdfs: new s3.Bucket(stack, 'PdfsBucket'),\r\n      exports: new s3.Bucket(stack, 'ExportsBucket'),\r\n    };\r\n\r\n    // モックAPI Gatewayを作成\r\n    mockApiGateway = new apigateway.RestApi(stack, 'TestApi', {\r\n      restApiName: 'test-api',\r\n      deploy: false,\r\n    });\r\n\r\n    // ダミーリソースとメソッドを追加\r\n    const resource = mockApiGateway.root.addResource('test');\r\n    resource.addMethod('GET');\r\n  });\r\n\r\n  describe('カスタムメトリクスの送信確認', () => {\r\n    test('Lambda関数にCloudWatchメトリクス送信権限が付与されていること', () => {\r\n      // Lambda関数にメトリクス送信権限を付与\r\n      Object.values(mockLambdaFunctions).forEach((fn) => {\r\n        fn.addToRolePolicy(\r\n          new cdk.aws_iam.PolicyStatement({\r\n            effect: cdk.aws_iam.Effect.ALLOW,\r\n            actions: ['cloudwatch:PutMetricData'],\r\n            resources: ['*'],\r\n          })\r\n        );\r\n      });\r\n\r\n      const template = Template.fromStack(stack);\r\n\r\n      // IAMポリシーが作成されていることを確認\r\n      template.hasResourceProperties('AWS::IAM::Policy', {\r\n        PolicyDocument: {\r\n          Statement: Match.arrayWith([\r\n            Match.objectLike({\r\n              Action: 'cloudwatch:PutMetricData',\r\n              Effect: 'Allow',\r\n              Resource: '*',\r\n            }),\r\n          ]),\r\n        },\r\n      });\r\n    });\r\n\r\n    test('カスタムメトリクス名前空間が正しく設定されていること', () => {\r\n      // メトリクス送信のテスト（実際のメトリクス送信はsrc/utils/metrics.tsでテスト済み）\r\n      // ここではLambda関数が正しい環境変数を持っていることを確認\r\n\r\n      const template = Template.fromStack(stack);\r\n\r\n      // Lambda関数が作成されていることを確認\r\n      template.resourceCountIs('AWS::Lambda::Function', 3);\r\n    });\r\n\r\n    test('すべてのLambda関数がメトリクス送信権限を持つこと', () => {\r\n      // すべてのLambda関数にメトリクス送信権限を付与\r\n      Object.values(mockLambdaFunctions).forEach((fn) => {\r\n        fn.addToRolePolicy(\r\n          new cdk.aws_iam.PolicyStatement({\r\n            effect: cdk.aws_iam.Effect.ALLOW,\r\n            actions: ['cloudwatch:PutMetricData'],\r\n            resources: ['*'],\r\n          })\r\n        );\r\n      });\r\n\r\n      const template = Template.fromStack(stack);\r\n\r\n      // 3つのLambda関数に対して3つのIAMポリシーが作成される\r\n      template.resourceCountIs('AWS::IAM::Policy', 3);\r\n    });\r\n  });\r\n\r\n  describe('アラームの設定確認', () => {\r\n    test('すべてのLambda関数に対してアラームが作成されること', () => {\r\n      // CloudWatch Alarmsを作成\r\n      new CloudWatchAlarms(stack, 'TestAlarms', {\r\n        lambdaFunctions: Object.values(mockLambdaFunctions),\r\n        environment: 'test',\r\n      });\r\n\r\n      const template = Template.fromStack(stack);\r\n\r\n      // 各Lambda関数に対して3つのアラーム（Error Rate, Duration, Throttles）\r\n      // + カスタムメトリクスアラーム3つ（CollectionSuccessRate, NoData, CollectionFailure）\r\n      // = 3 * 3 + 3 = 12個のアラーム\r\n      template.resourceCountIs('AWS::CloudWatch::Alarm', 12);\r\n    });\r\n\r\n    test('アラームにSNSトピックが関連付けられていること', () => {\r\n      // CloudWatch Alarmsを作成\r\n      new CloudWatchAlarms(stack, 'TestAlarms', {\r\n        lambdaFunctions: Object.values(mockLambdaFunctions),\r\n        environment: 'test',\r\n      });\r\n\r\n      const template = Template.fromStack(stack);\r\n\r\n      // SNS Topicが作成されていることを確認\r\n      template.resourceCountIs('AWS::SNS::Topic', 1);\r\n\r\n      // すべてのアラームにAlarmActionsが設定されていることを確認\r\n      const alarms = template.findResources('AWS::CloudWatch::Alarm');\r\n      const alarmKeys = Object.keys(alarms);\r\n\r\n      expect(alarmKeys.length).toBeGreaterThan(0);\r\n\r\n      alarmKeys.forEach((key) => {\r\n        const alarm = alarms[key];\r\n        expect(alarm.Properties.AlarmActions).toBeDefined();\r\n        expect(alarm.Properties.AlarmActions.length).toBeGreaterThan(0);\r\n      });\r\n    });\r\n\r\n    test('カスタムメトリクスアラームが作成されること', () => {\r\n      // CloudWatch Alarmsを作成\r\n      new CloudWatchAlarms(stack, 'TestAlarms', {\r\n        lambdaFunctions: Object.values(mockLambdaFunctions),\r\n        environment: 'test',\r\n      });\r\n\r\n      const template = Template.fromStack(stack);\r\n\r\n      // CollectionSuccessRateアラーム\r\n      template.hasResourceProperties('AWS::CloudWatch::Alarm', {\r\n        AlarmName: 'tdnet-collection-success-rate-test',\r\n        MetricName: 'CollectionSuccessRate',\r\n        Namespace: 'TDnetDataCollector',\r\n      });\r\n\r\n      // NoDataCollectedアラーム\r\n      template.hasResourceProperties('AWS::CloudWatch::Alarm', {\r\n        AlarmName: 'tdnet-no-data-collected-test',\r\n        MetricName: 'DisclosuresCollected',\r\n        Namespace: 'TDnetDataCollector',\r\n      });\r\n\r\n      // CollectionFailureアラーム\r\n      template.hasResourceProperties('AWS::CloudWatch::Alarm', {\r\n        AlarmName: 'tdnet-collection-failures-test',\r\n        MetricName: 'DisclosuresFailed',\r\n        Namespace: 'TDnetDataCollector',\r\n      });\r\n    });\r\n\r\n    test('アラーム閾値が正しく設定されていること', () => {\r\n      // CloudWatch Alarmsを作成\r\n      new CloudWatchAlarms(stack, 'TestAlarms', {\r\n        lambdaFunctions: Object.values(mockLambdaFunctions),\r\n        environment: 'test',\r\n        errorRateThreshold: 5,\r\n        durationThreshold: 600,\r\n        collectionSuccessRateThreshold: 90,\r\n      });\r\n\r\n      const template = Template.fromStack(stack);\r\n\r\n      // Error Rate: 5%\r\n      template.hasResourceProperties('AWS::CloudWatch::Alarm', {\r\n        Threshold: 5,\r\n        ComparisonOperator: 'GreaterThanThreshold',\r\n      });\r\n\r\n      // Duration: 600秒 = 600000ミリ秒\r\n      template.hasResourceProperties('AWS::CloudWatch::Alarm', {\r\n        Threshold: 600000,\r\n        ComparisonOperator: 'GreaterThanThreshold',\r\n      });\r\n\r\n      // CollectionSuccessRate: 90%\r\n      template.hasResourceProperties('AWS::CloudWatch::Alarm', {\r\n        AlarmName: 'tdnet-collection-success-rate-test',\r\n        Threshold: 90,\r\n        ComparisonOperator: 'LessThanThreshold',\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('ダッシュボードの表示確認', () => {\r\n    test('ダッシュボードが正しく作成されること', () => {\r\n      // CloudWatch Dashboardを作成\r\n      const dashboard = new CloudWatchDashboard(stack, 'TestDashboard', {\r\n        environment: 'test',\r\n        lambdaFunctions: {\r\n          collector: mockLambdaFunctions.collector,\r\n          query: mockLambdaFunctions.query,\r\n          export: mockLambdaFunctions.export,\r\n          collect: mockLambdaFunctions.collector, // 同じ関数を使用\r\n          collectStatus: mockLambdaFunctions.collector,\r\n          exportStatus: mockLambdaFunctions.export,\r\n          pdfDownload: mockLambdaFunctions.query,\r\n        },\r\n        dynamodbTables: mockDynamodbTables,\r\n        s3Buckets: mockS3Buckets,\r\n        apiGateway: mockApiGateway,\r\n      });\r\n\r\n      // ダッシュボードが作成されていることを確認\r\n      expect(dashboard.dashboard).toBeDefined();\r\n\r\n      const template = Template.fromStack(stack);\r\n\r\n      // ダッシュボードリソースが存在することを確認\r\n      template.hasResourceProperties('AWS::CloudWatch::Dashboard', {\r\n        DashboardName: 'tdnet-collector-test',\r\n      });\r\n    });\r\n\r\n    test('ダッシュボードにすべてのウィジェットが含まれていること', () => {\r\n      // CloudWatch Dashboardを作成\r\n      new CloudWatchDashboard(stack, 'TestDashboard', {\r\n        environment: 'test',\r\n        lambdaFunctions: {\r\n          collector: mockLambdaFunctions.collector,\r\n          query: mockLambdaFunctions.query,\r\n          export: mockLambdaFunctions.export,\r\n          collect: mockLambdaFunctions.collector,\r\n          collectStatus: mockLambdaFunctions.collector,\r\n          exportStatus: mockLambdaFunctions.export,\r\n          pdfDownload: mockLambdaFunctions.query,\r\n        },\r\n        dynamodbTables: mockDynamodbTables,\r\n        s3Buckets: mockS3Buckets,\r\n        apiGateway: mockApiGateway,\r\n      });\r\n\r\n      const template = Template.fromStack(stack);\r\n\r\n      // ダッシュボードリソースが存在することを確認\r\n      template.resourceCountIs('AWS::CloudWatch::Dashboard', 1);\r\n\r\n      // ダッシュボードリソースを取得\r\n      const dashboards = template.findResources('AWS::CloudWatch::Dashboard');\r\n      const dashboardKeys = Object.keys(dashboards);\r\n      expect(dashboardKeys.length).toBe(1);\r\n\r\n      // DashboardBodyプロパティが存在することを確認\r\n      const dashboard = dashboards[dashboardKeys[0]];\r\n      expect(dashboard.Properties.DashboardBody).toBeDefined();\r\n    });\r\n\r\n    test('ダッシュボード名に環境名が含まれていること', () => {\r\n      // 本番環境でダッシュボードを作成\r\n      new CloudWatchDashboard(stack, 'ProdDashboard', {\r\n        environment: 'prod',\r\n        lambdaFunctions: {\r\n          collector: mockLambdaFunctions.collector,\r\n          query: mockLambdaFunctions.query,\r\n          export: mockLambdaFunctions.export,\r\n          collect: mockLambdaFunctions.collector,\r\n          collectStatus: mockLambdaFunctions.collector,\r\n          exportStatus: mockLambdaFunctions.export,\r\n          pdfDownload: mockLambdaFunctions.query,\r\n        },\r\n        dynamodbTables: mockDynamodbTables,\r\n        s3Buckets: mockS3Buckets,\r\n        apiGateway: mockApiGateway,\r\n      });\r\n\r\n      const template = Template.fromStack(stack);\r\n\r\n      // ダッシュボード名に環境名が含まれていることを確認\r\n      template.hasResourceProperties('AWS::CloudWatch::Dashboard', {\r\n        DashboardName: 'tdnet-collector-prod',\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('CloudWatch統合の完全性確認', () => {\r\n    test('メトリクス、アラーム、ダッシュボードがすべて連携していること', () => {\r\n      // すべてのLambda関数にメトリクス送信権限を付与\r\n      Object.values(mockLambdaFunctions).forEach((fn) => {\r\n        fn.addToRolePolicy(\r\n          new cdk.aws_iam.PolicyStatement({\r\n            effect: cdk.aws_iam.Effect.ALLOW,\r\n            actions: ['cloudwatch:PutMetricData'],\r\n            resources: ['*'],\r\n          })\r\n        );\r\n      });\r\n\r\n      // CloudWatch Alarmsを作成\r\n      new CloudWatchAlarms(stack, 'TestAlarms', {\r\n        lambdaFunctions: Object.values(mockLambdaFunctions),\r\n        environment: 'test',\r\n      });\r\n\r\n      // CloudWatch Dashboardを作成\r\n      new CloudWatchDashboard(stack, 'TestDashboard', {\r\n        environment: 'test',\r\n        lambdaFunctions: {\r\n          collector: mockLambdaFunctions.collector,\r\n          query: mockLambdaFunctions.query,\r\n          export: mockLambdaFunctions.export,\r\n          collect: mockLambdaFunctions.collector,\r\n          collectStatus: mockLambdaFunctions.collector,\r\n          exportStatus: mockLambdaFunctions.export,\r\n          pdfDownload: mockLambdaFunctions.query,\r\n        },\r\n        dynamodbTables: mockDynamodbTables,\r\n        s3Buckets: mockS3Buckets,\r\n        apiGateway: mockApiGateway,\r\n      });\r\n\r\n      const template = Template.fromStack(stack);\r\n\r\n      // Lambda関数が作成されていることを確認\r\n      template.resourceCountIs('AWS::Lambda::Function', 3);\r\n\r\n      // IAMポリシーが作成されていることを確認（メトリクス送信権限）\r\n      template.resourceCountIs('AWS::IAM::Policy', 3);\r\n\r\n      // CloudWatch Alarmsが作成されていることを確認\r\n      template.resourceCountIs('AWS::CloudWatch::Alarm', 12);\r\n\r\n      // SNS Topicが作成されていることを確認\r\n      template.resourceCountIs('AWS::SNS::Topic', 1);\r\n\r\n      // CloudWatch Dashboardが作成されていることを確認\r\n      template.resourceCountIs('AWS::CloudWatch::Dashboard', 1);\r\n    });\r\n\r\n    test('環境ごとに異なる設定が適用されること', () => {\r\n      // 開発環境\r\n      const devStack = new cdk.Stack();\r\n      const devLambda = new lambda.Function(devStack, 'DevFunction', {\r\n        runtime: lambda.Runtime.NODEJS_20_X,\r\n        handler: 'index.handler',\r\n        code: lambda.Code.fromInline('exports.handler = async () => {};'),\r\n      });\r\n\r\n      new CloudWatchAlarms(devStack, 'DevAlarms', {\r\n        lambdaFunctions: [devLambda],\r\n        environment: 'dev',\r\n      });\r\n\r\n      const devTemplate = Template.fromStack(devStack);\r\n\r\n      // 開発環境のアラーム名を確認\r\n      devTemplate.hasResourceProperties('AWS::CloudWatch::Alarm', {\r\n        AlarmName: 'tdnet-collection-success-rate-dev',\r\n      });\r\n\r\n      // 本番環境\r\n      const prodStack = new cdk.Stack();\r\n      const prodLambda = new lambda.Function(prodStack, 'ProdFunction', {\r\n        runtime: lambda.Runtime.NODEJS_20_X,\r\n        handler: 'index.handler',\r\n        code: lambda.Code.fromInline('exports.handler = async () => {};'),\r\n      });\r\n\r\n      new CloudWatchAlarms(prodStack, 'ProdAlarms', {\r\n        lambdaFunctions: [prodLambda],\r\n        environment: 'prod',\r\n      });\r\n\r\n      const prodTemplate = Template.fromStack(prodStack);\r\n\r\n      // 本番環境のアラーム名を確認\r\n      prodTemplate.hasResourceProperties('AWS::CloudWatch::Alarm', {\r\n        AlarmName: 'tdnet-collection-success-rate-prod',\r\n      });\r\n    });\r\n\r\n    test('すべてのリソースが正しい名前空間を使用していること', () => {\r\n      // CloudWatch Alarmsを作成\r\n      new CloudWatchAlarms(stack, 'TestAlarms', {\r\n        lambdaFunctions: Object.values(mockLambdaFunctions),\r\n        environment: 'test',\r\n      });\r\n\r\n      const template = Template.fromStack(stack);\r\n\r\n      // カスタムメトリクスアラームがTDnetDataCollector名前空間を使用していることを確認\r\n      template.hasResourceProperties('AWS::CloudWatch::Alarm', {\r\n        MetricName: 'CollectionSuccessRate',\r\n        Namespace: 'TDnetDataCollector',\r\n      });\r\n\r\n      template.hasResourceProperties('AWS::CloudWatch::Alarm', {\r\n        MetricName: 'DisclosuresCollected',\r\n        Namespace: 'TDnetDataCollector',\r\n      });\r\n\r\n      template.hasResourceProperties('AWS::CloudWatch::Alarm', {\r\n        MetricName: 'DisclosuresFailed',\r\n        Namespace: 'TDnetDataCollector',\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('エラーシナリオの確認', () => {\r\n    test('Lambda関数が存在しない場合でもスタックが作成できること', () => {\r\n      // Lambda関数なしでCloudWatch Alarmsを作成\r\n      expect(() => {\r\n        new CloudWatchAlarms(stack, 'EmptyAlarms', {\r\n          lambdaFunctions: [],\r\n          environment: 'test',\r\n        });\r\n      }).not.toThrow();\r\n\r\n      const template = Template.fromStack(stack);\r\n\r\n      // カスタムメトリクスアラームのみが作成される（3個）\r\n      template.resourceCountIs('AWS::CloudWatch::Alarm', 3);\r\n    });\r\n\r\n    test('無効な環境名でもスタックが作成できること', () => {\r\n      expect(() => {\r\n        new CloudWatchAlarms(stack, 'InvalidEnvAlarms', {\r\n          lambdaFunctions: Object.values(mockLambdaFunctions),\r\n          environment: 'invalid-env',\r\n        });\r\n      }).not.toThrow();\r\n\r\n      const template = Template.fromStack(stack);\r\n\r\n      // アラームが作成されていることを確認\r\n      template.resourceCountIs('AWS::CloudWatch::Alarm', 12);\r\n    });\r\n  });\r\n});\r\n"],"version":3}