287f12dc5a5446c0d692394fd86e6a9d
"use strict";
/**
 * CloudWatch Integration Tests
 *
 * すべてのCloudWatchコンポーネント（メトリクス、アラーム、ダッシュボード）が
 * 正しく統合されていることを検証します。
 *
 * Requirements: 要件14.1（テスト）
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const cdk = __importStar(require("aws-cdk-lib"));
const lambda = __importStar(require("aws-cdk-lib/aws-lambda"));
const dynamodb = __importStar(require("aws-cdk-lib/aws-dynamodb"));
const s3 = __importStar(require("aws-cdk-lib/aws-s3"));
const apigateway = __importStar(require("aws-cdk-lib/aws-apigateway"));
const assertions_1 = require("aws-cdk-lib/assertions");
const cloudwatch_alarms_1 = require("../lib/constructs/cloudwatch-alarms");
const cloudwatch_dashboard_1 = require("../lib/constructs/cloudwatch-dashboard");
describe('CloudWatch Integration Tests', () => {
    let stack;
    let mockLambdaFunctions;
    let mockDynamodbTables;
    let mockS3Buckets;
    let mockApiGateway;
    beforeEach(() => {
        stack = new cdk.Stack();
        // モックLambda関数を作成
        const createMockLambda = (id) => {
            return new lambda.Function(stack, id, {
                runtime: lambda.Runtime.NODEJS_20_X,
                handler: 'index.handler',
                code: lambda.Code.fromInline('exports.handler = async () => {};'),
                functionName: `test-${id.toLowerCase()}`,
            });
        };
        mockLambdaFunctions = {
            collector: createMockLambda('CollectorFunction'),
            query: createMockLambda('QueryFunction'),
            export: createMockLambda('ExportFunction'),
        };
        // モックDynamoDBテーブルを作成
        mockDynamodbTables = {
            disclosures: new dynamodb.Table(stack, 'DisclosuresTable', {
                partitionKey: { name: 'disclosure_id', type: dynamodb.AttributeType.STRING },
            }),
            executions: new dynamodb.Table(stack, 'ExecutionsTable', {
                partitionKey: { name: 'execution_id', type: dynamodb.AttributeType.STRING },
            }),
            exportStatus: new dynamodb.Table(stack, 'ExportStatusTable', {
                partitionKey: { name: 'export_id', type: dynamodb.AttributeType.STRING },
            }),
        };
        // モックS3バケットを作成
        mockS3Buckets = {
            pdfs: new s3.Bucket(stack, 'PdfsBucket'),
            exports: new s3.Bucket(stack, 'ExportsBucket'),
        };
        // モックAPI Gatewayを作成
        mockApiGateway = new apigateway.RestApi(stack, 'TestApi', {
            restApiName: 'test-api',
            deploy: false,
        });
        // ダミーリソースとメソッドを追加
        const resource = mockApiGateway.root.addResource('test');
        resource.addMethod('GET');
    });
    describe('カスタムメトリクスの送信確認', () => {
        test('Lambda関数にCloudWatchメトリクス送信権限が付与されていること', () => {
            // Lambda関数にメトリクス送信権限を付与
            Object.values(mockLambdaFunctions).forEach((fn) => {
                fn.addToRolePolicy(new cdk.aws_iam.PolicyStatement({
                    effect: cdk.aws_iam.Effect.ALLOW,
                    actions: ['cloudwatch:PutMetricData'],
                    resources: ['*'],
                }));
            });
            const template = assertions_1.Template.fromStack(stack);
            // IAMポリシーが作成されていることを確認
            template.hasResourceProperties('AWS::IAM::Policy', {
                PolicyDocument: {
                    Statement: assertions_1.Match.arrayWith([
                        assertions_1.Match.objectLike({
                            Action: 'cloudwatch:PutMetricData',
                            Effect: 'Allow',
                            Resource: '*',
                        }),
                    ]),
                },
            });
        });
        test('カスタムメトリクス名前空間が正しく設定されていること', () => {
            // メトリクス送信のテスト（実際のメトリクス送信はsrc/utils/metrics.tsでテスト済み）
            // ここではLambda関数が正しい環境変数を持っていることを確認
            const template = assertions_1.Template.fromStack(stack);
            // Lambda関数が作成されていることを確認
            template.resourceCountIs('AWS::Lambda::Function', 3);
        });
        test('すべてのLambda関数がメトリクス送信権限を持つこと', () => {
            // すべてのLambda関数にメトリクス送信権限を付与
            Object.values(mockLambdaFunctions).forEach((fn) => {
                fn.addToRolePolicy(new cdk.aws_iam.PolicyStatement({
                    effect: cdk.aws_iam.Effect.ALLOW,
                    actions: ['cloudwatch:PutMetricData'],
                    resources: ['*'],
                }));
            });
            const template = assertions_1.Template.fromStack(stack);
            // 3つのLambda関数に対して3つのIAMポリシーが作成される
            template.resourceCountIs('AWS::IAM::Policy', 3);
        });
    });
    describe('アラームの設定確認', () => {
        test('すべてのLambda関数に対してアラームが作成されること', () => {
            // CloudWatch Alarmsを作成
            new cloudwatch_alarms_1.CloudWatchAlarms(stack, 'TestAlarms', {
                lambdaFunctions: Object.values(mockLambdaFunctions),
                environment: 'test',
            });
            const template = assertions_1.Template.fromStack(stack);
            // 各Lambda関数に対して3つのアラーム（Error Rate, Duration, Throttles）
            // + カスタムメトリクスアラーム3つ（CollectionSuccessRate, NoData, CollectionFailure）
            // = 3 * 3 + 3 = 12個のアラーム
            template.resourceCountIs('AWS::CloudWatch::Alarm', 12);
        });
        test('アラームにSNSトピックが関連付けられていること', () => {
            // CloudWatch Alarmsを作成
            new cloudwatch_alarms_1.CloudWatchAlarms(stack, 'TestAlarms', {
                lambdaFunctions: Object.values(mockLambdaFunctions),
                environment: 'test',
            });
            const template = assertions_1.Template.fromStack(stack);
            // SNS Topicが作成されていることを確認
            template.resourceCountIs('AWS::SNS::Topic', 1);
            // すべてのアラームにAlarmActionsが設定されていることを確認
            const alarms = template.findResources('AWS::CloudWatch::Alarm');
            const alarmKeys = Object.keys(alarms);
            expect(alarmKeys.length).toBeGreaterThan(0);
            alarmKeys.forEach((key) => {
                const alarm = alarms[key];
                expect(alarm.Properties.AlarmActions).toBeDefined();
                expect(alarm.Properties.AlarmActions.length).toBeGreaterThan(0);
            });
        });
        test('カスタムメトリクスアラームが作成されること', () => {
            // CloudWatch Alarmsを作成
            new cloudwatch_alarms_1.CloudWatchAlarms(stack, 'TestAlarms', {
                lambdaFunctions: Object.values(mockLambdaFunctions),
                environment: 'test',
            });
            const template = assertions_1.Template.fromStack(stack);
            // CollectionSuccessRateアラーム
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                AlarmName: 'tdnet-collection-success-rate-test',
                MetricName: 'CollectionSuccessRate',
                Namespace: 'TDnetDataCollector',
            });
            // NoDataCollectedアラーム
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                AlarmName: 'tdnet-no-data-collected-test',
                MetricName: 'DisclosuresCollected',
                Namespace: 'TDnetDataCollector',
            });
            // CollectionFailureアラーム
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                AlarmName: 'tdnet-collection-failures-test',
                MetricName: 'DisclosuresFailed',
                Namespace: 'TDnetDataCollector',
            });
        });
        test('アラーム閾値が正しく設定されていること', () => {
            // CloudWatch Alarmsを作成
            new cloudwatch_alarms_1.CloudWatchAlarms(stack, 'TestAlarms', {
                lambdaFunctions: Object.values(mockLambdaFunctions),
                environment: 'test',
                errorRateThreshold: 5,
                durationThreshold: 600,
                collectionSuccessRateThreshold: 90,
            });
            const template = assertions_1.Template.fromStack(stack);
            // Error Rate: 5%
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                Threshold: 5,
                ComparisonOperator: 'GreaterThanThreshold',
            });
            // Duration: 600秒 = 600000ミリ秒
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                Threshold: 600000,
                ComparisonOperator: 'GreaterThanThreshold',
            });
            // CollectionSuccessRate: 90%
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                AlarmName: 'tdnet-collection-success-rate-test',
                Threshold: 90,
                ComparisonOperator: 'LessThanThreshold',
            });
        });
    });
    describe('ダッシュボードの表示確認', () => {
        test('ダッシュボードが正しく作成されること', () => {
            // CloudWatch Dashboardを作成
            const dashboard = new cloudwatch_dashboard_1.CloudWatchDashboard(stack, 'TestDashboard', {
                environment: 'test',
                lambdaFunctions: {
                    collector: mockLambdaFunctions.collector,
                    query: mockLambdaFunctions.query,
                    export: mockLambdaFunctions.export,
                    collect: mockLambdaFunctions.collector, // 同じ関数を使用
                    collectStatus: mockLambdaFunctions.collector,
                    exportStatus: mockLambdaFunctions.export,
                    pdfDownload: mockLambdaFunctions.query,
                },
                dynamodbTables: mockDynamodbTables,
                s3Buckets: mockS3Buckets,
                apiGateway: mockApiGateway,
            });
            // ダッシュボードが作成されていることを確認
            expect(dashboard.dashboard).toBeDefined();
            const template = assertions_1.Template.fromStack(stack);
            // ダッシュボードリソースが存在することを確認
            template.hasResourceProperties('AWS::CloudWatch::Dashboard', {
                DashboardName: 'tdnet-collector-test',
            });
        });
        test('ダッシュボードにすべてのウィジェットが含まれていること', () => {
            // CloudWatch Dashboardを作成
            new cloudwatch_dashboard_1.CloudWatchDashboard(stack, 'TestDashboard', {
                environment: 'test',
                lambdaFunctions: {
                    collector: mockLambdaFunctions.collector,
                    query: mockLambdaFunctions.query,
                    export: mockLambdaFunctions.export,
                    collect: mockLambdaFunctions.collector,
                    collectStatus: mockLambdaFunctions.collector,
                    exportStatus: mockLambdaFunctions.export,
                    pdfDownload: mockLambdaFunctions.query,
                },
                dynamodbTables: mockDynamodbTables,
                s3Buckets: mockS3Buckets,
                apiGateway: mockApiGateway,
            });
            const template = assertions_1.Template.fromStack(stack);
            // ダッシュボードリソースが存在することを確認
            template.resourceCountIs('AWS::CloudWatch::Dashboard', 1);
            // ダッシュボードリソースを取得
            const dashboards = template.findResources('AWS::CloudWatch::Dashboard');
            const dashboardKeys = Object.keys(dashboards);
            expect(dashboardKeys.length).toBe(1);
            // DashboardBodyプロパティが存在することを確認
            const dashboard = dashboards[dashboardKeys[0]];
            expect(dashboard.Properties.DashboardBody).toBeDefined();
        });
        test('ダッシュボード名に環境名が含まれていること', () => {
            // 本番環境でダッシュボードを作成
            new cloudwatch_dashboard_1.CloudWatchDashboard(stack, 'ProdDashboard', {
                environment: 'prod',
                lambdaFunctions: {
                    collector: mockLambdaFunctions.collector,
                    query: mockLambdaFunctions.query,
                    export: mockLambdaFunctions.export,
                    collect: mockLambdaFunctions.collector,
                    collectStatus: mockLambdaFunctions.collector,
                    exportStatus: mockLambdaFunctions.export,
                    pdfDownload: mockLambdaFunctions.query,
                },
                dynamodbTables: mockDynamodbTables,
                s3Buckets: mockS3Buckets,
                apiGateway: mockApiGateway,
            });
            const template = assertions_1.Template.fromStack(stack);
            // ダッシュボード名に環境名が含まれていることを確認
            template.hasResourceProperties('AWS::CloudWatch::Dashboard', {
                DashboardName: 'tdnet-collector-prod',
            });
        });
    });
    describe('CloudWatch統合の完全性確認', () => {
        test('メトリクス、アラーム、ダッシュボードがすべて連携していること', () => {
            // すべてのLambda関数にメトリクス送信権限を付与
            Object.values(mockLambdaFunctions).forEach((fn) => {
                fn.addToRolePolicy(new cdk.aws_iam.PolicyStatement({
                    effect: cdk.aws_iam.Effect.ALLOW,
                    actions: ['cloudwatch:PutMetricData'],
                    resources: ['*'],
                }));
            });
            // CloudWatch Alarmsを作成
            new cloudwatch_alarms_1.CloudWatchAlarms(stack, 'TestAlarms', {
                lambdaFunctions: Object.values(mockLambdaFunctions),
                environment: 'test',
            });
            // CloudWatch Dashboardを作成
            new cloudwatch_dashboard_1.CloudWatchDashboard(stack, 'TestDashboard', {
                environment: 'test',
                lambdaFunctions: {
                    collector: mockLambdaFunctions.collector,
                    query: mockLambdaFunctions.query,
                    export: mockLambdaFunctions.export,
                    collect: mockLambdaFunctions.collector,
                    collectStatus: mockLambdaFunctions.collector,
                    exportStatus: mockLambdaFunctions.export,
                    pdfDownload: mockLambdaFunctions.query,
                },
                dynamodbTables: mockDynamodbTables,
                s3Buckets: mockS3Buckets,
                apiGateway: mockApiGateway,
            });
            const template = assertions_1.Template.fromStack(stack);
            // Lambda関数が作成されていることを確認
            template.resourceCountIs('AWS::Lambda::Function', 3);
            // IAMポリシーが作成されていることを確認（メトリクス送信権限）
            template.resourceCountIs('AWS::IAM::Policy', 3);
            // CloudWatch Alarmsが作成されていることを確認
            template.resourceCountIs('AWS::CloudWatch::Alarm', 12);
            // SNS Topicが作成されていることを確認
            template.resourceCountIs('AWS::SNS::Topic', 1);
            // CloudWatch Dashboardが作成されていることを確認
            template.resourceCountIs('AWS::CloudWatch::Dashboard', 1);
        });
        test('環境ごとに異なる設定が適用されること', () => {
            // 開発環境
            const devStack = new cdk.Stack();
            const devLambda = new lambda.Function(devStack, 'DevFunction', {
                runtime: lambda.Runtime.NODEJS_20_X,
                handler: 'index.handler',
                code: lambda.Code.fromInline('exports.handler = async () => {};'),
            });
            new cloudwatch_alarms_1.CloudWatchAlarms(devStack, 'DevAlarms', {
                lambdaFunctions: [devLambda],
                environment: 'dev',
            });
            const devTemplate = assertions_1.Template.fromStack(devStack);
            // 開発環境のアラーム名を確認
            devTemplate.hasResourceProperties('AWS::CloudWatch::Alarm', {
                AlarmName: 'tdnet-collection-success-rate-dev',
            });
            // 本番環境
            const prodStack = new cdk.Stack();
            const prodLambda = new lambda.Function(prodStack, 'ProdFunction', {
                runtime: lambda.Runtime.NODEJS_20_X,
                handler: 'index.handler',
                code: lambda.Code.fromInline('exports.handler = async () => {};'),
            });
            new cloudwatch_alarms_1.CloudWatchAlarms(prodStack, 'ProdAlarms', {
                lambdaFunctions: [prodLambda],
                environment: 'prod',
            });
            const prodTemplate = assertions_1.Template.fromStack(prodStack);
            // 本番環境のアラーム名を確認
            prodTemplate.hasResourceProperties('AWS::CloudWatch::Alarm', {
                AlarmName: 'tdnet-collection-success-rate-prod',
            });
        });
        test('すべてのリソースが正しい名前空間を使用していること', () => {
            // CloudWatch Alarmsを作成
            new cloudwatch_alarms_1.CloudWatchAlarms(stack, 'TestAlarms', {
                lambdaFunctions: Object.values(mockLambdaFunctions),
                environment: 'test',
            });
            const template = assertions_1.Template.fromStack(stack);
            // カスタムメトリクスアラームがTDnetDataCollector名前空間を使用していることを確認
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                MetricName: 'CollectionSuccessRate',
                Namespace: 'TDnetDataCollector',
            });
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                MetricName: 'DisclosuresCollected',
                Namespace: 'TDnetDataCollector',
            });
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                MetricName: 'DisclosuresFailed',
                Namespace: 'TDnetDataCollector',
            });
        });
    });
    describe('エラーシナリオの確認', () => {
        test('Lambda関数が存在しない場合でもスタックが作成できること', () => {
            // Lambda関数なしでCloudWatch Alarmsを作成
            expect(() => {
                new cloudwatch_alarms_1.CloudWatchAlarms(stack, 'EmptyAlarms', {
                    lambdaFunctions: [],
                    environment: 'test',
                });
            }).not.toThrow();
            const template = assertions_1.Template.fromStack(stack);
            // カスタムメトリクスアラームのみが作成される（3個）
            template.resourceCountIs('AWS::CloudWatch::Alarm', 3);
        });
        test('無効な環境名でもスタックが作成できること', () => {
            expect(() => {
                new cloudwatch_alarms_1.CloudWatchAlarms(stack, 'InvalidEnvAlarms', {
                    lambdaFunctions: Object.values(mockLambdaFunctions),
                    environment: 'invalid-env',
                });
            }).not.toThrow();
            const template = assertions_1.Template.fromStack(stack);
            // アラームが作成されていることを確認
            template.resourceCountIs('AWS::CloudWatch::Alarm', 12);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcY2RrXFxfX3Rlc3RzX19cXGNsb3Vkd2F0Y2gtaW50ZWdyYXRpb24udGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7R0FPRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFSCxpREFBbUM7QUFDbkMsK0RBQWlEO0FBQ2pELG1FQUFxRDtBQUNyRCx1REFBeUM7QUFDekMsdUVBQXlEO0FBQ3pELHVEQUF5RDtBQUN6RCwyRUFBdUU7QUFDdkUsaUZBQTZFO0FBRTdFLFFBQVEsQ0FBQyw4QkFBOEIsRUFBRSxHQUFHLEVBQUU7SUFDNUMsSUFBSSxLQUFnQixDQUFDO0lBQ3JCLElBQUksbUJBSUgsQ0FBQztJQUNGLElBQUksa0JBSUgsQ0FBQztJQUNGLElBQUksYUFHSCxDQUFDO0lBQ0YsSUFBSSxjQUFtQyxDQUFDO0lBRXhDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxLQUFLLEdBQUcsSUFBSSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUM7UUFFeEIsaUJBQWlCO1FBQ2pCLE1BQU0sZ0JBQWdCLEdBQUcsQ0FBQyxFQUFVLEVBQW9CLEVBQUU7WUFDeEQsT0FBTyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRTtnQkFDcEMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVztnQkFDbkMsT0FBTyxFQUFFLGVBQWU7Z0JBQ3hCLElBQUksRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxtQ0FBbUMsQ0FBQztnQkFDakUsWUFBWSxFQUFFLFFBQVEsRUFBRSxDQUFDLFdBQVcsRUFBRSxFQUFFO2FBQ3pDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQztRQUVGLG1CQUFtQixHQUFHO1lBQ3BCLFNBQVMsRUFBRSxnQkFBZ0IsQ0FBQyxtQkFBbUIsQ0FBQztZQUNoRCxLQUFLLEVBQUUsZ0JBQWdCLENBQUMsZUFBZSxDQUFDO1lBQ3hDLE1B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LEVBQUU7WUFDaEMsTUFBTSxDQUFDLEdBQUcsRUFBRTtnQkFDVixJQUFJLG9DQUFnQixDQUFDLEtBQUssRUFBRSxrQkFBa0IsRUFBRTtvQkFDOUMsZUFBZSxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUM7b0JBQ25ELFdBQVcsRUFBRSxhQUFhO2lCQUMzQixDQUFDLENBQUM7WUFDTCxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7WUFFakIsTUFBTSxRQUFRLEdBQUcscUJBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFM0Msb0JBQW9CO1lBQ3BCLFFBQVEsQ0FBQyxlQUFlLENBQUMsd0JBQXdCLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDekQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcdGkxOThcXGludmVzdG1lbnRfYW5hbHlzaXNfb3BvcG9cXGNka1xcX190ZXN0c19fXFxjbG91ZHdhdGNoLWludGVncmF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENsb3VkV2F0Y2ggSW50ZWdyYXRpb24gVGVzdHNcclxuICogXHJcbiAqIOOBmeOBueOBpuOBrkNsb3VkV2F0Y2jjgrPjg7Pjg53jg7zjg43jg7Pjg4jvvIjjg6Hjg4jjg6rjgq/jgrnjgIHjgqLjg6njg7zjg6DjgIHjg4Djg4Pjgrfjg6Xjg5zjg7zjg4nvvInjgYxcclxuICog5q2j44GX44GP57Wx5ZCI44GV44KM44Gm44GE44KL44GT44Go44KS5qSc6Ki844GX44G+44GZ44CCXHJcbiAqIFxyXG4gKiBSZXF1aXJlbWVudHM6IOimgeS7tjE0LjHvvIjjg4bjgrnjg4jvvIlcclxuICovXHJcblxyXG5pbXBvcnQgKiBhcyBjZGsgZnJvbSAnYXdzLWNkay1saWInO1xyXG5pbXBvcnQgKiBhcyBsYW1iZGEgZnJvbSAnYXdzLWNkay1saWIvYXdzLWxhbWJkYSc7XHJcbmltcG9ydCAqIGFzIGR5bmFtb2RiIGZyb20gJ2F3cy1jZGstbGliL2F3cy1keW5hbW9kYic7XHJcbmltcG9ydCAqIGFzIHMzIGZyb20gJ2F3cy1jZGstbGliL2F3cy1zMyc7XHJcbmltcG9ydCAqIGFzIGFwaWdhdGV3YXkgZnJvbSAnYXdzLWNkay1saWIvYXdzLWFwaWdhdGV3YXknO1xyXG5pbXBvcnQgeyBUZW1wbGF0ZSwgTWF0Y2ggfSBmcm9tICdhd3MtY2RrLWxpYi9hc3NlcnRpb25zJztcclxuaW1wb3J0IHsgQ2xvdWRXYXRjaEFsYXJtcyB9IGZyb20gJy4uL2xpYi9jb25zdHJ1Y3RzL2Nsb3Vkd2F0Y2gtYWxhcm1zJztcclxuaW1wb3J0IHsgQ2xvdWRXYXRjaERhc2hib2FyZCB9IGZyb20gJy4uL2xpYi9jb25zdHJ1Y3RzL2Nsb3Vkd2F0Y2gtZGFzaGJvYXJkJztcclxuXHJcbmRlc2NyaWJlKCdDbG91ZFdhdGNoIEludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xyXG4gIGxldCBzdGFjazogY2RrLlN0YWNrO1xyXG4gIGxldCBtb2NrTGFtYmRhRnVuY3Rpb25zOiB7XHJcbiAgICBjb2xsZWN0b3I6IGxhbWJkYS5JRnVuY3Rpb247XHJcbiAgICBxdWVyeTogbGFtYmRhLklGdW5jdGlvbjtcclxuICAgIGV4cG9ydDogbGFtYmRhLklGdW5jdGlvbjtcclxuICB9O1xyXG4gIGxldCBtb2NrRHluYW1vZGJUYWJsZXM6IHtcclxuICAgIGRpc2Nsb3N1cmVzOiBkeW5hbW9kYi5JVGFibGU7XHJcbiAgICBleGVjdXRpb25zOiBkeW5hbW9kYi5JVGFibGU7XHJcbiAgICBleHBvcnRTdGF0dXM6IGR5bmFtb2RiLklUYWJsZTtcclxuICB9O1xyXG4gIGxldCBtb2NrUzNCdWNrZXRzOiB7XHJcbiAgICBwZGZzOiBzMy5JQnVja2V0O1xyXG4gICAgZXhwb3J0czogczMuSUJ1Y2tldDtcclxuICB9O1xyXG4gIGxldCBtb2NrQXBpR2F0ZXdheTogYXBpZ2F0ZXdheS5JUmVzdEFwaTtcclxuXHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcclxuXHJcbiAgICAvLyDjg6Ljg4Pjgq9MYW1iZGHplqLmlbDjgpLkvZzmiJBcclxuICAgIGNvbnN0IGNyZWF0ZU1vY2tMYW1iZGEgPSAoaWQ6IHN0cmluZyk6IGxhbWJkYS5JRnVuY3Rpb24gPT4ge1xyXG4gICAgICByZXR1cm4gbmV3IGxhbWJkYS5GdW5jdGlvbihzdGFjaywgaWQsIHtcclxuICAgICAgICBydW50aW1lOiBsYW1iZGEuUnVudGltZS5OT0RFSlNfMjBfWCxcclxuICAgICAgICBoYW5kbGVyOiAnaW5kZXguaGFuZGxlcicsXHJcbiAgICAgICAgY29kZTogbGFtYmRhLkNvZGUuZnJvbUlubGluZSgnZXhwb3J0cy5oYW5kbGVyID0gYXN5bmMgKCkgPT4ge307JyksXHJcbiAgICAgICAgZnVuY3Rpb25OYW1lOiBgdGVzdC0ke2lkLnRvTG93ZXJDYXNlKCl9YCxcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIG1vY2tMYW1iZGFGdW5jdGlvbnMgPSB7XHJcbiAgICAgIGNvbGxlY3RvcjogY3JlYXRlTW9ja0xhbWJkYSgnQ29sbGVjdG9yRnVuY3Rpb24nKSxcclxuICAgICAgcXVlcnk6IGNyZWF0ZU1vY2tMYW1iZGEoJ1F1ZXJ5RnVuY3Rpb24nKSxcclxuICAgICAgZXhwb3J0OiBjcmVhdGVNb2NrTGFtYmRhKCdFeHBvcnRGdW5jdGlvbicpLFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyDjg6Ljg4Pjgq9EeW5hbW9EQuODhuODvOODluODq+OCkuS9nOaIkFxyXG4gICAgbW9ja0R5bmFtb2RiVGFibGVzID0ge1xyXG4gICAgICBkaXNjbG9zdXJlczogbmV3IGR5bmFtb2RiLlRhYmxlKHN0YWNrLCAnRGlzY2xvc3VyZXNUYWJsZScsIHtcclxuICAgICAgICBwYXJ0aXRpb25LZXk6IHsgbmFtZTogJ2Rpc2Nsb3N1cmVfaWQnLCB0eXBlOiBkeW5hbW9kYi5BdHRyaWJ1dGVUeXBlLlNUUklORyB9LFxyXG4gICAgICB9KSxcclxuICAgICAgZXhlY3V0aW9uczogbmV3IGR5bmFtb2RiLlRhYmxlKHN0YWNrLCAnRXhlY3V0aW9uc1RhYmxlJywge1xyXG4gICAgICAgIHBhcnRpdGlvbktleTogeyBuYW1lOiAnZXhlY3V0aW9uX2lkJywgdHlwZTogZHluYW1vZGIuQXR0cmlidXRlVHlwZS5TVFJJTkcgfSxcclxuICAgICAgfSksXHJcbiAgICAgIGV4cG9ydFN0YXR1czogbmV3IGR5bmFtb2RiLlRhYmxlKHN0YWNrLCAnRXhwb3J0U3RhdHVzVGFibGUnLCB7XHJcbiAgICAgICAgcGFydGl0aW9uS2V5OiB7IG5hbWU6ICdleHBvcnRfaWQnLCB0eXBlOiBkeW5hbW9kYi5BdHRyaWJ1dGVUeXBlLlNUUklORyB9LFxyXG4gICAgICB9KSxcclxuICAgIH07XHJcblxyXG4gICAgLy8g44Oi44OD44KvUzPjg5DjgrHjg4Pjg4jjgpLkvZzmiJBcclxuICAgIG1vY2tTM0J1Y2tldHMgPSB7XHJcbiAgICAgIHBkZnM6IG5ldyBzMy5CdWNrZXQoc3RhY2ssICdQZGZzQnVja2V0JyksXHJcbiAgICAgIGV4cG9ydHM6IG5ldyBzMy5CdWNrZXQoc3RhY2ssICdFeHBvcnRzQnVja2V0JyksXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIOODouODg+OCr0FQSSBHYXRld2F544KS5L2c5oiQXHJcbiAgICBtb2NrQXBpR2F0ZXdheSA9IG5ldyBhcGlnYXRld2F5LlJlc3RBcGkoc3RhY2ssICdUZXN0QXBpJywge1xyXG4gICAgICByZXN0QXBpTmFtZTogJ3Rlc3QtYXBpJyxcclxuICAgICAgZGVwbG95OiBmYWxzZSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOODgOODn+ODvOODquOCveODvOOCueOBqOODoeOCveODg+ODieOCkui/veWKoFxyXG4gICAgY29uc3QgcmVzb3VyY2UgPSBtb2NrQXBpR2F0ZXdheS5yb290LmFkZFJlc291cmNlKCd0ZXN0Jyk7XHJcbiAgICByZXNvdXJjZS5hZGRNZXRob2QoJ0dFVCcpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgn44Kr44K544K/44Og44Oh44OI44Oq44Kv44K544Gu6YCB5L+h56K66KqNJywgKCkgPT4ge1xyXG4gICAgdGVzdCgnTGFtYmRh6Zai5pWw44GrQ2xvdWRXYXRjaOODoeODiOODquOCr+OCuemAgeS/oeaoqemZkOOBjOS7mOS4juOBleOCjOOBpuOBhOOCi+OBk+OBqCcsICgpID0+IHtcclxuICAgICAgLy8gTGFtYmRh6Zai5pWw44Gr44Oh44OI44Oq44Kv44K56YCB5L+h5qip6ZmQ44KS5LuY5LiOXHJcbiAgICAgIE9iamVjdC52YWx1ZXMobW9ja0xhbWJkYUZ1bmN0aW9ucykuZm9yRWFjaCgoZm4pID0+IHtcclxuICAgICAgICBmbi5hZGRUb1JvbGVQb2xpY3koXHJcbiAgICAgICAgICBuZXcgY2RrLmF3c19pYW0uUG9saWN5U3RhdGVtZW50KHtcclxuICAgICAgICAgICAgZWZmZWN0OiBjZGsuYXdzX2lhbS5FZmZlY3QuQUxMT1csXHJcbiAgICAgICAgICAgIGFjdGlvbnM6IFsnY2xvdWR3YXRjaDpQdXRNZXRyaWNEYXRhJ10sXHJcbiAgICAgICAgICAgIHJlc291cmNlczogWycqJ10sXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spO1xyXG5cclxuICAgICAgLy8gSUFN44Od44Oq44K344O844GM5L2c5oiQ44GV44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpJQU06OlBvbGljeScsIHtcclxuICAgICAgICBQb2xpY3lEb2N1bWVudDoge1xyXG4gICAgICAgICAgU3RhdGVtZW50OiBNYXRjaC5hcnJheVdpdGgoW1xyXG4gICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHtcclxuICAgICAgICAgICAgICBBY3Rpb246ICdjbG91ZHdhdGNoOlB1dE1ldHJpY0RhdGEnLFxyXG4gICAgICAgICAgICAgIEVmZmVjdDogJ0FsbG93JyxcclxuICAgICAgICAgICAgICBSZXNvdXJjZTogJyonLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgn44Kr44K544K/44Og44Oh44OI44Oq44Kv44K55ZCN5YmN56m66ZaT44GM5q2j44GX44GP6Kit5a6a44GV44KM44Gm44GE44KL44GT44GoJywgKCkgPT4ge1xyXG4gICAgICAvLyDjg6Hjg4jjg6rjgq/jgrnpgIHkv6Hjga7jg4bjgrnjg4jvvIjlrp/pmpvjga7jg6Hjg4jjg6rjgq/jgrnpgIHkv6Hjga9zcmMvdXRpbHMvbWV0cmljcy50c+OBp+ODhuOCueODiOa4iOOBv++8iVxyXG4gICAgICAvLyDjgZPjgZPjgafjga9MYW1iZGHplqLmlbDjgYzmraPjgZfjgYTnkrDlooPlpInmlbDjgpLmjIHjgaPjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuXHJcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKTtcclxuXHJcbiAgICAgIC8vIExhbWJkYemWouaVsOOBjOS9nOaIkOOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6TGFtYmRhOjpGdW5jdGlvbicsIDMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgn44GZ44G544Gm44GuTGFtYmRh6Zai5pWw44GM44Oh44OI44Oq44Kv44K56YCB5L+h5qip6ZmQ44KS5oyB44Gk44GT44GoJywgKCkgPT4ge1xyXG4gICAgICAvLyDjgZnjgbnjgabjga5MYW1iZGHplqLmlbDjgavjg6Hjg4jjg6rjgq/jgrnpgIHkv6HmqKnpmZDjgpLku5jkuI5cclxuICAgICAgT2JqZWN0LnZhbHVlcyhtb2NrTGFtYmRhRnVuY3Rpb25zKS5mb3JFYWNoKChmbikgPT4ge1xyXG4gICAgICAgIGZuLmFkZFRvUm9sZVBvbGljeShcclxuICAgICAgICAgIG5ldyBjZGsuYXdzX2lhbS5Qb2xpY3lTdGF0ZW1lbnQoe1xyXG4gICAgICAgICAgICBlZmZlY3Q6IGNkay5hd3NfaWFtLkVmZmVjdC5BTExPVyxcclxuICAgICAgICAgICAgYWN0aW9uczogWydjbG91ZHdhdGNoOlB1dE1ldHJpY0RhdGEnXSxcclxuICAgICAgICAgICAgcmVzb3VyY2VzOiBbJyonXSxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IFRlbXBsYXRlLmZyb21TdGFjayhzdGFjayk7XHJcblxyXG4gICAgICAvLyAz44Gk44GuTGFtYmRh6Zai5pWw44Gr5a++44GX44GmM+OBpOOBrklBTeODneODquOCt+ODvOOBjOS9nOaIkOOBleOCjOOCi1xyXG4gICAgICB0ZW1wbGF0ZS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6SUFNOjpQb2xpY3knLCAzKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgn44Ki44Op44O844Og44Gu6Kit5a6a56K66KqNJywgKCkgPT4ge1xyXG4gICAgdGVzdCgn44GZ44G544Gm44GuTGFtYmRh6Zai5pWw44Gr5a++44GX44Gm44Ki44Op44O844Og44GM5L2c5oiQ44GV44KM44KL44GT44GoJywgKCkgPT4ge1xyXG4gICAgICAvLyBDbG91ZFdhdGNoIEFsYXJtc+OCkuS9nOaIkFxyXG4gICAgICBuZXcgQ2xvdWRXYXRjaEFsYXJtcyhzdGFjaywgJ1Rlc3RBbGFybXMnLCB7XHJcbiAgICAgICAgbGFtYmRhRnVuY3Rpb25zOiBPYmplY3QudmFsdWVzKG1vY2tMYW1iZGFGdW5jdGlvbnMpLFxyXG4gICAgICAgIGVudmlyb25tZW50OiAndGVzdCcsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spO1xyXG5cclxuICAgICAgLy8g5ZCETGFtYmRh6Zai5pWw44Gr5a++44GX44GmM+OBpOOBruOCouODqeODvOODoO+8iEVycm9yIFJhdGUsIER1cmF0aW9uLCBUaHJvdHRsZXPvvIlcclxuICAgICAgLy8gKyDjgqvjgrnjgr/jg6Djg6Hjg4jjg6rjgq/jgrnjgqLjg6njg7zjg6Az44Gk77yIQ29sbGVjdGlvblN1Y2Nlc3NSYXRlLCBOb0RhdGEsIENvbGxlY3Rpb25GYWlsdXJl77yJXHJcbiAgICAgIC8vID0gMyAqIDMgKyAzID0gMTLlgIvjga7jgqLjg6njg7zjg6BcclxuICAgICAgdGVtcGxhdGUucmVzb3VyY2VDb3VudElzKCdBV1M6OkNsb3VkV2F0Y2g6OkFsYXJtJywgMTIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgn44Ki44Op44O844Og44GrU05T44OI44OU44OD44Kv44GM6Zai6YCj5LuY44GR44KJ44KM44Gm44GE44KL44GT44GoJywgKCkgPT4ge1xyXG4gICAgICAvLyBDbG91ZFdhdGNoIEFsYXJtc+OCkuS9nOaIkFxyXG4gICAgICBuZXcgQ2xvdWRXYXRjaEFsYXJtcyhzdGFjaywgJ1Rlc3RBbGFybXMnLCB7XHJcbiAgICAgICAgbGFtYmRhRnVuY3Rpb25zOiBPYmplY3QudmFsdWVzKG1vY2tMYW1iZGFGdW5jdGlvbnMpLFxyXG4gICAgICAgIGVudmlyb25tZW50OiAndGVzdCcsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spO1xyXG5cclxuICAgICAgLy8gU05TIFRvcGlj44GM5L2c5oiQ44GV44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIHRlbXBsYXRlLnJlc291cmNlQ291bnRJcygnQVdTOjpTTlM6OlRvcGljJywgMSk7XHJcblxyXG4gICAgICAvLyDjgZnjgbnjgabjga7jgqLjg6njg7zjg6DjgatBbGFybUFjdGlvbnPjgYzoqK3lrprjgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgY29uc3QgYWxhcm1zID0gdGVtcGxhdGUuZmluZFJlc291cmNlcygnQVdTOjpDbG91ZFdhdGNoOjpBbGFybScpO1xyXG4gICAgICBjb25zdCBhbGFybUtleXMgPSBPYmplY3Qua2V5cyhhbGFybXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGFsYXJtS2V5cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuXHJcbiAgICAgIGFsYXJtS2V5cy5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICBjb25zdCBhbGFybSA9IGFsYXJtc1trZXldO1xyXG4gICAgICAgIGV4cGVjdChhbGFybS5Qcm9wZXJ0aWVzLkFsYXJtQWN0aW9ucykudG9CZURlZmluZWQoKTtcclxuICAgICAgICBleHBlY3QoYWxhcm0uUHJvcGVydGllcy5BbGFybUFjdGlvbnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgn44Kr44K544K/44Og44Oh44OI44Oq44Kv44K544Ki44Op44O844Og44GM5L2c5oiQ44GV44KM44KL44GT44GoJywgKCkgPT4ge1xyXG4gICAgICAvLyBDbG91ZFdhdGNoIEFsYXJtc+OCkuS9nOaIkFxyXG4gICAgICBuZXcgQ2xvdWRXYXRjaEFsYXJtcyhzdGFjaywgJ1Rlc3RBbGFybXMnLCB7XHJcbiAgICAgICAgbGFtYmRhRnVuY3Rpb25zOiBPYmplY3QudmFsdWVzKG1vY2tMYW1iZGFGdW5jdGlvbnMpLFxyXG4gICAgICAgIGVudmlyb25tZW50OiAndGVzdCcsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spO1xyXG5cclxuICAgICAgLy8gQ29sbGVjdGlvblN1Y2Nlc3NSYXRl44Ki44Op44O844OgXHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDbG91ZFdhdGNoOjpBbGFybScsIHtcclxuICAgICAgICBBbGFybU5hbWU6ICd0ZG5ldC1jb2xsZWN0aW9uLXN1Y2Nlc3MtcmF0ZS10ZXN0JyxcclxuICAgICAgICBNZXRyaWNOYW1lOiAnQ29sbGVjdGlvblN1Y2Nlc3NSYXRlJyxcclxuICAgICAgICBOYW1lc3BhY2U6ICdURG5ldERhdGFDb2xsZWN0b3InLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIE5vRGF0YUNvbGxlY3RlZOOCouODqeODvOODoFxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q2xvdWRXYXRjaDo6QWxhcm0nLCB7XHJcbiAgICAgICAgQWxhcm1OYW1lOiAndGRuZXQtbm8tZGF0YS1jb2xsZWN0ZWQtdGVzdCcsXHJcbiAgICAgICAgTWV0cmljTmFtZTogJ0Rpc2Nsb3N1cmVzQ29sbGVjdGVkJyxcclxuICAgICAgICBOYW1lc3BhY2U6ICdURG5ldERhdGFDb2xsZWN0b3InLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIENvbGxlY3Rpb25GYWlsdXJl44Ki44Op44O844OgXHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDbG91ZFdhdGNoOjpBbGFybScsIHtcclxuICAgICAgICBBbGFybU5hbWU6ICd0ZG5ldC1jb2xsZWN0aW9uLWZhaWx1cmVzLXRlc3QnLFxyXG4gICAgICAgIE1ldHJpY05hbWU6ICdEaXNjbG9zdXJlc0ZhaWxlZCcsXHJcbiAgICAgICAgTmFtZXNwYWNlOiAnVERuZXREYXRhQ29sbGVjdG9yJyxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCfjgqLjg6njg7zjg6Dplr7lgKTjgYzmraPjgZfjgY/oqK3lrprjgZXjgozjgabjgYTjgovjgZPjgagnLCAoKSA9PiB7XHJcbiAgICAgIC8vIENsb3VkV2F0Y2ggQWxhcm1z44KS5L2c5oiQXHJcbiAgICAgIG5ldyBDbG91ZFdhdGNoQWxhcm1zKHN0YWNrLCAnVGVzdEFsYXJtcycsIHtcclxuICAgICAgICBsYW1iZGFGdW5jdGlvbnM6IE9iamVjdC52YWx1ZXMobW9ja0xhbWJkYUZ1bmN0aW9ucyksXHJcbiAgICAgICAgZW52aXJvbm1lbnQ6ICd0ZXN0JyxcclxuICAgICAgICBlcnJvclJhdGVUaHJlc2hvbGQ6IDUsXHJcbiAgICAgICAgZHVyYXRpb25UaHJlc2hvbGQ6IDYwMCxcclxuICAgICAgICBjb2xsZWN0aW9uU3VjY2Vzc1JhdGVUaHJlc2hvbGQ6IDkwLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKTtcclxuXHJcbiAgICAgIC8vIEVycm9yIFJhdGU6IDUlXHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDbG91ZFdhdGNoOjpBbGFybScsIHtcclxuICAgICAgICBUaHJlc2hvbGQ6IDUsXHJcbiAgICAgICAgQ29tcGFyaXNvbk9wZXJhdG9yOiAnR3JlYXRlclRoYW5UaHJlc2hvbGQnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIER1cmF0aW9uOiA2MDDnp5IgPSA2MDAwMDDjg5/jg6rnp5JcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNsb3VkV2F0Y2g6OkFsYXJtJywge1xyXG4gICAgICAgIFRocmVzaG9sZDogNjAwMDAwLFxyXG4gICAgICAgIENvbXBhcmlzb25PcGVyYXRvcjogJ0dyZWF0ZXJUaGFuVGhyZXNob2xkJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBDb2xsZWN0aW9uU3VjY2Vzc1JhdGU6IDkwJVxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q2xvdWRXYXRjaDo6QWxhcm0nLCB7XHJcbiAgICAgICAgQWxhcm1OYW1lOiAndGRuZXQtY29sbGVjdGlvbi1zdWNjZXNzLXJhdGUtdGVzdCcsXHJcbiAgICAgICAgVGhyZXNob2xkOiA5MCxcclxuICAgICAgICBDb21wYXJpc29uT3BlcmF0b3I6ICdMZXNzVGhhblRocmVzaG9sZCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfjg4Djg4Pjgrfjg6Xjg5zjg7zjg4njga7ooajnpLrnorroqo0nLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCfjg4Djg4Pjgrfjg6Xjg5zjg7zjg4njgYzmraPjgZfjgY/kvZzmiJDjgZXjgozjgovjgZPjgagnLCAoKSA9PiB7XHJcbiAgICAgIC8vIENsb3VkV2F0Y2ggRGFzaGJvYXJk44KS5L2c5oiQXHJcbiAgICAgIGNvbnN0IGRhc2hib2FyZCA9IG5ldyBDbG91ZFdhdGNoRGFzaGJvYXJkKHN0YWNrLCAnVGVzdERhc2hib2FyZCcsIHtcclxuICAgICAgICBlbnZpcm9ubWVudDogJ3Rlc3QnLFxyXG4gICAgICAgIGxhbWJkYUZ1bmN0aW9uczoge1xyXG4gICAgICAgICAgY29sbGVjdG9yOiBtb2NrTGFtYmRhRnVuY3Rpb25zLmNvbGxlY3RvcixcclxuICAgICAgICAgIHF1ZXJ5OiBtb2NrTGFtYmRhRnVuY3Rpb25zLnF1ZXJ5LFxyXG4gICAgICAgICAgZXhwb3J0OiBtb2NrTGFtYmRhRnVuY3Rpb25zLmV4cG9ydCxcclxuICAgICAgICAgIGNvbGxlY3Q6IG1vY2tMYW1iZGFGdW5jdGlvbnMuY29sbGVjdG9yLCAvLyDlkIzjgZjplqLmlbDjgpLkvb/nlKhcclxuICAgICAgICAgIGNvbGxlY3RTdGF0dXM6IG1vY2tMYW1iZGFGdW5jdGlvbnMuY29sbGVjdG9yLFxyXG4gICAgICAgICAgZXhwb3J0U3RhdHVzOiBtb2NrTGFtYmRhRnVuY3Rpb25zLmV4cG9ydCxcclxuICAgICAgICAgIHBkZkRvd25sb2FkOiBtb2NrTGFtYmRhRnVuY3Rpb25zLnF1ZXJ5LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHluYW1vZGJUYWJsZXM6IG1vY2tEeW5hbW9kYlRhYmxlcyxcclxuICAgICAgICBzM0J1Y2tldHM6IG1vY2tTM0J1Y2tldHMsXHJcbiAgICAgICAgYXBpR2F0ZXdheTogbW9ja0FwaUdhdGV3YXksXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8g44OA44OD44K344Ol44Oc44O844OJ44GM5L2c5oiQ44GV44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIGV4cGVjdChkYXNoYm9hcmQuZGFzaGJvYXJkKS50b0JlRGVmaW5lZCgpO1xyXG5cclxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spO1xyXG5cclxuICAgICAgLy8g44OA44OD44K344Ol44Oc44O844OJ44Oq44K944O844K544GM5a2Y5Zyo44GZ44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDbG91ZFdhdGNoOjpEYXNoYm9hcmQnLCB7XHJcbiAgICAgICAgRGFzaGJvYXJkTmFtZTogJ3RkbmV0LWNvbGxlY3Rvci10ZXN0JyxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCfjg4Djg4Pjgrfjg6Xjg5zjg7zjg4njgavjgZnjgbnjgabjga7jgqbjgqPjgrjjgqfjg4Pjg4jjgYzlkKvjgb7jgozjgabjgYTjgovjgZPjgagnLCAoKSA9PiB7XHJcbiAgICAgIC8vIENsb3VkV2F0Y2ggRGFzaGJvYXJk44KS5L2c5oiQXHJcbiAgICAgIG5ldyBDbG91ZFdhdGNoRGFzaGJvYXJkKHN0YWNrLCAnVGVzdERhc2hib2FyZCcsIHtcclxuICAgICAgICBlbnZpcm9ubWVudDogJ3Rlc3QnLFxyXG4gICAgICAgIGxhbWJkYUZ1bmN0aW9uczoge1xyXG4gICAgICAgICAgY29sbGVjdG9yOiBtb2NrTGFtYmRhRnVuY3Rpb25zLmNvbGxlY3RvcixcclxuICAgICAgICAgIHF1ZXJ5OiBtb2NrTGFtYmRhRnVuY3Rpb25zLnF1ZXJ5LFxyXG4gICAgICAgICAgZXhwb3J0OiBtb2NrTGFtYmRhRnVuY3Rpb25zLmV4cG9ydCxcclxuICAgICAgICAgIGNvbGxlY3Q6IG1vY2tMYW1iZGFGdW5jdGlvbnMuY29sbGVjdG9yLFxyXG4gICAgICAgICAgY29sbGVjdFN0YXR1czogbW9ja0xhbWJkYUZ1bmN0aW9ucy5jb2xsZWN0b3IsXHJcbiAgICAgICAgICBleHBvcnRTdGF0dXM6IG1vY2tMYW1iZGFGdW5jdGlvbnMuZXhwb3J0LFxyXG4gICAgICAgICAgcGRmRG93bmxvYWQ6IG1vY2tMYW1iZGFGdW5jdGlvbnMucXVlcnksXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkeW5hbW9kYlRhYmxlczogbW9ja0R5bmFtb2RiVGFibGVzLFxyXG4gICAgICAgIHMzQnVja2V0czogbW9ja1MzQnVja2V0cyxcclxuICAgICAgICBhcGlHYXRld2F5OiBtb2NrQXBpR2F0ZXdheSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IFRlbXBsYXRlLmZyb21TdGFjayhzdGFjayk7XHJcblxyXG4gICAgICAvLyDjg4Djg4Pjgrfjg6Xjg5zjg7zjg4njg6rjgr3jg7zjgrnjgYzlrZjlnKjjgZnjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgdGVtcGxhdGUucmVzb3VyY2VDb3VudElzKCdBV1M6OkNsb3VkV2F0Y2g6OkRhc2hib2FyZCcsIDEpO1xyXG5cclxuICAgICAgLy8g44OA44OD44K344Ol44Oc44O844OJ44Oq44K944O844K544KS5Y+W5b6XXHJcbiAgICAgIGNvbnN0IGRhc2hib2FyZHMgPSB0ZW1wbGF0ZS5maW5kUmVzb3VyY2VzKCdBV1M6OkNsb3VkV2F0Y2g6OkRhc2hib2FyZCcpO1xyXG4gICAgICBjb25zdCBkYXNoYm9hcmRLZXlzID0gT2JqZWN0LmtleXMoZGFzaGJvYXJkcyk7XHJcbiAgICAgIGV4cGVjdChkYXNoYm9hcmRLZXlzLmxlbmd0aCkudG9CZSgxKTtcclxuXHJcbiAgICAgIC8vIERhc2hib2FyZEJvZHnjg5fjg63jg5Hjg4bjgqPjgYzlrZjlnKjjgZnjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgY29uc3QgZGFzaGJvYXJkID0gZGFzaGJvYXJkc1tkYXNoYm9hcmRLZXlzWzBdXTtcclxuICAgICAgZXhwZWN0KGRhc2hib2FyZC5Qcm9wZXJ0aWVzLkRhc2hib2FyZEJvZHkpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCfjg4Djg4Pjgrfjg6Xjg5zjg7zjg4nlkI3jgavnkrDlooPlkI3jgYzlkKvjgb7jgozjgabjgYTjgovjgZPjgagnLCAoKSA9PiB7XHJcbiAgICAgIC8vIOacrOeVqueSsOWig+OBp+ODgOODg+OCt+ODpeODnOODvOODieOCkuS9nOaIkFxyXG4gICAgICBuZXcgQ2xvdWRXYXRjaERhc2hib2FyZChzdGFjaywgJ1Byb2REYXNoYm9hcmQnLCB7XHJcbiAgICAgICAgZW52aXJvbm1lbnQ6ICdwcm9kJyxcclxuICAgICAgICBsYW1iZGFGdW5jdGlvbnM6IHtcclxuICAgICAgICAgIGNvbGxlY3RvcjogbW9ja0xhbWJkYUZ1bmN0aW9ucy5jb2xsZWN0b3IsXHJcbiAgICAgICAgICBxdWVyeTogbW9ja0xhbWJkYUZ1bmN0aW9ucy5xdWVyeSxcclxuICAgICAgICAgIGV4cG9ydDogbW9ja0xhbWJkYUZ1bmN0aW9ucy5leHBvcnQsXHJcbiAgICAgICAgICBjb2xsZWN0OiBtb2NrTGFtYmRhRnVuY3Rpb25zLmNvbGxlY3RvcixcclxuICAgICAgICAgIGNvbGxlY3RTdGF0dXM6IG1vY2tMYW1iZGFGdW5jdGlvbnMuY29sbGVjdG9yLFxyXG4gICAgICAgICAgZXhwb3J0U3RhdHVzOiBtb2NrTGFtYmRhRnVuY3Rpb25zLmV4cG9ydCxcclxuICAgICAgICAgIHBkZkRvd25sb2FkOiBtb2NrTGFtYmRhRnVuY3Rpb25zLnF1ZXJ5LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHluYW1vZGJUYWJsZXM6IG1vY2tEeW5hbW9kYlRhYmxlcyxcclxuICAgICAgICBzM0J1Y2tldHM6IG1vY2tTM0J1Y2tldHMsXHJcbiAgICAgICAgYXBpR2F0ZXdheTogbW9ja0FwaUdhdGV3YXksXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spO1xyXG5cclxuICAgICAgLy8g44OA44OD44K344Ol44Oc44O844OJ5ZCN44Gr55Kw5aKD5ZCN44GM5ZCr44G+44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDbG91ZFdhdGNoOjpEYXNoYm9hcmQnLCB7XHJcbiAgICAgICAgRGFzaGJvYXJkTmFtZTogJ3RkbmV0LWNvbGxlY3Rvci1wcm9kJyxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0Nsb3VkV2F0Y2jntbHlkIjjga7lrozlhajmgKfnorroqo0nLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCfjg6Hjg4jjg6rjgq/jgrnjgIHjgqLjg6njg7zjg6DjgIHjg4Djg4Pjgrfjg6Xjg5zjg7zjg4njgYzjgZnjgbnjgabpgKPmkLrjgZfjgabjgYTjgovjgZPjgagnLCAoKSA9PiB7XHJcbiAgICAgIC8vIOOBmeOBueOBpuOBrkxhbWJkYemWouaVsOOBq+ODoeODiOODquOCr+OCuemAgeS/oeaoqemZkOOCkuS7mOS4jlxyXG4gICAgICBPYmplY3QudmFsdWVzKG1vY2tMYW1iZGFGdW5jdGlvbnMpLmZvckVhY2goKGZuKSA9PiB7XHJcbiAgICAgICAgZm4uYWRkVG9Sb2xlUG9saWN5KFxyXG4gICAgICAgICAgbmV3IGNkay5hd3NfaWFtLlBvbGljeVN0YXRlbWVudCh7XHJcbiAgICAgICAgICAgIGVmZmVjdDogY2RrLmF3c19pYW0uRWZmZWN0LkFMTE9XLFxyXG4gICAgICAgICAgICBhY3Rpb25zOiBbJ2Nsb3Vkd2F0Y2g6UHV0TWV0cmljRGF0YSddLFxyXG4gICAgICAgICAgICByZXNvdXJjZXM6IFsnKiddLFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIENsb3VkV2F0Y2ggQWxhcm1z44KS5L2c5oiQXHJcbiAgICAgIG5ldyBDbG91ZFdhdGNoQWxhcm1zKHN0YWNrLCAnVGVzdEFsYXJtcycsIHtcclxuICAgICAgICBsYW1iZGFGdW5jdGlvbnM6IE9iamVjdC52YWx1ZXMobW9ja0xhbWJkYUZ1bmN0aW9ucyksXHJcbiAgICAgICAgZW52aXJvbm1lbnQ6ICd0ZXN0JyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBDbG91ZFdhdGNoIERhc2hib2FyZOOCkuS9nOaIkFxyXG4gICAgICBuZXcgQ2xvdWRXYXRjaERhc2hib2FyZChzdGFjaywgJ1Rlc3REYXNoYm9hcmQnLCB7XHJcbiAgICAgICAgZW52aXJvbm1lbnQ6ICd0ZXN0JyxcclxuICAgICAgICBsYW1iZGFGdW5jdGlvbnM6IHtcclxuICAgICAgICAgIGNvbGxlY3RvcjogbW9ja0xhbWJkYUZ1bmN0aW9ucy5jb2xsZWN0b3IsXHJcbiAgICAgICAgICBxdWVyeTogbW9ja0xhbWJkYUZ1bmN0aW9ucy5xdWVyeSxcclxuICAgICAgICAgIGV4cG9ydDogbW9ja0xhbWJkYUZ1bmN0aW9ucy5leHBvcnQsXHJcbiAgICAgICAgICBjb2xsZWN0OiBtb2NrTGFtYmRhRnVuY3Rpb25zLmNvbGxlY3RvcixcclxuICAgICAgICAgIGNvbGxlY3RTdGF0dXM6IG1vY2tMYW1iZGFGdW5jdGlvbnMuY29sbGVjdG9yLFxyXG4gICAgICAgICAgZXhwb3J0U3RhdHVzOiBtb2NrTGFtYmRhRnVuY3Rpb25zLmV4cG9ydCxcclxuICAgICAgICAgIHBkZkRvd25sb2FkOiBtb2NrTGFtYmRhRnVuY3Rpb25zLnF1ZXJ5LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHluYW1vZGJUYWJsZXM6IG1vY2tEeW5hbW9kYlRhYmxlcyxcclxuICAgICAgICBzM0J1Y2tldHM6IG1vY2tTM0J1Y2tldHMsXHJcbiAgICAgICAgYXBpR2F0ZXdheTogbW9ja0FwaUdhdGV3YXksXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spO1xyXG5cclxuICAgICAgLy8gTGFtYmRh6Zai5pWw44GM5L2c5oiQ44GV44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIHRlbXBsYXRlLnJlc291cmNlQ291bnRJcygnQVdTOjpMYW1iZGE6OkZ1bmN0aW9uJywgMyk7XHJcblxyXG4gICAgICAvLyBJQU3jg53jg6rjgrfjg7zjgYzkvZzmiJDjgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo3vvIjjg6Hjg4jjg6rjgq/jgrnpgIHkv6HmqKnpmZDvvIlcclxuICAgICAgdGVtcGxhdGUucmVzb3VyY2VDb3VudElzKCdBV1M6OklBTTo6UG9saWN5JywgMyk7XHJcblxyXG4gICAgICAvLyBDbG91ZFdhdGNoIEFsYXJtc+OBjOS9nOaIkOOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6Q2xvdWRXYXRjaDo6QWxhcm0nLCAxMik7XHJcblxyXG4gICAgICAvLyBTTlMgVG9waWPjgYzkvZzmiJDjgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgdGVtcGxhdGUucmVzb3VyY2VDb3VudElzKCdBV1M6OlNOUzo6VG9waWMnLCAxKTtcclxuXHJcbiAgICAgIC8vIENsb3VkV2F0Y2ggRGFzaGJvYXJk44GM5L2c5oiQ44GV44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIHRlbXBsYXRlLnJlc291cmNlQ291bnRJcygnQVdTOjpDbG91ZFdhdGNoOjpEYXNoYm9hcmQnLCAxKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRlc3QoJ+eSsOWig+OBlOOBqOOBq+eVsOOBquOCi+ioreWumuOBjOmBqeeUqOOBleOCjOOCi+OBk+OBqCcsICgpID0+IHtcclxuICAgICAgLy8g6ZaL55m655Kw5aKDXHJcbiAgICAgIGNvbnN0IGRldlN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xyXG4gICAgICBjb25zdCBkZXZMYW1iZGEgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKGRldlN0YWNrLCAnRGV2RnVuY3Rpb24nLCB7XHJcbiAgICAgICAgcnVudGltZTogbGFtYmRhLlJ1bnRpbWUuTk9ERUpTXzIwX1gsXHJcbiAgICAgICAgaGFuZGxlcjogJ2luZGV4LmhhbmRsZXInLFxyXG4gICAgICAgIGNvZGU6IGxhbWJkYS5Db2RlLmZyb21JbmxpbmUoJ2V4cG9ydHMuaGFuZGxlciA9IGFzeW5jICgpID0+IHt9OycpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIG5ldyBDbG91ZFdhdGNoQWxhcm1zKGRldlN0YWNrLCAnRGV2QWxhcm1zJywge1xyXG4gICAgICAgIGxhbWJkYUZ1bmN0aW9uczogW2RldkxhbWJkYV0sXHJcbiAgICAgICAgZW52aXJvbm1lbnQ6ICdkZXYnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGRldlRlbXBsYXRlID0gVGVtcGxhdGUuZnJvbVN0YWNrKGRldlN0YWNrKTtcclxuXHJcbiAgICAgIC8vIOmWi+eZuueSsOWig+OBruOCouODqeODvOODoOWQjeOCkueiuuiqjVxyXG4gICAgICBkZXZUZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q2xvdWRXYXRjaDo6QWxhcm0nLCB7XHJcbiAgICAgICAgQWxhcm1OYW1lOiAndGRuZXQtY29sbGVjdGlvbi1zdWNjZXNzLXJhdGUtZGV2JyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyDmnKznlarnkrDlooNcclxuICAgICAgY29uc3QgcHJvZFN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xyXG4gICAgICBjb25zdCBwcm9kTGFtYmRhID0gbmV3IGxhbWJkYS5GdW5jdGlvbihwcm9kU3RhY2ssICdQcm9kRnVuY3Rpb24nLCB7XHJcbiAgICAgICAgcnVudGltZTogbGFtYmRhLlJ1bnRpbWUuTk9ERUpTXzIwX1gsXHJcbiAgICAgICAgaGFuZGxlcjogJ2luZGV4LmhhbmRsZXInLFxyXG4gICAgICAgIGNvZGU6IGxhbWJkYS5Db2RlLmZyb21JbmxpbmUoJ2V4cG9ydHMuaGFuZGxlciA9IGFzeW5jICgpID0+IHt9OycpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIG5ldyBDbG91ZFdhdGNoQWxhcm1zKHByb2RTdGFjaywgJ1Byb2RBbGFybXMnLCB7XHJcbiAgICAgICAgbGFtYmRhRnVuY3Rpb25zOiBbcHJvZExhbWJkYV0sXHJcbiAgICAgICAgZW52aXJvbm1lbnQ6ICdwcm9kJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBwcm9kVGVtcGxhdGUgPSBUZW1wbGF0ZS5mcm9tU3RhY2socHJvZFN0YWNrKTtcclxuXHJcbiAgICAgIC8vIOacrOeVqueSsOWig+OBruOCouODqeODvOODoOWQjeOCkueiuuiqjVxyXG4gICAgICBwcm9kVGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNsb3VkV2F0Y2g6OkFsYXJtJywge1xyXG4gICAgICAgIEFsYXJtTmFtZTogJ3RkbmV0LWNvbGxlY3Rpb24tc3VjY2Vzcy1yYXRlLXByb2QnLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRlc3QoJ+OBmeOBueOBpuOBruODquOCveODvOOCueOBjOato+OBl+OBhOWQjeWJjeepuumWk+OCkuS9v+eUqOOBl+OBpuOBhOOCi+OBk+OBqCcsICgpID0+IHtcclxuICAgICAgLy8gQ2xvdWRXYXRjaCBBbGFybXPjgpLkvZzmiJBcclxuICAgICAgbmV3IENsb3VkV2F0Y2hBbGFybXMoc3RhY2ssICdUZXN0QWxhcm1zJywge1xyXG4gICAgICAgIGxhbWJkYUZ1bmN0aW9uczogT2JqZWN0LnZhbHVlcyhtb2NrTGFtYmRhRnVuY3Rpb25zKSxcclxuICAgICAgICBlbnZpcm9ubWVudDogJ3Rlc3QnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKTtcclxuXHJcbiAgICAgIC8vIOOCq+OCueOCv+ODoOODoeODiOODquOCr+OCueOCouODqeODvOODoOOBjFREbmV0RGF0YUNvbGxlY3RvcuWQjeWJjeepuumWk+OCkuS9v+eUqOOBl+OBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q2xvdWRXYXRjaDo6QWxhcm0nLCB7XHJcbiAgICAgICAgTWV0cmljTmFtZTogJ0NvbGxlY3Rpb25TdWNjZXNzUmF0ZScsXHJcbiAgICAgICAgTmFtZXNwYWNlOiAnVERuZXREYXRhQ29sbGVjdG9yJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q2xvdWRXYXRjaDo6QWxhcm0nLCB7XHJcbiAgICAgICAgTWV0cmljTmFtZTogJ0Rpc2Nsb3N1cmVzQ29sbGVjdGVkJyxcclxuICAgICAgICBOYW1lc3BhY2U6ICdURG5ldERhdGFDb2xsZWN0b3InLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDbG91ZFdhdGNoOjpBbGFybScsIHtcclxuICAgICAgICBNZXRyaWNOYW1lOiAnRGlzY2xvc3VyZXNGYWlsZWQnLFxyXG4gICAgICAgIE5hbWVzcGFjZTogJ1REbmV0RGF0YUNvbGxlY3RvcicsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfjgqjjg6njg7zjgrfjg4rjg6rjgqrjga7norroqo0nLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCdMYW1iZGHplqLmlbDjgYzlrZjlnKjjgZfjgarjgYTloLTlkIjjgafjgoLjgrnjgr/jg4Pjgq/jgYzkvZzmiJDjgafjgY3jgovjgZPjgagnLCAoKSA9PiB7XHJcbiAgICAgIC8vIExhbWJkYemWouaVsOOBquOBl+OBp0Nsb3VkV2F0Y2ggQWxhcm1z44KS5L2c5oiQXHJcbiAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgbmV3IENsb3VkV2F0Y2hBbGFybXMoc3RhY2ssICdFbXB0eUFsYXJtcycsIHtcclxuICAgICAgICAgIGxhbWJkYUZ1bmN0aW9uczogW10sXHJcbiAgICAgICAgICBlbnZpcm9ubWVudDogJ3Rlc3QnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xyXG5cclxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spO1xyXG5cclxuICAgICAgLy8g44Kr44K544K/44Og44Oh44OI44Oq44Kv44K544Ki44Op44O844Og44Gu44G/44GM5L2c5oiQ44GV44KM44KL77yIM+WAi++8iVxyXG4gICAgICB0ZW1wbGF0ZS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6Q2xvdWRXYXRjaDo6QWxhcm0nLCAzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRlc3QoJ+eEoeWKueOBqueSsOWig+WQjeOBp+OCguOCueOCv+ODg+OCr+OBjOS9nOaIkOOBp+OBjeOCi+OBk+OBqCcsICgpID0+IHtcclxuICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICBuZXcgQ2xvdWRXYXRjaEFsYXJtcyhzdGFjaywgJ0ludmFsaWRFbnZBbGFybXMnLCB7XHJcbiAgICAgICAgICBsYW1iZGFGdW5jdGlvbnM6IE9iamVjdC52YWx1ZXMobW9ja0xhbWJkYUZ1bmN0aW9ucyksXHJcbiAgICAgICAgICBlbnZpcm9ubWVudDogJ2ludmFsaWQtZW52JyxcclxuICAgICAgICB9KTtcclxuICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuXHJcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKTtcclxuXHJcbiAgICAgIC8vIOOCouODqeODvOODoOOBjOS9nOaIkOOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6Q2xvdWRXYXRjaDo6QWxhcm0nLCAxMik7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJ2ZXJzaW9uIjozfQ==