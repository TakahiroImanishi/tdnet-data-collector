77adb20a3b27a93a02906ccf2966101c
"use strict";
/**
 * updateExecutionStatus関数のユニットテスト
 *
 * Requirements: 要件5.4（実行状態管理）
 */
Object.defineProperty(exports, "__esModule", { value: true });
const client_dynamodb_1 = require("@aws-sdk/client-dynamodb");
const aws_sdk_client_mock_1 = require("aws-sdk-client-mock");
const update_execution_status_1 = require("../update-execution-status");
const dynamoMock = (0, aws_sdk_client_mock_1.mockClient)(client_dynamodb_1.DynamoDBClient);
describe('updateExecutionStatus', () => {
    const originalEnv = process.env.DYNAMODB_EXECUTIONS_TABLE;
    beforeEach(() => {
        jest.clearAllMocks();
        dynamoMock.reset();
        process.env.DYNAMODB_EXECUTIONS_TABLE = 'test-executions-table';
    });
    afterEach(() => {
        process.env.DYNAMODB_EXECUTIONS_TABLE = originalEnv;
    });
    describe('正常系', () => {
        it('実行状態を作成できる（pending）', async () => {
            // Arrange
            const execution_id = 'exec_001';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            const result = await (0, update_execution_status_1.updateExecutionStatus)(execution_id, 'pending', 0);
            // Assert
            expect(result).toMatchObject({
                execution_id: 'exec_001',
                status: 'pending',
                progress: 0,
                collected_count: 0,
                failed_count: 0,
            });
            expect(result.started_at).toBeDefined();
            expect(result.updated_at).toBeDefined();
            expect(result.completed_at).toBeUndefined();
            expect(result.ttl).toBeUndefined();
            expect(dynamoMock.calls()).toHaveLength(1);
        });
        it('実行状態を更新できる（running）', async () => {
            // Arrange
            const execution_id = 'exec_001';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            const result = await (0, update_execution_status_1.updateExecutionStatus)(execution_id, 'running', 50, 25, 0);
            // Assert
            expect(result).toMatchObject({
                execution_id: 'exec_001',
                status: 'running',
                progress: 50,
                collected_count: 25,
                failed_count: 0,
            });
            expect(result.completed_at).toBeUndefined();
            expect(result.ttl).toBeUndefined();
        });
        it('実行状態を完了にできる（completed）', async () => {
            // Arrange
            const execution_id = 'exec_001';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            const result = await (0, update_execution_status_1.updateExecutionStatus)(execution_id, 'completed', 100, 50, 0);
            // Assert
            expect(result).toMatchObject({
                execution_id: 'exec_001',
                status: 'completed',
                progress: 100,
                collected_count: 50,
                failed_count: 0,
            });
            expect(result.completed_at).toBeDefined();
            expect(result.ttl).toBeDefined();
            expect(result.error_message).toBeUndefined();
        });
        it('実行状態を失敗にできる（failed）', async () => {
            // Arrange
            const execution_id = 'exec_001';
            const error_message = 'Network error occurred';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            const result = await (0, update_execution_status_1.updateExecutionStatus)(execution_id, 'failed', 50, 25, 5, error_message);
            // Assert
            expect(result).toMatchObject({
                execution_id: 'exec_001',
                status: 'failed',
                progress: 50,
                collected_count: 25,
                failed_count: 5,
                error_message: 'Network error occurred',
            });
            expect(result.completed_at).toBeDefined();
            expect(result.ttl).toBeDefined();
        });
        it('進捗率を0-100の範囲に制限する（負の値）', async () => {
            // Arrange
            const execution_id = 'exec_001';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            const result = await (0, update_execution_status_1.updateExecutionStatus)(execution_id, 'running', -10);
            // Assert
            expect(result.progress).toBe(0);
        });
        it('進捗率を0-100の範囲に制限する（100超過）', async () => {
            // Arrange
            const execution_id = 'exec_001';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            const result = await (0, update_execution_status_1.updateExecutionStatus)(execution_id, 'running', 150);
            // Assert
            expect(result.progress).toBe(100);
        });
        it('TTLが30日後に設定される（completed）', async () => {
            // Arrange
            const execution_id = 'exec_001';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            const beforeTime = Math.floor(Date.now() / 1000) + 30 * 24 * 60 * 60;
            // Act
            const result = await (0, update_execution_status_1.updateExecutionStatus)(execution_id, 'completed', 100);
            const afterTime = Math.floor(Date.now() / 1000) + 30 * 24 * 60 * 60;
            // Assert
            expect(result.ttl).toBeDefined();
            expect(result.ttl).toBeGreaterThanOrEqual(beforeTime - 1);
            expect(result.ttl).toBeLessThanOrEqual(afterTime + 1);
        });
        it('TTLが30日後に設定される（failed）', async () => {
            // Arrange
            const execution_id = 'exec_001';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            const beforeTime = Math.floor(Date.now() / 1000) + 30 * 24 * 60 * 60;
            // Act
            const result = await (0, update_execution_status_1.updateExecutionStatus)(execution_id, 'failed', 50, 0, 0, 'Error');
            const afterTime = Math.floor(Date.now() / 1000) + 30 * 24 * 60 * 60;
            // Assert
            expect(result.ttl).toBeDefined();
            expect(result.ttl).toBeGreaterThanOrEqual(beforeTime - 1);
            expect(result.ttl).toBeLessThanOrEqual(afterTime + 1);
        });
        it('環境変数が未設定の場合、デフォルト値を使用する', async () => {
            // Arrange
            delete process.env.DYNAMODB_EXECUTIONS_TABLE;
            const execution_id = 'exec_001';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            await (0, update_execution_status_1.updateExecutionStatus)(execution_id, 'pending', 0);
            // Assert
            const input = dynamoMock.call(0).args[0].input;
            expect(input.TableName).toBe('tdnet_executions');
        });
    });
    describe('異常系', () => {
        it('DynamoDBエラーで失敗する', async () => {
            // Arrange
            const execution_id = 'exec_001';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).rejects(new Error('DynamoDB error'));
            // Act & Assert
            await expect((0, update_execution_status_1.updateExecutionStatus)(execution_id, 'pending', 0)).rejects.toThrow('DynamoDB error');
        });
        it('エラーメッセージなしでfailedステータスを設定できる', async () => {
            // Arrange
            const execution_id = 'exec_001';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            const result = await (0, update_execution_status_1.updateExecutionStatus)(execution_id, 'failed', 50, 25, 5);
            // Assert
            expect(result.status).toBe('failed');
            expect(result.error_message).toBeUndefined();
            expect(result.completed_at).toBeDefined();
            expect(result.ttl).toBeDefined();
        });
    });
    describe('エッジケース', () => {
        it('進捗率が0の場合', async () => {
            // Arrange
            const execution_id = 'exec_001';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            const result = await (0, update_execution_status_1.updateExecutionStatus)(execution_id, 'pending', 0);
            // Assert
            expect(result.progress).toBe(0);
        });
        it('進捗率が100の場合', async () => {
            // Arrange
            const execution_id = 'exec_001';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            const result = await (0, update_execution_status_1.updateExecutionStatus)(execution_id, 'completed', 100);
            // Assert
            expect(result.progress).toBe(100);
        });
        it('collected_countとfailed_countが0の場合', async () => {
            // Arrange
            const execution_id = 'exec_001';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            const result = await (0, update_execution_status_1.updateExecutionStatus)(execution_id, 'pending', 0, 0, 0);
            // Assert
            expect(result.collected_count).toBe(0);
            expect(result.failed_count).toBe(0);
        });
        it('collected_countとfailed_countが大きい値の場合', async () => {
            // Arrange
            const execution_id = 'exec_001';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            const result = await (0, update_execution_status_1.updateExecutionStatus)(execution_id, 'completed', 100, 1000, 50);
            // Assert
            expect(result.collected_count).toBe(1000);
            expect(result.failed_count).toBe(50);
        });
    });
});
describe('getExecutionStatus', () => {
    const originalEnv = process.env.DYNAMODB_EXECUTIONS_TABLE;
    beforeEach(() => {
        jest.clearAllMocks();
        dynamoMock.reset();
        process.env.DYNAMODB_EXECUTIONS_TABLE = 'test-executions-table';
    });
    afterEach(() => {
        process.env.DYNAMODB_EXECUTIONS_TABLE = originalEnv;
    });
    describe('正常系', () => {
        it('実行状態を取得できる', async () => {
            // Arrange
            const execution_id = 'exec_001';
            dynamoMock.on(client_dynamodb_1.GetItemCommand).resolves({
                Item: {
                    execution_id: { S: 'exec_001' },
                    status: { S: 'running' },
                    progress: { N: '50' },
                    collected_count: { N: '25' },
                    failed_count: { N: '0' },
                    started_at: { S: '2024-01-15T10:30:00Z' },
                    updated_at: { S: '2024-01-15T10:35:00Z' },
                },
            });
            // Act
            const result = await (0, update_execution_status_1.getExecutionStatus)(execution_id);
            // Assert
            expect(result).toMatchObject({
                execution_id: 'exec_001',
                status: 'running',
                progress: 50,
                collected_count: 25,
                failed_count: 0,
            });
            expect(dynamoMock.calls()).toHaveLength(1);
        });
        it('存在しない実行IDの場合、nullを返す', async () => {
            // Arrange
            const execution_id = 'exec_999';
            dynamoMock.on(client_dynamodb_1.GetItemCommand).resolves({});
            // Act
            const result = await (0, update_execution_status_1.getExecutionStatus)(execution_id);
            // Assert
            expect(result).toBeNull();
        });
    });
    describe('異常系', () => {
        it('DynamoDBエラーで失敗する', async () => {
            // Arrange
            const execution_id = 'exec_001';
            dynamoMock.on(client_dynamodb_1.GetItemCommand).rejects(new Error('DynamoDB error'));
            // Act & Assert
            await expect((0, update_execution_status_1.getExecutionStatus)(execution_id)).rejects.toThrow('DynamoDB error');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxsYW1iZGFcXGNvbGxlY3RvclxcX190ZXN0c19fXFx1cGRhdGUtZXhlY3V0aW9uLXN0YXR1cy50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7OztHQUlHOztBQUVILDhEQUEwRjtBQUMxRiw2REFBaUQ7QUFDakQsd0VBQXVGO0FBRXZGLE1BQU0sVUFBVSxHQUFHLElBQUEsZ0NBQVUsRUFBQyxnQ0FBYyxDQUFDLENBQUM7QUFFOUMsUUFBUSxDQUFDLHVCQUF1QixFQUFFLEdBQUcsRUFBRTtJQUNyQyxNQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLHlCQUF5QixDQUFDO0lBRTFELFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDckIsVUFBVSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ25CLE9BQU8sQ0FBQyxHQUFHLENBQUMseUJBQXlCLEdBQUcsdUJBQXVCLENBQUM7SUFDbEUsQ0FBQyxDQUFDLENBQUM7SUFFSCxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2IsT0FBTyxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsR0FBRyxXQUFXLENBQUM7SUFDdEQsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRTtRQUNuQixFQUFFLENBQUMscUJBQXFCLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDbkMsVUFBVTtZQUNWLE1BQU0sWUFBWSxHQUFHLFVBQVUsQ0FBQztZQUNoQyxVQUFVLENBQUMsRUFBRSxDQUFDLGdDQUFjLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFM0MsTUFBTTtZQUNOLE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBQSwrQ0FBcUIsRUFBQyxZQUFZLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBRXZFLFNBQVM7WUFDVCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsYUFB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LENBQUMsRUFBRSxDQUFDLGdDQUFjLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO1lBRW5FLGVBQWU7WUFDZixNQUFNLE1BQU0sQ0FBQyxJQUFBLDRDQUFrQixFQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ25GLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXHRpMTk4XFxpbnZlc3RtZW50X2FuYWx5c2lzX29wb3BvXFxzcmNcXGxhbWJkYVxcY29sbGVjdG9yXFxfX3Rlc3RzX19cXHVwZGF0ZS1leGVjdXRpb24tc3RhdHVzLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIHVwZGF0ZUV4ZWN1dGlvblN0YXR1c+mWouaVsOOBruODpuODi+ODg+ODiOODhuOCueODiFxyXG4gKlxyXG4gKiBSZXF1aXJlbWVudHM6IOimgeS7tjUuNO+8iOWun+ihjOeKtuaFi+euoeeQhu+8iVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IER5bmFtb0RCQ2xpZW50LCBQdXRJdGVtQ29tbWFuZCwgR2V0SXRlbUNvbW1hbmQgfSBmcm9tICdAYXdzLXNkay9jbGllbnQtZHluYW1vZGInO1xyXG5pbXBvcnQgeyBtb2NrQ2xpZW50IH0gZnJvbSAnYXdzLXNkay1jbGllbnQtbW9jayc7XHJcbmltcG9ydCB7IHVwZGF0ZUV4ZWN1dGlvblN0YXR1cywgZ2V0RXhlY3V0aW9uU3RhdHVzIH0gZnJvbSAnLi4vdXBkYXRlLWV4ZWN1dGlvbi1zdGF0dXMnO1xyXG5cclxuY29uc3QgZHluYW1vTW9jayA9IG1vY2tDbGllbnQoRHluYW1vREJDbGllbnQpO1xyXG5cclxuZGVzY3JpYmUoJ3VwZGF0ZUV4ZWN1dGlvblN0YXR1cycsICgpID0+IHtcclxuICBjb25zdCBvcmlnaW5hbEVudiA9IHByb2Nlc3MuZW52LkRZTkFNT0RCX0VYRUNVVElPTlNfVEFCTEU7XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgICBkeW5hbW9Nb2NrLnJlc2V0KCk7XHJcbiAgICBwcm9jZXNzLmVudi5EWU5BTU9EQl9FWEVDVVRJT05TX1RBQkxFID0gJ3Rlc3QtZXhlY3V0aW9ucy10YWJsZSc7XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICBwcm9jZXNzLmVudi5EWU5BTU9EQl9FWEVDVVRJT05TX1RBQkxFID0gb3JpZ2luYWxFbnY7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfmraPluLjns7snLCAoKSA9PiB7XHJcbiAgICBpdCgn5a6f6KGM54q25oWL44KS5L2c5oiQ44Gn44GN44KL77yIcGVuZGluZ++8iScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBjb25zdCBleGVjdXRpb25faWQgPSAnZXhlY18wMDEnO1xyXG4gICAgICBkeW5hbW9Nb2NrLm9uKFB1dEl0ZW1Db21tYW5kKS5yZXNvbHZlcyh7fSk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBkYXRlRXhlY3V0aW9uU3RhdHVzKGV4ZWN1dGlvbl9pZCwgJ3BlbmRpbmcnLCAwKTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b01hdGNoT2JqZWN0KHtcclxuICAgICAgICBleGVjdXRpb25faWQ6ICdleGVjXzAwMScsXHJcbiAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXHJcbiAgICAgICAgcHJvZ3Jlc3M6IDAsXHJcbiAgICAgICAgY29sbGVjdGVkX2NvdW50OiAwLFxyXG4gICAgICAgIGZhaWxlZF9jb3VudDogMCxcclxuICAgICAgfSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhcnRlZF9hdCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC51cGRhdGVkX2F0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmNvbXBsZXRlZF9hdCkudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnR0bCkudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoZHluYW1vTW9jay5jYWxscygpKS50b0hhdmVMZW5ndGgoMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5a6f6KGM54q25oWL44KS5pu05paw44Gn44GN44KL77yIcnVubmluZ++8iScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBjb25zdCBleGVjdXRpb25faWQgPSAnZXhlY18wMDEnO1xyXG4gICAgICBkeW5hbW9Nb2NrLm9uKFB1dEl0ZW1Db21tYW5kKS5yZXNvbHZlcyh7fSk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBkYXRlRXhlY3V0aW9uU3RhdHVzKGV4ZWN1dGlvbl9pZCwgJ3J1bm5pbmcnLCA1MCwgMjUsIDApO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvTWF0Y2hPYmplY3Qoe1xyXG4gICAgICAgIGV4ZWN1dGlvbl9pZDogJ2V4ZWNfMDAxJyxcclxuICAgICAgICBzdGF0dXM6ICdydW5uaW5nJyxcclxuICAgICAgICBwcm9ncmVzczogNTAsXHJcbiAgICAgICAgY29sbGVjdGVkX2NvdW50OiAyNSxcclxuICAgICAgICBmYWlsZWRfY291bnQ6IDAsXHJcbiAgICAgIH0pO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmNvbXBsZXRlZF9hdCkudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnR0bCkudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+Wun+ihjOeKtuaFi+OCkuWujOS6huOBq+OBp+OBjeOCi++8iGNvbXBsZXRlZO+8iScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBjb25zdCBleGVjdXRpb25faWQgPSAnZXhlY18wMDEnO1xyXG4gICAgICBkeW5hbW9Nb2NrLm9uKFB1dEl0ZW1Db21tYW5kKS5yZXNvbHZlcyh7fSk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBkYXRlRXhlY3V0aW9uU3RhdHVzKGV4ZWN1dGlvbl9pZCwgJ2NvbXBsZXRlZCcsIDEwMCwgNTAsIDApO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvTWF0Y2hPYmplY3Qoe1xyXG4gICAgICAgIGV4ZWN1dGlvbl9pZDogJ2V4ZWNfMDAxJyxcclxuICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxyXG4gICAgICAgIHByb2dyZXNzOiAxMDAsXHJcbiAgICAgICAgY29sbGVjdGVkX2NvdW50OiA1MCxcclxuICAgICAgICBmYWlsZWRfY291bnQ6IDAsXHJcbiAgICAgIH0pO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmNvbXBsZXRlZF9hdCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC50dGwpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JfbWVzc2FnZSkudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+Wun+ihjOeKtuaFi+OCkuWkseaVl+OBq+OBp+OBjeOCi++8iGZhaWxlZO+8iScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBjb25zdCBleGVjdXRpb25faWQgPSAnZXhlY18wMDEnO1xyXG4gICAgICBjb25zdCBlcnJvcl9tZXNzYWdlID0gJ05ldHdvcmsgZXJyb3Igb2NjdXJyZWQnO1xyXG4gICAgICBkeW5hbW9Nb2NrLm9uKFB1dEl0ZW1Db21tYW5kKS5yZXNvbHZlcyh7fSk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBkYXRlRXhlY3V0aW9uU3RhdHVzKFxyXG4gICAgICAgIGV4ZWN1dGlvbl9pZCxcclxuICAgICAgICAnZmFpbGVkJyxcclxuICAgICAgICA1MCxcclxuICAgICAgICAyNSxcclxuICAgICAgICA1LFxyXG4gICAgICAgIGVycm9yX21lc3NhZ2VcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b01hdGNoT2JqZWN0KHtcclxuICAgICAgICBleGVjdXRpb25faWQ6ICdleGVjXzAwMScsXHJcbiAgICAgICAgc3RhdHVzOiAnZmFpbGVkJyxcclxuICAgICAgICBwcm9ncmVzczogNTAsXHJcbiAgICAgICAgY29sbGVjdGVkX2NvdW50OiAyNSxcclxuICAgICAgICBmYWlsZWRfY291bnQ6IDUsXHJcbiAgICAgICAgZXJyb3JfbWVzc2FnZTogJ05ldHdvcmsgZXJyb3Igb2NjdXJyZWQnLFxyXG4gICAgICB9KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jb21wbGV0ZWRfYXQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQudHRsKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+mAsuaNl+eOh+OCkjAtMTAw44Gu56+E5Zuy44Gr5Yi26ZmQ44GZ44KL77yI6LKg44Gu5YCk77yJJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IGV4ZWN1dGlvbl9pZCA9ICdleGVjXzAwMSc7XHJcbiAgICAgIGR5bmFtb01vY2sub24oUHV0SXRlbUNvbW1hbmQpLnJlc29sdmVzKHt9KTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVFeGVjdXRpb25TdGF0dXMoZXhlY3V0aW9uX2lkLCAncnVubmluZycsIC0xMCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdC5wcm9ncmVzcykudG9CZSgwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfpgLLmjZfnjofjgpIwLTEwMOOBruevhOWbsuOBq+WItumZkOOBmeOCi++8iDEwMOi2hemBju+8iScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBjb25zdCBleGVjdXRpb25faWQgPSAnZXhlY18wMDEnO1xyXG4gICAgICBkeW5hbW9Nb2NrLm9uKFB1dEl0ZW1Db21tYW5kKS5yZXNvbHZlcyh7fSk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBkYXRlRXhlY3V0aW9uU3RhdHVzKGV4ZWN1dGlvbl9pZCwgJ3J1bm5pbmcnLCAxNTApO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQucHJvZ3Jlc3MpLnRvQmUoMTAwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdUVEzjgYwzMOaXpeW+jOOBq+ioreWumuOBleOCjOOCi++8iGNvbXBsZXRlZO+8iScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBjb25zdCBleGVjdXRpb25faWQgPSAnZXhlY18wMDEnO1xyXG4gICAgICBkeW5hbW9Nb2NrLm9uKFB1dEl0ZW1Db21tYW5kKS5yZXNvbHZlcyh7fSk7XHJcbiAgICAgIGNvbnN0IGJlZm9yZVRpbWUgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKSArIDMwICogMjQgKiA2MCAqIDYwO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVwZGF0ZUV4ZWN1dGlvblN0YXR1cyhleGVjdXRpb25faWQsICdjb21wbGV0ZWQnLCAxMDApO1xyXG5cclxuICAgICAgY29uc3QgYWZ0ZXJUaW1lID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCkgKyAzMCAqIDI0ICogNjAgKiA2MDtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnR0bCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC50dGwhKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKGJlZm9yZVRpbWUgLSAxKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC50dGwhKS50b0JlTGVzc1RoYW5PckVxdWFsKGFmdGVyVGltZSArIDEpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ1RUTOOBjDMw5pel5b6M44Gr6Kit5a6a44GV44KM44KL77yIZmFpbGVk77yJJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IGV4ZWN1dGlvbl9pZCA9ICdleGVjXzAwMSc7XHJcbiAgICAgIGR5bmFtb01vY2sub24oUHV0SXRlbUNvbW1hbmQpLnJlc29sdmVzKHt9KTtcclxuICAgICAgY29uc3QgYmVmb3JlVGltZSA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApICsgMzAgKiAyNCAqIDYwICogNjA7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBkYXRlRXhlY3V0aW9uU3RhdHVzKGV4ZWN1dGlvbl9pZCwgJ2ZhaWxlZCcsIDUwLCAwLCAwLCAnRXJyb3InKTtcclxuXHJcbiAgICAgIGNvbnN0IGFmdGVyVGltZSA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApICsgMzAgKiAyNCAqIDYwICogNjA7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdC50dGwpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQudHRsISkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbChiZWZvcmVUaW1lIC0gMSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQudHRsISkudG9CZUxlc3NUaGFuT3JFcXVhbChhZnRlclRpbWUgKyAxKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfnkrDlooPlpInmlbDjgYzmnKroqK3lrprjga7loLTlkIjjgIHjg4fjg5Xjgqnjg6vjg4jlgKTjgpLkvb/nlKjjgZnjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgZGVsZXRlIHByb2Nlc3MuZW52LkRZTkFNT0RCX0VYRUNVVElPTlNfVEFCTEU7XHJcbiAgICAgIGNvbnN0IGV4ZWN1dGlvbl9pZCA9ICdleGVjXzAwMSc7XHJcbiAgICAgIGR5bmFtb01vY2sub24oUHV0SXRlbUNvbW1hbmQpLnJlc29sdmVzKHt9KTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBhd2FpdCB1cGRhdGVFeGVjdXRpb25TdGF0dXMoZXhlY3V0aW9uX2lkLCAncGVuZGluZycsIDApO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGNvbnN0IGlucHV0ID0gZHluYW1vTW9jay5jYWxsKDApLmFyZ3NbMF0uaW5wdXQgYXMgYW55O1xyXG4gICAgICBleHBlY3QoaW5wdXQuVGFibGVOYW1lKS50b0JlKCd0ZG5ldF9leGVjdXRpb25zJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+eVsOW4uOezuycsICgpID0+IHtcclxuICAgIGl0KCdEeW5hbW9EQuOCqOODqeODvOOBp+WkseaVl+OBmeOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBjb25zdCBleGVjdXRpb25faWQgPSAnZXhlY18wMDEnO1xyXG4gICAgICBkeW5hbW9Nb2NrLm9uKFB1dEl0ZW1Db21tYW5kKS5yZWplY3RzKG5ldyBFcnJvcignRHluYW1vREIgZXJyb3InKSk7XHJcblxyXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcclxuICAgICAgYXdhaXQgZXhwZWN0KHVwZGF0ZUV4ZWN1dGlvblN0YXR1cyhleGVjdXRpb25faWQsICdwZW5kaW5nJywgMCkpLnJlamVjdHMudG9UaHJvdyhcclxuICAgICAgICAnRHluYW1vREIgZXJyb3InXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn44Ko44Op44O844Oh44OD44K744O844K444Gq44GX44GnZmFpbGVk44K544OG44O844K/44K544KS6Kit5a6a44Gn44GN44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IGV4ZWN1dGlvbl9pZCA9ICdleGVjXzAwMSc7XHJcbiAgICAgIGR5bmFtb01vY2sub24oUHV0SXRlbUNvbW1hbmQpLnJlc29sdmVzKHt9KTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVFeGVjdXRpb25TdGF0dXMoZXhlY3V0aW9uX2lkLCAnZmFpbGVkJywgNTAsIDI1LCA1KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZSgnZmFpbGVkJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JfbWVzc2FnZSkudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmNvbXBsZXRlZF9hdCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC50dGwpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+OCqOODg+OCuOOCseODvOOCuScsICgpID0+IHtcclxuICAgIGl0KCfpgLLmjZfnjofjgYww44Gu5aC05ZCIJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IGV4ZWN1dGlvbl9pZCA9ICdleGVjXzAwMSc7XHJcbiAgICAgIGR5bmFtb01vY2sub24oUHV0SXRlbUNvbW1hbmQpLnJlc29sdmVzKHt9KTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVFeGVjdXRpb25TdGF0dXMoZXhlY3V0aW9uX2lkLCAncGVuZGluZycsIDApO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQucHJvZ3Jlc3MpLnRvQmUoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn6YCy5o2X546H44GMMTAw44Gu5aC05ZCIJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IGV4ZWN1dGlvbl9pZCA9ICdleGVjXzAwMSc7XHJcbiAgICAgIGR5bmFtb01vY2sub24oUHV0SXRlbUNvbW1hbmQpLnJlc29sdmVzKHt9KTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVFeGVjdXRpb25TdGF0dXMoZXhlY3V0aW9uX2lkLCAnY29tcGxldGVkJywgMTAwKTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnByb2dyZXNzKS50b0JlKDEwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnY29sbGVjdGVkX2NvdW5044GoZmFpbGVkX2NvdW5044GMMOOBruWgtOWQiCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBjb25zdCBleGVjdXRpb25faWQgPSAnZXhlY18wMDEnO1xyXG4gICAgICBkeW5hbW9Nb2NrLm9uKFB1dEl0ZW1Db21tYW5kKS5yZXNvbHZlcyh7fSk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBkYXRlRXhlY3V0aW9uU3RhdHVzKGV4ZWN1dGlvbl9pZCwgJ3BlbmRpbmcnLCAwLCAwLCAwKTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LmNvbGxlY3RlZF9jb3VudCkudG9CZSgwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5mYWlsZWRfY291bnQpLnRvQmUoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnY29sbGVjdGVkX2NvdW5044GoZmFpbGVkX2NvdW5044GM5aSn44GN44GE5YCk44Gu5aC05ZCIJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IGV4ZWN1dGlvbl9pZCA9ICdleGVjXzAwMSc7XHJcbiAgICAgIGR5bmFtb01vY2sub24oUHV0SXRlbUNvbW1hbmQpLnJlc29sdmVzKHt9KTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVFeGVjdXRpb25TdGF0dXMoZXhlY3V0aW9uX2lkLCAnY29tcGxldGVkJywgMTAwLCAxMDAwLCA1MCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jb2xsZWN0ZWRfY291bnQpLnRvQmUoMTAwMCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZmFpbGVkX2NvdW50KS50b0JlKDUwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbmRlc2NyaWJlKCdnZXRFeGVjdXRpb25TdGF0dXMnLCAoKSA9PiB7XHJcbiAgY29uc3Qgb3JpZ2luYWxFbnYgPSBwcm9jZXNzLmVudi5EWU5BTU9EQl9FWEVDVVRJT05TX1RBQkxFO1xyXG5cclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xyXG4gICAgZHluYW1vTW9jay5yZXNldCgpO1xyXG4gICAgcHJvY2Vzcy5lbnYuRFlOQU1PREJfRVhFQ1VUSU9OU19UQUJMRSA9ICd0ZXN0LWV4ZWN1dGlvbnMtdGFibGUnO1xyXG4gIH0pO1xyXG5cclxuICBhZnRlckVhY2goKCkgPT4ge1xyXG4gICAgcHJvY2Vzcy5lbnYuRFlOQU1PREJfRVhFQ1VUSU9OU19UQUJMRSA9IG9yaWdpbmFsRW52O1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgn5q2j5bi457O7JywgKCkgPT4ge1xyXG4gICAgaXQoJ+Wun+ihjOeKtuaFi+OCkuWPluW+l+OBp+OBjeOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBjb25zdCBleGVjdXRpb25faWQgPSAnZXhlY18wMDEnO1xyXG4gICAgICBkeW5hbW9Nb2NrLm9uKEdldEl0ZW1Db21tYW5kKS5yZXNvbHZlcyh7XHJcbiAgICAgICAgSXRlbToge1xyXG4gICAgICAgICAgZXhlY3V0aW9uX2lkOiB7IFM6ICdleGVjXzAwMScgfSxcclxuICAgICAgICAgIHN0YXR1czogeyBTOiAncnVubmluZycgfSxcclxuICAgICAgICAgIHByb2dyZXNzOiB7IE46ICc1MCcgfSxcclxuICAgICAgICAgIGNvbGxlY3RlZF9jb3VudDogeyBOOiAnMjUnIH0sXHJcbiAgICAgICAgICBmYWlsZWRfY291bnQ6IHsgTjogJzAnIH0sXHJcbiAgICAgICAgICBzdGFydGVkX2F0OiB7IFM6ICcyMDI0LTAxLTE1VDEwOjMwOjAwWicgfSxcclxuICAgICAgICAgIHVwZGF0ZWRfYXQ6IHsgUzogJzIwMjQtMDEtMTVUMTA6MzU6MDBaJyB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEV4ZWN1dGlvblN0YXR1cyhleGVjdXRpb25faWQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvTWF0Y2hPYmplY3Qoe1xyXG4gICAgICAgIGV4ZWN1dGlvbl9pZDogJ2V4ZWNfMDAxJyxcclxuICAgICAgICBzdGF0dXM6ICdydW5uaW5nJyxcclxuICAgICAgICBwcm9ncmVzczogNTAsXHJcbiAgICAgICAgY29sbGVjdGVkX2NvdW50OiAyNSxcclxuICAgICAgICBmYWlsZWRfY291bnQ6IDAsXHJcbiAgICAgIH0pO1xyXG4gICAgICBleHBlY3QoZHluYW1vTW9jay5jYWxscygpKS50b0hhdmVMZW5ndGgoMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5a2Y5Zyo44GX44Gq44GE5a6f6KGMSUTjga7loLTlkIjjgIFudWxs44KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IGV4ZWN1dGlvbl9pZCA9ICdleGVjXzk5OSc7XHJcbiAgICAgIGR5bmFtb01vY2sub24oR2V0SXRlbUNvbW1hbmQpLnJlc29sdmVzKHt9KTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRFeGVjdXRpb25TdGF0dXMoZXhlY3V0aW9uX2lkKTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfnlbDluLjns7snLCAoKSA9PiB7XHJcbiAgICBpdCgnRHluYW1vRELjgqjjg6njg7zjgaflpLHmlZfjgZnjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgY29uc3QgZXhlY3V0aW9uX2lkID0gJ2V4ZWNfMDAxJztcclxuICAgICAgZHluYW1vTW9jay5vbihHZXRJdGVtQ29tbWFuZCkucmVqZWN0cyhuZXcgRXJyb3IoJ0R5bmFtb0RCIGVycm9yJykpO1xyXG5cclxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XHJcbiAgICAgIGF3YWl0IGV4cGVjdChnZXRFeGVjdXRpb25TdGF0dXMoZXhlY3V0aW9uX2lkKSkucmVqZWN0cy50b1Rocm93KCdEeW5hbW9EQiBlcnJvcicpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=