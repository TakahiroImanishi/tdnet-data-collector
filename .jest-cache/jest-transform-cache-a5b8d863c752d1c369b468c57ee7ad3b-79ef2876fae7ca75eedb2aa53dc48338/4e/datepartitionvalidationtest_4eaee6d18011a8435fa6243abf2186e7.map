{"file":"C:\\Users\\ti198\\investment_analysis_opopo\\src\\utils\\__tests__\\date-partition.validation.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\ti198\\investment_analysis_opopo\\src\\utils\\__tests__\\date-partition.validation.test.ts"],"sourcesContent":["/**\r\n * date_partition バリデーションのユニットテスト\r\n *\r\n * generateDatePartition関数のバリデーション機能をテストします。\r\n * 不正な入力に対して適切にValidationErrorをスローすることを確認します。\r\n *\r\n * Requirements: 要件6.1, 6.2（エラーハンドリング）\r\n * Task: 2.4 - date_partitionバリデーションのユニットテスト\r\n */\r\n\r\nimport { generateDatePartition, validateDisclosedAt } from '../date-partition';\r\nimport { ValidationError } from '../../errors';\r\n\r\ndescribe('date_partition validation', () => {\r\n  describe('validateDisclosedAt', () => {\r\n    describe('不正なフォーマット（ISO8601以外）', () => {\r\n      it('should throw ValidationError for non-ISO8601 format', () => {\r\n        const invalidFormats = [\r\n          '2024-01-15',\r\n          '2024/01/15 10:30:00',\r\n          '15-01-2024T10:30:00Z',\r\n          '2024-01-15 10:30:00',\r\n          '2024-01-15T10:30:00',\r\n          '2024-01-15T10:30',\r\n          'invalid-date',\r\n          '',\r\n          '2024-1-15T10:30:00Z',\r\n          '2024-01-1T10:30:00Z',\r\n        ];\r\n\r\n        invalidFormats.forEach((format) => {\r\n          expect(() => validateDisclosedAt(format)).toThrow(ValidationError);\r\n          expect(() => validateDisclosedAt(format)).toThrow(\r\n            /Invalid disclosed_at format.*Expected ISO 8601 format/\r\n          );\r\n        });\r\n      });\r\n\r\n      it('should throw ValidationError with details', () => {\r\n        try {\r\n          validateDisclosedAt('2024-01-15');\r\n          fail('Expected ValidationError to be thrown');\r\n        } catch (error) {\r\n          expect(error).toBeInstanceOf(ValidationError);\r\n          expect((error as ValidationError).details).toEqual({\r\n            disclosed_at: '2024-01-15',\r\n          });\r\n        }\r\n      });\r\n    });\r\n\r\n    describe('存在しない日付', () => {\r\n      it('should throw ValidationError for non-existent dates', () => {\r\n        const invalidDates = [\r\n          '2024-02-30T10:30:00Z',\r\n          '2024-02-31T10:30:00Z',\r\n          '2024-04-31T10:30:00Z',\r\n          '2024-06-31T10:30:00Z',\r\n          '2024-09-31T10:30:00Z',\r\n          '2024-11-31T10:30:00Z',\r\n          '2023-02-29T10:30:00Z',\r\n          '2024-13-01T10:30:00Z',\r\n          '2024-00-01T10:30:00Z',\r\n        ];\r\n\r\n        invalidDates.forEach((date) => {\r\n          expect(() => validateDisclosedAt(date)).toThrow(ValidationError);\r\n          expect(() => validateDisclosedAt(date)).toThrow(/Invalid date.*Date does not exist/);\r\n        });\r\n      });\r\n\r\n      it('should accept leap year February 29', () => {\r\n        expect(() => validateDisclosedAt('2024-02-29T10:30:00Z')).not.toThrow();\r\n      });\r\n\r\n      it('should reject non-leap year February 29', () => {\r\n        expect(() => validateDisclosedAt('2023-02-29T10:30:00Z')).toThrow(ValidationError);\r\n      });\r\n    });\r\n\r\n    describe('範囲外の日付', () => {\r\n      it('should throw ValidationError for dates before 1970-01-01', () => {\r\n        const oldDates = [\r\n          '1969-12-31T23:59:59Z',\r\n          '1969-01-01T00:00:00Z',\r\n          '1900-01-01T00:00:00Z',\r\n        ];\r\n\r\n        oldDates.forEach((date) => {\r\n          expect(() => validateDisclosedAt(date)).toThrow(ValidationError);\r\n          expect(() => validateDisclosedAt(date)).toThrow(/Date out of range.*Must be between/);\r\n        });\r\n      });\r\n\r\n      it('should accept 1970-01-01', () => {\r\n        expect(() => validateDisclosedAt('1970-01-01T00:00:00Z')).not.toThrow();\r\n      });\r\n\r\n      it('should throw ValidationError for dates after current time + 1 day', () => {\r\n        const futureDate = new Date(Date.now() + 2 * 24 * 60 * 60 * 1000);\r\n        const futureDateStr = futureDate.toISOString();\r\n\r\n        expect(() => validateDisclosedAt(futureDateStr)).toThrow(ValidationError);\r\n        expect(() => validateDisclosedAt(futureDateStr)).toThrow(\r\n          /Date out of range.*Must be between/\r\n        );\r\n      });\r\n\r\n      it('should accept current time', () => {\r\n        const now = new Date().toISOString();\r\n        expect(() => validateDisclosedAt(now)).not.toThrow();\r\n      });\r\n\r\n      it('should accept current time + 1 day', () => {\r\n        const tomorrow = new Date(Date.now() + 24 * 60 * 60 * 1000);\r\n        const tomorrowStr = tomorrow.toISOString();\r\n        expect(() => validateDisclosedAt(tomorrowStr)).not.toThrow();\r\n      });\r\n\r\n      it('should throw ValidationError with range details', () => {\r\n        try {\r\n          validateDisclosedAt('1969-12-31T23:59:59Z');\r\n          fail('Expected ValidationError to be thrown');\r\n        } catch (error) {\r\n          expect(error).toBeInstanceOf(ValidationError);\r\n          expect((error as ValidationError).details).toHaveProperty('disclosed_at');\r\n          expect((error as ValidationError).details).toHaveProperty('min_date');\r\n          expect((error as ValidationError).details).toHaveProperty('max_date');\r\n        }\r\n      });\r\n    });\r\n\r\n    describe('有効な日付', () => {\r\n      it('should accept valid ISO8601 dates with Z timezone', () => {\r\n        const validDates = [\r\n          '2024-01-15T10:30:00Z',\r\n          '2024-01-15T10:30:00.000Z',\r\n          '2024-12-31T23:59:59Z',\r\n          '2024-12-31T23:59:59.999Z',\r\n          '1970-01-01T00:00:00Z',\r\n        ];\r\n\r\n        validDates.forEach((date) => {\r\n          expect(() => validateDisclosedAt(date)).not.toThrow();\r\n        });\r\n      });\r\n\r\n      it('should accept valid ISO8601 dates with offset timezone', () => {\r\n        const validDates = [\r\n          '2024-01-15T10:30:00+09:00',\r\n          '2024-01-15T10:30:00-05:00',\r\n          '2024-01-15T10:30:00+00:00',\r\n        ];\r\n\r\n        validDates.forEach((date) => {\r\n          expect(() => validateDisclosedAt(date)).not.toThrow();\r\n        });\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('generateDatePartition', () => {\r\n    describe('不正な入力でValidationErrorをスロー', () => {\r\n      it('should throw ValidationError for invalid format', () => {\r\n        expect(() => generateDatePartition('2024-01-15')).toThrow(ValidationError);\r\n      });\r\n\r\n      it('should throw ValidationError for non-existent date', () => {\r\n        expect(() => generateDatePartition('2024-02-30T10:30:00Z')).toThrow(ValidationError);\r\n      });\r\n\r\n      it('should throw ValidationError for out-of-range date', () => {\r\n        expect(() => generateDatePartition('1969-12-31T23:59:59Z')).toThrow(ValidationError);\r\n      });\r\n    });\r\n\r\n    describe('有効な入力でdate_partitionを生成', () => {\r\n      it('should generate date_partition for valid dates', () => {\r\n        expect(generateDatePartition('2024-01-15T10:30:00Z')).toBe('2024-01');\r\n        expect(generateDatePartition('2024-12-31T23:59:59Z')).toBe('2025-01');\r\n        expect(generateDatePartition('1970-01-01T00:00:00Z')).toBe('1970-01');\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('エッジケース', () => {\r\n    describe('月またぎ（UTC → JST）', () => {\r\n      it('should handle month boundary correctly', () => {\r\n        // UTC: 2024-01-31T15:30:00Z → JST: 2024-02-01T00:30:00 → \"2024-02\"\r\n        expect(generateDatePartition('2024-01-31T15:30:00Z')).toBe('2024-02');\r\n        // UTC: 2024-02-01T14:59:59Z → JST: 2024-01-31T23:59:59 → \"2024-01\"\r\n        // Note: 14:59:59 UTC + 9 hours = 23:59:59 JST (same day in JST)\r\n        expect(generateDatePartition('2024-02-01T14:59:59Z')).toBe('2024-02');\r\n      });\r\n\r\n      it('should handle leap year February correctly', () => {\r\n        expect(generateDatePartition('2024-02-29T15:00:00Z')).toBe('2024-03');\r\n      });\r\n\r\n      it('should handle year boundary correctly', () => {\r\n        expect(generateDatePartition('2023-12-31T15:30:00Z')).toBe('2024-01');\r\n      });\r\n\r\n      it('should handle non-leap year February correctly', () => {\r\n        expect(generateDatePartition('2023-02-28T15:00:00Z')).toBe('2023-03');\r\n      });\r\n    });\r\n\r\n    describe('タイムゾーンオフセット', () => {\r\n      it('should handle JST timezone offset', () => {\r\n        expect(generateDatePartition('2024-01-31T15:30:00+09:00')).toBe('2024-01');\r\n      });\r\n\r\n      it('should handle negative timezone offset', () => {\r\n        expect(generateDatePartition('2024-01-31T15:30:00-05:00')).toBe('2024-02');\r\n      });\r\n    });\r\n  });\r\n});\r\n"],"version":3}