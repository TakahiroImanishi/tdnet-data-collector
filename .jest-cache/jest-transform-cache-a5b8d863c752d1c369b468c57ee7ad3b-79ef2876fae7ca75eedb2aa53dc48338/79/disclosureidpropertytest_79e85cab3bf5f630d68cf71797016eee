80493e228c90315233f0ea82614c5f13
"use strict";
/**
 * 開示ID生成のプロパティベーステスト
 *
 * Property 4: 開示IDの一意性
 * - 異なる入力は異なるIDを生成
 * - 同じ入力は同じIDを生成
 *
 * Requirements: 要件2.3（開示ID生成）
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const fc = __importStar(require("fast-check"));
const disclosure_id_1 = require("../disclosure-id");
const errors_1 = require("../../errors");
describe('generateDisclosureId - Property Tests', () => {
    describe('Property 4: 開示IDの一意性', () => {
        it('異なる入力は異なるIDを生成', () => {
            fc.assert(fc.property(fc.array(fc.record({
                disclosedAt: fc
                    .date({ min: new Date('2020-01-01'), max: new Date('2030-12-31') })
                    .map((d) => d.toISOString()),
                companyCode: fc.integer({ min: 1000, max: 9999 }).map(String),
                sequence: fc.integer({ min: 1, max: 999 }),
            }), { minLength: 2, maxLength: 100 }), (inputs) => {
                const ids = inputs.map((input) => (0, disclosure_id_1.generateDisclosureId)(input.disclosedAt, input.companyCode, input.sequence));
                // すべてのIDが一意であることを確認
                const uniqueIds = new Set(ids);
                expect(uniqueIds.size).toBe(ids.length);
            }), { numRuns: 100 });
        });
        it('同じ入力は同じIDを生成（冪等性）', () => {
            fc.assert(fc.property(fc.record({
                disclosedAt: fc
                    .date({ min: new Date('2020-01-01'), max: new Date('2030-12-31') })
                    .map((d) => d.toISOString()),
                companyCode: fc.integer({ min: 1000, max: 9999 }).map(String),
                sequence: fc.integer({ min: 1, max: 999 }),
            }), (input) => {
                const id1 = (0, disclosure_id_1.generateDisclosureId)(input.disclosedAt, input.companyCode, input.sequence);
                const id2 = (0, disclosure_id_1.generateDisclosureId)(input.disclosedAt, input.companyCode, input.sequence);
                expect(id1).toBe(id2);
            }), { numRuns: 100 });
        });
    });
    describe('Unit Tests', () => {
        it('正しいフォーマットでIDを生成', () => {
            const disclosedAt = '2024-01-15T10:30:00Z';
            const companyCode = '1234';
            const sequence = 1;
            const id = (0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, sequence);
            expect(id).toBe('20240115_1234_001');
        });
        it('連番を3桁にゼロパディング', () => {
            const disclosedAt = '2024-01-15T10:30:00Z';
            const companyCode = '1234';
            expect((0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, 1)).toBe('20240115_1234_001');
            expect((0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, 10)).toBe('20240115_1234_010');
            expect((0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, 100)).toBe('20240115_1234_100');
            expect((0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, 999)).toBe('20240115_1234_999');
        });
        it('異なる日付で異なるIDを生成', () => {
            const companyCode = '1234';
            const sequence = 1;
            const id1 = (0, disclosure_id_1.generateDisclosureId)('2024-01-15T10:30:00Z', companyCode, sequence);
            const id2 = (0, disclosure_id_1.generateDisclosureId)('2024-01-16T10:30:00Z', companyCode, sequence);
            expect(id1).not.toBe(id2);
            expect(id1).toBe('20240115_1234_001');
            expect(id2).toBe('20240116_1234_001');
        });
        it('異なる企業コードで異なるIDを生成', () => {
            const disclosedAt = '2024-01-15T10:30:00Z';
            const sequence = 1;
            const id1 = (0, disclosure_id_1.generateDisclosureId)(disclosedAt, '1234', sequence);
            const id2 = (0, disclosure_id_1.generateDisclosureId)(disclosedAt, '5678', sequence);
            expect(id1).not.toBe(id2);
            expect(id1).toBe('20240115_1234_001');
            expect(id2).toBe('20240115_5678_001');
        });
        it('異なる連番で異なるIDを生成', () => {
            const disclosedAt = '2024-01-15T10:30:00Z';
            const companyCode = '1234';
            const id1 = (0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, 1);
            const id2 = (0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, 2);
            expect(id1).not.toBe(id2);
            expect(id1).toBe('20240115_1234_001');
            expect(id2).toBe('20240115_1234_002');
        });
    });
    describe('Validation Tests', () => {
        it('不正な日付フォーマットでエラー', () => {
            expect(() => (0, disclosure_id_1.generateDisclosureId)('invalid', '1234', 1)).toThrow(errors_1.ValidationError);
            expect(() => (0, disclosure_id_1.generateDisclosureId)('2024/01/15', '1234', 1)).toThrow(errors_1.ValidationError);
            expect(() => (0, disclosure_id_1.generateDisclosureId)('', '1234', 1)).toThrow(errors_1.ValidationError);
        });
        it('不正な企業コードでエラー', () => {
            const disclosedAt = '2024-01-15T10:30:00Z';
            expect(() => (0, disclosure_id_1.generateDisclosureId)(disclosedAt, '123', 1)).toThrow(errors_1.ValidationError); // 3桁
            expect(() => (0, disclosure_id_1.generateDisclosureId)(disclosedAt, '12345', 1)).toThrow(errors_1.ValidationError); // 5桁
            expect(() => (0, disclosure_id_1.generateDisclosureId)(disclosedAt, 'ABCD', 1)).toThrow(errors_1.ValidationError); // 非数字
            expect(() => (0, disclosure_id_1.generateDisclosureId)(disclosedAt, '', 1)).toThrow(errors_1.ValidationError); // 空文字
        });
        it('不正な連番でエラー', () => {
            const disclosedAt = '2024-01-15T10:30:00Z';
            const companyCode = '1234';
            expect(() => (0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, 0)).toThrow(errors_1.ValidationError); // 0
            expect(() => (0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, -1)).toThrow(errors_1.ValidationError); // 負数
            expect(() => (0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, 1000)).toThrow(errors_1.ValidationError); // 1000以上
        });
    });
    describe('Edge Cases', () => {
        it('月またぎの日付を正しく処理', () => {
            // UTC: 2024-01-31 23:59:59 → JST: 2024-02-01 08:59:59 (翌日)
            const id1 = (0, disclosure_id_1.generateDisclosureId)('2024-01-31T23:59:59Z', '1234', 1);
            // UTC: 2024-02-01 00:00:00 → JST: 2024-02-01 09:00:00 (同日)
            const id2 = (0, disclosure_id_1.generateDisclosureId)('2024-02-01T00:00:00Z', '1234', 1);
            // JST基準で日付を抽出するため、両方とも2024-02-01になる
            expect(id1).toBe('20240201_1234_001');
            expect(id2).toBe('20240201_1234_001');
        });
        it('年またぎの日付を正しく処理', () => {
            // UTC: 2023-12-31 23:59:59 → JST: 2024-01-01 08:59:59 (翌年)
            const id1 = (0, disclosure_id_1.generateDisclosureId)('2023-12-31T23:59:59Z', '1234', 1);
            // UTC: 2024-01-01 00:00:00 → JST: 2024-01-01 09:00:00 (同日)
            const id2 = (0, disclosure_id_1.generateDisclosureId)('2024-01-01T00:00:00Z', '1234', 1);
            // JST基準で日付を抽出するため、両方とも2024-01-01になる
            expect(id1).toBe('20240101_1234_001');
            expect(id2).toBe('20240101_1234_001');
        });
        it('うるう年の日付を正しく処理', () => {
            const id = (0, disclosure_id_1.generateDisclosureId)('2024-02-29T12:00:00Z', '1234', 1);
            expect(id).toBe('20240229_1234_001');
        });
        it('タイムゾーン付き日付を正しく処理', () => {
            const id1 = (0, disclosure_id_1.generateDisclosureId)('2024-01-15T10:30:00Z', '1234', 1);
            const id2 = (0, disclosure_id_1.generateDisclosureId)('2024-01-15T10:30:00+09:00', '1234', 1);
            // JST基準で日付を抽出
            // UTC 2024-01-15T10:30:00Z → JST 2024-01-15T19:30:00+09:00 → 20240115
            // JST 2024-01-15T10:30:00+09:00 → UTC 2024-01-15T01:30:00Z → JST 2024-01-15T10:30:00+09:00 → 20240115
            expect(id1).toBe('20240115_1234_001');
            expect(id2).toBe('20240115_1234_001');
        });
        it('月またぎのエッジケース（UTC深夜→JST翌日）を正しく処理', () => {
            // UTC: 2024-01-31T15:30:00Z → JST: 2024-02-01T00:30:00+09:00
            // UTCでは1月31日だが、JSTでは2月1日になる
            const id = (0, disclosure_id_1.generateDisclosureId)('2024-01-31T15:30:00Z', '1234', 1);
            expect(id).toBe('20240201_1234_001'); // JST基準で2月1日
        });
        it('年またぎのエッジケース（UTC深夜→JST翌年）を正しく処理', () => {
            // UTC: 2023-12-31T15:30:00Z → JST: 2024-01-01T00:30:00+09:00
            // UTCでは2023年12月31日だが、JSTでは2024年1月1日になる
            const id = (0, disclosure_id_1.generateDisclosureId)('2023-12-31T15:30:00Z', '1234', 1);
            expect(id).toBe('20240101_1234_001'); // JST基準で2024年1月1日
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFx1dGlsc1xcX190ZXN0c19fXFxkaXNjbG9zdXJlLWlkLnByb3BlcnR5LnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7OztHQVFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVILCtDQUFpQztBQUNqQyxvREFBd0Q7QUFDeEQseUNBQStDO0FBRS9DLFFBQVEsQ0FBQyx1Q0FBdUMsRUFBRSxHQUFHLEVBQUU7SUFDckQsUUFBUSxDQUFDLHNCQUFzQixFQUFFLEdBQUcsRUFBRTtRQUNwQyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1lBQ3hCLEVBQUUsQ0FBQyxNQUFNLENBQ1AsRUFBRSxDQUFDLFFBQVEsQ0FDVCxFQUFFLENBQUMsS0FBSyxDQUNOLEVBQUUsQ0FBQyxNQUFNLENBQUM7Z0JBQ1IsV0FBVyxFQUFFLEVBQUU7cUJBQ1osSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLEdBQUcsRUFBRSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDO3FCQUNsRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDOUIsV0FBVyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUM7Z0JBQzdELFFBQVEsRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7YUFDM0MsQ0FBQyxFQUNGLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLENBQ2pDLEVBQ0QsQ0FBQyxNQUFNLEVBQUUsRUFBRTtnQkFD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O1FBQ3hDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGdDQUFnQyxFQUFFLEdBQUcsRUFBRTtZQUN4Qyw2REFBNkQ7WUFDN0QsNEJBQTRCO1lBQzVCLE1BQU0sRUFBRSxHQUFHLElBQUEsb0NBQW9CLEVBQUMsc0JBQXNCLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ25FLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLGFBQWE7UUFDckQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsZ0NBQWdDLEVBQUUsR0FBRyxFQUFFO1lBQ3hDLDZEQUE2RDtZQUM3RCx1Q0FBdUM7WUFDdkMsTUFBTSxFQUFFLEdBQUcsSUFBQSxvQ0FBb0IsRUFBQyxzQkFBc0IsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDbkUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsa0JBQWtCO1FBQzFELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXHRpMTk4XFxpbnZlc3RtZW50X2FuYWx5c2lzX29wb3BvXFxzcmNcXHV0aWxzXFxfX3Rlc3RzX19cXGRpc2Nsb3N1cmUtaWQucHJvcGVydHkudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog6ZaL56S6SUTnlJ/miJDjga7jg5fjg63jg5Hjg4bjgqPjg5njg7zjgrnjg4bjgrnjg4hcclxuICpcclxuICogUHJvcGVydHkgNDog6ZaL56S6SUTjga7kuIDmhI/mgKdcclxuICogLSDnlbDjgarjgovlhaXlipvjga/nlbDjgarjgotJROOCkueUn+aIkFxyXG4gKiAtIOWQjOOBmOWFpeWKm+OBr+WQjOOBmElE44KS55Sf5oiQXHJcbiAqXHJcbiAqIFJlcXVpcmVtZW50czog6KaB5Lu2Mi4z77yI6ZaL56S6SUTnlJ/miJDvvIlcclxuICovXHJcblxyXG5pbXBvcnQgKiBhcyBmYyBmcm9tICdmYXN0LWNoZWNrJztcclxuaW1wb3J0IHsgZ2VuZXJhdGVEaXNjbG9zdXJlSWQgfSBmcm9tICcuLi9kaXNjbG9zdXJlLWlkJztcclxuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAnLi4vLi4vZXJyb3JzJztcclxuXHJcbmRlc2NyaWJlKCdnZW5lcmF0ZURpc2Nsb3N1cmVJZCAtIFByb3BlcnR5IFRlc3RzJywgKCkgPT4ge1xyXG4gIGRlc2NyaWJlKCdQcm9wZXJ0eSA0OiDplovnpLpJROOBruS4gOaEj+aApycsICgpID0+IHtcclxuICAgIGl0KCfnlbDjgarjgovlhaXlipvjga/nlbDjgarjgotJROOCkueUn+aIkCcsICgpID0+IHtcclxuICAgICAgZmMuYXNzZXJ0KFxyXG4gICAgICAgIGZjLnByb3BlcnR5KFxyXG4gICAgICAgICAgZmMuYXJyYXkoXHJcbiAgICAgICAgICAgIGZjLnJlY29yZCh7XHJcbiAgICAgICAgICAgICAgZGlzY2xvc2VkQXQ6IGZjXHJcbiAgICAgICAgICAgICAgICAuZGF0ZSh7IG1pbjogbmV3IERhdGUoJzIwMjAtMDEtMDEnKSwgbWF4OiBuZXcgRGF0ZSgnMjAzMC0xMi0zMScpIH0pXHJcbiAgICAgICAgICAgICAgICAubWFwKChkKSA9PiBkLnRvSVNPU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgIGNvbXBhbnlDb2RlOiBmYy5pbnRlZ2VyKHsgbWluOiAxMDAwLCBtYXg6IDk5OTkgfSkubWFwKFN0cmluZyksXHJcbiAgICAgICAgICAgICAgc2VxdWVuY2U6IGZjLmludGVnZXIoeyBtaW46IDEsIG1heDogOTk5IH0pLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgeyBtaW5MZW5ndGg6IDIsIG1heExlbmd0aDogMTAwIH1cclxuICAgICAgICAgICksXHJcbiAgICAgICAgICAoaW5wdXRzKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkcyA9IGlucHV0cy5tYXAoKGlucHV0KSA9PlxyXG4gICAgICAgICAgICAgIGdlbmVyYXRlRGlzY2xvc3VyZUlkKGlucHV0LmRpc2Nsb3NlZEF0LCBpbnB1dC5jb21wYW55Q29kZSwgaW5wdXQuc2VxdWVuY2UpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAvLyDjgZnjgbnjgabjga5JROOBjOS4gOaEj+OBp+OBguOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICAgICAgICBjb25zdCB1bmlxdWVJZHMgPSBuZXcgU2V0KGlkcyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh1bmlxdWVJZHMuc2l6ZSkudG9CZShpZHMubGVuZ3RoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICApLFxyXG4gICAgICAgIHsgbnVtUnVuczogMTAwIH1cclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCflkIzjgZjlhaXlipvjga/lkIzjgZhJROOCkueUn+aIkO+8iOWGquetieaAp++8iScsICgpID0+IHtcclxuICAgICAgZmMuYXNzZXJ0KFxyXG4gICAgICAgIGZjLnByb3BlcnR5KFxyXG4gICAgICAgICAgZmMucmVjb3JkKHtcclxuICAgICAgICAgICAgZGlzY2xvc2VkQXQ6IGZjXHJcbiAgICAgICAgICAgICAgLmRhdGUoeyBtaW46IG5ldyBEYXRlKCcyMDIwLTAxLTAxJyksIG1heDogbmV3IERhdGUoJzIwMzAtMTItMzEnKSB9KVxyXG4gICAgICAgICAgICAgIC5tYXAoKGQpID0+IGQudG9JU09TdHJpbmcoKSksXHJcbiAgICAgICAgICAgIGNvbXBhbnlDb2RlOiBmYy5pbnRlZ2VyKHsgbWluOiAxMDAwLCBtYXg6IDk5OTkgfSkubWFwKFN0cmluZyksXHJcbiAgICAgICAgICAgIHNlcXVlbmNlOiBmYy5pbnRlZ2VyKHsgbWluOiAxLCBtYXg6IDk5OSB9KSxcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkMSA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKGlucHV0LmRpc2Nsb3NlZEF0LCBpbnB1dC5jb21wYW55Q29kZSwgaW5wdXQuc2VxdWVuY2UpO1xyXG4gICAgICAgICAgICBjb25zdCBpZDIgPSBnZW5lcmF0ZURpc2Nsb3N1cmVJZChpbnB1dC5kaXNjbG9zZWRBdCwgaW5wdXQuY29tcGFueUNvZGUsIGlucHV0LnNlcXVlbmNlKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChpZDEpLnRvQmUoaWQyKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICApLFxyXG4gICAgICAgIHsgbnVtUnVuczogMTAwIH1cclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnVW5pdCBUZXN0cycsICgpID0+IHtcclxuICAgIGl0KCfmraPjgZfjgYTjg5Xjgqnjg7zjg57jg4Pjg4jjgadJROOCkueUn+aIkCcsICgpID0+IHtcclxuICAgICAgY29uc3QgZGlzY2xvc2VkQXQgPSAnMjAyNC0wMS0xNVQxMDozMDowMFonO1xyXG4gICAgICBjb25zdCBjb21wYW55Q29kZSA9ICcxMjM0JztcclxuICAgICAgY29uc3Qgc2VxdWVuY2UgPSAxO1xyXG5cclxuICAgICAgY29uc3QgaWQgPSBnZW5lcmF0ZURpc2Nsb3N1cmVJZChkaXNjbG9zZWRBdCwgY29tcGFueUNvZGUsIHNlcXVlbmNlKTtcclxuXHJcbiAgICAgIGV4cGVjdChpZCkudG9CZSgnMjAyNDAxMTVfMTIzNF8wMDEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfpgKPnlarjgpIz5qGB44Gr44K844Ot44OR44OH44Kj44Oz44KwJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkaXNjbG9zZWRBdCA9ICcyMDI0LTAxLTE1VDEwOjMwOjAwWic7XHJcbiAgICAgIGNvbnN0IGNvbXBhbnlDb2RlID0gJzEyMzQnO1xyXG5cclxuICAgICAgZXhwZWN0KGdlbmVyYXRlRGlzY2xvc3VyZUlkKGRpc2Nsb3NlZEF0LCBjb21wYW55Q29kZSwgMSkpLnRvQmUoJzIwMjQwMTE1XzEyMzRfMDAxJyk7XHJcbiAgICAgIGV4cGVjdChnZW5lcmF0ZURpc2Nsb3N1cmVJZChkaXNjbG9zZWRBdCwgY29tcGFueUNvZGUsIDEwKSkudG9CZSgnMjAyNDAxMTVfMTIzNF8wMTAnKTtcclxuICAgICAgZXhwZWN0KGdlbmVyYXRlRGlzY2xvc3VyZUlkKGRpc2Nsb3NlZEF0LCBjb21wYW55Q29kZSwgMTAwKSkudG9CZSgnMjAyNDAxMTVfMTIzNF8xMDAnKTtcclxuICAgICAgZXhwZWN0KGdlbmVyYXRlRGlzY2xvc3VyZUlkKGRpc2Nsb3NlZEF0LCBjb21wYW55Q29kZSwgOTk5KSkudG9CZSgnMjAyNDAxMTVfMTIzNF85OTknKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfnlbDjgarjgovml6Xku5jjgafnlbDjgarjgotJROOCkueUn+aIkCcsICgpID0+IHtcclxuICAgICAgY29uc3QgY29tcGFueUNvZGUgPSAnMTIzNCc7XHJcbiAgICAgIGNvbnN0IHNlcXVlbmNlID0gMTtcclxuXHJcbiAgICAgIGNvbnN0IGlkMSA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcyMDI0LTAxLTE1VDEwOjMwOjAwWicsIGNvbXBhbnlDb2RlLCBzZXF1ZW5jZSk7XHJcbiAgICAgIGNvbnN0IGlkMiA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcyMDI0LTAxLTE2VDEwOjMwOjAwWicsIGNvbXBhbnlDb2RlLCBzZXF1ZW5jZSk7XHJcblxyXG4gICAgICBleHBlY3QoaWQxKS5ub3QudG9CZShpZDIpO1xyXG4gICAgICBleHBlY3QoaWQxKS50b0JlKCcyMDI0MDExNV8xMjM0XzAwMScpO1xyXG4gICAgICBleHBlY3QoaWQyKS50b0JlKCcyMDI0MDExNl8xMjM0XzAwMScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+eVsOOBquOCi+S8gealreOCs+ODvOODieOBp+eVsOOBquOCi0lE44KS55Sf5oiQJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkaXNjbG9zZWRBdCA9ICcyMDI0LTAxLTE1VDEwOjMwOjAwWic7XHJcbiAgICAgIGNvbnN0IHNlcXVlbmNlID0gMTtcclxuXHJcbiAgICAgIGNvbnN0IGlkMSA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKGRpc2Nsb3NlZEF0LCAnMTIzNCcsIHNlcXVlbmNlKTtcclxuICAgICAgY29uc3QgaWQyID0gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoZGlzY2xvc2VkQXQsICc1Njc4Jywgc2VxdWVuY2UpO1xyXG5cclxuICAgICAgZXhwZWN0KGlkMSkubm90LnRvQmUoaWQyKTtcclxuICAgICAgZXhwZWN0KGlkMSkudG9CZSgnMjAyNDAxMTVfMTIzNF8wMDEnKTtcclxuICAgICAgZXhwZWN0KGlkMikudG9CZSgnMjAyNDAxMTVfNTY3OF8wMDEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfnlbDjgarjgovpgKPnlarjgafnlbDjgarjgotJROOCkueUn+aIkCcsICgpID0+IHtcclxuICAgICAgY29uc3QgZGlzY2xvc2VkQXQgPSAnMjAyNC0wMS0xNVQxMDozMDowMFonO1xyXG4gICAgICBjb25zdCBjb21wYW55Q29kZSA9ICcxMjM0JztcclxuXHJcbiAgICAgIGNvbnN0IGlkMSA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKGRpc2Nsb3NlZEF0LCBjb21wYW55Q29kZSwgMSk7XHJcbiAgICAgIGNvbnN0IGlkMiA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKGRpc2Nsb3NlZEF0LCBjb21wYW55Q29kZSwgMik7XHJcblxyXG4gICAgICBleHBlY3QoaWQxKS5ub3QudG9CZShpZDIpO1xyXG4gICAgICBleHBlY3QoaWQxKS50b0JlKCcyMDI0MDExNV8xMjM0XzAwMScpO1xyXG4gICAgICBleHBlY3QoaWQyKS50b0JlKCcyMDI0MDExNV8xMjM0XzAwMicpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdWYWxpZGF0aW9uIFRlc3RzJywgKCkgPT4ge1xyXG4gICAgaXQoJ+S4jeato+OBquaXpeS7mOODleOCqeODvOODnuODg+ODiOOBp+OCqOODqeODvCcsICgpID0+IHtcclxuICAgICAgZXhwZWN0KCgpID0+IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCdpbnZhbGlkJywgJzEyMzQnLCAxKSkudG9UaHJvdyhWYWxpZGF0aW9uRXJyb3IpO1xyXG4gICAgICBleHBlY3QoKCkgPT4gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoJzIwMjQvMDEvMTUnLCAnMTIzNCcsIDEpKS50b1Rocm93KFZhbGlkYXRpb25FcnJvcik7XHJcbiAgICAgIGV4cGVjdCgoKSA9PiBnZW5lcmF0ZURpc2Nsb3N1cmVJZCgnJywgJzEyMzQnLCAxKSkudG9UaHJvdyhWYWxpZGF0aW9uRXJyb3IpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+S4jeato+OBquS8gealreOCs+ODvOODieOBp+OCqOODqeODvCcsICgpID0+IHtcclxuICAgICAgY29uc3QgZGlzY2xvc2VkQXQgPSAnMjAyNC0wMS0xNVQxMDozMDowMFonO1xyXG5cclxuICAgICAgZXhwZWN0KCgpID0+IGdlbmVyYXRlRGlzY2xvc3VyZUlkKGRpc2Nsb3NlZEF0LCAnMTIzJywgMSkpLnRvVGhyb3coVmFsaWRhdGlvbkVycm9yKTsgLy8gM+ahgVxyXG4gICAgICBleHBlY3QoKCkgPT4gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoZGlzY2xvc2VkQXQsICcxMjM0NScsIDEpKS50b1Rocm93KFZhbGlkYXRpb25FcnJvcik7IC8vIDXmoYFcclxuICAgICAgZXhwZWN0KCgpID0+IGdlbmVyYXRlRGlzY2xvc3VyZUlkKGRpc2Nsb3NlZEF0LCAnQUJDRCcsIDEpKS50b1Rocm93KFZhbGlkYXRpb25FcnJvcik7IC8vIOmdnuaVsOWtl1xyXG4gICAgICBleHBlY3QoKCkgPT4gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoZGlzY2xvc2VkQXQsICcnLCAxKSkudG9UaHJvdyhWYWxpZGF0aW9uRXJyb3IpOyAvLyDnqbrmloflrZdcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfkuI3mraPjgarpgKPnlarjgafjgqjjg6njg7wnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRpc2Nsb3NlZEF0ID0gJzIwMjQtMDEtMTVUMTA6MzA6MDBaJztcclxuICAgICAgY29uc3QgY29tcGFueUNvZGUgPSAnMTIzNCc7XHJcblxyXG4gICAgICBleHBlY3QoKCkgPT4gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoZGlzY2xvc2VkQXQsIGNvbXBhbnlDb2RlLCAwKSkudG9UaHJvdyhWYWxpZGF0aW9uRXJyb3IpOyAvLyAwXHJcbiAgICAgIGV4cGVjdCgoKSA9PiBnZW5lcmF0ZURpc2Nsb3N1cmVJZChkaXNjbG9zZWRBdCwgY29tcGFueUNvZGUsIC0xKSkudG9UaHJvdyhWYWxpZGF0aW9uRXJyb3IpOyAvLyDosqDmlbBcclxuICAgICAgZXhwZWN0KCgpID0+IGdlbmVyYXRlRGlzY2xvc3VyZUlkKGRpc2Nsb3NlZEF0LCBjb21wYW55Q29kZSwgMTAwMCkpLnRvVGhyb3coVmFsaWRhdGlvbkVycm9yKTsgLy8gMTAwMOS7peS4ilxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdFZGdlIENhc2VzJywgKCkgPT4ge1xyXG4gICAgaXQoJ+aciOOBvuOBn+OBjuOBruaXpeS7mOOCkuato+OBl+OBj+WHpueQhicsICgpID0+IHtcclxuICAgICAgLy8gVVRDOiAyMDI0LTAxLTMxIDIzOjU5OjU5IOKGkiBKU1Q6IDIwMjQtMDItMDEgMDg6NTk6NTkgKOe/jOaXpSlcclxuICAgICAgY29uc3QgaWQxID0gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoJzIwMjQtMDEtMzFUMjM6NTk6NTlaJywgJzEyMzQnLCAxKTtcclxuICAgICAgLy8gVVRDOiAyMDI0LTAyLTAxIDAwOjAwOjAwIOKGkiBKU1Q6IDIwMjQtMDItMDEgMDk6MDA6MDAgKOWQjOaXpSlcclxuICAgICAgY29uc3QgaWQyID0gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoJzIwMjQtMDItMDFUMDA6MDA6MDBaJywgJzEyMzQnLCAxKTtcclxuXHJcbiAgICAgIC8vIEpTVOWfuua6luOBp+aXpeS7mOOCkuaKveWHuuOBmeOCi+OBn+OCgeOAgeS4oeaWueOBqOOCgjIwMjQtMDItMDHjgavjgarjgotcclxuICAgICAgZXhwZWN0KGlkMSkudG9CZSgnMjAyNDAyMDFfMTIzNF8wMDEnKTtcclxuICAgICAgZXhwZWN0KGlkMikudG9CZSgnMjAyNDAyMDFfMTIzNF8wMDEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCflubTjgb7jgZ/jgY7jga7ml6Xku5jjgpLmraPjgZfjgY/lh6bnkIYnLCAoKSA9PiB7XHJcbiAgICAgIC8vIFVUQzogMjAyMy0xMi0zMSAyMzo1OTo1OSDihpIgSlNUOiAyMDI0LTAxLTAxIDA4OjU5OjU5ICjnv4zlubQpXHJcbiAgICAgIGNvbnN0IGlkMSA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcyMDIzLTEyLTMxVDIzOjU5OjU5WicsICcxMjM0JywgMSk7XHJcbiAgICAgIC8vIFVUQzogMjAyNC0wMS0wMSAwMDowMDowMCDihpIgSlNUOiAyMDI0LTAxLTAxIDA5OjAwOjAwICjlkIzml6UpXHJcbiAgICAgIGNvbnN0IGlkMiA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcyMDI0LTAxLTAxVDAwOjAwOjAwWicsICcxMjM0JywgMSk7XHJcblxyXG4gICAgICAvLyBKU1Tln7rmupbjgafml6Xku5jjgpLmir3lh7rjgZnjgovjgZ/jgoHjgIHkuKHmlrnjgajjgoIyMDI0LTAxLTAx44Gr44Gq44KLXHJcbiAgICAgIGV4cGVjdChpZDEpLnRvQmUoJzIwMjQwMTAxXzEyMzRfMDAxJyk7XHJcbiAgICAgIGV4cGVjdChpZDIpLnRvQmUoJzIwMjQwMTAxXzEyMzRfMDAxJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn44GG44KL44GG5bm044Gu5pel5LuY44KS5q2j44GX44GP5Yem55CGJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpZCA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcyMDI0LTAyLTI5VDEyOjAwOjAwWicsICcxMjM0JywgMSk7XHJcbiAgICAgIGV4cGVjdChpZCkudG9CZSgnMjAyNDAyMjlfMTIzNF8wMDEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfjgr/jgqTjg6Djgr7jg7zjg7Pku5jjgY3ml6Xku5jjgpLmraPjgZfjgY/lh6bnkIYnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGlkMSA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcyMDI0LTAxLTE1VDEwOjMwOjAwWicsICcxMjM0JywgMSk7XHJcbiAgICAgIGNvbnN0IGlkMiA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcyMDI0LTAxLTE1VDEwOjMwOjAwKzA5OjAwJywgJzEyMzQnLCAxKTtcclxuXHJcbiAgICAgIC8vIEpTVOWfuua6luOBp+aXpeS7mOOCkuaKveWHulxyXG4gICAgICAvLyBVVEMgMjAyNC0wMS0xNVQxMDozMDowMFog4oaSIEpTVCAyMDI0LTAxLTE1VDE5OjMwOjAwKzA5OjAwIOKGkiAyMDI0MDExNVxyXG4gICAgICAvLyBKU1QgMjAyNC0wMS0xNVQxMDozMDowMCswOTowMCDihpIgVVRDIDIwMjQtMDEtMTVUMDE6MzA6MDBaIOKGkiBKU1QgMjAyNC0wMS0xNVQxMDozMDowMCswOTowMCDihpIgMjAyNDAxMTVcclxuICAgICAgZXhwZWN0KGlkMSkudG9CZSgnMjAyNDAxMTVfMTIzNF8wMDEnKTtcclxuICAgICAgZXhwZWN0KGlkMikudG9CZSgnMjAyNDAxMTVfMTIzNF8wMDEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfmnIjjgb7jgZ/jgY7jga7jgqjjg4PjgrjjgrHjg7zjgrnvvIhVVEPmt7HlpJzihpJKU1Tnv4zml6XvvInjgpLmraPjgZfjgY/lh6bnkIYnLCAoKSA9PiB7XHJcbiAgICAgIC8vIFVUQzogMjAyNC0wMS0zMVQxNTozMDowMFog4oaSIEpTVDogMjAyNC0wMi0wMVQwMDozMDowMCswOTowMFxyXG4gICAgICAvLyBVVEPjgafjga8x5pyIMzHml6XjgaDjgYzjgIFKU1Tjgafjga8y5pyIMeaXpeOBq+OBquOCi1xyXG4gICAgICBjb25zdCBpZCA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcyMDI0LTAxLTMxVDE1OjMwOjAwWicsICcxMjM0JywgMSk7XHJcbiAgICAgIGV4cGVjdChpZCkudG9CZSgnMjAyNDAyMDFfMTIzNF8wMDEnKTsgLy8gSlNU5Z+65rqW44GnMuaciDHml6VcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCflubTjgb7jgZ/jgY7jga7jgqjjg4PjgrjjgrHjg7zjgrnvvIhVVEPmt7HlpJzihpJKU1Tnv4zlubTvvInjgpLmraPjgZfjgY/lh6bnkIYnLCAoKSA9PiB7XHJcbiAgICAgIC8vIFVUQzogMjAyMy0xMi0zMVQxNTozMDowMFog4oaSIEpTVDogMjAyNC0wMS0wMVQwMDozMDowMCswOTowMFxyXG4gICAgICAvLyBVVEPjgafjga8yMDIz5bm0MTLmnIgzMeaXpeOBoOOBjOOAgUpTVOOBp+OBrzIwMjTlubQx5pyIMeaXpeOBq+OBquOCi1xyXG4gICAgICBjb25zdCBpZCA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcyMDIzLTEyLTMxVDE1OjMwOjAwWicsICcxMjM0JywgMSk7XHJcbiAgICAgIGV4cGVjdChpZCkudG9CZSgnMjAyNDAxMDFfMTIzNF8wMDEnKTsgLy8gSlNU5Z+65rqW44GnMjAyNOW5tDHmnIgx5pelXHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJ2ZXJzaW9uIjozfQ==