64eebb6fd59c541f655f0a06a8c7836f
"use strict";
/**
 * Environment Parameterization Test
 *
 * Task 15.15-A: CDKスタックの環境パラメータ化テスト
 * Requirements: 要件8.1（設定管理）
 *
 * このテストは、CDKスタックが環境（dev/prod）ごとに正しくパラメータ化されていることを検証します。
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const cdk = __importStar(require("aws-cdk-lib"));
const assertions_1 = require("aws-cdk-lib/assertions");
const tdnet_data_collector_stack_1 = require("../lib/tdnet-data-collector-stack");
describe('Environment Parameterization', () => {
    const testAccount = '123456789012';
    const testRegion = 'ap-northeast-1';
    describe('Development Environment', () => {
        let template;
        beforeAll(() => {
            const app = new cdk.App();
            const stack = new tdnet_data_collector_stack_1.TdnetDataCollectorStack(app, 'TestStack-dev', {
                env: {
                    account: testAccount,
                    region: testRegion
                },
                environmentConfig: { environment: 'dev' },
            });
            template = assertions_1.Template.fromStack(stack);
        });
        describe('DynamoDB Tables', () => {
            it('should have environment suffix in table names', () => {
                template.hasResourceProperties('AWS::DynamoDB::Table', {
                    TableName: 'tdnet_disclosures_dev',
                });
                template.hasResourceProperties('AWS::DynamoDB::Table', {
                    TableName: 'tdnet_executions_dev',
                });
                template.hasResourceProperties('AWS::DynamoDB::Table', {
                    TableName: 'tdnet_export_status_dev',
                });
            });
        });
        describe('S3 Buckets', () => {
            it('should have environment suffix in bucket names', () => {
                template.hasResourceProperties('AWS::S3::Bucket', {
                    BucketName: `tdnet-data-collector-pdfs-dev-${testAccount}`,
                });
                template.hasResourceProperties('AWS::S3::Bucket', {
                    BucketName: `tdnet-data-collector-exports-dev-${testAccount}`,
                });
                template.hasResourceProperties('AWS::S3::Bucket', {
                    BucketName: `tdnet-dashboard-dev-${testAccount}`,
                });
                template.hasResourceProperties('AWS::S3::Bucket', {
                    BucketName: `tdnet-cloudtrail-logs-dev-${testAccount}`,
                });
            });
        });
        describe('Lambda Functions', () => {
            it('should have environment suffix in function names', () => {
                template.hasResourceProperties('AWS::Lambda::Function', {
                    FunctionName: 'tdnet-collector-dev',
                });
                template.hasResourceProperties('AWS::Lambda::Function', {
                    FunctionName: 'tdnet-query-dev',
                });
                template.hasResourceProperties('AWS::Lambda::Function', {
                    FunctionName: 'tdnet-export-dev',
                });
                template.hasResourceProperties('AWS::Lambda::Function', {
                    FunctionName: 'tdnet-collect-dev',
                });
                template.hasResourceProperties('AWS::Lambda::Function', {
                    FunctionName: 'tdnet-collect-status-dev',
                });
            });
        });
        describe('API Gateway', () => {
            it('should have environment suffix in API name', () => {
                template.hasResourceProperties('AWS::ApiGateway::RestApi', {
                    Name: 'tdnet-data-collector-api-dev',
                });
            });
            it('should have environment suffix in API key name', () => {
                template.hasResourceProperties('AWS::ApiGateway::ApiKey', {
                    Name: 'tdnet-api-key-dev',
                });
            });
            it('should have environment suffix in usage plan name', () => {
                template.hasResourceProperties('AWS::ApiGateway::UsagePlan', {
                    UsagePlanName: 'tdnet-usage-plan-dev',
                });
            });
        });
        describe('WAF', () => {
            it('should have environment suffix in Web ACL name', () => {
                template.hasResourceProperties('AWS::WAFv2::WebACL', {
                    Name: 'tdnet-web-acl-dev',
                });
            });
        });
    });
    describe('Production Environment', () => {
        let template;
        beforeAll(() => {
            const app = new cdk.App();
            const stack = new tdnet_data_collector_stack_1.TdnetDataCollectorStack(app, 'TestStack-prod', {
                env: { account: testAccount, region: testRegion },
                environmentConfig: { environment: 'prod' },
            });
            template = assertions_1.Template.fromStack(stack);
        });
        describe('DynamoDB Tables', () => {
            it('should have environment suffix in table names', () => {
                template.hasResourceProperties('AWS::DynamoDB::Table', {
                    TableName: 'tdnet_disclosures_prod',
                });
                template.hasResourceProperties('AWS::DynamoDB::Table', {
                    TableName: 'tdnet_executions_prod',
                });
                template.hasResourceProperties('AWS::DynamoDB::Table', {
                    TableName: 'tdnet_export_status_prod',
                });
            });
        });
        describe('S3 Buckets', () => {
            it('should have environment suffix in bucket names', () => {
                template.hasResourceProperties('AWS::S3::Bucket', {
                    BucketName: `tdnet-data-collector-pdfs-prod-${testAccount}`,
                });
                template.hasResourceProperties('AWS::S3::Bucket', {
                    BucketName: `tdnet-data-collector-exports-prod-${testAccount}`,
                });
                template.hasResourceProperties('AWS::S3::Bucket', {
                    BucketName: `tdnet-dashboard-prod-${testAccount}`,
                });
                template.hasResourceProperties('AWS::S3::Bucket', {
                    BucketName: `tdnet-cloudtrail-logs-prod-${testAccount}`,
                });
            });
        });
        describe('Lambda Functions', () => {
            it('should have environment suffix in function names', () => {
                template.hasResourceProperties('AWS::Lambda::Function', {
                    FunctionName: 'tdnet-collector-prod',
                });
                template.hasResourceProperties('AWS::Lambda::Function', {
                    FunctionName: 'tdnet-query-prod',
                });
                template.hasResourceProperties('AWS::Lambda::Function', {
                    FunctionName: 'tdnet-export-prod',
                });
                template.hasResourceProperties('AWS::Lambda::Function', {
                    FunctionName: 'tdnet-collect-prod',
                });
                template.hasResourceProperties('AWS::Lambda::Function', {
                    FunctionName: 'tdnet-collect-status-prod',
                });
            });
        });
        describe('API Gateway', () => {
            it('should have environment suffix in API name', () => {
                template.hasResourceProperties('AWS::ApiGateway::RestApi', {
                    Name: 'tdnet-data-collector-api-prod',
                });
            });
            it('should have environment suffix in API key name', () => {
                template.hasResourceProperties('AWS::ApiGateway::ApiKey', {
                    Name: 'tdnet-api-key-prod',
                });
            });
            it('should have environment suffix in usage plan name', () => {
                template.hasResourceProperties('AWS::ApiGateway::UsagePlan', {
                    UsagePlanName: 'tdnet-usage-plan-prod',
                });
            });
        });
        describe('WAF', () => {
            it('should have environment suffix in Web ACL name', () => {
                template.hasResourceProperties('AWS::WAFv2::WebACL', {
                    Name: 'tdnet-web-acl-prod',
                });
            });
        });
    });
    describe('Default Environment (no config provided)', () => {
        let template;
        beforeAll(() => {
            const app = new cdk.App();
            const stack = new tdnet_data_collector_stack_1.TdnetDataCollectorStack(app, 'TestStack-default', {
                env: { account: testAccount, region: testRegion },
                // environmentConfig not provided - should default to 'dev'
            });
            template = assertions_1.Template.fromStack(stack);
        });
        it('should default to dev environment', () => {
            template.hasResourceProperties('AWS::DynamoDB::Table', {
                TableName: 'tdnet_disclosures_dev',
            });
            template.hasResourceProperties('AWS::Lambda::Function', {
                FunctionName: 'tdnet-collector-dev',
            });
            template.hasResourceProperties('AWS::ApiGateway::RestApi', {
                Name: 'tdnet-data-collector-api-dev',
            });
        });
    });
    describe('Resource Isolation', () => {
        it('should create different resource names for dev and prod', () => {
            const app = new cdk.App();
            const devStack = new tdnet_data_collector_stack_1.TdnetDataCollectorStack(app, 'DevStack', {
                env: { account: testAccount, region: testRegion },
                environmentConfig: { environment: 'dev' },
            });
            const prodStack = new tdnet_data_collector_stack_1.TdnetDataCollectorStack(app, 'ProdStack', {
                env: { account: testAccount, region: testRegion },
                environmentConfig: { environment: 'prod' },
            });
            const devTemplate = assertions_1.Template.fromStack(devStack);
            const prodTemplate = assertions_1.Template.fromStack(prodStack);
            // Verify dev resources
            devTemplate.hasResourceProperties('AWS::DynamoDB::Table', {
                TableName: 'tdnet_disclosures_dev',
            });
            // Verify prod resources
            prodTemplate.hasResourceProperties('AWS::DynamoDB::Table', {
                TableName: 'tdnet_disclosures_prod',
            });
            // Ensure they are different
            expect(devStack.disclosuresTable.tableName).not.toBe(prodStack.disclosuresTable.tableName);
        });
    });
    describe('Environment Variable Propagation', () => {
        let template;
        beforeAll(() => {
            const app = new cdk.App();
            const stack = new tdnet_data_collector_stack_1.TdnetDataCollectorStack(app, 'TestStack-env-vars', {
                env: { account: testAccount, region: testRegion },
                environmentConfig: { environment: 'dev' },
            });
            template = assertions_1.Template.fromStack(stack);
        });
        it('should pass environment-specific table names to Lambda functions', () => {
            // Collector function should have dev table names
            template.hasResourceProperties('AWS::Lambda::Function', {
                FunctionName: 'tdnet-collector-dev',
                Environment: {
                    Variables: {
                        DYNAMODB_TABLE: 'tdnet_disclosures_dev',
                        DYNAMODB_EXECUTIONS_TABLE: 'tdnet_executions_dev',
                    },
                },
            });
            // Query function should have dev table name
            template.hasResourceProperties('AWS::Lambda::Function', {
                FunctionName: 'tdnet-query-dev',
                Environment: {
                    Variables: {
                        DYNAMODB_TABLE_NAME: 'tdnet_disclosures_dev',
                    },
                },
            });
            // Export function should have dev table names
            template.hasResourceProperties('AWS::Lambda::Function', {
                FunctionName: 'tdnet-export-dev',
                Environment: {
                    Variables: {
                        DYNAMODB_TABLE_NAME: 'tdnet_disclosures_dev',
                        EXPORT_STATUS_TABLE_NAME: 'tdnet_export_status_dev',
                    },
                },
            });
        });
        it('should pass environment-specific bucket names to Lambda functions', () => {
            // Collector function should have dev bucket name
            template.hasResourceProperties('AWS::Lambda::Function', {
                FunctionName: 'tdnet-collector-dev',
                Environment: {
                    Variables: {
                        S3_BUCKET: `tdnet-data-collector-pdfs-dev-${testAccount}`,
                    },
                },
            });
            // Query function should have dev bucket name
            template.hasResourceProperties('AWS::Lambda::Function', {
                FunctionName: 'tdnet-query-dev',
                Environment: {
                    Variables: {
                        S3_BUCKET_NAME: `tdnet-data-collector-pdfs-dev-${testAccount}`,
                    },
                },
            });
            // Export function should have dev bucket name
            template.hasResourceProperties('AWS::Lambda::Function', {
                FunctionName: 'tdnet-export-dev',
                Environment: {
                    Variables: {
                        EXPORT_BUCKET_NAME: `tdnet-data-collector-exports-dev-${testAccount}`,
                    },
                },
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcY2RrXFxfX3Rlc3RzX19cXGVudmlyb25tZW50LXBhcmFtZXRlcml6YXRpb24udGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7R0FPRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFSCxpREFBbUM7QUFDbkMsdURBQWtEO0FBQ2xELGtGQUE0RTtBQUU1RSxRQUFRLENBQUMsOEJBQThCLEVBQUUsR0FBRyxFQUFFO0lBQzVDLE1BQU0sV0FBVyxHQUFHLGNBQWMsQ0FBQztJQUNuQyxNQUFNLFVBQVUsR0FBRyxnQkFBZ0IsQ0FBQztJQUVwQyxRQUFRLENBQUMseUJBQXlCLEVBQUUsR0FBRyxFQUFFO1FBQ3ZDLElBQUksUUFBa0IsQ0FBQztRQUV2QixTQUFTLENBQUMsR0FBRyxFQUFFO1lBQ2IsTUFBTSxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDMUIsTUFBTSxLQUFLLEdBQUcsSUFBSSxvREFBdUIsQ0FBQyxHQUFHLEVBQUUsZUFBZSxFQUFFO2dCQUM5RCxHQUFHLEVBQUU7b0JBQ0gsT0FBTyxFQUFFLFdBQVc7b0JBQ3BCLE1BQU0sRUFBRSxVQUFVO2lCQUNuQjtnQkFDRCxpQkFBaUIsRUFBRSxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUU7YUFDMUMsQ0FBQyxDQUFDO1lBQ0gsUUFBUSxHQUFHLHFCQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3ZDLENBQUMsQ0FBQyxDQUFDO1FBRUgsUUFBUSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtZQUMvQixFQUFFLENBQUMsK0NBQStDLEVBQUUsR0FBRyxFQUFFO2dCQUN2RCxRQUFRLENBQUMscUJBQXFCLENBQUMsc0JBQXNCLEVBQUU7b0JBQ3JELFNBQVMsRUFBRSx1QkFBdUI7aUJBQ25DLENBQUMsQ0FBQztnQkFFSCxRQUFRLENBQUMscUJBQXFCLENBQUMsc0JBQXNCLEVBQUU7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RUFBRTt3QkFDVCxjQUFjLEVBQUUsaUNBQWlDLFdBQVcsRUFBRTtxQkFDL0Q7aUJBQ0Y7YUFDRixDQUFDLENBQUM7WUFFSCw4Q0FBOEM7WUFDOUMsUUFBUSxDQUFDLHFCQUFxQixDQUFDLHVCQUF1QixFQUFFO2dCQUN0RCxZQUFZLEVBQUUsa0JBQWtCO2dCQUNoQyxXQUFXLEVBQUU7b0JBQ1gsU0FBUyxFQUFFO3dCQUNULGtCQUFrQixFQUFFLG9DQUFvQyxXQUFXLEVBQUU7cUJBQ3RFO2lCQUNGO2FBQ0YsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcdGkxOThcXGludmVzdG1lbnRfYW5hbHlzaXNfb3BvcG9cXGNka1xcX190ZXN0c19fXFxlbnZpcm9ubWVudC1wYXJhbWV0ZXJpemF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEVudmlyb25tZW50IFBhcmFtZXRlcml6YXRpb24gVGVzdFxyXG4gKlxyXG4gKiBUYXNrIDE1LjE1LUE6IENES+OCueOCv+ODg+OCr+OBrueSsOWig+ODkeODqeODoeODvOOCv+WMluODhuOCueODiFxyXG4gKiBSZXF1aXJlbWVudHM6IOimgeS7tjguMe+8iOioreWumueuoeeQhu+8iVxyXG4gKlxyXG4gKiDjgZPjga7jg4bjgrnjg4jjga/jgIFDREvjgrnjgr/jg4Pjgq/jgYznkrDlooPvvIhkZXYvcHJvZO+8ieOBlOOBqOOBq+ato+OBl+OBj+ODkeODqeODoeODvOOCv+WMluOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkuaknOiovOOBl+OBvuOBmeOAglxyXG4gKi9cclxuXHJcbmltcG9ydCAqIGFzIGNkayBmcm9tICdhd3MtY2RrLWxpYic7XHJcbmltcG9ydCB7IFRlbXBsYXRlIH0gZnJvbSAnYXdzLWNkay1saWIvYXNzZXJ0aW9ucyc7XHJcbmltcG9ydCB7IFRkbmV0RGF0YUNvbGxlY3RvclN0YWNrIH0gZnJvbSAnLi4vbGliL3RkbmV0LWRhdGEtY29sbGVjdG9yLXN0YWNrJztcclxuXHJcbmRlc2NyaWJlKCdFbnZpcm9ubWVudCBQYXJhbWV0ZXJpemF0aW9uJywgKCkgPT4ge1xyXG4gIGNvbnN0IHRlc3RBY2NvdW50ID0gJzEyMzQ1Njc4OTAxMic7XHJcbiAgY29uc3QgdGVzdFJlZ2lvbiA9ICdhcC1ub3J0aGVhc3QtMSc7XHJcblxyXG4gIGRlc2NyaWJlKCdEZXZlbG9wbWVudCBFbnZpcm9ubWVudCcsICgpID0+IHtcclxuICAgIGxldCB0ZW1wbGF0ZTogVGVtcGxhdGU7XHJcblxyXG4gICAgYmVmb3JlQWxsKCgpID0+IHtcclxuICAgICAgY29uc3QgYXBwID0gbmV3IGNkay5BcHAoKTtcclxuICAgICAgY29uc3Qgc3RhY2sgPSBuZXcgVGRuZXREYXRhQ29sbGVjdG9yU3RhY2soYXBwLCAnVGVzdFN0YWNrLWRldicsIHtcclxuICAgICAgICBlbnY6IHsgXHJcbiAgICAgICAgICBhY2NvdW50OiB0ZXN0QWNjb3VudCwgXHJcbiAgICAgICAgICByZWdpb246IHRlc3RSZWdpb24gXHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnZpcm9ubWVudENvbmZpZzogeyBlbnZpcm9ubWVudDogJ2RldicgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIHRlbXBsYXRlID0gVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdEeW5hbW9EQiBUYWJsZXMnLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgaGF2ZSBlbnZpcm9ubWVudCBzdWZmaXggaW4gdGFibGUgbmFtZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkR5bmFtb0RCOjpUYWJsZScsIHtcclxuICAgICAgICAgIFRhYmxlTmFtZTogJ3RkbmV0X2Rpc2Nsb3N1cmVzX2RldicsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpEeW5hbW9EQjo6VGFibGUnLCB7XHJcbiAgICAgICAgICBUYWJsZU5hbWU6ICd0ZG5ldF9leGVjdXRpb25zX2RldicsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpEeW5hbW9EQjo6VGFibGUnLCB7XHJcbiAgICAgICAgICBUYWJsZU5hbWU6ICd0ZG5ldF9leHBvcnRfc3RhdHVzX2RldicsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ1MzIEJ1Y2tldHMnLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgaGF2ZSBlbnZpcm9ubWVudCBzdWZmaXggaW4gYnVja2V0IG5hbWVzJywgKCkgPT4ge1xyXG4gICAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgICAgQnVja2V0TmFtZTogYHRkbmV0LWRhdGEtY29sbGVjdG9yLXBkZnMtZGV2LSR7dGVzdEFjY291bnR9YCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgICBCdWNrZXROYW1lOiBgdGRuZXQtZGF0YS1jb2xsZWN0b3ItZXhwb3J0cy1kZXYtJHt0ZXN0QWNjb3VudH1gLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6UzM6OkJ1Y2tldCcsIHtcclxuICAgICAgICAgIEJ1Y2tldE5hbWU6IGB0ZG5ldC1kYXNoYm9hcmQtZGV2LSR7dGVzdEFjY291bnR9YCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgICBCdWNrZXROYW1lOiBgdGRuZXQtY2xvdWR0cmFpbC1sb2dzLWRldi0ke3Rlc3RBY2NvdW50fWAsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ0xhbWJkYSBGdW5jdGlvbnMnLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgaGF2ZSBlbnZpcm9ubWVudCBzdWZmaXggaW4gZnVuY3Rpb24gbmFtZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkxhbWJkYTo6RnVuY3Rpb24nLCB7XHJcbiAgICAgICAgICBGdW5jdGlvbk5hbWU6ICd0ZG5ldC1jb2xsZWN0b3ItZGV2JyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkxhbWJkYTo6RnVuY3Rpb24nLCB7XHJcbiAgICAgICAgICBGdW5jdGlvbk5hbWU6ICd0ZG5ldC1xdWVyeS1kZXYnLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6TGFtYmRhOjpGdW5jdGlvbicsIHtcclxuICAgICAgICAgIEZ1bmN0aW9uTmFtZTogJ3RkbmV0LWV4cG9ydC1kZXYnLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6TGFtYmRhOjpGdW5jdGlvbicsIHtcclxuICAgICAgICAgIEZ1bmN0aW9uTmFtZTogJ3RkbmV0LWNvbGxlY3QtZGV2JyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkxhbWJkYTo6RnVuY3Rpb24nLCB7XHJcbiAgICAgICAgICBGdW5jdGlvbk5hbWU6ICd0ZG5ldC1jb2xsZWN0LXN0YXR1cy1kZXYnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdBUEkgR2F0ZXdheScsICgpID0+IHtcclxuICAgICAgaXQoJ3Nob3VsZCBoYXZlIGVudmlyb25tZW50IHN1ZmZpeCBpbiBBUEkgbmFtZScsICgpID0+IHtcclxuICAgICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBpR2F0ZXdheTo6UmVzdEFwaScsIHtcclxuICAgICAgICAgIE5hbWU6ICd0ZG5ldC1kYXRhLWNvbGxlY3Rvci1hcGktZGV2JyxcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGhhdmUgZW52aXJvbm1lbnQgc3VmZml4IGluIEFQSSBrZXkgbmFtZScsICgpID0+IHtcclxuICAgICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBpR2F0ZXdheTo6QXBpS2V5Jywge1xyXG4gICAgICAgICAgTmFtZTogJ3RkbmV0LWFwaS1rZXktZGV2JyxcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGhhdmUgZW52aXJvbm1lbnQgc3VmZml4IGluIHVzYWdlIHBsYW4gbmFtZScsICgpID0+IHtcclxuICAgICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBpR2F0ZXdheTo6VXNhZ2VQbGFuJywge1xyXG4gICAgICAgICAgVXNhZ2VQbGFuTmFtZTogJ3RkbmV0LXVzYWdlLXBsYW4tZGV2JyxcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnV0FGJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIGhhdmUgZW52aXJvbm1lbnQgc3VmZml4IGluIFdlYiBBQ0wgbmFtZScsICgpID0+IHtcclxuICAgICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6V0FGdjI6OldlYkFDTCcsIHtcclxuICAgICAgICAgIE5hbWU6ICd0ZG5ldC13ZWItYWNsLWRldicsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQcm9kdWN0aW9uIEVudmlyb25tZW50JywgKCkgPT4ge1xyXG4gICAgbGV0IHRlbXBsYXRlOiBUZW1wbGF0ZTtcclxuXHJcbiAgICBiZWZvcmVBbGwoKCkgPT4ge1xyXG4gICAgICBjb25zdCBhcHAgPSBuZXcgY2RrLkFwcCgpO1xyXG4gICAgICBjb25zdCBzdGFjayA9IG5ldyBUZG5ldERhdGFDb2xsZWN0b3JTdGFjayhhcHAsICdUZXN0U3RhY2stcHJvZCcsIHtcclxuICAgICAgICBlbnY6IHsgYWNjb3VudDogdGVzdEFjY291bnQsIHJlZ2lvbjogdGVzdFJlZ2lvbiB9LFxyXG4gICAgICAgIGVudmlyb25tZW50Q29uZmlnOiB7IGVudmlyb25tZW50OiAncHJvZCcgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIHRlbXBsYXRlID0gVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdEeW5hbW9EQiBUYWJsZXMnLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgaGF2ZSBlbnZpcm9ubWVudCBzdWZmaXggaW4gdGFibGUgbmFtZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkR5bmFtb0RCOjpUYWJsZScsIHtcclxuICAgICAgICAgIFRhYmxlTmFtZTogJ3RkbmV0X2Rpc2Nsb3N1cmVzX3Byb2QnLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6RHluYW1vREI6OlRhYmxlJywge1xyXG4gICAgICAgICAgVGFibGVOYW1lOiAndGRuZXRfZXhlY3V0aW9uc19wcm9kJyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkR5bmFtb0RCOjpUYWJsZScsIHtcclxuICAgICAgICAgIFRhYmxlTmFtZTogJ3RkbmV0X2V4cG9ydF9zdGF0dXNfcHJvZCcsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ1MzIEJ1Y2tldHMnLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgaGF2ZSBlbnZpcm9ubWVudCBzdWZmaXggaW4gYnVja2V0IG5hbWVzJywgKCkgPT4ge1xyXG4gICAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgICAgQnVja2V0TmFtZTogYHRkbmV0LWRhdGEtY29sbGVjdG9yLXBkZnMtcHJvZC0ke3Rlc3RBY2NvdW50fWAsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgICAgQnVja2V0TmFtZTogYHRkbmV0LWRhdGEtY29sbGVjdG9yLWV4cG9ydHMtcHJvZC0ke3Rlc3RBY2NvdW50fWAsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgICAgQnVja2V0TmFtZTogYHRkbmV0LWRhc2hib2FyZC1wcm9kLSR7dGVzdEFjY291bnR9YCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgICBCdWNrZXROYW1lOiBgdGRuZXQtY2xvdWR0cmFpbC1sb2dzLXByb2QtJHt0ZXN0QWNjb3VudH1gLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdMYW1iZGEgRnVuY3Rpb25zJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIGhhdmUgZW52aXJvbm1lbnQgc3VmZml4IGluIGZ1bmN0aW9uIG5hbWVzJywgKCkgPT4ge1xyXG4gICAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpMYW1iZGE6OkZ1bmN0aW9uJywge1xyXG4gICAgICAgICAgRnVuY3Rpb25OYW1lOiAndGRuZXQtY29sbGVjdG9yLXByb2QnLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6TGFtYmRhOjpGdW5jdGlvbicsIHtcclxuICAgICAgICAgIEZ1bmN0aW9uTmFtZTogJ3RkbmV0LXF1ZXJ5LXByb2QnLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6TGFtYmRhOjpGdW5jdGlvbicsIHtcclxuICAgICAgICAgIEZ1bmN0aW9uTmFtZTogJ3RkbmV0LWV4cG9ydC1wcm9kJyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkxhbWJkYTo6RnVuY3Rpb24nLCB7XHJcbiAgICAgICAgICBGdW5jdGlvbk5hbWU6ICd0ZG5ldC1jb2xsZWN0LXByb2QnLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6TGFtYmRhOjpGdW5jdGlvbicsIHtcclxuICAgICAgICAgIEZ1bmN0aW9uTmFtZTogJ3RkbmV0LWNvbGxlY3Qtc3RhdHVzLXByb2QnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdBUEkgR2F0ZXdheScsICgpID0+IHtcclxuICAgICAgaXQoJ3Nob3VsZCBoYXZlIGVudmlyb25tZW50IHN1ZmZpeCBpbiBBUEkgbmFtZScsICgpID0+IHtcclxuICAgICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBpR2F0ZXdheTo6UmVzdEFwaScsIHtcclxuICAgICAgICAgIE5hbWU6ICd0ZG5ldC1kYXRhLWNvbGxlY3Rvci1hcGktcHJvZCcsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBoYXZlIGVudmlyb25tZW50IHN1ZmZpeCBpbiBBUEkga2V5IG5hbWUnLCAoKSA9PiB7XHJcbiAgICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwaUdhdGV3YXk6OkFwaUtleScsIHtcclxuICAgICAgICAgIE5hbWU6ICd0ZG5ldC1hcGkta2V5LXByb2QnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgaGF2ZSBlbnZpcm9ubWVudCBzdWZmaXggaW4gdXNhZ2UgcGxhbiBuYW1lJywgKCkgPT4ge1xyXG4gICAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcGlHYXRld2F5OjpVc2FnZVBsYW4nLCB7XHJcbiAgICAgICAgICBVc2FnZVBsYW5OYW1lOiAndGRuZXQtdXNhZ2UtcGxhbi1wcm9kJyxcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnV0FGJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIGhhdmUgZW52aXJvbm1lbnQgc3VmZml4IGluIFdlYiBBQ0wgbmFtZScsICgpID0+IHtcclxuICAgICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6V0FGdjI6OldlYkFDTCcsIHtcclxuICAgICAgICAgIE5hbWU6ICd0ZG5ldC13ZWItYWNsLXByb2QnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnRGVmYXVsdCBFbnZpcm9ubWVudCAobm8gY29uZmlnIHByb3ZpZGVkKScsICgpID0+IHtcclxuICAgIGxldCB0ZW1wbGF0ZTogVGVtcGxhdGU7XHJcblxyXG4gICAgYmVmb3JlQWxsKCgpID0+IHtcclxuICAgICAgY29uc3QgYXBwID0gbmV3IGNkay5BcHAoKTtcclxuICAgICAgY29uc3Qgc3RhY2sgPSBuZXcgVGRuZXREYXRhQ29sbGVjdG9yU3RhY2soYXBwLCAnVGVzdFN0YWNrLWRlZmF1bHQnLCB7XHJcbiAgICAgICAgZW52OiB7IGFjY291bnQ6IHRlc3RBY2NvdW50LCByZWdpb246IHRlc3RSZWdpb24gfSxcclxuICAgICAgICAvLyBlbnZpcm9ubWVudENvbmZpZyBub3QgcHJvdmlkZWQgLSBzaG91bGQgZGVmYXVsdCB0byAnZGV2J1xyXG4gICAgICB9KTtcclxuICAgICAgdGVtcGxhdGUgPSBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBkZWZhdWx0IHRvIGRldiBlbnZpcm9ubWVudCcsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkR5bmFtb0RCOjpUYWJsZScsIHtcclxuICAgICAgICBUYWJsZU5hbWU6ICd0ZG5ldF9kaXNjbG9zdXJlc19kZXYnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpMYW1iZGE6OkZ1bmN0aW9uJywge1xyXG4gICAgICAgIEZ1bmN0aW9uTmFtZTogJ3RkbmV0LWNvbGxlY3Rvci1kZXYnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcGlHYXRld2F5OjpSZXN0QXBpJywge1xyXG4gICAgICAgIE5hbWU6ICd0ZG5ldC1kYXRhLWNvbGxlY3Rvci1hcGktZGV2JyxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1Jlc291cmNlIElzb2xhdGlvbicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY3JlYXRlIGRpZmZlcmVudCByZXNvdXJjZSBuYW1lcyBmb3IgZGV2IGFuZCBwcm9kJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBhcHAgPSBuZXcgY2RrLkFwcCgpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZGV2U3RhY2sgPSBuZXcgVGRuZXREYXRhQ29sbGVjdG9yU3RhY2soYXBwLCAnRGV2U3RhY2snLCB7XHJcbiAgICAgICAgZW52OiB7IGFjY291bnQ6IHRlc3RBY2NvdW50LCByZWdpb246IHRlc3RSZWdpb24gfSxcclxuICAgICAgICBlbnZpcm9ubWVudENvbmZpZzogeyBlbnZpcm9ubWVudDogJ2RldicgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBwcm9kU3RhY2sgPSBuZXcgVGRuZXREYXRhQ29sbGVjdG9yU3RhY2soYXBwLCAnUHJvZFN0YWNrJywge1xyXG4gICAgICAgIGVudjogeyBhY2NvdW50OiB0ZXN0QWNjb3VudCwgcmVnaW9uOiB0ZXN0UmVnaW9uIH0sXHJcbiAgICAgICAgZW52aXJvbm1lbnRDb25maWc6IHsgZW52aXJvbm1lbnQ6ICdwcm9kJyB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGRldlRlbXBsYXRlID0gVGVtcGxhdGUuZnJvbVN0YWNrKGRldlN0YWNrKTtcclxuICAgICAgY29uc3QgcHJvZFRlbXBsYXRlID0gVGVtcGxhdGUuZnJvbVN0YWNrKHByb2RTdGFjayk7XHJcblxyXG4gICAgICAvLyBWZXJpZnkgZGV2IHJlc291cmNlc1xyXG4gICAgICBkZXZUZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6RHluYW1vREI6OlRhYmxlJywge1xyXG4gICAgICAgIFRhYmxlTmFtZTogJ3RkbmV0X2Rpc2Nsb3N1cmVzX2RldicsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gVmVyaWZ5IHByb2QgcmVzb3VyY2VzXHJcbiAgICAgIHByb2RUZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6RHluYW1vREI6OlRhYmxlJywge1xyXG4gICAgICAgIFRhYmxlTmFtZTogJ3RkbmV0X2Rpc2Nsb3N1cmVzX3Byb2QnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEVuc3VyZSB0aGV5IGFyZSBkaWZmZXJlbnRcclxuICAgICAgZXhwZWN0KGRldlN0YWNrLmRpc2Nsb3N1cmVzVGFibGUudGFibGVOYW1lKS5ub3QudG9CZShcclxuICAgICAgICBwcm9kU3RhY2suZGlzY2xvc3VyZXNUYWJsZS50YWJsZU5hbWVcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnRW52aXJvbm1lbnQgVmFyaWFibGUgUHJvcGFnYXRpb24nLCAoKSA9PiB7XHJcbiAgICBsZXQgdGVtcGxhdGU6IFRlbXBsYXRlO1xyXG5cclxuICAgIGJlZm9yZUFsbCgoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKCk7XHJcbiAgICAgIGNvbnN0IHN0YWNrID0gbmV3IFRkbmV0RGF0YUNvbGxlY3RvclN0YWNrKGFwcCwgJ1Rlc3RTdGFjay1lbnYtdmFycycsIHtcclxuICAgICAgICBlbnY6IHsgYWNjb3VudDogdGVzdEFjY291bnQsIHJlZ2lvbjogdGVzdFJlZ2lvbiB9LFxyXG4gICAgICAgIGVudmlyb25tZW50Q29uZmlnOiB7IGVudmlyb25tZW50OiAnZGV2JyB9LFxyXG4gICAgICB9KTtcclxuICAgICAgdGVtcGxhdGUgPSBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBwYXNzIGVudmlyb25tZW50LXNwZWNpZmljIHRhYmxlIG5hbWVzIHRvIExhbWJkYSBmdW5jdGlvbnMnLCAoKSA9PiB7XHJcbiAgICAgIC8vIENvbGxlY3RvciBmdW5jdGlvbiBzaG91bGQgaGF2ZSBkZXYgdGFibGUgbmFtZXNcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkxhbWJkYTo6RnVuY3Rpb24nLCB7XHJcbiAgICAgICAgRnVuY3Rpb25OYW1lOiAndGRuZXQtY29sbGVjdG9yLWRldicsXHJcbiAgICAgICAgRW52aXJvbm1lbnQ6IHtcclxuICAgICAgICAgIFZhcmlhYmxlczoge1xyXG4gICAgICAgICAgICBEWU5BTU9EQl9UQUJMRTogJ3RkbmV0X2Rpc2Nsb3N1cmVzX2RldicsXHJcbiAgICAgICAgICAgIERZTkFNT0RCX0VYRUNVVElPTlNfVEFCTEU6ICd0ZG5ldF9leGVjdXRpb25zX2RldicsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gUXVlcnkgZnVuY3Rpb24gc2hvdWxkIGhhdmUgZGV2IHRhYmxlIG5hbWVcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkxhbWJkYTo6RnVuY3Rpb24nLCB7XHJcbiAgICAgICAgRnVuY3Rpb25OYW1lOiAndGRuZXQtcXVlcnktZGV2JyxcclxuICAgICAgICBFbnZpcm9ubWVudDoge1xyXG4gICAgICAgICAgVmFyaWFibGVzOiB7XHJcbiAgICAgICAgICAgIERZTkFNT0RCX1RBQkxFX05BTUU6ICd0ZG5ldF9kaXNjbG9zdXJlc19kZXYnLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEV4cG9ydCBmdW5jdGlvbiBzaG91bGQgaGF2ZSBkZXYgdGFibGUgbmFtZXNcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkxhbWJkYTo6RnVuY3Rpb24nLCB7XHJcbiAgICAgICAgRnVuY3Rpb25OYW1lOiAndGRuZXQtZXhwb3J0LWRldicsXHJcbiAgICAgICAgRW52aXJvbm1lbnQ6IHtcclxuICAgICAgICAgIFZhcmlhYmxlczoge1xyXG4gICAgICAgICAgICBEWU5BTU9EQl9UQUJMRV9OQU1FOiAndGRuZXRfZGlzY2xvc3VyZXNfZGV2JyxcclxuICAgICAgICAgICAgRVhQT1JUX1NUQVRVU19UQUJMRV9OQU1FOiAndGRuZXRfZXhwb3J0X3N0YXR1c19kZXYnLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcGFzcyBlbnZpcm9ubWVudC1zcGVjaWZpYyBidWNrZXQgbmFtZXMgdG8gTGFtYmRhIGZ1bmN0aW9ucycsICgpID0+IHtcclxuICAgICAgLy8gQ29sbGVjdG9yIGZ1bmN0aW9uIHNob3VsZCBoYXZlIGRldiBidWNrZXQgbmFtZVxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6TGFtYmRhOjpGdW5jdGlvbicsIHtcclxuICAgICAgICBGdW5jdGlvbk5hbWU6ICd0ZG5ldC1jb2xsZWN0b3ItZGV2JyxcclxuICAgICAgICBFbnZpcm9ubWVudDoge1xyXG4gICAgICAgICAgVmFyaWFibGVzOiB7XHJcbiAgICAgICAgICAgIFMzX0JVQ0tFVDogYHRkbmV0LWRhdGEtY29sbGVjdG9yLXBkZnMtZGV2LSR7dGVzdEFjY291bnR9YCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBRdWVyeSBmdW5jdGlvbiBzaG91bGQgaGF2ZSBkZXYgYnVja2V0IG5hbWVcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkxhbWJkYTo6RnVuY3Rpb24nLCB7XHJcbiAgICAgICAgRnVuY3Rpb25OYW1lOiAndGRuZXQtcXVlcnktZGV2JyxcclxuICAgICAgICBFbnZpcm9ubWVudDoge1xyXG4gICAgICAgICAgVmFyaWFibGVzOiB7XHJcbiAgICAgICAgICAgIFMzX0JVQ0tFVF9OQU1FOiBgdGRuZXQtZGF0YS1jb2xsZWN0b3ItcGRmcy1kZXYtJHt0ZXN0QWNjb3VudH1gLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEV4cG9ydCBmdW5jdGlvbiBzaG91bGQgaGF2ZSBkZXYgYnVja2V0IG5hbWVcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkxhbWJkYTo6RnVuY3Rpb24nLCB7XHJcbiAgICAgICAgRnVuY3Rpb25OYW1lOiAndGRuZXQtZXhwb3J0LWRldicsXHJcbiAgICAgICAgRW52aXJvbm1lbnQ6IHtcclxuICAgICAgICAgIFZhcmlhYmxlczoge1xyXG4gICAgICAgICAgICBFWFBPUlRfQlVDS0VUX05BTUU6IGB0ZG5ldC1kYXRhLWNvbGxlY3Rvci1leHBvcnRzLWRldi0ke3Rlc3RBY2NvdW50fWAsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=