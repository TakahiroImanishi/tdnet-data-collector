{"version":3,"names":["cov_kpri68apt","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","inputSourceMap","file","mappings","names","sources","sourcesContent","version","_coverageSchema","coverage","actualCoverage","exports","retryWithBackoff","isRetryableError","errors_1","require","DEFAULT_RETRY_OPTIONS","maxRetries","initialDelay","backoffMultiplier","jitter","defaultShouldRetry","error","RetryableError","operation","options","opts","shouldRetry","lastError","attempt","Error","String","delay","calculateDelay","sleep","exponentialDelay","Math","pow","random","ms","Promise","resolve","setTimeout","networkErrors","some","code","message","includes","awsErrors"],"sources":["C:\\Users\\ti198\\investment_analysis_opopo\\src\\utils\\retry.ts"],"sourcesContent":["/**\r\n * 再試行ロジック（指数バックオフ）\r\n *\r\n * 一時的なエラーに対して、指数バックオフアルゴリズムを使用した再試行を実行します。\r\n * ジッター（ランダム遅延）を追加することで、複数のクライアントが同時に再試行する際の\r\n * サンダリングハード問題を回避します。\r\n *\r\n * Requirements: 要件6.2（再試行ロジック）\r\n */\r\n\r\nimport { RetryableError } from '../errors';\r\n\r\n/**\r\n * 再試行オプション\r\n */\r\nexport interface RetryOptions {\r\n  /**\r\n   * 最大再試行回数（デフォルト: 3）\r\n   */\r\n  maxRetries: number;\r\n\r\n  /**\r\n   * 初期遅延時間（ミリ秒、デフォルト: 2000）\r\n   */\r\n  initialDelay: number;\r\n\r\n  /**\r\n   * バックオフ倍率（デフォルト: 2）\r\n   */\r\n  backoffMultiplier: number;\r\n\r\n  /**\r\n   * ジッター（ランダム遅延）を追加するか（デフォルト: true）\r\n   */\r\n  jitter: boolean;\r\n\r\n  /**\r\n   * カスタム再試行判定関数（オプション）\r\n   * エラーが再試行可能かどうかを判定します。\r\n   * 指定しない場合は、RetryableErrorのみ再試行します。\r\n   */\r\n  shouldRetry?: (error: Error) => boolean;\r\n}\r\n\r\n/**\r\n * デフォルトの再試行オプション\r\n */\r\nconst DEFAULT_RETRY_OPTIONS: RetryOptions = {\r\n  maxRetries: 3,\r\n  initialDelay: 2000,\r\n  backoffMultiplier: 2,\r\n  jitter: true,\r\n};\r\n\r\n/**\r\n * デフォルトの再試行判定関数\r\n * RetryableErrorのみ再試行します。\r\n */\r\nfunction defaultShouldRetry(error: Error): boolean {\r\n  return error instanceof RetryableError;\r\n}\r\n\r\n/**\r\n * 指数バックオフを使用した再試行ロジック\r\n *\r\n * @param operation 実行する非同期処理\r\n * @param options 再試行オプション\r\n * @returns 処理の結果\r\n * @throws 最大再試行回数に達した場合、または再試行不可能なエラーの場合\r\n *\r\n * @example\r\n * ```typescript\r\n * // 基本的な使用例\r\n * const result = await retryWithBackoff(\r\n *   async () => await fetchData(),\r\n *   {\r\n *     maxRetries: 3,\r\n *     initialDelay: 2000,\r\n *     backoffMultiplier: 2,\r\n *     jitter: true,\r\n *   }\r\n * );\r\n *\r\n * // カスタム再試行判定\r\n * const result = await retryWithBackoff(\r\n *   async () => await fetchData(),\r\n *   {\r\n *     maxRetries: 3,\r\n *     initialDelay: 1000,\r\n *     backoffMultiplier: 2,\r\n *     jitter: true,\r\n *     shouldRetry: (error) => {\r\n *       // ネットワークエラーのみ再試行\r\n *       return error.message.includes('ECONNRESET');\r\n *     },\r\n *   }\r\n * );\r\n * ```\r\n */\r\nexport async function retryWithBackoff<T>(\r\n  operation: () => Promise<T>,\r\n  options: Partial<RetryOptions> = {}\r\n): Promise<T> {\r\n  const opts: RetryOptions = { ...DEFAULT_RETRY_OPTIONS, ...options };\r\n  const shouldRetry = opts.shouldRetry || defaultShouldRetry;\r\n\r\n  let lastError: Error | undefined;\r\n  let attempt = 0;\r\n\r\n  while (attempt <= opts.maxRetries) {\r\n    try {\r\n      return await operation();\r\n    } catch (error) {\r\n      lastError = error instanceof Error ? error : new Error(String(error));\r\n\r\n      // 最大再試行回数に達した場合は、エラーをスロー\r\n      if (attempt >= opts.maxRetries) {\r\n        throw lastError;\r\n      }\r\n\r\n      // 再試行不可能なエラーの場合は、即座にスロー\r\n      if (!shouldRetry(lastError)) {\r\n        throw lastError;\r\n      }\r\n\r\n      // 遅延時間を計算（指数バックオフ）\r\n      const delay = calculateDelay(attempt, opts);\r\n\r\n      // 遅延後に再試行\r\n      await sleep(delay);\r\n      attempt++;\r\n    }\r\n  }\r\n\r\n  // この行には到達しないはずだが、TypeScriptの型チェックのために必要\r\n  throw lastError || new Error('Unexpected error in retryWithBackoff');\r\n}\r\n\r\n/**\r\n * 遅延時間を計算（指数バックオフ + ジッター）\r\n *\r\n * @param attempt 現在の試行回数（0から始まる）\r\n * @param options 再試行オプション\r\n * @returns 遅延時間（ミリ秒）\r\n */\r\nfunction calculateDelay(attempt: number, options: RetryOptions): number {\r\n  // 指数バックオフ: initialDelay * (backoffMultiplier ^ attempt)\r\n  const exponentialDelay =\r\n    options.initialDelay * Math.pow(options.backoffMultiplier, attempt);\r\n\r\n  // ジッターを追加（0〜exponentialDelayのランダム値）\r\n  if (options.jitter) {\r\n    return Math.random() * exponentialDelay;\r\n  }\r\n\r\n  return exponentialDelay;\r\n}\r\n\r\n/**\r\n * 指定時間スリープ\r\n *\r\n * @param ms スリープ時間（ミリ秒）\r\n */\r\nfunction sleep(ms: number): Promise<void> {\r\n  return new Promise((resolve) => setTimeout(resolve, ms));\r\n}\r\n\r\n/**\r\n * 再試行可能なエラーかどうかを判定するヘルパー関数\r\n *\r\n * @param error エラーオブジェクト\r\n * @returns 再試行可能な場合はtrue\r\n *\r\n * @example\r\n * ```typescript\r\n * try {\r\n *   await operation();\r\n * } catch (error) {\r\n *   if (isRetryableError(error)) {\r\n *     // 再試行ロジック\r\n *   } else {\r\n *     // 即座に失敗\r\n *   }\r\n * }\r\n * ```\r\n */\r\nexport function isRetryableError(error: unknown): boolean {\r\n  if (!(error instanceof Error)) {\r\n    return false;\r\n  }\r\n\r\n  // RetryableErrorまたはそのサブクラス\r\n  if (error instanceof RetryableError) {\r\n    return true;\r\n  }\r\n\r\n  // ネットワークエラー\r\n  const networkErrors = ['ECONNRESET', 'ETIMEDOUT', 'ENOTFOUND', 'ECONNREFUSED'];\r\n  if (networkErrors.some((code) => error.message.includes(code))) {\r\n    return true;\r\n  }\r\n\r\n  // HTTPタイムアウト\r\n  if (error.message.includes('timeout')) {\r\n    return true;\r\n  }\r\n\r\n  // AWS一時的エラー\r\n  const awsErrors = ['ThrottlingException', 'ServiceUnavailable', 'RequestTimeout'];\r\n  if (awsErrors.some((code) => error.message.includes(code))) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n"],"mappings":";;AAAA;;;;;;;;;AAAA;AAAA,SAAAA,cAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,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","ignoreList":[]}