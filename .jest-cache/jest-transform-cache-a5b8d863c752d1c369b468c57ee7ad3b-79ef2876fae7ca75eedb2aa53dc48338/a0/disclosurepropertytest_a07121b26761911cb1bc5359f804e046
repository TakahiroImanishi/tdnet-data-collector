4933d6b002c45af89b6e7b463f698d2a
"use strict";
/**
 * Disclosureモデルのプロパティベーステスト
 *
 * Property 3: メタデータの必須フィールド
 * Validates: Requirements 2.1, 2.2
 *
 * 任意の開示情報に対して、toDynamoDBItemが必須フィールドをすべて含むことを検証します。
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const fc = __importStar(require("fast-check"));
const disclosure_1 = require("../disclosure");
const disclosure_id_1 = require("../../utils/disclosure-id");
const errors_1 = require("../../errors");
/**
 * Disclosure型のArbitraryジェネレーター
 *
 * fast-checkで使用するランダムなDisclosureを生成します。
 */
const disclosureArbitrary = () => {
    return fc.record({
        disclosure_id: fc
            .tuple(fc.date({ min: new Date('2020-01-01'), max: new Date('2030-12-31') }), fc.integer({ min: 1000, max: 9999 }), fc.integer({ min: 0, max: 999 }))
            .map(([date, companyCode, seq]) => {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const dateStr = `${year}${month}${day}`;
            const companyCodeStr = String(companyCode);
            const seqStr = String(seq).padStart(3, '0');
            return `${dateStr}_${companyCodeStr}_${seqStr}`;
        }),
        company_code: fc.integer({ min: 1000, max: 9999 }).map(String),
        company_name: fc.string({ minLength: 1, maxLength: 100 }),
        disclosure_type: fc.constantFrom('決算短信', '有価証券報告書', '適時開示', 'その他'),
        title: fc.string({ minLength: 1, maxLength: 200 }),
        disclosed_at: fc
            .date({ min: new Date('2020-01-01'), max: new Date(Date.now()) })
            .map((date) => date.toISOString()),
        pdf_url: fc
            .webUrl()
            .map((url) => `${url}/disclosure.pdf`)
            .filter((url) => url.length <= 500),
        s3_key: fc
            .tuple(fc.date({ min: new Date('2020-01-01'), max: new Date('2030-12-31') }), fc.integer({ min: 1000, max: 9999 }), fc.integer({ min: 0, max: 999 }))
            .map(([date, companyCode, seq]) => {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const dateStr = `${year}${month}${day}`;
            const companyCodeStr = String(companyCode);
            const seqStr = String(seq).padStart(3, '0');
            return `pdfs/${year}/${month}/${dateStr}_${companyCodeStr}_${seqStr}.pdf`;
        }),
        collected_at: fc
            .date({ min: new Date('2020-01-01'), max: new Date(Date.now()) })
            .map((date) => date.toISOString()),
        date_partition: fc
            .date({ min: new Date('2020-01-01'), max: new Date('2030-12-31') })
            .map((date) => {
            // JST基準でdate_partitionを生成
            const jstDate = new Date(date.getTime() + 9 * 60 * 60 * 1000);
            const year = jstDate.getUTCFullYear();
            const month = String(jstDate.getUTCMonth() + 1).padStart(2, '0');
            return `${year}-${month}`;
        }),
    });
};
describe('Disclosure Property Tests', () => {
    describe('Property 3: メタデータの必須フィールド', () => {
        it('toDynamoDBItemは任意のDisclosureに対して必須フィールドをすべて含む', () => {
            fc.assert(fc.property(disclosureArbitrary(), (disclosure) => {
                // toDynamoDBItemを実行
                const item = (0, disclosure_1.toDynamoDBItem)(disclosure);
                // 必須フィールドの存在確認
                const requiredFields = [
                    'disclosure_id',
                    'company_code',
                    'company_name',
                    'disclosure_type',
                    'title',
                    'disclosed_at',
                    'pdf_url',
                    's3_key',
                    'collected_at',
                    'date_partition',
                ];
                // すべての必須フィールドが存在することを確認
                for (const field of requiredFields) {
                    expect(item[field]).toBeDefined();
                    expect(item[field].S).toBeDefined();
                    expect(typeof item[field].S).toBe('string');
                    expect(item[field].S.length).toBeGreaterThan(0);
                }
                // フィールド値が元のDisclosureと一致することを確認
                expect(item.disclosure_id.S).toBe(disclosure.disclosure_id);
                expect(item.company_code.S).toBe(disclosure.company_code);
                expect(item.company_name.S).toBe(disclosure.company_name);
                expect(item.disclosure_type.S).toBe(disclosure.disclosure_type);
                expect(item.title.S).toBe(disclosure.title);
                expect(item.disclosed_at.S).toBe(disclosure.disclosed_at);
                expect(item.pdf_url.S).toBe(disclosure.pdf_url);
                expect(item.s3_key.S).toBe(disclosure.s3_key);
                expect(item.collected_at.S).toBe(disclosure.collected_at);
                expect(item.date_partition.S).toBe(disclosure.date_partition);
            }), { numRuns: 1000 } // 1000回の反復実行
            );
        });
        it('fromDynamoDBItemは任意のDynamoDBItemに対して必須フィールドをすべて含むDisclosureを返す', () => {
            fc.assert(fc.property(disclosureArbitrary(), (disclosure) => {
                // toDynamoDBItem → fromDynamoDBItem のラウンドトリップ
                const item = (0, disclosure_1.toDynamoDBItem)(disclosure);
                const restored = (0, disclosure_1.fromDynamoDBItem)(item);
                // 必須フィールドの存在確認
                expect(restored.disclosure_id).toBeDefined();
                expect(restored.company_code).toBeDefined();
                expect(restored.company_name).toBeDefined();
                expect(restored.disclosure_type).toBeDefined();
                expect(restored.title).toBeDefined();
                expect(restored.disclosed_at).toBeDefined();
                expect(restored.pdf_url).toBeDefined();
                expect(restored.s3_key).toBeDefined();
                expect(restored.collected_at).toBeDefined();
                expect(restored.date_partition).toBeDefined();
                // フィールド値が元のDisclosureと一致することを確認
                expect(restored.disclosure_id).toBe(disclosure.disclosure_id);
                expect(restored.company_code).toBe(disclosure.company_code);
                expect(restored.company_name).toBe(disclosure.company_name);
                expect(restored.disclosure_type).toBe(disclosure.disclosure_type);
                expect(restored.title).toBe(disclosure.title);
                expect(restored.disclosed_at).toBe(disclosure.disclosed_at);
                expect(restored.pdf_url).toBe(disclosure.pdf_url);
                expect(restored.s3_key).toBe(disclosure.s3_key);
                expect(restored.collected_at).toBe(disclosure.collected_at);
                expect(restored.date_partition).toBe(disclosure.date_partition);
            }), { numRuns: 1000 });
        });
        it('validateDisclosureは必須フィールドが欠落している場合にValidationErrorをスローする', () => {
            const requiredFields = [
                'disclosure_id',
                'company_code',
                'company_name',
                'disclosure_type',
                'title',
                'disclosed_at',
                'pdf_url',
                's3_key',
                'collected_at',
                'date_partition',
            ];
            fc.assert(fc.property(disclosureArbitrary(), fc.constantFrom(...requiredFields), (disclosure, fieldToRemove) => {
                // 1つのフィールドを削除
                const incompleteDisclosure = { ...disclosure };
                delete incompleteDisclosure[fieldToRemove];
                // validateDisclosureがValidationErrorをスローすることを確認
                expect(() => (0, disclosure_1.validateDisclosure)(incompleteDisclosure)).toThrow(errors_1.ValidationError);
            }), { numRuns: 100 } // フィールド削除のテストは100回で十分
            );
        });
    });
    describe('Property: ラウンドトリップの一貫性', () => {
        it('toDynamoDBItem → fromDynamoDBItem のラウンドトリップで元のDisclosureが復元される', () => {
            fc.assert(fc.property(disclosureArbitrary(), (disclosure) => {
                // ラウンドトリップ
                const item = (0, disclosure_1.toDynamoDBItem)(disclosure);
                const restored = (0, disclosure_1.fromDynamoDBItem)(item);
                // 完全に一致することを確認
                expect(restored).toEqual(disclosure);
            }), { numRuns: 1000 });
        });
    });
    describe('Property: createDisclosureの正確性', () => {
        it('createDisclosureは有効なDisclosureを生成する', () => {
            fc.assert(fc.property(fc.integer({ min: 1000, max: 9999 }).map(String), fc.string({ minLength: 1, maxLength: 100 }), fc.constantFrom('決算短信', '有価証券報告書', '適時開示', 'その他'), fc.string({ minLength: 1, maxLength: 200 }), fc
                .date({ min: new Date('2020-01-01'), max: new Date(Date.now()) })
                .map((d) => d.toISOString()), fc.webUrl().map((url) => `${url}/disclosure.pdf`), fc.string({ minLength: 1, maxLength: 200 }), (companyCode, companyName, disclosureType, title, disclosedAt, pdfUrl, disclosureId) => {
                // createDisclosureを実行
                const disclosure = (0, disclosure_1.createDisclosure)({
                    disclosure_id: disclosureId,
                    company_code: companyCode,
                    company_name: companyName,
                    disclosure_type: disclosureType,
                    title: title,
                    disclosed_at: disclosedAt,
                    pdf_url: pdfUrl,
                    s3_key: `pdfs/${disclosureId}.pdf`,
                });
                // 必須フィールドが存在することを確認
                expect(disclosure.disclosure_id).toBeDefined();
                expect(disclosure.company_code).toBe(companyCode);
                expect(disclosure.company_name).toBe(companyName);
                expect(disclosure.disclosure_type).toBe(disclosureType);
                expect(disclosure.title).toBe(title);
                expect(disclosure.disclosed_at).toBe(disclosedAt);
                expect(disclosure.pdf_url).toBe(pdfUrl);
                expect(disclosure.s3_key).toBeDefined();
                expect(disclosure.collected_at).toBeDefined();
                expect(disclosure.date_partition).toBeDefined();
                // date_partitionがYYYY-MM形式であることを確認
                expect(disclosure.date_partition).toMatch(/^\d{4}-\d{2}$/);
                // collected_atがISO 8601形式であることを確認
                expect(disclosure.collected_at).toMatch(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/);
                // validateDisclosureが成功することを確認
                expect(() => (0, disclosure_1.validateDisclosure)(disclosure)).not.toThrow();
            }), { numRuns: 1000 });
        });
    });
    describe('Property 4: 開示IDの一意性', () => {
        it('generateDisclosureIdは異なる入力に対して異なるIDを生成する', () => {
            fc.assert(fc.property(fc.array(fc.tuple(fc
                .date({ min: new Date('2020-01-01'), max: new Date(Date.now()) })
                .map((d) => d.toISOString()), fc.integer({ min: 1000, max: 9999 }).map(String), fc.integer({ min: 0, max: 999 })), { minLength: 2, maxLength: 100 }), (inputs) => {
                // すべての入力に対してIDを生成
                const ids = inputs.map(([disclosedAt, companyCode, sequence]) => (0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, sequence));
                // 重複を除去
                const uniqueIds = new Set(ids);
                // 異なる入力に対しては異なるIDが生成されることを確認
                // （ただし、同じ日・同じ企業コード・同じ連番の場合は同じIDになる）
                const uniqueInputs = new Set(inputs.map(([disclosedAt, companyCode, sequence]) => {
                    const date = new Date(disclosedAt);
                    const jstDate = new Date(date.getTime() + 9 * 60 * 60 * 1000);
                    const year = jstDate.getUTCFullYear();
                    const month = String(jstDate.getUTCMonth() + 1).padStart(2, '0');
                    const day = String(jstDate.getUTCDate()).padStart(2, '0');
                    return `${year}${month}${day}_${companyCode}_${String(sequence).padStart(3, '0')}`;
                }));
                // 一意な入力の数と一意なIDの数が一致することを確認
                expect(uniqueIds.size).toBe(uniqueInputs.size);
            }), { numRuns: 100 });
        });
        it('generateDisclosureIdは同じ入力に対して同じIDを生成する（冪等性）', () => {
            fc.assert(fc.property(fc
                .date({ min: new Date('2020-01-01'), max: new Date(Date.now()) })
                .map((d) => d.toISOString()), fc.integer({ min: 1000, max: 9999 }).map(String), fc.integer({ min: 0, max: 999 }), (disclosedAt, companyCode, sequence) => {
                // 同じ入力で2回IDを生成
                const id1 = (0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, sequence);
                const id2 = (0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, sequence);
                // 同じIDが生成されることを確認
                expect(id1).toBe(id2);
            }), { numRuns: 1000 });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxtb2RlbHNcXF9fdGVzdHNfX1xcZGlzY2xvc3VyZS5wcm9wZXJ0eS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7OztHQU9HOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVILCtDQUFpQztBQUNqQyw4Q0FLdUI7QUFDdkIsNkRBQWlFO0FBRWpFLHlDQUErQztBQUUvQzs7OztHQUlHO0FBQ0gsTUFBTSxtQkFBbUIsR0FBRyxHQUE2QixFQUFFO0lBQ3pELE9BQU8sRUFBRSxDQUFDLE1BQU0sQ0FBQztRQUNmLGFBQWEsRUFBRSxFQUFFO2FBQ2QsS0FBSyxDQUNKLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsR0FBRyxFQUFFLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsRUFDckUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQ3BDLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUNqQzthQUNBLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLFdBQVcsRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFO1lBQ2hDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUNoQyxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDM0QsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUs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WSxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsZUFBZSxDQUFDLENBQUM7Z0JBQ2hFLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzVDLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQ2hELE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQzlDLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDaEUsQ0FBQyxDQUFDLEVBQ0YsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsYUFBYTthQUNoQyxDQUFDO1FBQ0osQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsZ0VBQWdFLEVBQUUsR0FBRyxFQUFFO1lBQ3hFLEVBQUUsQ0FBQyxNQUFNLENBQ1AsRUFBRSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsRUFBRSxFQUFFLENBQUMs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QU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDeEIsQ0FBQyxDQUNGLEVBQ0QsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQ2xCLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxtb2RlbHNcXF9fdGVzdHNfX1xcZGlzY2xvc3VyZS5wcm9wZXJ0eS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRGlzY2xvc3VyZeODouODh+ODq+OBruODl+ODreODkeODhuOCo+ODmeODvOOCueODhuOCueODiFxuICpcbiAqIFByb3BlcnR5IDM6IOODoeOCv+ODh+ODvOOCv+OBruW/hemgiOODleOCo+ODvOODq+ODiVxuICogVmFsaWRhdGVzOiBSZXF1aXJlbWVudHMgMi4xLCAyLjJcbiAqXG4gKiDku7vmhI/jga7plovnpLrmg4XloLHjgavlr77jgZfjgabjgIF0b0R5bmFtb0RCSXRlbeOBjOW/hemgiOODleOCo+ODvOODq+ODieOCkuOBmeOBueOBpuWQq+OCgOOBk+OBqOOCkuaknOiovOOBl+OBvuOBmeOAglxuICovXG5cbmltcG9ydCAqIGFzIGZjIGZyb20gJ2Zhc3QtY2hlY2snO1xuaW1wb3J0IHtcbiAgdG9EeW5hbW9EQkl0ZW0sXG4gIGZyb21EeW5hbW9EQkl0ZW0sXG4gIHZhbGlkYXRlRGlzY2xvc3VyZSxcbiAgY3JlYXRlRGlzY2xvc3VyZSxcbn0gZnJvbSAnLi4vZGlzY2xvc3VyZSc7XG5pbXBvcnQgeyBnZW5lcmF0ZURpc2Nsb3N1cmVJZCB9IGZyb20gJy4uLy4uL3V0aWxzL2Rpc2Nsb3N1cmUtaWQnO1xuaW1wb3J0IHsgRGlzY2xvc3VyZSB9IGZyb20gJy4uLy4uL3R5cGVzJztcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciB9IGZyb20gJy4uLy4uL2Vycm9ycyc7XG5cbi8qKlxuICogRGlzY2xvc3VyZeWei+OBrkFyYml0cmFyeeOCuOOCp+ODjeODrOODvOOCv+ODvFxuICpcbiAqIGZhc3QtY2hlY2vjgafkvb/nlKjjgZnjgovjg6njg7Pjg4Djg6DjgapEaXNjbG9zdXJl44KS55Sf5oiQ44GX44G+44GZ44CCXG4gKi9cbmNvbnN0IGRpc2Nsb3N1cmVBcmJpdHJhcnkgPSAoKTogZmMuQXJiaXRyYXJ5PERpc2Nsb3N1cmU+ID0+IHtcbiAgcmV0dXJuIGZjLnJlY29yZCh7XG4gICAgZGlzY2xvc3VyZV9pZDogZmNcbiAgICAgIC50dXBsZShcbiAgICAgICAgZmMuZGF0ZSh7IG1pbjogbmV3IERhdGUoJzIwMjAtMDEtMDEnKSwgbWF4OiBuZXcgRGF0ZSgnMjAzMC0xMi0zMScpIH0pLFxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAxMDAwLCBtYXg6IDk5OTkgfSksXG4gICAgICAgIGZjLmludGVnZXIoeyBtaW46IDAsIG1heDogOTk5IH0pXG4gICAgICApXG4gICAgICAubWFwKChbZGF0ZSwgY29tcGFueUNvZGUsIHNlcV0pID0+IHtcbiAgICAgICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgY29uc3QgbW9udGggPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgY29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICBjb25zdCBkYXRlU3RyID0gYCR7eWVhcn0ke21vbnRofSR7ZGF5fWA7XG4gICAgICAgIGNvbnN0IGNvbXBhbnlDb2RlU3RyID0gU3RyaW5nKGNvbXBhbnlDb2RlKTtcbiAgICAgICAgY29uc3Qgc2VxU3RyID0gU3RyaW5nKHNlcSkucGFkU3RhcnQoMywgJzAnKTtcbiAgICAgICAgcmV0dXJuIGAke2RhdGVTdHJ9XyR7Y29tcGFueUNvZGVTdHJ9XyR7c2VxU3RyfWA7XG4gICAgICB9KSxcbiAgICBjb21wYW55X2NvZGU6IGZjLmludGVnZXIoeyBtaW46IDEwMDAsIG1heDogOTk5OSB9KS5tYXAoU3RyaW5nKSxcbiAgICBjb21wYW55X25hbWU6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAxMDAgfSksXG4gICAgZGlzY2xvc3VyZV90eXBlOiBmYy5jb25zdGFudEZyb20oJ+axuueul+efreS/oScsICfmnInkvqHoqLzliLjloLHlkYrmm7gnLCAn6YGp5pmC6ZaL56S6JywgJ+OBneOBruS7licpLFxuICAgIHRpdGxlOiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMjAwIH0pLFxuICAgIGRpc2Nsb3NlZF9hdDogZmNcbiAgICAgIC5kYXRlKHsgbWluOiBuZXcgRGF0ZSgnMjAyMC0wMS0wMScpLCBtYXg6IG5ldyBEYXRlKERhdGUubm93KCkpIH0pXG4gICAgICAubWFwKChkYXRlKSA9PiBkYXRlLnRvSVNPU3RyaW5nKCkpLFxuICAgIHBkZl91cmw6IGZjXG4gICAgICAud2ViVXJsKClcbiAgICAgIC5tYXAoKHVybCkgPT4gYCR7dXJsfS9kaXNjbG9zdXJlLnBkZmApXG4gICAgICAuZmlsdGVyKCh1cmwpID0+IHVybC5sZW5ndGggPD0gNTAwKSxcbiAgICBzM19rZXk6IGZjXG4gICAgICAudHVwbGUoXG4gICAgICAgIGZjLmRhdGUoeyBtaW46IG5ldyBEYXRlKCcyMDIwLTAxLTAxJyksIG1heDogbmV3IERhdGUoJzIwMzAtMTItMzEnKSB9KSxcbiAgICAgICAgZmMuaW50ZWdlcih7IG1pbjogMTAwMCwgbWF4OiA5OTk5IH0pLFxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDk5OSB9KVxuICAgICAgKVxuICAgICAgLm1hcCgoW2RhdGUsIGNvbXBhbnlDb2RlLCBzZXFdKSA9PiB7XG4gICAgICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICAgIGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGAke3llYXJ9JHttb250aH0ke2RheX1gO1xuICAgICAgICBjb25zdCBjb21wYW55Q29kZVN0ciA9IFN0cmluZyhjb21wYW55Q29kZSk7XG4gICAgICAgIGNvbnN0IHNlcVN0ciA9IFN0cmluZyhzZXEpLnBhZFN0YXJ0KDMsICcwJyk7XG4gICAgICAgIHJldHVybiBgcGRmcy8ke3llYXJ9LyR7bW9udGh9LyR7ZGF0ZVN0cn1fJHtjb21wYW55Q29kZVN0cn1fJHtzZXFTdHJ9LnBkZmA7XG4gICAgICB9KSxcbiAgICBjb2xsZWN0ZWRfYXQ6IGZjXG4gICAgICAuZGF0ZSh7IG1pbjogbmV3IERhdGUoJzIwMjAtMDEtMDEnKSwgbWF4OiBuZXcgRGF0ZShEYXRlLm5vdygpKSB9KVxuICAgICAgLm1hcCgoZGF0ZSkgPT4gZGF0ZS50b0lTT1N0cmluZygpKSxcbiAgICBkYXRlX3BhcnRpdGlvbjogZmNcbiAgICAgIC5kYXRlKHsgbWluOiBuZXcgRGF0ZSgnMjAyMC0wMS0wMScpLCBtYXg6IG5ldyBEYXRlKCcyMDMwLTEyLTMxJykgfSlcbiAgICAgIC5tYXAoKGRhdGUpID0+IHtcbiAgICAgICAgLy8gSlNU5Z+65rqW44GnZGF0ZV9wYXJ0aXRpb27jgpLnlJ/miJBcbiAgICAgICAgY29uc3QganN0RGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpICsgOSAqIDYwICogNjAgKiAxMDAwKTtcbiAgICAgICAgY29uc3QgeWVhciA9IGpzdERhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICAgICAgY29uc3QgbW9udGggPSBTdHJpbmcoanN0RGF0ZS5nZXRVVENNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9YDtcbiAgICAgIH0pLFxuICB9KTtcbn07XG5cbmRlc2NyaWJlKCdEaXNjbG9zdXJlIFByb3BlcnR5IFRlc3RzJywgKCkgPT4ge1xuICBkZXNjcmliZSgnUHJvcGVydHkgMzog44Oh44K/44OH44O844K/44Gu5b+F6aCI44OV44Kj44O844Or44OJJywgKCkgPT4ge1xuICAgIGl0KCd0b0R5bmFtb0RCSXRlbeOBr+S7u+aEj+OBrkRpc2Nsb3N1cmXjgavlr77jgZfjgablv4XpoIjjg5XjgqPjg7zjg6vjg4njgpLjgZnjgbnjgablkKvjgoAnLCAoKSA9PiB7XG4gICAgICBmYy5hc3NlcnQoXG4gICAgICAgIGZjLnByb3BlcnR5KGRpc2Nsb3N1cmVBcmJpdHJhcnkoKSwgKGRpc2Nsb3N1cmUpID0+IHtcbiAgICAgICAgICAvLyB0b0R5bmFtb0RCSXRlbeOCkuWun+ihjFxuICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0b0R5bmFtb0RCSXRlbShkaXNjbG9zdXJlKTtcblxuICAgICAgICAgIC8vIOW/hemgiOODleOCo+ODvOODq+ODieOBruWtmOWcqOeiuuiqjVxuICAgICAgICAgIGNvbnN0IHJlcXVpcmVkRmllbGRzID0gW1xuICAgICAgICAgICAgJ2Rpc2Nsb3N1cmVfaWQnLFxuICAgICAgICAgICAgJ2NvbXBhbnlfY29kZScsXG4gICAgICAgICAgICAnY29tcGFueV9uYW1lJyxcbiAgICAgICAgICAgICdkaXNjbG9zdXJlX3R5cGUnLFxuICAgICAgICAgICAgJ3RpdGxlJyxcbiAgICAgICAgICAgICdkaXNjbG9zZWRfYXQnLFxuICAgICAgICAgICAgJ3BkZl91cmwnLFxuICAgICAgICAgICAgJ3MzX2tleScsXG4gICAgICAgICAgICAnY29sbGVjdGVkX2F0JyxcbiAgICAgICAgICAgICdkYXRlX3BhcnRpdGlvbicsXG4gICAgICAgICAgXTtcblxuICAgICAgICAgIC8vIOOBmeOBueOBpuOBruW/hemgiOODleOCo+ODvOODq+ODieOBjOWtmOWcqOOBmeOCi+OBk+OBqOOCkueiuuiqjVxuICAgICAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgcmVxdWlyZWRGaWVsZHMpIHtcbiAgICAgICAgICAgIGV4cGVjdChpdGVtW2ZpZWxkXSkudG9CZURlZmluZWQoKTtcbiAgICAgICAgICAgIGV4cGVjdChpdGVtW2ZpZWxkXS5TKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICAgICAgZXhwZWN0KHR5cGVvZiBpdGVtW2ZpZWxkXS5TKS50b0JlKCdzdHJpbmcnKTtcbiAgICAgICAgICAgIGV4cGVjdChpdGVtW2ZpZWxkXS5TIS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyDjg5XjgqPjg7zjg6vjg4nlgKTjgYzlhYPjga5EaXNjbG9zdXJl44Go5LiA6Ie044GZ44KL44GT44Go44KS56K66KqNXG4gICAgICAgICAgZXhwZWN0KGl0ZW0uZGlzY2xvc3VyZV9pZC5TKS50b0JlKGRpc2Nsb3N1cmUuZGlzY2xvc3VyZV9pZCk7XG4gICAgICAgICAgZXhwZWN0KGl0ZW0uY29tcGFueV9jb2RlLlMpLnRvQmUoZGlzY2xvc3VyZS5jb21wYW55X2NvZGUpO1xuICAgICAgICAgIGV4cGVjdChpdGVtLmNvbXBhbnlfbmFtZS5TKS50b0JlKGRpc2Nsb3N1cmUuY29tcGFueV9uYW1lKTtcbiAgICAgICAgICBleHBlY3QoaXRlbS5kaXNjbG9zdXJlX3R5cGUuUykudG9CZShkaXNjbG9zdXJlLmRpc2Nsb3N1cmVfdHlwZSk7XG4gICAgICAgICAgZXhwZWN0KGl0ZW0udGl0bGUuUykudG9CZShkaXNjbG9zdXJlLnRpdGxlKTtcbiAgICAgICAgICBleHBlY3QoaXRlbS5kaXNjbG9zZWRfYXQuUykudG9CZShkaXNjbG9zdXJlLmRpc2Nsb3NlZF9hdCk7XG4gICAgICAgICAgZXhwZWN0KGl0ZW0ucGRmX3VybC5TKS50b0JlKGRpc2Nsb3N1cmUucGRmX3VybCk7XG4gICAgICAgICAgZXhwZWN0KGl0ZW0uczNfa2V5LlMpLnRvQmUoZGlzY2xvc3VyZS5zM19rZXkpO1xuICAgICAgICAgIGV4cGVjdChpdGVtLmNvbGxlY3RlZF9hdC5TKS50b0JlKGRpc2Nsb3N1cmUuY29sbGVjdGVkX2F0KTtcbiAgICAgICAgICBleHBlY3QoaXRlbS5kYXRlX3BhcnRpdGlvbi5TKS50b0JlKGRpc2Nsb3N1cmUuZGF0ZV9wYXJ0aXRpb24pO1xuICAgICAgICB9KSxcbiAgICAgICAgeyBudW1SdW5zOiAxMDAwIH0gLy8gMTAwMOWbnuOBruWPjeW+qeWun+ihjFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdmcm9tRHluYW1vREJJdGVt44Gv5Lu75oSP44GuRHluYW1vREJJdGVt44Gr5a++44GX44Gm5b+F6aCI44OV44Kj44O844Or44OJ44KS44GZ44G544Gm5ZCr44KARGlzY2xvc3VyZeOCkui/lOOBmScsICgpID0+IHtcbiAgICAgIGZjLmFzc2VydChcbiAgICAgICAgZmMucHJvcGVydHkoZGlzY2xvc3VyZUFyYml0cmFyeSgpLCAoZGlzY2xvc3VyZSkgPT4ge1xuICAgICAgICAgIC8vIHRvRHluYW1vREJJdGVtIOKGkiBmcm9tRHluYW1vREJJdGVtIOOBruODqeOCpuODs+ODieODiOODquODg+ODl1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0b0R5bmFtb0RCSXRlbShkaXNjbG9zdXJlKTtcbiAgICAgICAgICBjb25zdCByZXN0b3JlZCA9IGZyb21EeW5hbW9EQkl0ZW0oaXRlbSk7XG5cbiAgICAgICAgICAvLyDlv4XpoIjjg5XjgqPjg7zjg6vjg4njga7lrZjlnKjnorroqo1cbiAgICAgICAgICBleHBlY3QocmVzdG9yZWQuZGlzY2xvc3VyZV9pZCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgICBleHBlY3QocmVzdG9yZWQuY29tcGFueV9jb2RlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICAgIGV4cGVjdChyZXN0b3JlZC5jb21wYW55X25hbWUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgICAgZXhwZWN0KHJlc3RvcmVkLmRpc2Nsb3N1cmVfdHlwZSkudG9CZURlZmluZWQoKTtcbiAgICAgICAgICBleHBlY3QocmVzdG9yZWQudGl0bGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgICAgZXhwZWN0KHJlc3RvcmVkLmRpc2Nsb3NlZF9hdCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgICBleHBlY3QocmVzdG9yZWQucGRmX3VybCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgICBleHBlY3QocmVzdG9yZWQuczNfa2V5KS50b0JlRGVmaW5lZCgpO1xuICAgICAgICAgIGV4cGVjdChyZXN0b3JlZC5jb2xsZWN0ZWRfYXQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgICAgZXhwZWN0KHJlc3RvcmVkLmRhdGVfcGFydGl0aW9uKS50b0JlRGVmaW5lZCgpO1xuXG4gICAgICAgICAgLy8g44OV44Kj44O844Or44OJ5YCk44GM5YWD44GuRGlzY2xvc3VyZeOBqOS4gOiHtOOBmeOCi+OBk+OBqOOCkueiuuiqjVxuICAgICAgICAgIGV4cGVjdChyZXN0b3JlZC5kaXNjbG9zdXJlX2lkKS50b0JlKGRpc2Nsb3N1cmUuZGlzY2xvc3VyZV9pZCk7XG4gICAgICAgICAgZXhwZWN0KHJlc3RvcmVkLmNvbXBhbnlfY29kZSkudG9CZShkaXNjbG9zdXJlLmNvbXBhbnlfY29kZSk7XG4gICAgICAgICAgZXhwZWN0KHJlc3RvcmVkLmNvbXBhbnlfbmFtZSkudG9CZShkaXNjbG9zdXJlLmNvbXBhbnlfbmFtZSk7XG4gICAgICAgICAgZXhwZWN0KHJlc3RvcmVkLmRpc2Nsb3N1cmVfdHlwZSkudG9CZShkaXNjbG9zdXJlLmRpc2Nsb3N1cmVfdHlwZSk7XG4gICAgICAgICAgZXhwZWN0KHJlc3RvcmVkLnRpdGxlKS50b0JlKGRpc2Nsb3N1cmUudGl0bGUpO1xuICAgICAgICAgIGV4cGVjdChyZXN0b3JlZC5kaXNjbG9zZWRfYXQpLnRvQmUoZGlzY2xvc3VyZS5kaXNjbG9zZWRfYXQpO1xuICAgICAgICAgIGV4cGVjdChyZXN0b3JlZC5wZGZfdXJsKS50b0JlKGRpc2Nsb3N1cmUucGRmX3VybCk7XG4gICAgICAgICAgZXhwZWN0KHJlc3RvcmVkLnMzX2tleSkudG9CZShkaXNjbG9zdXJlLnMzX2tleSk7XG4gICAgICAgICAgZXhwZWN0KHJlc3RvcmVkLmNvbGxlY3RlZF9hdCkudG9CZShkaXNjbG9zdXJlLmNvbGxlY3RlZF9hdCk7XG4gICAgICAgICAgZXhwZWN0KHJlc3RvcmVkLmRhdGVfcGFydGl0aW9uKS50b0JlKGRpc2Nsb3N1cmUuZGF0ZV9wYXJ0aXRpb24pO1xuICAgICAgICB9KSxcbiAgICAgICAgeyBudW1SdW5zOiAxMDAwIH1cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgndmFsaWRhdGVEaXNjbG9zdXJl44Gv5b+F6aCI44OV44Kj44O844Or44OJ44GM5qyg6JC944GX44Gm44GE44KL5aC05ZCI44GrVmFsaWRhdGlvbkVycm9y44KS44K544Ot44O844GZ44KLJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWlyZWRGaWVsZHM6IEFycmF5PGtleW9mIERpc2Nsb3N1cmU+ID0gW1xuICAgICAgICAnZGlzY2xvc3VyZV9pZCcsXG4gICAgICAgICdjb21wYW55X2NvZGUnLFxuICAgICAgICAnY29tcGFueV9uYW1lJyxcbiAgICAgICAgJ2Rpc2Nsb3N1cmVfdHlwZScsXG4gICAgICAgICd0aXRsZScsXG4gICAgICAgICdkaXNjbG9zZWRfYXQnLFxuICAgICAgICAncGRmX3VybCcsXG4gICAgICAgICdzM19rZXknLFxuICAgICAgICAnY29sbGVjdGVkX2F0JyxcbiAgICAgICAgJ2RhdGVfcGFydGl0aW9uJyxcbiAgICAgIF07XG5cbiAgICAgIGZjLmFzc2VydChcbiAgICAgICAgZmMucHJvcGVydHkoXG4gICAgICAgICAgZGlzY2xvc3VyZUFyYml0cmFyeSgpLFxuICAgICAgICAgIGZjLmNvbnN0YW50RnJvbSguLi5yZXF1aXJlZEZpZWxkcyksXG4gICAgICAgICAgKGRpc2Nsb3N1cmUsIGZpZWxkVG9SZW1vdmUpID0+IHtcbiAgICAgICAgICAgIC8vIDHjgaTjga7jg5XjgqPjg7zjg6vjg4njgpLliYrpmaRcbiAgICAgICAgICAgIGNvbnN0IGluY29tcGxldGVEaXNjbG9zdXJlID0geyAuLi5kaXNjbG9zdXJlIH07XG4gICAgICAgICAgICBkZWxldGUgKGluY29tcGxldGVEaXNjbG9zdXJlIGFzIGFueSlbZmllbGRUb1JlbW92ZV07XG5cbiAgICAgICAgICAgIC8vIHZhbGlkYXRlRGlzY2xvc3VyZeOBjFZhbGlkYXRpb25FcnJvcuOCkuOCueODreODvOOBmeOCi+OBk+OBqOOCkueiuuiqjVxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHZhbGlkYXRlRGlzY2xvc3VyZShpbmNvbXBsZXRlRGlzY2xvc3VyZSkpLnRvVGhyb3coVmFsaWRhdGlvbkVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgICksXG4gICAgICAgIHsgbnVtUnVuczogMTAwIH0gLy8g44OV44Kj44O844Or44OJ5YmK6Zmk44Gu44OG44K544OI44GvMTAw5Zue44Gn5Y2B5YiGXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUHJvcGVydHk6IOODqeOCpuODs+ODieODiOODquODg+ODl+OBruS4gOiyq+aApycsICgpID0+IHtcbiAgICBpdCgndG9EeW5hbW9EQkl0ZW0g4oaSIGZyb21EeW5hbW9EQkl0ZW0g44Gu44Op44Km44Oz44OJ44OI44Oq44OD44OX44Gn5YWD44GuRGlzY2xvc3VyZeOBjOW+qeWFg+OBleOCjOOCiycsICgpID0+IHtcbiAgICAgIGZjLmFzc2VydChcbiAgICAgICAgZmMucHJvcGVydHkoZGlzY2xvc3VyZUFyYml0cmFyeSgpLCAoZGlzY2xvc3VyZSkgPT4ge1xuICAgICAgICAgIC8vIOODqeOCpuODs+ODieODiOODquODg+ODl1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0b0R5bmFtb0RCSXRlbShkaXNjbG9zdXJlKTtcbiAgICAgICAgICBjb25zdCByZXN0b3JlZCA9IGZyb21EeW5hbW9EQkl0ZW0oaXRlbSk7XG5cbiAgICAgICAgICAvLyDlrozlhajjgavkuIDoh7TjgZnjgovjgZPjgajjgpLnorroqo1cbiAgICAgICAgICBleHBlY3QocmVzdG9yZWQpLnRvRXF1YWwoZGlzY2xvc3VyZSk7XG4gICAgICAgIH0pLFxuICAgICAgICB7IG51bVJ1bnM6IDEwMDAgfVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Byb3BlcnR5OiBjcmVhdGVEaXNjbG9zdXJl44Gu5q2j56K65oCnJywgKCkgPT4ge1xuICAgIGl0KCdjcmVhdGVEaXNjbG9zdXJl44Gv5pyJ5Yq544GqRGlzY2xvc3VyZeOCkueUn+aIkOOBmeOCiycsICgpID0+IHtcbiAgICAgIGZjLmFzc2VydChcbiAgICAgICAgZmMucHJvcGVydHkoXG4gICAgICAgICAgZmMuaW50ZWdlcih7IG1pbjogMTAwMCwgbWF4OiA5OTk5IH0pLm1hcChTdHJpbmcpLFxuICAgICAgICAgIGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAxMDAgfSksXG4gICAgICAgICAgZmMuY29uc3RhbnRGcm9tKCfmsbrnrpfnn63kv6EnLCAn5pyJ5L6h6Ki85Yi45aCx5ZGK5pu4JywgJ+mBqeaZgumWi+ekuicsICfjgZ3jga7ku5YnKSxcbiAgICAgICAgICBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMjAwIH0pLFxuICAgICAgICAgIGZjXG4gICAgICAgICAgICAuZGF0ZSh7IG1pbjogbmV3IERhdGUoJzIwMjAtMDEtMDEnKSwgbWF4OiBuZXcgRGF0ZShEYXRlLm5vdygpKSB9KVxuICAgICAgICAgICAgLm1hcCgoZCkgPT4gZC50b0lTT1N0cmluZygpKSxcbiAgICAgICAgICBmYy53ZWJVcmwoKS5tYXAoKHVybCkgPT4gYCR7dXJsfS9kaXNjbG9zdXJlLnBkZmApLFxuICAgICAgICAgIGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAyMDAgfSksXG4gICAgICAgICAgKGNvbXBhbnlDb2RlLCBjb21wYW55TmFtZSwgZGlzY2xvc3VyZVR5cGUsIHRpdGxlLCBkaXNjbG9zZWRBdCwgcGRmVXJsLCBkaXNjbG9zdXJlSWQpID0+IHtcbiAgICAgICAgICAgIC8vIGNyZWF0ZURpc2Nsb3N1cmXjgpLlrp/ooYxcbiAgICAgICAgICAgIGNvbnN0IGRpc2Nsb3N1cmUgPSBjcmVhdGVEaXNjbG9zdXJlKHtcbiAgICAgICAgICAgICAgZGlzY2xvc3VyZV9pZDogZGlzY2xvc3VyZUlkLFxuICAgICAgICAgICAgICBjb21wYW55X2NvZGU6IGNvbXBhbnlDb2RlLFxuICAgICAgICAgICAgICBjb21wYW55X25hbWU6IGNvbXBhbnlOYW1lLFxuICAgICAgICAgICAgICBkaXNjbG9zdXJlX3R5cGU6IGRpc2Nsb3N1cmVUeXBlLFxuICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgICAgICAgIGRpc2Nsb3NlZF9hdDogZGlzY2xvc2VkQXQsXG4gICAgICAgICAgICAgIHBkZl91cmw6IHBkZlVybCxcbiAgICAgICAgICAgICAgczNfa2V5OiBgcGRmcy8ke2Rpc2Nsb3N1cmVJZH0ucGRmYCxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyDlv4XpoIjjg5XjgqPjg7zjg6vjg4njgYzlrZjlnKjjgZnjgovjgZPjgajjgpLnorroqo1cbiAgICAgICAgICAgIGV4cGVjdChkaXNjbG9zdXJlLmRpc2Nsb3N1cmVfaWQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgICAgICBleHBlY3QoZGlzY2xvc3VyZS5jb21wYW55X2NvZGUpLnRvQmUoY29tcGFueUNvZGUpO1xuICAgICAgICAgICAgZXhwZWN0KGRpc2Nsb3N1cmUuY29tcGFueV9uYW1lKS50b0JlKGNvbXBhbnlOYW1lKTtcbiAgICAgICAgICAgIGV4cGVjdChkaXNjbG9zdXJlLmRpc2Nsb3N1cmVfdHlwZSkudG9CZShkaXNjbG9zdXJlVHlwZSk7XG4gICAgICAgICAgICBleHBlY3QoZGlzY2xvc3VyZS50aXRsZSkudG9CZSh0aXRsZSk7XG4gICAgICAgICAgICBleHBlY3QoZGlzY2xvc3VyZS5kaXNjbG9zZWRfYXQpLnRvQmUoZGlzY2xvc2VkQXQpO1xuICAgICAgICAgICAgZXhwZWN0KGRpc2Nsb3N1cmUucGRmX3VybCkudG9CZShwZGZVcmwpO1xuICAgICAgICAgICAgZXhwZWN0KGRpc2Nsb3N1cmUuczNfa2V5KS50b0JlRGVmaW5lZCgpO1xuICAgICAgICAgICAgZXhwZWN0KGRpc2Nsb3N1cmUuY29sbGVjdGVkX2F0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgICAgICAgZXhwZWN0KGRpc2Nsb3N1cmUuZGF0ZV9wYXJ0aXRpb24pLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgICAgICAgIC8vIGRhdGVfcGFydGl0aW9u44GMWVlZWS1NTeW9ouW8j+OBp+OBguOCi+OBk+OBqOOCkueiuuiqjVxuICAgICAgICAgICAgZXhwZWN0KGRpc2Nsb3N1cmUuZGF0ZV9wYXJ0aXRpb24pLnRvTWF0Y2goL15cXGR7NH0tXFxkezJ9JC8pO1xuXG4gICAgICAgICAgICAvLyBjb2xsZWN0ZWRfYXTjgYxJU08gODYwMeW9ouW8j+OBp+OBguOCi+OBk+OBqOOCkueiuuiqjVxuICAgICAgICAgICAgZXhwZWN0KGRpc2Nsb3N1cmUuY29sbGVjdGVkX2F0KS50b01hdGNoKFxuICAgICAgICAgICAgICAvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9VFxcZHsyfTpcXGR7Mn06XFxkezJ9XFwuXFxkezN9WiQvXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyB2YWxpZGF0ZURpc2Nsb3N1cmXjgYzmiJDlip/jgZnjgovjgZPjgajjgpLnorroqo1cbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiB2YWxpZGF0ZURpc2Nsb3N1cmUoZGlzY2xvc3VyZSkpLm5vdC50b1Rocm93KCk7XG4gICAgICAgICAgfVxuICAgICAgICApLFxuICAgICAgICB7IG51bVJ1bnM6IDEwMDAgfVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Byb3BlcnR5IDQ6IOmWi+ekuklE44Gu5LiA5oSP5oCnJywgKCkgPT4ge1xuICAgIGl0KCdnZW5lcmF0ZURpc2Nsb3N1cmVJZOOBr+eVsOOBquOCi+WFpeWKm+OBq+WvvuOBl+OBpueVsOOBquOCi0lE44KS55Sf5oiQ44GZ44KLJywgKCkgPT4ge1xuICAgICAgZmMuYXNzZXJ0KFxuICAgICAgICBmYy5wcm9wZXJ0eShcbiAgICAgICAgICBmYy5hcnJheShcbiAgICAgICAgICAgIGZjLnR1cGxlKFxuICAgICAgICAgICAgICBmY1xuICAgICAgICAgICAgICAgIC5kYXRlKHsgbWluOiBuZXcgRGF0ZSgnMjAyMC0wMS0wMScpLCBtYXg6IG5ldyBEYXRlKERhdGUubm93KCkpIH0pXG4gICAgICAgICAgICAgICAgLm1hcCgoZCkgPT4gZC50b0lTT1N0cmluZygpKSxcbiAgICAgICAgICAgICAgZmMuaW50ZWdlcih7IG1pbjogMTAwMCwgbWF4OiA5OTk5IH0pLm1hcChTdHJpbmcpLFxuICAgICAgICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDk5OSB9KVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHsgbWluTGVuZ3RoOiAyLCBtYXhMZW5ndGg6IDEwMCB9XG4gICAgICAgICAgKSxcbiAgICAgICAgICAoaW5wdXRzKSA9PiB7XG4gICAgICAgICAgICAvLyDjgZnjgbnjgabjga7lhaXlipvjgavlr77jgZfjgaZJROOCkueUn+aIkFxuICAgICAgICAgICAgY29uc3QgaWRzID0gaW5wdXRzLm1hcCgoW2Rpc2Nsb3NlZEF0LCBjb21wYW55Q29kZSwgc2VxdWVuY2VdKSA9PlxuICAgICAgICAgICAgICBnZW5lcmF0ZURpc2Nsb3N1cmVJZChkaXNjbG9zZWRBdCwgY29tcGFueUNvZGUsIHNlcXVlbmNlKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8g6YeN6KSH44KS6Zmk5Y67XG4gICAgICAgICAgICBjb25zdCB1bmlxdWVJZHMgPSBuZXcgU2V0KGlkcyk7XG5cbiAgICAgICAgICAgIC8vIOeVsOOBquOCi+WFpeWKm+OBq+WvvuOBl+OBpuOBr+eVsOOBquOCi0lE44GM55Sf5oiQ44GV44KM44KL44GT44Go44KS56K66KqNXG4gICAgICAgICAgICAvLyDvvIjjgZ/jgaDjgZfjgIHlkIzjgZjml6Xjg7vlkIzjgZjkvIHmpa3jgrPjg7zjg4njg7vlkIzjgZjpgKPnlarjga7loLTlkIjjga/lkIzjgZhJROOBq+OBquOCi++8iVxuICAgICAgICAgICAgY29uc3QgdW5pcXVlSW5wdXRzID0gbmV3IFNldChcbiAgICAgICAgICAgICAgaW5wdXRzLm1hcCgoW2Rpc2Nsb3NlZEF0LCBjb21wYW55Q29kZSwgc2VxdWVuY2VdKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRpc2Nsb3NlZEF0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBqc3REYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkgKyA5ICogNjAgKiA2MCAqIDEwMDApO1xuICAgICAgICAgICAgICAgIGNvbnN0IHllYXIgPSBqc3REYXRlLmdldFVUQ0Z1bGxZZWFyKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9udGggPSBTdHJpbmcoanN0RGF0ZS5nZXRVVENNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXkgPSBTdHJpbmcoanN0RGF0ZS5nZXRVVENEYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3llYXJ9JHttb250aH0ke2RheX1fJHtjb21wYW55Q29kZX1fJHtTdHJpbmcoc2VxdWVuY2UpLnBhZFN0YXJ0KDMsICcwJyl9YDtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIOS4gOaEj+OBquWFpeWKm+OBruaVsOOBqOS4gOaEj+OBqklE44Gu5pWw44GM5LiA6Ie044GZ44KL44GT44Go44KS56K66KqNXG4gICAgICAgICAgICBleHBlY3QodW5pcXVlSWRzLnNpemUpLnRvQmUodW5pcXVlSW5wdXRzLnNpemUpO1xuICAgICAgICAgIH1cbiAgICAgICAgKSxcbiAgICAgICAgeyBudW1SdW5zOiAxMDAgfVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdnZW5lcmF0ZURpc2Nsb3N1cmVJZOOBr+WQjOOBmOWFpeWKm+OBq+WvvuOBl+OBpuWQjOOBmElE44KS55Sf5oiQ44GZ44KL77yI5Yaq562J5oCn77yJJywgKCkgPT4ge1xuICAgICAgZmMuYXNzZXJ0KFxuICAgICAgICBmYy5wcm9wZXJ0eShcbiAgICAgICAgICBmY1xuICAgICAgICAgICAgLmRhdGUoeyBtaW46IG5ldyBEYXRlKCcyMDIwLTAxLTAxJyksIG1heDogbmV3IERhdGUoRGF0ZS5ub3coKSkgfSlcbiAgICAgICAgICAgIC5tYXAoKGQpID0+IGQudG9JU09TdHJpbmcoKSksXG4gICAgICAgICAgZmMuaW50ZWdlcih7IG1pbjogMTAwMCwgbWF4OiA5OTk5IH0pLm1hcChTdHJpbmcpLFxuICAgICAgICAgIGZjLmludGVnZXIoeyBtaW46IDAsIG1heDogOTk5IH0pLFxuICAgICAgICAgIChkaXNjbG9zZWRBdCwgY29tcGFueUNvZGUsIHNlcXVlbmNlKSA9PiB7XG4gICAgICAgICAgICAvLyDlkIzjgZjlhaXlipvjgacy5ZueSUTjgpLnlJ/miJBcbiAgICAgICAgICAgIGNvbnN0IGlkMSA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKGRpc2Nsb3NlZEF0LCBjb21wYW55Q29kZSwgc2VxdWVuY2UpO1xuICAgICAgICAgICAgY29uc3QgaWQyID0gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoZGlzY2xvc2VkQXQsIGNvbXBhbnlDb2RlLCBzZXF1ZW5jZSk7XG5cbiAgICAgICAgICAgIC8vIOWQjOOBmElE44GM55Sf5oiQ44GV44KM44KL44GT44Go44KS56K66KqNXG4gICAgICAgICAgICBleHBlY3QoaWQxKS50b0JlKGlkMik7XG4gICAgICAgICAgfVxuICAgICAgICApLFxuICAgICAgICB7IG51bVJ1bnM6IDEwMDAgfVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==