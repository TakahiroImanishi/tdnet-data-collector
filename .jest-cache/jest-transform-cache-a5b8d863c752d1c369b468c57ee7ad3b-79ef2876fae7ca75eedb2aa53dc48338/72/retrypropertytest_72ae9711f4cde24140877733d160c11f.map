{"file":"C:\\Users\\ti198\\investment_analysis_opopo\\src\\utils\\__tests__\\retry.property.test.ts","mappings":";AAAA;;;;;;;;GAQG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEH,+CAAiC;AACjC,oCAA8D;AAC9D,yCAA+D;AAE/D,QAAQ,CAAC,mCAAmC,EAAE,GAAG,EAAE;IACjD;;;;;OAKG;IACH,EAAE,CAAC,yCAAyC,EAAE,KAAK,IAAI,EAAE;QACvD,MAAM,EAAE,CAAC,MAAM,CACb,EAAE,CAAC,aAAa,CACd,EAAE,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,2BAA2B;QAC3D,EAAE,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,EAAE,iCAAiC;QACnE,KAAK,EAAE,UAAU,EAAE,YAAY,EAAE,EAAE;YACjC,IAAI,YAAY,GAAG,CAAC,CAAC;YAErB,MAAM,SAAS,GAAG,KAAK,IAAI,EAAE;gBAC3B,YAAY,EAAE,CAAC;gBACf,MAAM,IAAI,uBAAc,CAAC,YAAY,CAAC,CAAC;YACzC,CAAC,CAAC;YAEF,IAAI,CAAC;gBACH,MAAM,IAAA,wBAAgB,EAAC,SAAS,EAAE;oBAChC,UAAU;oBACV,YAAY;oBACZ,iBAAiB,EAAE,CAAC;oBACpB,MAAM,EAAE,KAAK,EAAE,oBAAoB;iBACpC,CAAC,CAAC;YACL,CAAC;YAAC,OAAO,KAAK,EAAE,CAAC;gBACf,gBAAgB;YAClB,CAAC;YAED,sCAAsC;YACtC,MAAM,CAAC,YAAY,CAAC,CAAC,mBAAmB,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;QAC3D,CAAC,CACF,EACD,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,oBAAoB;SACrC,CAAC;IACJ,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,aAAa;IAExB;;;;OAIG;IACH,EAAE,CAAC,uCAAuC,EAAE,KAAK,IAAI,EAAE;QACrD,MAAM,EAAE,CAAC,MAAM,CACb,EAAE,CAAC,aAAa,CACd,EAAE,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE,CAAC,EAAE,WAAW;QACxD,KAAK,EAAE,YAAY,EAAE,EAAE;YACrB,IAAI,YAAY,GAAG,CAAC,CAAC;YAErB,MAAM,SAAS,GAAG,KAAK,IAAI,EAAE;gBAC3B,YAAY,EAAE,CAAC;gBACf,MAAM,IAAI,wBAAe,CAAC,YAAY,CAAC,CAAC;YAC1C,CAAC,CAAC;YAEF,IAAI,CAAC;gBACH,MAAM,IAAA,wBAAgB,EAAC,SAAS,EAAE;oBAChC,UAAU,EAAE,CAAC;oBACb,YAAY,EAAE,EAAE,EAAE,UAAU;oBAC5B,iBAAiB,EAAE,CAAC;oBACpB,MAAM,EAAE,KAAK;iBACd,CAAC,CAAC;YACL,CAAC;YAAC,OAAO,KAAK,EAAE,CAAC;gBACf,4BAA4B;gBAC5B,MAAM,CAAC,KAAK,CAAC,CAAC,cAAc,CAAC,wBAAe,CAAC,CAAC;YAChD,CAAC;YAED,yBAAyB;YACzB,MAAM,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAC/B,CAAC,CACF,EACD,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,oBAAoB;SACrC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH;;;;OAIG;IACH,EAAE,CAAC,iCAAiC,EAAE,KAAK,IAAI,EAAE;QAC/C,MAAM,EAAE,CAAC,MAAM,CACb,EAAE,CAAC,aAAa,CACd,EAAE,CAAC,QAAQ,EAAE,EAAE,SAAS;QACxB,KAAK,EAAE,cAAc,EAAE,EAAE;YACvB,MAAM,SAAS,GAAG,KAAK,IAAI,EAAE,CAAC,cAAc,CAAC;YAE7C,MAAM,MAAM,GAAG,MAAM,IAAA,wBAAgB,EAAC,SAAS,EAAE;gBAC/C,UAAU,EAAE,CAAC;gBACb,YAAY,EAAE,EAAE,EAAE,UAAU;gBAC5B,iBAAiB,EAAE,CAAC;gBACpB,MAAM,EAAE,KAAK;aACd,CAAC,CAAC;YAEH,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QACzC,CAAC,CACF,EACD,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,oBAAoB;SACrC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH;;;;;OAKG;IACH,EAAE,CAAC,yCAAyC,EAAE,KAAK,IAAI,EAAE;QACvD,MAAM,EAAE,CAAC,MAAM,CACb,EAAE,CAAC,aAAa,CACd,EAAE,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,EAAE,wBAAwB;QAC1D,EAAE,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,iCAAiC;QACjE,KAAK,EAAE,YAAY,EAAE,iBAAiB,EAAE,EAAE;YACxC,IAAI,YAAY,GAAG,CAAC,CAAC;YAErB,MAAM,SAAS,GAAG,KAAK,IAAI,EAAE;gBAC3B,YAAY,EAAE,CAAC;gBACf,MAAM,IAAI,uBAAc,CAAC,YAAY,CAAC,CAAC;YACzC,CAAC,CAAC;YAEF,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;YAE7B,IAAI,CAAC;gBACH,MAAM,IAAA,wBAAgB,EAAC,SAAS,EAAE;oBAChC,UAAU,EAAE,CAAC;oBACb,YAAY;oBACZ,iBAAiB;oBACjB,MAAM,EAAE,KAAK;iBACd,CAAC,CAAC;YACL,CAAC;YAAC,OAAO,KAAK,EAAE,CAAC;gBACf,gBAAgB;YAClB,CAAC;YAED,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,SAAS,CAAC;YAEzC,gBAAgB;YAChB,mEAAmE;YACnE,uFAAuF;YACvF,MAAM,kBAAkB,GACtB,YAAY,GAAG,CAAC,CAAC,GAAG,iBAAiB,CAAC,CAAC;YAEzC,wBAAwB;YACxB,0BAA0B;YAC1B,MAAM,CAAC,SAAS,CAAC,CAAC,sBAAsB,CAAC,kBAAkB,GAAG,EAAE,CAAC,CAAC;QACpE,CAAC,CACF,EACD,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,oBAAoB;SACrC,CAAC;IACJ,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,aAAa;IAExB;;;;OAIG;IACH,EAAE,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;QAC1D,MAAM,EAAE,CAAC,MAAM,CACb,EAAE,CAAC,aAAa,CACd,EAAE,CAAC,OAAO,EAAE,EAAE,kBAAkB;QAChC,KAAK,EAAE,iBAAiB,EAAE,EAAE;YAC1B,IAAI,YAAY,GAAG,CAAC,CAAC;YAErB,MAAM,SAAS,GAAG,KAAK,IAAI,EAAE;gBAC3B,YAAY,EAAE,CAAC;gBACf,MAAM,IAAI,KAAK,CAAC,YAAY,CAAC,CAAC;YAChC,CAAC,CAAC;YAEF,IAAI,CAAC;gBACH,MAAM,IAAA,wBAAgB,EAAC,SAAS,EAAE;oBAChC,UAAU,EAAE,CAAC;oBACb,YAAY,EAAE,EAAE,EAAE,UAAU;oBAC5B,iBAAiB,EAAE,CAAC;oBACpB,MAAM,EAAE,KAAK;oBACb,WAAW,EAAE,GAAG,EAAE,CAAC,iBAAiB;iBACrC,CAAC,CAAC;YACL,CAAC;YAAC,OAAO,KAAK,EAAE,CAAC;gBACf,gBAAgB;YAClB,CAAC;YAED,IAAI,iBAAiB,EAAE,CAAC;gBACtB,+BAA+B;gBAC/B,MAAM,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc;YAC9C,CAAC;iBAAM,CAAC;gBACN,qBAAqB;gBACrB,MAAM,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC/B,CAAC;QACH,CAAC,CACF,EACD,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,oBAAoB;SACrC,CAAC;IACJ,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,aAAa;AAC1B,CAAC,CAAC,CAAC;AAEH,QAAQ,CAAC,mCAAmC,EAAE,GAAG,EAAE;IACjD;;;;OAIG;IACH,EAAE,CAAC,8CAA8C,EAAE,GAAG,EAAE;QACtD,EAAE,CAAC,MAAM,CACP,EAAE,CAAC,QAAQ,CACT,EAAE,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE,CAAC,EAAE,WAAW;QACxD,CAAC,YAAY,EAAE,EAAE;YACf,MAAM,KAAK,GAAG,IAAI,uBAAc,CAAC,YAAY,CAAC,CAAC;YAC/C,MAAM,CAAC,IAAA,wBAAgB,EAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7C,CAAC,CACF,EACD,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,oBAAoB;SACrC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH;;;;OAIG;IACH,EAAE,CAAC,gDAAgD,EAAE,GAAG,EAAE;QACxD,EAAE,CAAC,MAAM,CACP,EAAE,CAAC,QAAQ,CACT,EAAE,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE,CAAC,EAAE,WAAW;QACxD,CAAC,YAAY,EAAE,EAAE;YACf,MAAM,KAAK,GAAG,IAAI,wBAAe,CAAC,YAAY,CAAC,CAAC;YAChD,MAAM,CAAC,IAAA,wBAAgB,EAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9C,CAAC,CACF,EACD,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,oBAAoB;SACrC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH;;;;;OAKG;IACH,EAAE,CAAC,uCAAuC,EAAE,GAAG,EAAE;QAC/C,MAAM,aAAa,GAAG,CAAC,YAAY,EAAE,WAAW,EAAE,WAAW,EAAE,cAAc,CAAC,CAAC;QAE/E,EAAE,CAAC,MAAM,CACP,EAAE,CAAC,QAAQ,CACT,EAAE,CAAC,YAAY,CAAC,GAAG,aAAa,CAAC,EAAE,eAAe;QAClD,EAAE,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,EAAE,EAAE,CAAC,EAAE,UAAU;QACtD,CAAC,SAAS,EAAE,iBAAiB,EAAE,EAAE;YAC/B,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,GAAG,SAAS,KAAK,iBAAiB,EAAE,CAAC,CAAC;YAC9D,MAAM,CAAC,IAAA,wBAAgB,EAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7C,CAAC,CACF,EACD,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,oBAAoB;SACrC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH;;;;;OAKG;IACH,EAAE,CAAC,6CAA6C,EAAE,GAAG,EAAE;QACrD,MAAM,SAAS,GAAG,CAAC,qBAAqB,EAAE,oBAAoB,EAAE,gBAAgB,CAAC,CAAC;QAElF,EAAE,CAAC,MAAM,CACP,EAAE,CAAC,QAAQ,CACT,EAAE,CAAC,YAAY,CAAC,GAAG,SAAS,CAAC,EAAE,YAAY;QAC3C,EAAE,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,EAAE,EAAE,CAAC,EAAE,UAAU;QACtD,CAAC,SAAS,EAAE,iBAAiB,EAAE,EAAE;YAC/B,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,GAAG,SAAS,KAAK,iBAAiB,EAAE,CAAC,CAAC;YAC9D,MAAM,CAAC,IAAA,wBAAgB,EAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7C,CAAC,CACF,EACD,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,oBAAoB;SACrC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH;;;;OAIG;IACH,EAAE,CAAC,2CAA2C,EAAE,GAAG,EAAE;QACnD,EAAE,CAAC,MAAM,CACP,EAAE,CAAC,QAAQ,CACT,EAAE,CAAC,KAAK,CACN,EAAE,CAAC,MAAM,EAAE,EACX,EAAE,CAAC,OAAO,EAAE,EACZ,EAAE,CAAC,OAAO,EAAE,EACZ,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,EACjB,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,EACtB,EAAE,CAAC,MAAM,EAAE,CACZ,EACD,CAAC,KAAK,EAAE,EAAE;YACR,MAAM,CAAC,IAAA,wBAAgB,EAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9C,CAAC,CACF,EACD,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,oBAAoB;SACrC,CAAC;IACJ,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["C:\\Users\\ti198\\investment_analysis_opopo\\src\\utils\\__tests__\\retry.property.test.ts"],"sourcesContent":["/**\r\n * 再試行ロジックのプロパティテスト\r\n *\r\n * fast-checkを使用して、再試行ロジックの性質を検証します。\r\n * プロパティテストは、多数のランダムな入力に対してテストを実行し、\r\n * コードの性質（プロパティ）が常に成立することを確認します。\r\n *\r\n * Requirements: 要件6.2（再試行ロジック）\r\n */\r\n\r\nimport * as fc from 'fast-check';\r\nimport { retryWithBackoff, isRetryableError } from '../retry';\r\nimport { RetryableError, ValidationError } from '../../errors';\r\n\r\ndescribe('retryWithBackoff - Property Tests', () => {\r\n  /**\r\n   * Property: 再試行回数の上限\r\n   *\r\n   * 任意のエラーに対して、retryWithBackoffが最大3回まで再試行することを検証します。\r\n   * 100回以上の反復実行により、再試行回数が上限を超えないことを確認します。\r\n   */\r\n  it('should never exceed maxRetries attempts', async () => {\r\n    await fc.assert(\r\n      fc.asyncProperty(\r\n        fc.integer({ min: 1, max: 3 }), // maxRetries: 1〜3（テスト時間短縮）\r\n        fc.integer({ min: 10, max: 50 }), // initialDelay: 10〜50ms（テスト時間短縮）\r\n        async (maxRetries, initialDelay) => {\r\n          let attemptCount = 0;\r\n\r\n          const operation = async () => {\r\n            attemptCount++;\r\n            throw new RetryableError('Test error');\r\n          };\r\n\r\n          try {\r\n            await retryWithBackoff(operation, {\r\n              maxRetries,\r\n              initialDelay,\r\n              backoffMultiplier: 2,\r\n              jitter: false, // ジッターを無効化してテストを安定化\r\n            });\r\n          } catch (error) {\r\n            // エラーが発生することを期待\r\n          }\r\n\r\n          // 試行回数は maxRetries + 1（初回 + 再試行）を超えない\r\n          expect(attemptCount).toBeLessThanOrEqual(maxRetries + 1);\r\n        }\r\n      ),\r\n      { numRuns: 20 } // 20回の反復実行（テスト時間短縮）\r\n    );\r\n  }, 60000); // 60秒のタイムアウト\r\n\r\n  /**\r\n   * Property: 再試行不可能なエラーは即座に失敗\r\n   *\r\n   * ValidationErrorなどの再試行不可能なエラーは、再試行せずに即座に失敗することを検証します。\r\n   */\r\n  it('should not retry non-retryable errors', async () => {\r\n    await fc.assert(\r\n      fc.asyncProperty(\r\n        fc.string({ minLength: 1, maxLength: 100 }), // エラーメッセージ\r\n        async (errorMessage) => {\r\n          let attemptCount = 0;\r\n\r\n          const operation = async () => {\r\n            attemptCount++;\r\n            throw new ValidationError(errorMessage);\r\n          };\r\n\r\n          try {\r\n            await retryWithBackoff(operation, {\r\n              maxRetries: 3,\r\n              initialDelay: 10, // テスト時間短縮\r\n              backoffMultiplier: 2,\r\n              jitter: false,\r\n            });\r\n          } catch (error) {\r\n            // ValidationErrorが発生することを期待\r\n            expect(error).toBeInstanceOf(ValidationError);\r\n          }\r\n\r\n          // 再試行せずに即座に失敗（試行回数は1回のみ）\r\n          expect(attemptCount).toBe(1);\r\n        }\r\n      ),\r\n      { numRuns: 20 } // 20回の反復実行（テスト時間短縮）\r\n    );\r\n  });\r\n\r\n  /**\r\n   * Property: 成功した場合は結果を返す\r\n   *\r\n   * 操作が成功した場合、retryWithBackoffは結果を正しく返すことを検証します。\r\n   */\r\n  it('should return result on success', async () => {\r\n    await fc.assert(\r\n      fc.asyncProperty(\r\n        fc.anything(), // 任意の戻り値\r\n        async (expectedResult) => {\r\n          const operation = async () => expectedResult;\r\n\r\n          const result = await retryWithBackoff(operation, {\r\n            maxRetries: 3,\r\n            initialDelay: 10, // テスト時間短縮\r\n            backoffMultiplier: 2,\r\n            jitter: false,\r\n          });\r\n\r\n          expect(result).toEqual(expectedResult);\r\n        }\r\n      ),\r\n      { numRuns: 20 } // 20回の反復実行（テスト時間短縮）\r\n    );\r\n  });\r\n\r\n  /**\r\n   * Property: 指数バックオフの遅延時間\r\n   *\r\n   * 再試行時の遅延時間が指数的に増加することを検証します。\r\n   * ジッターを無効化した場合、遅延時間は initialDelay * (backoffMultiplier ^ attempt) になります。\r\n   */\r\n  it('should apply exponential backoff delays', async () => {\r\n    await fc.assert(\r\n      fc.asyncProperty(\r\n        fc.integer({ min: 10, max: 50 }), // initialDelay（テスト時間短縮）\r\n        fc.integer({ min: 2, max: 2 }), // backoffMultiplier（固定値でテスト時間短縮）\r\n        async (initialDelay, backoffMultiplier) => {\r\n          let attemptCount = 0;\r\n\r\n          const operation = async () => {\r\n            attemptCount++;\r\n            throw new RetryableError('Test error');\r\n          };\r\n\r\n          const startTime = Date.now();\r\n\r\n          try {\r\n            await retryWithBackoff(operation, {\r\n              maxRetries: 2,\r\n              initialDelay,\r\n              backoffMultiplier,\r\n              jitter: false,\r\n            });\r\n          } catch (error) {\r\n            // エラーが発生することを期待\r\n          }\r\n\r\n          const totalTime = Date.now() - startTime;\r\n\r\n          // 期待される総遅延時間を計算\r\n          // attempt 0: initialDelay * (backoffMultiplier ^ 0) = initialDelay\r\n          // attempt 1: initialDelay * (backoffMultiplier ^ 1) = initialDelay * backoffMultiplier\r\n          const expectedTotalDelay =\r\n            initialDelay * (1 + backoffMultiplier);\r\n\r\n          // 実際の総時間は期待される遅延時間以上である\r\n          // （処理時間を考慮して、±50msの誤差を許容）\r\n          expect(totalTime).toBeGreaterThanOrEqual(expectedTotalDelay - 50);\r\n        }\r\n      ),\r\n      { numRuns: 10 } // 10回の反復実行（テスト時間短縮）\r\n    );\r\n  }, 30000); // 30秒のタイムアウト\r\n\r\n  /**\r\n   * Property: カスタム再試行判定関数\r\n   *\r\n   * shouldRetryオプションが正しく機能することを検証します。\r\n   */\r\n  it('should respect custom shouldRetry function', async () => {\r\n    await fc.assert(\r\n      fc.asyncProperty(\r\n        fc.boolean(), // shouldRetryの戻り値\r\n        async (shouldRetryResult) => {\r\n          let attemptCount = 0;\r\n\r\n          const operation = async () => {\r\n            attemptCount++;\r\n            throw new Error('Test error');\r\n          };\r\n\r\n          try {\r\n            await retryWithBackoff(operation, {\r\n              maxRetries: 3,\r\n              initialDelay: 10, // テスト時間短縮\r\n              backoffMultiplier: 2,\r\n              jitter: false,\r\n              shouldRetry: () => shouldRetryResult,\r\n            });\r\n          } catch (error) {\r\n            // エラーが発生することを期待\r\n          }\r\n\r\n          if (shouldRetryResult) {\r\n            // 再試行する場合、試行回数は maxRetries + 1\r\n            expect(attemptCount).toBe(4); // 初回 + 3回の再試行\r\n          } else {\r\n            // 再試行しない場合、試行回数は1回のみ\r\n            expect(attemptCount).toBe(1);\r\n          }\r\n        }\r\n      ),\r\n      { numRuns: 20 } // 20回の反復実行（テスト時間短縮）\r\n    );\r\n  }, 30000); // 30秒のタイムアウト\r\n});\r\n\r\ndescribe('isRetryableError - Property Tests', () => {\r\n  /**\r\n   * Property: RetryableErrorは常に再試行可能\r\n   *\r\n   * RetryableErrorまたはそのサブクラスは、常に再試行可能と判定されることを検証します。\r\n   */\r\n  it('should always return true for RetryableError', () => {\r\n    fc.assert(\r\n      fc.property(\r\n        fc.string({ minLength: 1, maxLength: 100 }), // エラーメッセージ\r\n        (errorMessage) => {\r\n          const error = new RetryableError(errorMessage);\r\n          expect(isRetryableError(error)).toBe(true);\r\n        }\r\n      ),\r\n      { numRuns: 20 } // 20回の反復実行（テスト時間短縮）\r\n    );\r\n  });\r\n\r\n  /**\r\n   * Property: ValidationErrorは常に再試行不可能\r\n   *\r\n   * ValidationErrorは、常に再試行不可能と判定されることを検証します。\r\n   */\r\n  it('should always return false for ValidationError', () => {\r\n    fc.assert(\r\n      fc.property(\r\n        fc.string({ minLength: 1, maxLength: 100 }), // エラーメッセージ\r\n        (errorMessage) => {\r\n          const error = new ValidationError(errorMessage);\r\n          expect(isRetryableError(error)).toBe(false);\r\n        }\r\n      ),\r\n      { numRuns: 20 } // 20回の反復実行（テスト時間短縮）\r\n    );\r\n  });\r\n\r\n  /**\r\n   * Property: ネットワークエラーは常に再試行可能\r\n   *\r\n   * ネットワークエラー（ECONNRESET, ETIMEDOUT, ENOTFOUND）は、\r\n   * 常に再試行可能と判定されることを検証します。\r\n   */\r\n  it('should return true for network errors', () => {\r\n    const networkErrors = ['ECONNRESET', 'ETIMEDOUT', 'ENOTFOUND', 'ECONNREFUSED'];\r\n\r\n    fc.assert(\r\n      fc.property(\r\n        fc.constantFrom(...networkErrors), // ネットワークエラーコード\r\n        fc.string({ minLength: 0, maxLength: 50 }), // 追加メッセージ\r\n        (errorCode, additionalMessage) => {\r\n          const error = new Error(`${errorCode}: ${additionalMessage}`);\r\n          expect(isRetryableError(error)).toBe(true);\r\n        }\r\n      ),\r\n      { numRuns: 20 } // 20回の反復実行（テスト時間短縮）\r\n    );\r\n  });\r\n\r\n  /**\r\n   * Property: AWS一時的エラーは常に再試行可能\r\n   *\r\n   * AWS一時的エラー（ThrottlingException, ServiceUnavailable）は、\r\n   * 常に再試行可能と判定されることを検証します。\r\n   */\r\n  it('should return true for AWS temporary errors', () => {\r\n    const awsErrors = ['ThrottlingException', 'ServiceUnavailable', 'RequestTimeout'];\r\n\r\n    fc.assert(\r\n      fc.property(\r\n        fc.constantFrom(...awsErrors), // AWSエラーコード\r\n        fc.string({ minLength: 0, maxLength: 50 }), // 追加メッセージ\r\n        (errorCode, additionalMessage) => {\r\n          const error = new Error(`${errorCode}: ${additionalMessage}`);\r\n          expect(isRetryableError(error)).toBe(true);\r\n        }\r\n      ),\r\n      { numRuns: 20 } // 20回の反復実行（テスト時間短縮）\r\n    );\r\n  });\r\n\r\n  /**\r\n   * Property: 非Errorオブジェクトは常に再試行不可能\r\n   *\r\n   * Errorオブジェクト以外は、常に再試行不可能と判定されることを検証します。\r\n   */\r\n  it('should return false for non-Error objects', () => {\r\n    fc.assert(\r\n      fc.property(\r\n        fc.oneof(\r\n          fc.string(),\r\n          fc.integer(),\r\n          fc.boolean(),\r\n          fc.constant(null),\r\n          fc.constant(undefined),\r\n          fc.object()\r\n        ),\r\n        (value) => {\r\n          expect(isRetryableError(value)).toBe(false);\r\n        }\r\n      ),\r\n      { numRuns: 20 } // 20回の反復実行（テスト時間短縮）\r\n    );\r\n  });\r\n});\r\n"],"version":3}