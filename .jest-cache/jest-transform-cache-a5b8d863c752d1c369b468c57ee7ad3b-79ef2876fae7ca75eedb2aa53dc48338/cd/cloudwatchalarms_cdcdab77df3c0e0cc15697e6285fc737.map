{"version":3,"names":["cdk","cov_1njnsr0wer","s","__importStar","require","cloudwatch","cloudwatch_actions","sns","subscriptions","constructs_1","CloudWatchAlarms","Construct","alertTopic","alarms","constructor","scope","id","props","f","errorRateThreshold","b","durationThreshold","collectionSuccessRateThreshold","Topic","topicName","environment","displayName","alertEmail","addSubscription","EmailSubscription","lambdaFunctions","forEach","lambdaFunction","index","functionName","alarmIdPrefix","errorRateAlarm","Alarm","alarmName","alarmDescription","metric","createErrorRateMetric","threshold","evaluationPeriods","comparisonOperator","ComparisonOperator","GREATER_THAN_THRESHOLD","treatMissingData","TreatMissingData","NOT_BREACHING","addAlarmAction","SnsAction","push","durationAlarm","metricDuration","statistic","period","Duration","minutes","throttleAlarm","metricThrottles","GREATER_THAN_OR_EQUAL_TO_THRESHOLD","collectionSuccessRateAlarm","createCollectionSuccessRateMetric","LESS_THAN_THRESHOLD","noDataAlarm","Metric","namespace","metricName","hours","dimensionsMap","Environment","BREACHING","collectionFailureAlarm","CfnOutput","value","topicArn","description","exportName","length","toString","errors","metricErrors","invocations","metricInvocations","MathExpression","expression","usingMetrics","label","collected","failed","exports"],"sources":["C:\\Users\\ti198\\investment_analysis_opopo\\cdk\\lib\\constructs\\cloudwatch-alarms.ts"],"sourcesContent":["import * as cdk from 'aws-cdk-lib';\r\nimport * as cloudwatch from 'aws-cdk-lib/aws-cloudwatch';\r\nimport * as cloudwatch_actions from 'aws-cdk-lib/aws-cloudwatch-actions';\r\nimport * as sns from 'aws-cdk-lib/aws-sns';\r\nimport * as subscriptions from 'aws-cdk-lib/aws-sns-subscriptions';\r\nimport * as lambda from 'aws-cdk-lib/aws-lambda';\r\nimport { Construct } from 'constructs';\r\n\r\n/**\r\n * CloudWatch Alarms Construct Properties\r\n */\r\nexport interface CloudWatchAlarmsProps {\r\n  /**\r\n   * Lambda関数のリスト（監視対象）\r\n   */\r\n  lambdaFunctions: lambda.IFunction[];\r\n\r\n  /**\r\n   * 環境名（dev, staging, prod）\r\n   */\r\n  environment: string;\r\n\r\n  /**\r\n   * アラート通知先メールアドレス（オプション）\r\n   */\r\n  alertEmail?: string;\r\n\r\n  /**\r\n   * Lambda Error Rate閾値（デフォルト: 10%）\r\n   */\r\n  errorRateThreshold?: number;\r\n\r\n  /**\r\n   * Lambda Duration閾値（秒、デフォルト: 840秒 = 14分）\r\n   */\r\n  durationThreshold?: number;\r\n\r\n  /**\r\n   * CollectionSuccessRate閾値（デフォルト: 95%）\r\n   */\r\n  collectionSuccessRateThreshold?: number;\r\n}\r\n\r\n/**\r\n * CloudWatch Alarms Construct\r\n * \r\n * Lambda関数とシステム全体の監視アラームを設定します。\r\n * \r\n * 設定されるアラーム:\r\n * - Lambda Error Rate > 10% → Critical\r\n * - Lambda Duration > 14分 → Warning\r\n * - CollectionSuccessRate < 95% → Warning\r\n * - SNS Topicへの通知設定\r\n */\r\nexport class CloudWatchAlarms extends Construct {\r\n  /**\r\n   * SNS Topic（アラート通知用）\r\n   */\r\n  public readonly alertTopic: sns.Topic;\r\n\r\n  /**\r\n   * 作成されたアラームのリスト\r\n   */\r\n  public readonly alarms: cloudwatch.Alarm[] = [];\r\n\r\n  constructor(scope: Construct, id: string, props: CloudWatchAlarmsProps) {\r\n    super(scope, id);\r\n\r\n    // デフォルト値の設定\r\n    const errorRateThreshold = props.errorRateThreshold ?? 10; // 10%\r\n    const durationThreshold = props.durationThreshold ?? 840; // 14分 = 840秒\r\n    const collectionSuccessRateThreshold = props.collectionSuccessRateThreshold ?? 95; // 95%\r\n\r\n    // ========================================\r\n    // SNS Topic作成（アラート通知用）\r\n    // ========================================\r\n    this.alertTopic = new sns.Topic(this, 'AlertTopic', {\r\n      topicName: `tdnet-alerts-${props.environment}`,\r\n      displayName: `TDnet Data Collector Alerts (${props.environment})`,\r\n    });\r\n\r\n    // メール通知の追加（オプション）\r\n    if (props.alertEmail) {\r\n      this.alertTopic.addSubscription(\r\n        new subscriptions.EmailSubscription(props.alertEmail)\r\n      );\r\n    }\r\n\r\n    // ========================================\r\n    // Lambda関数ごとのアラーム設定\r\n    // ========================================\r\n    props.lambdaFunctions.forEach((lambdaFunction, index) => {\r\n      const functionName = lambdaFunction.functionName;\r\n      // CDK IDには静的な値を使用（トークンを含めない）\r\n      const alarmIdPrefix = `LambdaFunction${index}`;\r\n\r\n      // 1. Lambda Error Rate アラーム（Critical）\r\n      const errorRateAlarm = new cloudwatch.Alarm(this, `${alarmIdPrefix}ErrorRateAlarm`, {\r\n        alarmName: `${functionName}-error-rate-${props.environment}`,\r\n        alarmDescription: `Lambda関数 ${functionName} のエラー率が ${errorRateThreshold}% を超えました`,\r\n        metric: this.createErrorRateMetric(lambdaFunction),\r\n        threshold: errorRateThreshold,\r\n        evaluationPeriods: 1,\r\n        comparisonOperator: cloudwatch.ComparisonOperator.GREATER_THAN_THRESHOLD,\r\n        treatMissingData: cloudwatch.TreatMissingData.NOT_BREACHING,\r\n      });\r\n\r\n      errorRateAlarm.addAlarmAction(new cloudwatch_actions.SnsAction(this.alertTopic));\r\n      this.alarms.push(errorRateAlarm);\r\n\r\n      // 2. Lambda Duration アラーム（Warning）\r\n      const durationAlarm = new cloudwatch.Alarm(this, `${alarmIdPrefix}DurationAlarm`, {\r\n        alarmName: `${functionName}-duration-${props.environment}`,\r\n        alarmDescription: `Lambda関数 ${functionName} の実行時間が ${durationThreshold} 秒を超えました`,\r\n        metric: lambdaFunction.metricDuration({\r\n          statistic: 'Average',\r\n          period: cdk.Duration.minutes(5),\r\n        }),\r\n        threshold: durationThreshold * 1000, // ミリ秒に変換\r\n        evaluationPeriods: 2,\r\n        comparisonOperator: cloudwatch.ComparisonOperator.GREATER_THAN_THRESHOLD,\r\n        treatMissingData: cloudwatch.TreatMissingData.NOT_BREACHING,\r\n      });\r\n\r\n      durationAlarm.addAlarmAction(new cloudwatch_actions.SnsAction(this.alertTopic));\r\n      this.alarms.push(durationAlarm);\r\n\r\n      // 3. Lambda Throttles アラーム（Critical）\r\n      const throttleAlarm = new cloudwatch.Alarm(this, `${alarmIdPrefix}ThrottleAlarm`, {\r\n        alarmName: `${functionName}-throttles-${props.environment}`,\r\n        alarmDescription: `Lambda関数 ${functionName} でスロットリングが発生しました`,\r\n        metric: lambdaFunction.metricThrottles({\r\n          statistic: 'Sum',\r\n          period: cdk.Duration.minutes(5),\r\n        }),\r\n        threshold: 1,\r\n        evaluationPeriods: 1,\r\n        comparisonOperator: cloudwatch.ComparisonOperator.GREATER_THAN_OR_EQUAL_TO_THRESHOLD,\r\n        treatMissingData: cloudwatch.TreatMissingData.NOT_BREACHING,\r\n      });\r\n\r\n      throttleAlarm.addAlarmAction(new cloudwatch_actions.SnsAction(this.alertTopic));\r\n      this.alarms.push(throttleAlarm);\r\n    });\r\n\r\n    // ========================================\r\n    // カスタムメトリクスのアラーム\r\n    // ========================================\r\n\r\n    // 4. CollectionSuccessRate アラーム（Warning）\r\n    const collectionSuccessRateAlarm = new cloudwatch.Alarm(\r\n      this,\r\n      'CollectionSuccessRateAlarm',\r\n      {\r\n        alarmName: `tdnet-collection-success-rate-${props.environment}`,\r\n        alarmDescription: `収集成功率が ${collectionSuccessRateThreshold}% を下回りました`,\r\n        metric: this.createCollectionSuccessRateMetric(props.environment),\r\n        threshold: collectionSuccessRateThreshold,\r\n        evaluationPeriods: 1,\r\n        comparisonOperator: cloudwatch.ComparisonOperator.LESS_THAN_THRESHOLD,\r\n        treatMissingData: cloudwatch.TreatMissingData.NOT_BREACHING,\r\n      }\r\n    );\r\n\r\n    collectionSuccessRateAlarm.addAlarmAction(\r\n      new cloudwatch_actions.SnsAction(this.alertTopic)\r\n    );\r\n    this.alarms.push(collectionSuccessRateAlarm);\r\n\r\n    // 5. データ収集停止アラーム（Critical）\r\n    const noDataAlarm = new cloudwatch.Alarm(this, 'NoDataCollectedAlarm', {\r\n      alarmName: `tdnet-no-data-collected-${props.environment}`,\r\n      alarmDescription: '24時間データ収集がありません',\r\n      metric: new cloudwatch.Metric({\r\n        namespace: 'TDnet/Collector',\r\n        metricName: 'DisclosuresCollected',\r\n        statistic: 'Sum',\r\n        period: cdk.Duration.hours(24),\r\n        dimensionsMap: {\r\n          Environment: props.environment,\r\n        },\r\n      }),\r\n      threshold: 1,\r\n      evaluationPeriods: 1,\r\n      comparisonOperator: cloudwatch.ComparisonOperator.LESS_THAN_THRESHOLD,\r\n      treatMissingData: cloudwatch.TreatMissingData.BREACHING,\r\n    });\r\n\r\n    noDataAlarm.addAlarmAction(new cloudwatch_actions.SnsAction(this.alertTopic));\r\n    this.alarms.push(noDataAlarm);\r\n\r\n    // 6. 収集失敗アラーム（Warning）\r\n    const collectionFailureAlarm = new cloudwatch.Alarm(this, 'CollectionFailureAlarm', {\r\n      alarmName: `tdnet-collection-failures-${props.environment}`,\r\n      alarmDescription: '24時間で10件以上の収集失敗が発生しました',\r\n      metric: new cloudwatch.Metric({\r\n        namespace: 'TDnet/Collector',\r\n        metricName: 'DisclosuresFailed',\r\n        statistic: 'Sum',\r\n        period: cdk.Duration.hours(24),\r\n        dimensionsMap: {\r\n          Environment: props.environment,\r\n        },\r\n      }),\r\n      threshold: 10,\r\n      evaluationPeriods: 1,\r\n      comparisonOperator: cloudwatch.ComparisonOperator.GREATER_THAN_THRESHOLD,\r\n      treatMissingData: cloudwatch.TreatMissingData.NOT_BREACHING,\r\n    });\r\n\r\n    collectionFailureAlarm.addAlarmAction(new cloudwatch_actions.SnsAction(this.alertTopic));\r\n    this.alarms.push(collectionFailureAlarm);\r\n\r\n    // ========================================\r\n    // CloudFormation Outputs\r\n    // ========================================\r\n    new cdk.CfnOutput(this, 'AlertTopicArn', {\r\n      value: this.alertTopic.topicArn,\r\n      description: 'SNS Topic ARN for alerts',\r\n      exportName: `TdnetAlertTopicArn-${props.environment}`,\r\n    });\r\n\r\n    new cdk.CfnOutput(this, 'AlarmCount', {\r\n      value: this.alarms.length.toString(),\r\n      description: 'Number of CloudWatch Alarms created',\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Lambda Error Rateメトリクスを作成\r\n   * \r\n   * Error Rate = (Errors / Invocations) * 100\r\n   */\r\n  private createErrorRateMetric(lambdaFunction: lambda.IFunction): cloudwatch.IMetric {\r\n    const errors = lambdaFunction.metricErrors({\r\n      statistic: 'Sum',\r\n      period: cdk.Duration.minutes(5),\r\n    });\r\n\r\n    const invocations = lambdaFunction.metricInvocations({\r\n      statistic: 'Sum',\r\n      period: cdk.Duration.minutes(5),\r\n    });\r\n\r\n    // Error Rate = (Errors / Invocations) * 100\r\n    return new cloudwatch.MathExpression({\r\n      expression: '(errors / invocations) * 100',\r\n      usingMetrics: {\r\n        errors,\r\n        invocations,\r\n      },\r\n      label: 'Error Rate (%)',\r\n      period: cdk.Duration.minutes(5),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * CollectionSuccessRateメトリクスを作成\r\n   * \r\n   * Success Rate = (DisclosuresCollected / (DisclosuresCollected + DisclosuresFailed)) * 100\r\n   */\r\n  private createCollectionSuccessRateMetric(environment: string): cloudwatch.IMetric {\r\n    const collected = new cloudwatch.Metric({\r\n      namespace: 'TDnet/Collector',\r\n      metricName: 'DisclosuresCollected',\r\n      statistic: 'Sum',\r\n      period: cdk.Duration.hours(1),\r\n      dimensionsMap: {\r\n        Environment: environment,\r\n      },\r\n    });\r\n\r\n    const failed = new cloudwatch.Metric({\r\n      namespace: 'TDnet/Collector',\r\n      metricName: 'DisclosuresFailed',\r\n      statistic: 'Sum',\r\n      period: cdk.Duration.hours(1),\r\n      dimensionsMap: {\r\n        Environment: environment,\r\n      },\r\n    });\r\n\r\n    // Success Rate = (Collected / (Collected + Failed)) * 100\r\n    return new cloudwatch.MathExpression({\r\n      expression: '(collected / (collected + failed)) * 100',\r\n      usingMetrics: {\r\n        collected,\r\n        failed,\r\n      },\r\n      label: 'Collection Success Rate (%)',\r\n      period: cdk.Duration.hours(1),\r\n    });\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}