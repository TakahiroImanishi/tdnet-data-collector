{"file":"C:\\Users\\ti198\\investment_analysis_opopo\\src\\lambda\\collector\\__tests__\\save-metadata.idempotency.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\ti198\\investment_analysis_opopo\\src\\lambda\\collector\\__tests__\\save-metadata.idempotency.test.ts"],"sourcesContent":["/**\r\n * 重複収集の冪等性テスト\r\n *\r\n * Property 5: 重複収集の冪等性\r\n * Validates: Requirements 2.4\r\n *\r\n * 同じ開示情報を複数回保存しても、DynamoDBには1件のみ保存されることを検証します。\r\n */\r\n\r\nimport { DynamoDBClient, PutItemCommand } from '@aws-sdk/client-dynamodb';\r\nimport { mockClient } from 'aws-sdk-client-mock';\r\nimport * as fc from 'fast-check';\r\nimport { saveMetadata } from '../save-metadata';\r\nimport { Disclosure } from '../../../types';\r\nimport { logger } from '../../../utils/logger';\r\n\r\nconst dynamoMock = mockClient(DynamoDBClient);\r\n\r\ndescribe('Property 5: 重複収集の冪等性', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    dynamoMock.reset();\r\n    process.env.DYNAMODB_TABLE = 'test-table';\r\n    \r\n    // logger.warnのモック\r\n    jest.spyOn(logger, 'warn').mockImplementation();\r\n    jest.spyOn(logger, 'info').mockImplementation();\r\n    jest.spyOn(logger, 'error').mockImplementation();\r\n  });\r\n\r\n  afterEach(() => {\r\n    jest.restoreAllMocks();\r\n  });\r\n\r\n  describe('ユニットテスト', () => {\r\n    it('同じ開示情報を2回保存しても1件のみ保存される', async () => {\r\n      // Arrange\r\n      const disclosure: Disclosure = {\r\n        disclosure_id: 'TD20240115001',\r\n        company_code: '1234',\r\n        company_name: '株式会社サンプル',\r\n        disclosure_type: '決算短信',\r\n        title: '2024年3月期 第3四半期決算短信',\r\n        disclosed_at: '2024-01-15T10:30:00Z',\r\n        pdf_url: 'https://www.release.tdnet.info/inbs/140120240115001.pdf',\r\n        s3_key: '',\r\n        collected_at: '',\r\n        date_partition: '',\r\n      };\r\n      const s3_key = '2024/01/15/TD20240115001.pdf';\r\n\r\n      // 1回目は成功\r\n      dynamoMock.on(PutItemCommand).resolvesOnce({});\r\n\r\n      // 2回目は重複エラー\r\n      const conditionalCheckError = new Error('ConditionalCheckFailedException');\r\n      conditionalCheckError.name = 'ConditionalCheckFailedException';\r\n      dynamoMock.on(PutItemCommand).rejectsOnce(conditionalCheckError);\r\n\r\n      // Act\r\n      await saveMetadata(disclosure, s3_key); // 1回目\r\n      await saveMetadata(disclosure, s3_key); // 2回目（重複）\r\n\r\n      // Assert\r\n      expect(dynamoMock.calls()).toHaveLength(2);\r\n      // 両方とも正常終了（2回目は警告ログのみ）\r\n    });\r\n\r\n    it('重複時に警告ログが出力される', async () => {\r\n      // Arrange\r\n      const disclosure: Disclosure = {\r\n        disclosure_id: 'TD20240115001',\r\n        company_code: '1234',\r\n        company_name: '株式会社サンプル',\r\n        disclosure_type: '決算短信',\r\n        title: '2024年3月期 第3四半期決算短信',\r\n        disclosed_at: '2024-01-15T10:30:00Z',\r\n        pdf_url: 'https://www.release.tdnet.info/inbs/140120240115001.pdf',\r\n        s3_key: '',\r\n        collected_at: '',\r\n        date_partition: '',\r\n      };\r\n      const s3_key = '2024/01/15/TD20240115001.pdf';\r\n\r\n      const conditionalCheckError = new Error('ConditionalCheckFailedException');\r\n      conditionalCheckError.name = 'ConditionalCheckFailedException';\r\n      dynamoMock.on(PutItemCommand).rejects(conditionalCheckError);\r\n\r\n      // Act\r\n      await saveMetadata(disclosure, s3_key);\r\n\r\n      // Assert\r\n      expect(logger.warn).toHaveBeenCalledWith('Duplicate disclosure detected', {\r\n        disclosure_id: 'TD20240115001',\r\n        s3_key: '2024/01/15/TD20240115001.pdf',\r\n      });\r\n    });\r\n\r\n    it('異なる開示IDは両方とも保存される', async () => {\r\n      // Arrange\r\n      const disclosure1: Disclosure = {\r\n        disclosure_id: 'TD20240115001',\r\n        company_code: '1234',\r\n        company_name: '株式会社サンプル',\r\n        disclosure_type: '決算短信',\r\n        title: '2024年3月期 第3四半期決算短信',\r\n        disclosed_at: '2024-01-15T10:30:00Z',\r\n        pdf_url: 'https://www.release.tdnet.info/inbs/140120240115001.pdf',\r\n        s3_key: '',\r\n        collected_at: '',\r\n        date_partition: '',\r\n      };\r\n\r\n      const disclosure2: Disclosure = {\r\n        disclosure_id: 'TD20240115002', // 異なるID\r\n        company_code: '5678',\r\n        company_name: '株式会社別会社',\r\n        disclosure_type: '有価証券報告書',\r\n        title: '2024年3月期 有価証券報告書',\r\n        disclosed_at: '2024-01-15T11:00:00Z',\r\n        pdf_url: 'https://www.release.tdnet.info/inbs/140120240115002.pdf',\r\n        s3_key: '',\r\n        collected_at: '',\r\n        date_partition: '',\r\n      };\r\n\r\n      dynamoMock.on(PutItemCommand).resolves({});\r\n\r\n      // Act\r\n      await saveMetadata(disclosure1, '2024/01/15/TD20240115001.pdf');\r\n      await saveMetadata(disclosure2, '2024/01/15/TD20240115002.pdf');\r\n\r\n      // Assert\r\n      expect(dynamoMock.calls()).toHaveLength(2);\r\n      // 両方とも成功\r\n    });\r\n  });\r\n\r\n  describe('プロパティベーステスト', () => {\r\n    it('任意の開示情報を2回保存しても冪等性が保たれる', async () => {\r\n      await fc.assert(\r\n        fc.asyncProperty(\r\n          fc.record({\r\n            disclosure_id: fc.string({ minLength: 10, maxLength: 20 }),\r\n            company_code: fc.string({ minLength: 4, maxLength: 4 }),\r\n            company_name: fc.string({ minLength: 1, maxLength: 100 }),\r\n            disclosure_type: fc.constantFrom('決算短信', '有価証券報告書', '適時開示'),\r\n            title: fc.string({ minLength: 1, maxLength: 200 }),\r\n            disclosed_at: fc\r\n              .date({ min: new Date('2020-01-01'), max: new Date() })\r\n              .map((d) => d.toISOString()),\r\n            pdf_url: fc.webUrl(),\r\n          }),\r\n          async (disclosureData) => {\r\n            // Arrange\r\n            dynamoMock.reset();\r\n            const disclosure: Disclosure = {\r\n              ...disclosureData,\r\n              s3_key: '',\r\n              collected_at: '',\r\n              date_partition: '',\r\n            };\r\n            const s3_key = `2024/01/15/${disclosure.disclosure_id}.pdf`;\r\n\r\n            // 1回目は成功\r\n            dynamoMock.on(PutItemCommand).resolvesOnce({});\r\n\r\n            // 2回目は重複エラー\r\n            const conditionalCheckError = new Error('ConditionalCheckFailedException');\r\n            conditionalCheckError.name = 'ConditionalCheckFailedException';\r\n            dynamoMock.on(PutItemCommand).rejectsOnce(conditionalCheckError);\r\n\r\n            // Act & Assert\r\n            await expect(saveMetadata(disclosure, s3_key)).resolves.toBeUndefined();\r\n            await expect(saveMetadata(disclosure, s3_key)).resolves.toBeUndefined();\r\n\r\n            // 両方とも正常終了（エラーをスローしない）\r\n            expect(dynamoMock.calls()).toHaveLength(2);\r\n          }\r\n        ),\r\n        { numRuns: 100 } // 100回反復\r\n      );\r\n    });\r\n\r\n    it('複数の異なる開示情報を保存しても、それぞれ1件のみ保存される', async () => {\r\n      await fc.assert(\r\n        fc.asyncProperty(\r\n          fc.array(\r\n            fc.record({\r\n              disclosure_id: fc.string({ minLength: 10, maxLength: 20 }),\r\n              company_code: fc.string({ minLength: 4, maxLength: 4 }),\r\n              company_name: fc.string({ minLength: 1, maxLength: 100 }),\r\n              disclosure_type: fc.constantFrom('決算短信', '有価証券報告書', '適時開示'),\r\n              title: fc.string({ minLength: 1, maxLength: 200 }),\r\n              disclosed_at: fc\r\n                .date({ min: new Date('2020-01-01'), max: new Date() })\r\n                .map((d) => d.toISOString()),\r\n              pdf_url: fc.webUrl(),\r\n            }),\r\n            { minLength: 1, maxLength: 10 }\r\n          ),\r\n          async (disclosuresData) => {\r\n            // Arrange\r\n            dynamoMock.reset();\r\n            dynamoMock.on(PutItemCommand).resolves({});\r\n\r\n            // Act\r\n            for (const disclosureData of disclosuresData) {\r\n              const disclosure: Disclosure = {\r\n                ...disclosureData,\r\n                s3_key: '',\r\n                collected_at: '',\r\n                date_partition: '',\r\n              };\r\n              const s3_key = `2024/01/15/${disclosure.disclosure_id}.pdf`;\r\n              await saveMetadata(disclosure, s3_key);\r\n            }\r\n\r\n            // Assert\r\n            expect(dynamoMock.calls()).toHaveLength(disclosuresData.length);\r\n          }\r\n        ),\r\n        { numRuns: 100 } // 100回反復\r\n      );\r\n    });\r\n  });\r\n});\r\n"],"version":3}