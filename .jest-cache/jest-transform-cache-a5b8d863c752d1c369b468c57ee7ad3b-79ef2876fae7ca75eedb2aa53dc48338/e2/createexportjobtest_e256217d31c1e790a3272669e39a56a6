56870eac581c29890f0d67c6874a6c5a
"use strict";
/**
 * Create Export Job Unit Tests
 *
 * Requirements: 要件14.1（ユニットテスト）
 */
Object.defineProperty(exports, "__esModule", { value: true });
jest.mock('@aws-sdk/client-dynamodb', () => {
    const actualModule = jest.requireActual('@aws-sdk/client-dynamodb');
    return {
        ...actualModule,
        DynamoDBClient: jest.fn().mockImplementation(() => ({
            send: mockSend,
        })),
    };
});
jest.mock('../../../utils/logger', () => ({
    logger: {
        info: mockLoggerInfo,
        error: mockLoggerError,
    },
}));
jest.mock('../../../utils/retry', () => ({
    retryWithBackoff: mockRetryWithBackoff,
}));
// モック設定（importより前に定義）
const mockSend = jest.fn();
const mockRetryWithBackoff = jest.fn();
const mockLoggerInfo = jest.fn();
const mockLoggerError = jest.fn();
const create_export_job_1 = require("../create-export-job");
const client_dynamodb_1 = require("@aws-sdk/client-dynamodb");
describe('createExportJob', () => {
    const mockRequestBody = {
        format: 'json',
        filter: {
            company_code: '1234',
            start_date: '2024-01-01',
            end_date: '2024-01-31',
            disclosure_type: '決算短信',
        },
    };
    const mockRequestId = 'test-request-id-12345678';
    beforeEach(() => {
        jest.clearAllMocks();
        mockSend.mockClear();
        mockRetryWithBackoff.mockClear();
        mockLoggerInfo.mockClear();
        mockLoggerError.mockClear();
        // デフォルトでretryWithBackoffは渡された関数を実行
        mockRetryWithBackoff.mockImplementation(async (fn) => await fn());
        // デフォルトでDynamoDB操作は成功
        mockSend.mockResolvedValue({
            $metadata: { httpStatusCode: 200 },
        });
        // 環境変数設定
        process.env.EXPORT_STATUS_TABLE_NAME = 'test-export-status-table';
        process.env.AWS_REGION = 'ap-northeast-1';
        // Date.now()をモック（一貫したタイムスタンプ）
        jest.spyOn(Date, 'now').mockReturnValue(1705305600000); // 2024-01-15 10:00:00 UTC
        jest.spyOn(Date.prototype, 'toISOString').mockReturnValue('2024-01-15T10:00:00.000Z');
        jest.spyOn(Math, 'random').mockReturnValue(0.123456); // 一貫したランダム値
    });
    afterEach(() => {
        jest.restoreAllMocks();
    });
    describe('エクスポートジョブ作成成功', () => {
        it('エクスポートジョブを正常に作成できる', async () => {
            // Act
            const result = await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            expect(result).toMatchObject({
                status: 'pending',
                requested_at: '2024-01-15T10:00:00.000Z',
                progress: 0,
                format: 'json',
                filter: JSON.stringify(mockRequestBody.filter),
            });
            expect(result.export_id).toMatch(/^export_\d+_[a-z0-9]+_.+$/);
            expect(result.ttl).toBeGreaterThan(Date.now() / 1000);
        });
        it('DynamoDBにPutItemCommandを送信する', async () => {
            // Act
            await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            expect(mockSend).toHaveBeenCalledTimes(1);
            const command = mockSend.mock.calls[0][0];
            expect(command).toBeInstanceOf(client_dynamodb_1.PutItemCommand);
            expect(command.input.TableName).toBe('test-export-status-table');
        });
        it('ログに作成開始と完了を記録する', async () => {
            // Act
            await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            expect(mockLoggerInfo).toHaveBeenCalledWith('Creating export job', expect.objectContaining({
                format: 'json',
                filter: mockRequestBody.filter,
            }));
            expect(mockLoggerInfo).toHaveBeenCalledWith('Export job created successfully', expect.objectContaining({
                status: 'pending',
            }));
            // export_idが両方のログに含まれることを確認
            expect(mockLoggerInfo.mock.calls[0][1]).toHaveProperty('export_id');
            expect(mockLoggerInfo.mock.calls[1][1]).toHaveProperty('export_id');
        });
    });
    describe('エクスポートID生成', () => {
        it('エクスポートIDが正しいフォーマットで生成される', async () => {
            // Act
            const result = await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            // フォーマット: export_タイムスタンプ_ランダム文字列_リクエストID先頭8文字
            expect(result.export_id).toMatch(/^export_\d+_[a-z0-9]+_.+$/);
            expect(result.export_id).toContain('export_');
        });
        it('エクスポートIDにタイムスタンプが含まれる', async () => {
            // Act
            const result = await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            expect(result.export_id).toContain('1705305600000');
        });
        it('エクスポートIDにリクエストIDの先頭8文字が含まれる', async () => {
            // Act
            const result = await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            expect(result.export_id).toContain('test-req');
        });
        it('異なるリクエストIDで異なるエクスポートIDが生成される', async () => {
            // Arrange
            const requestId1 = 'request-id-1-12345678';
            const requestId2 = 'request-id-2-87654321';
            // Act
            const result1 = await (0, create_export_job_1.createExportJob)(mockRequestBody, requestId1);
            // 2回目の呼び出しで異なるランダム値を返す
            jest.spyOn(Math, 'random').mockReturnValue(0.987654);
            const result2 = await (0, create_export_job_1.createExportJob)(mockRequestBody, requestId2);
            // Assert
            expect(result1.export_id).not.toBe(result2.export_id);
        });
    });
    describe('DynamoDB保存', () => {
        it('ステータスがpendingで保存される', async () => {
            // Act
            await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            const command = mockSend.mock.calls[0][0];
            expect(command.input.Item?.status).toEqual({ S: 'pending' });
        });
        it('進捗率が0で保存される', async () => {
            // Act
            await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            const command = mockSend.mock.calls[0][0];
            expect(command.input.Item?.progress).toEqual({ N: '0' });
        });
        it('リクエスト日時がISO 8601形式で保存される', async () => {
            // Act
            await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            const command = mockSend.mock.calls[0][0];
            expect(command.input.Item?.requested_at).toEqual({ S: '2024-01-15T10:00:00.000Z' });
        });
        it('フォーマットが保存される', async () => {
            // Act
            await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            const command = mockSend.mock.calls[0][0];
            expect(command.input.Item?.format).toEqual({ S: 'json' });
        });
        it('フィルターがJSON文字列として保存される', async () => {
            // Act
            await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            const command = mockSend.mock.calls[0][0];
            expect(command.input.Item?.filter).toEqual({
                S: JSON.stringify(mockRequestBody.filter),
            });
        });
        it('CSV形式のリクエストも正しく保存される', async () => {
            // Arrange
            const csvRequestBody = {
                format: 'csv',
                filter: {
                    start_date: '2024-01-01',
                    end_date: '2024-01-31',
                },
            };
            // Act
            await (0, create_export_job_1.createExportJob)(csvRequestBody, mockRequestId);
            // Assert
            const command = mockSend.mock.calls[0][0];
            expect(command.input.Item?.format).toEqual({ S: 'csv' });
        });
    });
    describe('TTL設定', () => {
        it('TTLが30日後に設定される', async () => {
            // Arrange
            const now = Date.now() / 1000; // Unix timestamp (秒)
            const expectedTtl = now + 30 * 24 * 60 * 60; // 30日後
            // Act
            const result = await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            expect(result.ttl).toBeCloseTo(expectedTtl, 0);
        });
        it('TTLがDynamoDBに保存される', async () => {
            // Act
            await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            const command = mockSend.mock.calls[0][0];
            expect(command.input.Item?.ttl).toEqual({
                N: expect.stringMatching(/^\d+$/),
            });
            const ttlValue = parseInt(command.input.Item?.ttl?.N || '0', 10);
            const now = Date.now() / 1000;
            const expectedTtl = now + 30 * 24 * 60 * 60;
            expect(ttlValue).toBeCloseTo(expectedTtl, 0);
        });
    });
    describe('ConditionExpression（重複防止）', () => {
        it('ConditionExpressionが設定される', async () => {
            // Act
            await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            const command = mockSend.mock.calls[0][0];
            expect(command.input.ConditionExpression).toBe('attribute_not_exists(export_id)');
        });
    });
    describe('再試行設定', () => {
        it('retryWithBackoffが呼び出される', async () => {
            // Act
            await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            expect(mockRetryWithBackoff).toHaveBeenCalledTimes(1);
            expect(mockRetryWithBackoff).toHaveBeenCalledWith(expect.any(Function), expect.objectContaining({
                maxRetries: 3,
                initialDelay: 1000,
                backoffMultiplier: 2,
                jitter: true,
                shouldRetry: expect.any(Function),
            }));
        });
        it('ProvisionedThroughputExceededExceptionで再試行する', async () => {
            // Arrange
            const error = new Error('Provisioned throughput exceeded');
            error.name = 'ProvisionedThroughputExceededException';
            // retryWithBackoffの設定を取得
            mockRetryWithBackoff.mockImplementation(async (fn, options) => {
                // shouldRetry関数をテスト
                const shouldRetry = options.shouldRetry;
                expect(shouldRetry(error)).toBe(true);
                return await fn();
            });
            // Act
            await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            expect(mockRetryWithBackoff).toHaveBeenCalled();
        });
        it('その他のエラーでは再試行しない', async () => {
            // Arrange
            const error = new Error('Validation error');
            error.name = 'ValidationException';
            // retryWithBackoffの設定を取得
            mockRetryWithBackoff.mockImplementation(async (fn, options) => {
                // shouldRetry関数をテスト
                const shouldRetry = options.shouldRetry;
                expect(shouldRetry(error)).toBe(false);
                return await fn();
            });
            // Act
            await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            expect(mockRetryWithBackoff).toHaveBeenCalled();
        });
    });
    describe('エラーハンドリング', () => {
        it('DynamoDBエラーが発生した場合、エラーを伝播する', async () => {
            // Arrange
            const dynamoError = new Error('DynamoDB error');
            dynamoError.name = 'InternalServerError';
            mockRetryWithBackoff.mockRejectedValue(dynamoError);
            // Act & Assert
            await expect((0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId)).rejects.toThrow('DynamoDB error');
        });
        it('ProvisionedThroughputExceededExceptionが発生した場合、再試行後にエラーを伝播する', async () => {
            // Arrange
            const throughputError = new Error('Provisioned throughput exceeded');
            throughputError.name = 'ProvisionedThroughputExceededException';
            mockRetryWithBackoff.mockRejectedValue(throughputError);
            // Act & Assert
            await expect((0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId)).rejects.toThrow('Provisioned throughput exceeded');
        });
        it('ConditionalCheckFailedExceptionが発生した場合、エラーを伝播する', async () => {
            // Arrange
            const conditionalError = new Error('Conditional check failed');
            conditionalError.name = 'ConditionalCheckFailedException';
            mockRetryWithBackoff.mockRejectedValue(conditionalError);
            // Act & Assert
            await expect((0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId)).rejects.toThrow('Conditional check failed');
        });
    });
    describe('環境変数', () => {
        it('EXPORT_STATUS_TABLE_NAMEが使用される', async () => {
            // Act
            await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            // beforeEachで設定された環境変数が使用されることを確認
            const command = mockSend.mock.calls[0][0];
            expect(command.input.TableName).toBe('test-export-status-table');
            expect(process.env.EXPORT_STATUS_TABLE_NAME).toBe('test-export-status-table');
        });
        it('環境変数が正しく読み込まれる', async () => {
            // Act
            await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            // 環境変数が設定されていることを確認
            expect(process.env.EXPORT_STATUS_TABLE_NAME).toBeDefined();
            expect(process.env.AWS_REGION).toBeDefined();
        });
        it('テーブル名が環境変数から取得される', async () => {
            // Act
            await (0, create_export_job_1.createExportJob)(mockRequestBody, mockRequestId);
            // Assert
            const command = mockSend.mock.calls[0][0];
            // 環境変数で設定されたテーブル名が使用される
            expect(command.input.TableName).toBe(process.env.EXPORT_STATUS_TABLE_NAME);
        });
    });
    describe('フィルター条件のバリエーション', () => {
        it('企業コードのみのフィルターで作成できる', async () => {
            // Arrange
            const requestBody = {
                format: 'json',
                filter: {
                    company_code: '1234',
                },
            };
            // Act
            const result = await (0, create_export_job_1.createExportJob)(requestBody, mockRequestId);
            // Assert
            expect(result.filter).toBe(JSON.stringify({ company_code: '1234' }));
        });
        it('日付範囲のみのフィルターで作成できる', async () => {
            // Arrange
            const requestBody = {
                format: 'json',
                filter: {
                    start_date: '2024-01-01',
                    end_date: '2024-01-31',
                },
            };
            // Act
            const result = await (0, create_export_job_1.createExportJob)(requestBody, mockRequestId);
            // Assert
            expect(result.filter).toBe(JSON.stringify({
                start_date: '2024-01-01',
                end_date: '2024-01-31',
            }));
        });
        it('開示種類のみのフィルターで作成できる', async () => {
            // Arrange
            const requestBody = {
                format: 'json',
                filter: {
                    disclosure_type: '決算短信',
                },
            };
            // Act
            const result = await (0, create_export_job_1.createExportJob)(requestBody, mockRequestId);
            // Assert
            expect(result.filter).toBe(JSON.stringify({ disclosure_type: '決算短信' }));
        });
        it('空のフィルターで作成できる', async () => {
            // Arrange
            const requestBody = {
                format: 'json',
                filter: {},
            };
            // Act
            const result = await (0, create_export_job_1.createExportJob)(requestBody, mockRequestId);
            // Assert
            expect(result.filter).toBe(JSON.stringify({}));
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxsYW1iZGFcXGV4cG9ydFxcX190ZXN0c19fXFxjcmVhdGUtZXhwb3J0LWpvYi50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7OztHQUlHOztBQVFILElBQUksQ0FBQyxJQUFJLENBQUMsMEJBQTBCLEVBQUUsR0FBRyxFQUFFO0lBQ3pDLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsMEJBQTBCLENBQUMsQ0FBQztJQUNwRSxPQUFPO1FBQ0wsR0FBRyxZQUFZO1FBQ2YsY0FBYyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ2xELElBQUksRUFBRSxRQUFRO1NBQ2YsQ0FBQyxDQUFDO0tBQ0osQ0FBQztBQUNKLENBQUMsQ0FBQyxDQUFDO0FBRUgsSUFBSSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3hDLE1BQU0sRUFBRTtRQUNOLElBQUksRUFBRSxjQUFjO1FBQ3BCLEtBQUssRUFBRSxlQUFlO0tBQ3ZCO0NBQ0YsQ0FBQyxDQUFDLENBQUM7QUFFSixJQUFJLENBQUMsSUFBSSxDQUFDLHNCQUFzQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDdkMsZ0JBQWdCLEVBQUUsb0JBQW9CO0NBQ3ZDLENBQUMsQ0FBQyxDQUFDO0FBekJKLHNCQUFzQjtBQUN0QixNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDM0IsTUFBTSxvQkFBb0IsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDdkMsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBQ2pDLE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQXVCbEMsNERBQXVEO0FBRXZELDhEQUEwRDtBQUUxRCxRQUFRLENBQUMsaUJBQWlC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QztZQUVqRSxTQUFTO1lBQ1QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2pELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXHRpMTk4XFxpbnZlc3RtZW50X2FuYWx5c2lzX29wb3BvXFxzcmNcXGxhbWJkYVxcZXhwb3J0XFxfX3Rlc3RzX19cXGNyZWF0ZS1leHBvcnQtam9iLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZSBFeHBvcnQgSm9iIFVuaXQgVGVzdHNcclxuICpcclxuICogUmVxdWlyZW1lbnRzOiDopoHku7YxNC4x77yI44Om44OL44OD44OI44OG44K544OI77yJXHJcbiAqL1xyXG5cclxuLy8g44Oi44OD44Kv6Kit5a6a77yIaW1wb3J044KI44KK5YmN44Gr5a6a576p77yJXHJcbmNvbnN0IG1vY2tTZW5kID0gamVzdC5mbigpO1xyXG5jb25zdCBtb2NrUmV0cnlXaXRoQmFja29mZiA9IGplc3QuZm4oKTtcclxuY29uc3QgbW9ja0xvZ2dlckluZm8gPSBqZXN0LmZuKCk7XHJcbmNvbnN0IG1vY2tMb2dnZXJFcnJvciA9IGplc3QuZm4oKTtcclxuXHJcbmplc3QubW9jaygnQGF3cy1zZGsvY2xpZW50LWR5bmFtb2RiJywgKCkgPT4ge1xyXG4gIGNvbnN0IGFjdHVhbE1vZHVsZSA9IGplc3QucmVxdWlyZUFjdHVhbCgnQGF3cy1zZGsvY2xpZW50LWR5bmFtb2RiJyk7XHJcbiAgcmV0dXJuIHtcclxuICAgIC4uLmFjdHVhbE1vZHVsZSxcclxuICAgIER5bmFtb0RCQ2xpZW50OiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7XHJcbiAgICAgIHNlbmQ6IG1vY2tTZW5kLFxyXG4gICAgfSkpLFxyXG4gIH07XHJcbn0pO1xyXG5cclxuamVzdC5tb2NrKCcuLi8uLi8uLi91dGlscy9sb2dnZXInLCAoKSA9PiAoe1xyXG4gIGxvZ2dlcjoge1xyXG4gICAgaW5mbzogbW9ja0xvZ2dlckluZm8sXHJcbiAgICBlcnJvcjogbW9ja0xvZ2dlckVycm9yLFxyXG4gIH0sXHJcbn0pKTtcclxuXHJcbmplc3QubW9jaygnLi4vLi4vLi4vdXRpbHMvcmV0cnknLCAoKSA9PiAoe1xyXG4gIHJldHJ5V2l0aEJhY2tvZmY6IG1vY2tSZXRyeVdpdGhCYWNrb2ZmLFxyXG59KSk7XHJcblxyXG5pbXBvcnQgeyBjcmVhdGVFeHBvcnRKb2IgfSBmcm9tICcuLi9jcmVhdGUtZXhwb3J0LWpvYic7XHJcbmltcG9ydCB7IEV4cG9ydFJlcXVlc3RCb2R5IH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBQdXRJdGVtQ29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1keW5hbW9kYic7XHJcblxyXG5kZXNjcmliZSgnY3JlYXRlRXhwb3J0Sm9iJywgKCkgPT4ge1xyXG4gIGNvbnN0IG1vY2tSZXF1ZXN0Qm9keTogRXhwb3J0UmVxdWVzdEJvZHkgPSB7XHJcbiAgICBmb3JtYXQ6ICdqc29uJyxcclxuICAgIGZpbHRlcjoge1xyXG4gICAgICBjb21wYW55X2NvZGU6ICcxMjM0JyxcclxuICAgICAgc3RhcnRfZGF0ZTogJzIwMjQtMDEtMDEnLFxyXG4gICAgICBlbmRfZGF0ZTogJzIwMjQtMDEtMzEnLFxyXG4gICAgICBkaXNjbG9zdXJlX3R5cGU6ICfmsbrnrpfnn63kv6EnLFxyXG4gICAgfSxcclxuICB9O1xyXG5cclxuICBjb25zdCBtb2NrUmVxdWVzdElkID0gJ3Rlc3QtcmVxdWVzdC1pZC0xMjM0NTY3OCc7XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgICBtb2NrU2VuZC5tb2NrQ2xlYXIoKTtcclxuICAgIG1vY2tSZXRyeVdpdGhCYWNrb2ZmLm1vY2tDbGVhcigpO1xyXG4gICAgbW9ja0xvZ2dlckluZm8ubW9ja0NsZWFyKCk7XHJcbiAgICBtb2NrTG9nZ2VyRXJyb3IubW9ja0NsZWFyKCk7XHJcblxyXG4gICAgLy8g44OH44OV44Kp44Or44OI44GncmV0cnlXaXRoQmFja29mZuOBr+a4oeOBleOCjOOBn+mWouaVsOOCkuWun+ihjFxyXG4gICAgbW9ja1JldHJ5V2l0aEJhY2tvZmYubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jIChmbikgPT4gYXdhaXQgZm4oKSk7XHJcblxyXG4gICAgLy8g44OH44OV44Kp44Or44OI44GnRHluYW1vRELmk43kvZzjga/miJDlip9cclxuICAgIG1vY2tTZW5kLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgJG1ldGFkYXRhOiB7IGh0dHBTdGF0dXNDb2RlOiAyMDAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOeSsOWig+WkieaVsOioreWumlxyXG4gICAgcHJvY2Vzcy5lbnYuRVhQT1JUX1NUQVRVU19UQUJMRV9OQU1FID0gJ3Rlc3QtZXhwb3J0LXN0YXR1cy10YWJsZSc7XHJcbiAgICBwcm9jZXNzLmVudi5BV1NfUkVHSU9OID0gJ2FwLW5vcnRoZWFzdC0xJztcclxuXHJcbiAgICAvLyBEYXRlLm5vdygp44KS44Oi44OD44Kv77yI5LiA6LKr44GX44Gf44K/44Kk44Og44K544K/44Oz44OX77yJXHJcbiAgICBqZXN0LnNweU9uKERhdGUsICdub3cnKS5tb2NrUmV0dXJuVmFsdWUoMTcwNTMwNTYwMDAwMCk7IC8vIDIwMjQtMDEtMTUgMTA6MDA6MDAgVVRDXHJcbiAgICBqZXN0LnNweU9uKERhdGUucHJvdG90eXBlLCAndG9JU09TdHJpbmcnKS5tb2NrUmV0dXJuVmFsdWUoJzIwMjQtMDEtMTVUMTA6MDA6MDAuMDAwWicpO1xyXG4gICAgamVzdC5zcHlPbihNYXRoLCAncmFuZG9tJykubW9ja1JldHVyblZhbHVlKDAuMTIzNDU2KTsgLy8g5LiA6LKr44GX44Gf44Op44Oz44OA44Og5YCkXHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LnJlc3RvcmVBbGxNb2NrcygpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgn44Ko44Kv44K544Od44O844OI44K444On44OW5L2c5oiQ5oiQ5YqfJywgKCkgPT4ge1xyXG4gICAgaXQoJ+OCqOOCr+OCueODneODvOODiOOCuOODp+ODluOCkuato+W4uOOBq+S9nOaIkOOBp+OBjeOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZUV4cG9ydEpvYihtb2NrUmVxdWVzdEJvZHksIG1vY2tSZXF1ZXN0SWQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvTWF0Y2hPYmplY3Qoe1xyXG4gICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxyXG4gICAgICAgIHJlcXVlc3RlZF9hdDogJzIwMjQtMDEtMTVUMTA6MDA6MDAuMDAwWicsXHJcbiAgICAgICAgcHJvZ3Jlc3M6IDAsXHJcbiAgICAgICAgZm9ybWF0OiAnanNvbicsXHJcbiAgICAgICAgZmlsdGVyOiBKU09OLnN0cmluZ2lmeShtb2NrUmVxdWVzdEJvZHkuZmlsdGVyKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmV4cG9ydF9pZCkudG9NYXRjaCgvXmV4cG9ydF9cXGQrX1thLXowLTldK18uKyQvKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC50dGwpLnRvQmVHcmVhdGVyVGhhbihEYXRlLm5vdygpIC8gMTAwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnRHluYW1vRELjgatQdXRJdGVtQ29tbWFuZOOCkumAgeS/oeOBmeOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGF3YWl0IGNyZWF0ZUV4cG9ydEpvYihtb2NrUmVxdWVzdEJvZHksIG1vY2tSZXF1ZXN0SWQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChtb2NrU2VuZCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xyXG5cclxuICAgICAgY29uc3QgY29tbWFuZCA9IG1vY2tTZW5kLm1vY2suY2FsbHNbMF1bMF0gYXMgUHV0SXRlbUNvbW1hbmQ7XHJcbiAgICAgIGV4cGVjdChjb21tYW5kKS50b0JlSW5zdGFuY2VPZihQdXRJdGVtQ29tbWFuZCk7XHJcbiAgICAgIGV4cGVjdChjb21tYW5kLmlucHV0LlRhYmxlTmFtZSkudG9CZSgndGVzdC1leHBvcnQtc3RhdHVzLXRhYmxlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn44Ot44Kw44Gr5L2c5oiQ6ZaL5aeL44Go5a6M5LqG44KS6KiY6Yyy44GZ44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBY3RcclxuICAgICAgYXdhaXQgY3JlYXRlRXhwb3J0Sm9iKG1vY2tSZXF1ZXN0Qm9keSwgbW9ja1JlcXVlc3RJZCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KG1vY2tMb2dnZXJJbmZvKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICAnQ3JlYXRpbmcgZXhwb3J0IGpvYicsXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgZm9ybWF0OiAnanNvbicsXHJcbiAgICAgICAgICBmaWx0ZXI6IG1vY2tSZXF1ZXN0Qm9keS5maWx0ZXIsXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrTG9nZ2VySW5mbykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgJ0V4cG9ydCBqb2IgY3JlYXRlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcblxyXG4gICAgICAvLyBleHBvcnRfaWTjgYzkuKHmlrnjga7jg63jgrDjgavlkKvjgb7jgozjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgZXhwZWN0KG1vY2tMb2dnZXJJbmZvLm1vY2suY2FsbHNbMF1bMV0pLnRvSGF2ZVByb3BlcnR5KCdleHBvcnRfaWQnKTtcclxuICAgICAgZXhwZWN0KG1vY2tMb2dnZXJJbmZvLm1vY2suY2FsbHNbMV1bMV0pLnRvSGF2ZVByb3BlcnR5KCdleHBvcnRfaWQnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgn44Ko44Kv44K544Od44O844OISUTnlJ/miJAnLCAoKSA9PiB7XHJcbiAgICBpdCgn44Ko44Kv44K544Od44O844OISUTjgYzmraPjgZfjgYTjg5Xjgqnjg7zjg57jg4Pjg4jjgafnlJ/miJDjgZXjgozjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVFeHBvcnRKb2IobW9ja1JlcXVlc3RCb2R5LCBtb2NrUmVxdWVzdElkKTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICAvLyDjg5Xjgqnjg7zjg57jg4Pjg4g6IGV4cG9ydF/jgr/jgqTjg6Djgrnjgr/jg7Pjg5df44Op44Oz44OA44Og5paH5a2X5YiXX+ODquOCr+OCqOOCueODiElE5YWI6aCtOOaWh+Wtl1xyXG4gICAgICBleHBlY3QocmVzdWx0LmV4cG9ydF9pZCkudG9NYXRjaCgvXmV4cG9ydF9cXGQrX1thLXowLTldK18uKyQvKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5leHBvcnRfaWQpLnRvQ29udGFpbignZXhwb3J0XycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+OCqOOCr+OCueODneODvOODiElE44Gr44K/44Kk44Og44K544K/44Oz44OX44GM5ZCr44G+44KM44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlRXhwb3J0Sm9iKG1vY2tSZXF1ZXN0Qm9keSwgbW9ja1JlcXVlc3RJZCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdC5leHBvcnRfaWQpLnRvQ29udGFpbignMTcwNTMwNTYwMDAwMCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+OCqOOCr+OCueODneODvOODiElE44Gr44Oq44Kv44Ko44K544OISUTjga7lhYjpoK045paH5a2X44GM5ZCr44G+44KM44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlRXhwb3J0Sm9iKG1vY2tSZXF1ZXN0Qm9keSwgbW9ja1JlcXVlc3RJZCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdC5leHBvcnRfaWQpLnRvQ29udGFpbigndGVzdC1yZXEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfnlbDjgarjgovjg6rjgq/jgqjjgrnjg4hJROOBp+eVsOOBquOCi+OCqOOCr+OCueODneODvOODiElE44GM55Sf5oiQ44GV44KM44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IHJlcXVlc3RJZDEgPSAncmVxdWVzdC1pZC0xLTEyMzQ1Njc4JztcclxuICAgICAgY29uc3QgcmVxdWVzdElkMiA9ICdyZXF1ZXN0LWlkLTItODc2NTQzMjEnO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdDEgPSBhd2FpdCBjcmVhdGVFeHBvcnRKb2IobW9ja1JlcXVlc3RCb2R5LCByZXF1ZXN0SWQxKTtcclxuICAgICAgXHJcbiAgICAgIC8vIDLlm57nm67jga7lkbzjgbPlh7rjgZfjgafnlbDjgarjgovjg6njg7Pjg4Djg6DlgKTjgpLov5TjgZlcclxuICAgICAgamVzdC5zcHlPbihNYXRoLCAncmFuZG9tJykubW9ja1JldHVyblZhbHVlKDAuOTg3NjU0KTtcclxuICAgICAgY29uc3QgcmVzdWx0MiA9IGF3YWl0IGNyZWF0ZUV4cG9ydEpvYihtb2NrUmVxdWVzdEJvZHksIHJlcXVlc3RJZDIpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQxLmV4cG9ydF9pZCkubm90LnRvQmUocmVzdWx0Mi5leHBvcnRfaWQpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdEeW5hbW9EQuS/neWtmCcsICgpID0+IHtcclxuICAgIGl0KCfjgrnjg4bjg7zjgr/jgrnjgYxwZW5kaW5n44Gn5L+d5a2Y44GV44KM44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBY3RcclxuICAgICAgYXdhaXQgY3JlYXRlRXhwb3J0Sm9iKG1vY2tSZXF1ZXN0Qm9keSwgbW9ja1JlcXVlc3RJZCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgY29uc3QgY29tbWFuZCA9IG1vY2tTZW5kLm1vY2suY2FsbHNbMF1bMF0gYXMgUHV0SXRlbUNvbW1hbmQ7XHJcbiAgICAgIGV4cGVjdChjb21tYW5kLmlucHV0Lkl0ZW0/LnN0YXR1cykudG9FcXVhbCh7IFM6ICdwZW5kaW5nJyB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfpgLLmjZfnjofjgYww44Gn5L+d5a2Y44GV44KM44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBY3RcclxuICAgICAgYXdhaXQgY3JlYXRlRXhwb3J0Sm9iKG1vY2tSZXF1ZXN0Qm9keSwgbW9ja1JlcXVlc3RJZCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgY29uc3QgY29tbWFuZCA9IG1vY2tTZW5kLm1vY2suY2FsbHNbMF1bMF0gYXMgUHV0SXRlbUNvbW1hbmQ7XHJcbiAgICAgIGV4cGVjdChjb21tYW5kLmlucHV0Lkl0ZW0/LnByb2dyZXNzKS50b0VxdWFsKHsgTjogJzAnIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+ODquOCr+OCqOOCueODiOaXpeaZguOBjElTTyA4NjAx5b2i5byP44Gn5L+d5a2Y44GV44KM44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBY3RcclxuICAgICAgYXdhaXQgY3JlYXRlRXhwb3J0Sm9iKG1vY2tSZXF1ZXN0Qm9keSwgbW9ja1JlcXVlc3RJZCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgY29uc3QgY29tbWFuZCA9IG1vY2tTZW5kLm1vY2suY2FsbHNbMF1bMF0gYXMgUHV0SXRlbUNvbW1hbmQ7XHJcbiAgICAgIGV4cGVjdChjb21tYW5kLmlucHV0Lkl0ZW0/LnJlcXVlc3RlZF9hdCkudG9FcXVhbCh7IFM6ICcyMDI0LTAxLTE1VDEwOjAwOjAwLjAwMFonIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+ODleOCqeODvOODnuODg+ODiOOBjOS/neWtmOOBleOCjOOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGF3YWl0IGNyZWF0ZUV4cG9ydEpvYihtb2NrUmVxdWVzdEJvZHksIG1vY2tSZXF1ZXN0SWQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGNvbnN0IGNvbW1hbmQgPSBtb2NrU2VuZC5tb2NrLmNhbGxzWzBdWzBdIGFzIFB1dEl0ZW1Db21tYW5kO1xyXG4gICAgICBleHBlY3QoY29tbWFuZC5pbnB1dC5JdGVtPy5mb3JtYXQpLnRvRXF1YWwoeyBTOiAnanNvbicgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn44OV44Kj44Or44K/44O844GMSlNPTuaWh+Wtl+WIl+OBqOOBl+OBpuS/neWtmOOBleOCjOOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGF3YWl0IGNyZWF0ZUV4cG9ydEpvYihtb2NrUmVxdWVzdEJvZHksIG1vY2tSZXF1ZXN0SWQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGNvbnN0IGNvbW1hbmQgPSBtb2NrU2VuZC5tb2NrLmNhbGxzWzBdWzBdIGFzIFB1dEl0ZW1Db21tYW5kO1xyXG4gICAgICBleHBlY3QoY29tbWFuZC5pbnB1dC5JdGVtPy5maWx0ZXIpLnRvRXF1YWwoe1xyXG4gICAgICAgIFM6IEpTT04uc3RyaW5naWZ5KG1vY2tSZXF1ZXN0Qm9keS5maWx0ZXIpLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdDU1blvaLlvI/jga7jg6rjgq/jgqjjgrnjg4jjgoLmraPjgZfjgY/kv53lrZjjgZXjgozjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgY29uc3QgY3N2UmVxdWVzdEJvZHk6IEV4cG9ydFJlcXVlc3RCb2R5ID0ge1xyXG4gICAgICAgIGZvcm1hdDogJ2NzdicsXHJcbiAgICAgICAgZmlsdGVyOiB7XHJcbiAgICAgICAgICBzdGFydF9kYXRlOiAnMjAyNC0wMS0wMScsXHJcbiAgICAgICAgICBlbmRfZGF0ZTogJzIwMjQtMDEtMzEnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgYXdhaXQgY3JlYXRlRXhwb3J0Sm9iKGNzdlJlcXVlc3RCb2R5LCBtb2NrUmVxdWVzdElkKTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBjb25zdCBjb21tYW5kID0gbW9ja1NlbmQubW9jay5jYWxsc1swXVswXSBhcyBQdXRJdGVtQ29tbWFuZDtcclxuICAgICAgZXhwZWN0KGNvbW1hbmQuaW5wdXQuSXRlbT8uZm9ybWF0KS50b0VxdWFsKHsgUzogJ2NzdicgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1RUTOioreWumicsICgpID0+IHtcclxuICAgIGl0KCdUVEzjgYwzMOaXpeW+jOOBq+ioreWumuOBleOCjOOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpIC8gMTAwMDsgLy8gVW5peCB0aW1lc3RhbXAgKOenkilcclxuICAgICAgY29uc3QgZXhwZWN0ZWRUdGwgPSBub3cgKyAzMCAqIDI0ICogNjAgKiA2MDsgLy8gMzDml6XlvoxcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVFeHBvcnRKb2IobW9ja1JlcXVlc3RCb2R5LCBtb2NrUmVxdWVzdElkKTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnR0bCkudG9CZUNsb3NlVG8oZXhwZWN0ZWRUdGwsIDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ1RUTOOBjER5bmFtb0RC44Gr5L+d5a2Y44GV44KM44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBY3RcclxuICAgICAgYXdhaXQgY3JlYXRlRXhwb3J0Sm9iKG1vY2tSZXF1ZXN0Qm9keSwgbW9ja1JlcXVlc3RJZCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgY29uc3QgY29tbWFuZCA9IG1vY2tTZW5kLm1vY2suY2FsbHNbMF1bMF0gYXMgUHV0SXRlbUNvbW1hbmQ7XHJcbiAgICAgIGV4cGVjdChjb21tYW5kLmlucHV0Lkl0ZW0/LnR0bCkudG9FcXVhbCh7XHJcbiAgICAgICAgTjogZXhwZWN0LnN0cmluZ01hdGNoaW5nKC9eXFxkKyQvKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0dGxWYWx1ZSA9IHBhcnNlSW50KGNvbW1hbmQuaW5wdXQuSXRlbT8udHRsPy5OIHx8ICcwJywgMTApO1xyXG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpIC8gMTAwMDtcclxuICAgICAgY29uc3QgZXhwZWN0ZWRUdGwgPSBub3cgKyAzMCAqIDI0ICogNjAgKiA2MDtcclxuICAgICAgZXhwZWN0KHR0bFZhbHVlKS50b0JlQ2xvc2VUbyhleHBlY3RlZFR0bCwgMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0NvbmRpdGlvbkV4cHJlc3Npb27vvIjph43opIfpmLLmraLvvIknLCAoKSA9PiB7XHJcbiAgICBpdCgnQ29uZGl0aW9uRXhwcmVzc2lvbuOBjOioreWumuOBleOCjOOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGF3YWl0IGNyZWF0ZUV4cG9ydEpvYihtb2NrUmVxdWVzdEJvZHksIG1vY2tSZXF1ZXN0SWQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGNvbnN0IGNvbW1hbmQgPSBtb2NrU2VuZC5tb2NrLmNhbGxzWzBdWzBdIGFzIFB1dEl0ZW1Db21tYW5kO1xyXG4gICAgICBleHBlY3QoY29tbWFuZC5pbnB1dC5Db25kaXRpb25FeHByZXNzaW9uKS50b0JlKCdhdHRyaWJ1dGVfbm90X2V4aXN0cyhleHBvcnRfaWQpJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+WGjeippuihjOioreWumicsICgpID0+IHtcclxuICAgIGl0KCdyZXRyeVdpdGhCYWNrb2Zm44GM5ZG844Gz5Ye644GV44KM44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBY3RcclxuICAgICAgYXdhaXQgY3JlYXRlRXhwb3J0Sm9iKG1vY2tSZXF1ZXN0Qm9keSwgbW9ja1JlcXVlc3RJZCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KG1vY2tSZXRyeVdpdGhCYWNrb2ZmKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XHJcbiAgICAgIGV4cGVjdChtb2NrUmV0cnlXaXRoQmFja29mZikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0LmFueShGdW5jdGlvbiksXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgbWF4UmV0cmllczogMyxcclxuICAgICAgICAgIGluaXRpYWxEZWxheTogMTAwMCxcclxuICAgICAgICAgIGJhY2tvZmZNdWx0aXBsaWVyOiAyLFxyXG4gICAgICAgICAgaml0dGVyOiB0cnVlLFxyXG4gICAgICAgICAgc2hvdWxkUmV0cnk6IGV4cGVjdC5hbnkoRnVuY3Rpb24pLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnUHJvdmlzaW9uZWRUaHJvdWdocHV0RXhjZWVkZWRFeGNlcHRpb27jgaflho3oqabooYzjgZnjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1Byb3Zpc2lvbmVkIHRocm91Z2hwdXQgZXhjZWVkZWQnKTtcclxuICAgICAgZXJyb3IubmFtZSA9ICdQcm92aXNpb25lZFRocm91Z2hwdXRFeGNlZWRlZEV4Y2VwdGlvbic7XHJcblxyXG4gICAgICAvLyByZXRyeVdpdGhCYWNrb2Zm44Gu6Kit5a6a44KS5Y+W5b6XXHJcbiAgICAgIG1vY2tSZXRyeVdpdGhCYWNrb2ZmLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoZm4sIG9wdGlvbnMpID0+IHtcclxuICAgICAgICAvLyBzaG91bGRSZXRyeemWouaVsOOCkuODhuOCueODiFxyXG4gICAgICAgIGNvbnN0IHNob3VsZFJldHJ5ID0gb3B0aW9ucy5zaG91bGRSZXRyeTtcclxuICAgICAgICBleHBlY3Qoc2hvdWxkUmV0cnkoZXJyb3IpKS50b0JlKHRydWUpO1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBmbigpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBhd2FpdCBjcmVhdGVFeHBvcnRKb2IobW9ja1JlcXVlc3RCb2R5LCBtb2NrUmVxdWVzdElkKTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QobW9ja1JldHJ5V2l0aEJhY2tvZmYpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfjgZ3jga7ku5bjga7jgqjjg6njg7zjgafjga/lho3oqabooYzjgZfjgarjgYQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1ZhbGlkYXRpb24gZXJyb3InKTtcclxuICAgICAgZXJyb3IubmFtZSA9ICdWYWxpZGF0aW9uRXhjZXB0aW9uJztcclxuXHJcbiAgICAgIC8vIHJldHJ5V2l0aEJhY2tvZmbjga7oqK3lrprjgpLlj5blvpdcclxuICAgICAgbW9ja1JldHJ5V2l0aEJhY2tvZmYubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jIChmbiwgb3B0aW9ucykgPT4ge1xyXG4gICAgICAgIC8vIHNob3VsZFJldHJ56Zai5pWw44KS44OG44K544OIXHJcbiAgICAgICAgY29uc3Qgc2hvdWxkUmV0cnkgPSBvcHRpb25zLnNob3VsZFJldHJ5O1xyXG4gICAgICAgIGV4cGVjdChzaG91bGRSZXRyeShlcnJvcikpLnRvQmUoZmFsc2UpO1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBmbigpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBhd2FpdCBjcmVhdGVFeHBvcnRKb2IobW9ja1JlcXVlc3RCb2R5LCBtb2NrUmVxdWVzdElkKTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QobW9ja1JldHJ5V2l0aEJhY2tvZmYpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgn44Ko44Op44O844OP44Oz44OJ44Oq44Oz44KwJywgKCkgPT4ge1xyXG4gICAgaXQoJ0R5bmFtb0RC44Ko44Op44O844GM55m655Sf44GX44Gf5aC05ZCI44CB44Ko44Op44O844KS5Lyd5pKt44GZ44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IGR5bmFtb0Vycm9yID0gbmV3IEVycm9yKCdEeW5hbW9EQiBlcnJvcicpO1xyXG4gICAgICBkeW5hbW9FcnJvci5uYW1lID0gJ0ludGVybmFsU2VydmVyRXJyb3InO1xyXG4gICAgICBtb2NrUmV0cnlXaXRoQmFja29mZi5tb2NrUmVqZWN0ZWRWYWx1ZShkeW5hbW9FcnJvcik7XHJcblxyXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcclxuICAgICAgYXdhaXQgZXhwZWN0KGNyZWF0ZUV4cG9ydEpvYihtb2NrUmVxdWVzdEJvZHksIG1vY2tSZXF1ZXN0SWQpKS5yZWplY3RzLnRvVGhyb3coXHJcbiAgICAgICAgJ0R5bmFtb0RCIGVycm9yJ1xyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ1Byb3Zpc2lvbmVkVGhyb3VnaHB1dEV4Y2VlZGVkRXhjZXB0aW9u44GM55m655Sf44GX44Gf5aC05ZCI44CB5YaN6Kmm6KGM5b6M44Gr44Ko44Op44O844KS5Lyd5pKt44GZ44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IHRocm91Z2hwdXRFcnJvciA9IG5ldyBFcnJvcignUHJvdmlzaW9uZWQgdGhyb3VnaHB1dCBleGNlZWRlZCcpO1xyXG4gICAgICB0aHJvdWdocHV0RXJyb3IubmFtZSA9ICdQcm92aXNpb25lZFRocm91Z2hwdXRFeGNlZWRlZEV4Y2VwdGlvbic7XHJcbiAgICAgIG1vY2tSZXRyeVdpdGhCYWNrb2ZmLm1vY2tSZWplY3RlZFZhbHVlKHRocm91Z2hwdXRFcnJvcik7XHJcblxyXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcclxuICAgICAgYXdhaXQgZXhwZWN0KGNyZWF0ZUV4cG9ydEpvYihtb2NrUmVxdWVzdEJvZHksIG1vY2tSZXF1ZXN0SWQpKS5yZWplY3RzLnRvVGhyb3coXHJcbiAgICAgICAgJ1Byb3Zpc2lvbmVkIHRocm91Z2hwdXQgZXhjZWVkZWQnXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnQ29uZGl0aW9uYWxDaGVja0ZhaWxlZEV4Y2VwdGlvbuOBjOeZuueUn+OBl+OBn+WgtOWQiOOAgeOCqOODqeODvOOCkuS8neaSreOBmeOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBjb25zdCBjb25kaXRpb25hbEVycm9yID0gbmV3IEVycm9yKCdDb25kaXRpb25hbCBjaGVjayBmYWlsZWQnKTtcclxuICAgICAgY29uZGl0aW9uYWxFcnJvci5uYW1lID0gJ0NvbmRpdGlvbmFsQ2hlY2tGYWlsZWRFeGNlcHRpb24nO1xyXG4gICAgICBtb2NrUmV0cnlXaXRoQmFja29mZi5tb2NrUmVqZWN0ZWRWYWx1ZShjb25kaXRpb25hbEVycm9yKTtcclxuXHJcbiAgICAgIC8vIEFjdCAmIEFzc2VydFxyXG4gICAgICBhd2FpdCBleHBlY3QoY3JlYXRlRXhwb3J0Sm9iKG1vY2tSZXF1ZXN0Qm9keSwgbW9ja1JlcXVlc3RJZCkpLnJlamVjdHMudG9UaHJvdyhcclxuICAgICAgICAnQ29uZGl0aW9uYWwgY2hlY2sgZmFpbGVkJ1xyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfnkrDlooPlpInmlbAnLCAoKSA9PiB7XHJcbiAgICBpdCgnRVhQT1JUX1NUQVRVU19UQUJMRV9OQU1F44GM5L2/55So44GV44KM44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBY3RcclxuICAgICAgYXdhaXQgY3JlYXRlRXhwb3J0Sm9iKG1vY2tSZXF1ZXN0Qm9keSwgbW9ja1JlcXVlc3RJZCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgLy8gYmVmb3JlRWFjaOOBp+ioreWumuOBleOCjOOBn+eSsOWig+WkieaVsOOBjOS9v+eUqOOBleOCjOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICBjb25zdCBjb21tYW5kID0gbW9ja1NlbmQubW9jay5jYWxsc1swXVswXSBhcyBQdXRJdGVtQ29tbWFuZDtcclxuICAgICAgZXhwZWN0KGNvbW1hbmQuaW5wdXQuVGFibGVOYW1lKS50b0JlKCd0ZXN0LWV4cG9ydC1zdGF0dXMtdGFibGUnKTtcclxuICAgICAgZXhwZWN0KHByb2Nlc3MuZW52LkVYUE9SVF9TVEFUVVNfVEFCTEVfTkFNRSkudG9CZSgndGVzdC1leHBvcnQtc3RhdHVzLXRhYmxlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn55Kw5aKD5aSJ5pWw44GM5q2j44GX44GP6Kqt44G/6L6844G+44KM44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBY3RcclxuICAgICAgYXdhaXQgY3JlYXRlRXhwb3J0Sm9iKG1vY2tSZXF1ZXN0Qm9keSwgbW9ja1JlcXVlc3RJZCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgLy8g55Kw5aKD5aSJ5pWw44GM6Kit5a6a44GV44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIGV4cGVjdChwcm9jZXNzLmVudi5FWFBPUlRfU1RBVFVTX1RBQkxFX05BTUUpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChwcm9jZXNzLmVudi5BV1NfUkVHSU9OKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+ODhuODvOODluODq+WQjeOBjOeSsOWig+WkieaVsOOBi+OCieWPluW+l+OBleOCjOOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGF3YWl0IGNyZWF0ZUV4cG9ydEpvYihtb2NrUmVxdWVzdEJvZHksIG1vY2tSZXF1ZXN0SWQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGNvbnN0IGNvbW1hbmQgPSBtb2NrU2VuZC5tb2NrLmNhbGxzWzBdWzBdIGFzIFB1dEl0ZW1Db21tYW5kO1xyXG4gICAgICAvLyDnkrDlooPlpInmlbDjgafoqK3lrprjgZXjgozjgZ/jg4bjg7zjg5bjg6vlkI3jgYzkvb/nlKjjgZXjgozjgotcclxuICAgICAgZXhwZWN0KGNvbW1hbmQuaW5wdXQuVGFibGVOYW1lKS50b0JlKHByb2Nlc3MuZW52LkVYUE9SVF9TVEFUVVNfVEFCTEVfTkFNRSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+ODleOCo+ODq+OCv+ODvOadoeS7tuOBruODkOODquOCqOODvOOCt+ODp+ODsycsICgpID0+IHtcclxuICAgIGl0KCfkvIHmpa3jgrPjg7zjg4njga7jgb/jga7jg5XjgqPjg6vjgr/jg7zjgafkvZzmiJDjgafjgY3jgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgY29uc3QgcmVxdWVzdEJvZHk6IEV4cG9ydFJlcXVlc3RCb2R5ID0ge1xyXG4gICAgICAgIGZvcm1hdDogJ2pzb24nLFxyXG4gICAgICAgIGZpbHRlcjoge1xyXG4gICAgICAgICAgY29tcGFueV9jb2RlOiAnMTIzNCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVFeHBvcnRKb2IocmVxdWVzdEJvZHksIG1vY2tSZXF1ZXN0SWQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZmlsdGVyKS50b0JlKEpTT04uc3RyaW5naWZ5KHsgY29tcGFueV9jb2RlOiAnMTIzNCcgfSkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+aXpeS7mOevhOWbsuOBruOBv+OBruODleOCo+ODq+OCv+ODvOOBp+S9nOaIkOOBp+OBjeOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBjb25zdCByZXF1ZXN0Qm9keTogRXhwb3J0UmVxdWVzdEJvZHkgPSB7XHJcbiAgICAgICAgZm9ybWF0OiAnanNvbicsXHJcbiAgICAgICAgZmlsdGVyOiB7XHJcbiAgICAgICAgICBzdGFydF9kYXRlOiAnMjAyNC0wMS0wMScsXHJcbiAgICAgICAgICBlbmRfZGF0ZTogJzIwMjQtMDEtMzEnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlRXhwb3J0Sm9iKHJlcXVlc3RCb2R5LCBtb2NrUmVxdWVzdElkKTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LmZpbHRlcikudG9CZShcclxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBzdGFydF9kYXRlOiAnMjAyNC0wMS0wMScsXHJcbiAgICAgICAgICBlbmRfZGF0ZTogJzIwMjQtMDEtMzEnLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn6ZaL56S656iu6aGe44Gu44G/44Gu44OV44Kj44Or44K/44O844Gn5L2c5oiQ44Gn44GN44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IHJlcXVlc3RCb2R5OiBFeHBvcnRSZXF1ZXN0Qm9keSA9IHtcclxuICAgICAgICBmb3JtYXQ6ICdqc29uJyxcclxuICAgICAgICBmaWx0ZXI6IHtcclxuICAgICAgICAgIGRpc2Nsb3N1cmVfdHlwZTogJ+axuueul+efreS/oScsXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVFeHBvcnRKb2IocmVxdWVzdEJvZHksIG1vY2tSZXF1ZXN0SWQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZmlsdGVyKS50b0JlKEpTT04uc3RyaW5naWZ5KHsgZGlzY2xvc3VyZV90eXBlOiAn5rG6566X55+t5L+hJyB9KSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn56m644Gu44OV44Kj44Or44K/44O844Gn5L2c5oiQ44Gn44GN44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IHJlcXVlc3RCb2R5OiBFeHBvcnRSZXF1ZXN0Qm9keSA9IHtcclxuICAgICAgICBmb3JtYXQ6ICdqc29uJyxcclxuICAgICAgICBmaWx0ZXI6IHt9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZUV4cG9ydEpvYihyZXF1ZXN0Qm9keSwgbW9ja1JlcXVlc3RJZCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdC5maWx0ZXIpLnRvQmUoSlNPTi5zdHJpbmdpZnkoe30pKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sInZlcnNpb24iOjN9