b20cbaa82f4e538e06925f82d9b2bf3a
"use strict";
/**
 * CloudWatchメトリクスヘルパーのユニットテスト
 *
 * メトリクス送信機能の動作を検証します。
 * Lambda実装チェックリストの「エラーメトリクス送信」に対応。
 *
 * Requirements: 要件6.4（エラーメトリクス）
 */
Object.defineProperty(exports, "__esModule", { value: true });
// AWS SDK v3のモック
jest.mock('@aws-sdk/client-cloudwatch', () => {
    const mockSend = jest.fn().mockResolvedValue({});
    return {
        CloudWatchClient: jest.fn(() => ({
            send: mockSend,
        })),
        PutMetricDataCommand: jest.fn((params) => params),
    };
});
const metrics_1 = require("../metrics");
const errors_1 = require("../../errors");
describe('CloudWatch Metrics', () => {
    beforeEach(() => {
        jest.clearAllMocks();
    });
    describe('sendMetric', () => {
        it('should send metric with default options', async () => {
            await (0, metrics_1.sendMetric)('TestMetric', 1);
            const { CloudWatchClient, PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            const mockClient = new CloudWatchClient();
            expect(mockClient.send).toHaveBeenCalledTimes(1);
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                Namespace: 'TDnetDataCollector',
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'TestMetric',
                        Value: 1,
                        Unit: 'Count',
                    }),
                ]),
            }));
        });
        it('should send metric with custom namespace', async () => {
            await (0, metrics_1.sendMetric)('TestMetric', 1, {
                namespace: 'CustomNamespace',
            });
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                Namespace: 'CustomNamespace',
            }));
        });
        it('should send metric with dimensions', async () => {
            await (0, metrics_1.sendMetric)('TestMetric', 1, {
                dimensions: [
                    { Name: 'ErrorType', Value: 'ValidationError' },
                    { Name: 'FunctionName', Value: 'TestFunction' },
                ],
            });
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        Dimensions: [
                            { Name: 'ErrorType', Value: 'ValidationError' },
                            { Name: 'FunctionName', Value: 'TestFunction' },
                        ],
                    }),
                ]),
            }));
        });
        it('should send metric with custom unit', async () => {
            await (0, metrics_1.sendMetric)('ExecutionTime', 1234, {
                unit: 'Milliseconds',
            });
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        Unit: 'Milliseconds',
                        Value: 1234,
                    }),
                ]),
            }));
        });
        it('should not throw error on metric send failure', async () => {
            const { CloudWatchClient } = require('@aws-sdk/client-cloudwatch');
            const mockClient = new CloudWatchClient();
            mockClient.send.mockRejectedValueOnce(new Error('Network error'));
            // メトリクス送信失敗でもエラーをスローしない
            await expect((0, metrics_1.sendMetric)('TestMetric', 1)).resolves.not.toThrow();
        });
    });
    describe('sendErrorMetric', () => {
        it('should send error metric with error type', async () => {
            const error = new errors_1.ValidationError('Invalid input');
            await (0, metrics_1.sendErrorMetric)(error);
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'LambdaError',
                        Value: 1,
                        Dimensions: [
                            { Name: 'ErrorType', Value: 'ValidationError' },
                        ],
                    }),
                ]),
            }));
        });
        it('should send error metric with function name', async () => {
            const error = new errors_1.RetryableError('Network error');
            await (0, metrics_1.sendErrorMetric)(error, 'CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        Dimensions: [
                            { Name: 'ErrorType', Value: 'RetryableError' },
                            { Name: 'FunctionName', Value: 'CollectorFunction' },
                        ],
                    }),
                ]),
            }));
        });
        it('should handle standard Error objects', async () => {
            const error = new Error('Standard error');
            await (0, metrics_1.sendErrorMetric)(error);
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        Dimensions: [
                            { Name: 'ErrorType', Value: 'Error' },
                        ],
                    }),
                ]),
            }));
        });
    });
    describe('sendSuccessMetric', () => {
        it('should send success metric without function name', async () => {
            await (0, metrics_1.sendSuccessMetric)();
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'LambdaSuccess',
                        Value: 1,
                        Dimensions: [],
                    }),
                ]),
            }));
        });
        it('should send success metric with function name', async () => {
            await (0, metrics_1.sendSuccessMetric)('CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        Dimensions: [
                            { Name: 'FunctionName', Value: 'CollectorFunction' },
                        ],
                    }),
                ]),
            }));
        });
    });
    describe('sendExecutionTimeMetric', () => {
        it('should send execution time metric', async () => {
            await (0, metrics_1.sendExecutionTimeMetric)(1234);
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'ExecutionTime',
                        Value: 1234,
                        Unit: 'Milliseconds',
                    }),
                ]),
            }));
        });
        it('should send execution time metric with function name', async () => {
            await (0, metrics_1.sendExecutionTimeMetric)(1234, 'CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        Dimensions: [
                            { Name: 'FunctionName', Value: 'CollectorFunction' },
                        ],
                    }),
                ]),
            }));
        });
    });
    describe('sendBatchResultMetrics', () => {
        it('should send batch success and failed metrics', async () => {
            await (0, metrics_1.sendBatchResultMetrics)(95, 5);
            const { CloudWatchClient } = require('@aws-sdk/client-cloudwatch');
            const mockClient = new CloudWatchClient();
            // 2回呼ばれる（success + failed）
            expect(mockClient.send).toHaveBeenCalledTimes(2);
        });
        it('should send batch metrics with function name', async () => {
            await (0, metrics_1.sendBatchResultMetrics)(95, 5, 'CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            // BatchSuccessとBatchFailedの両方が送信される
            const calls = PutMetricDataCommand.mock.calls;
            expect(calls.length).toBe(2);
            // 各呼び出しにFunctionNameディメンションが含まれる
            calls.forEach((call) => {
                expect(call[0].MetricData[0].Dimensions).toContainEqual({
                    Name: 'FunctionName',
                    Value: 'CollectorFunction',
                });
            });
        });
        it('should send correct values for success and failed', async () => {
            await (0, metrics_1.sendBatchResultMetrics)(95, 5);
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            const calls = PutMetricDataCommand.mock.calls;
            // BatchSuccessメトリクス
            const successCall = calls.find((call) => call[0].MetricData[0].MetricName === 'BatchSuccess');
            expect(successCall[0].MetricData[0].Value).toBe(95);
            // BatchFailedメトリクス
            const failedCall = calls.find((call) => call[0].MetricData[0].MetricName === 'BatchFailed');
            expect(failedCall[0].MetricData[0].Value).toBe(5);
        });
    });
    describe('Lambda Integration Example', () => {
        it('should demonstrate complete Lambda error handling with metrics', async () => {
            // Lambda実装チェックリストに準拠した実装例
            const mockHandler = async (_event, context) => {
                const startTime = Date.now();
                try {
                    // メイン処理（成功）
                    await Promise.resolve({ success: true });
                    // 成功メトリクス送信
                    await (0, metrics_1.sendSuccessMetric)(context.functionName);
                    // 実行時間メトリクス送信
                    const executionTime = Date.now() - startTime;
                    await (0, metrics_1.sendExecutionTimeMetric)(executionTime, context.functionName);
                    return { statusCode: 200, body: JSON.stringify({ success: true }) };
                }
                catch (error) {
                    // エラーメトリクス送信
                    await (0, metrics_1.sendErrorMetric)(error, context.functionName);
                    throw error;
                }
            };
            const mockContext = {
                functionName: 'TestFunction',
                requestId: 'test-request-id',
            };
            await mockHandler({}, mockContext);
            const { CloudWatchClient } = require('@aws-sdk/client-cloudwatch');
            const mockClient = new CloudWatchClient();
            // 成功メトリクスと実行時間メトリクスが送信される
            expect(mockClient.send).toHaveBeenCalledTimes(2);
        });
        it('should demonstrate batch processing with metrics', async () => {
            const items = Array.from({ length: 100 }, (_, i) => ({ id: i }));
            let success = 0;
            let failed = 0;
            for (const _item of items) {
                try {
                    // 5%の確率で失敗
                    if (Math.random() < 0.05) {
                        throw new Error('Random failure');
                    }
                    success++;
                }
                catch (error) {
                    failed++;
                }
            }
            // バッチ結果メトリクス送信
            await (0, metrics_1.sendBatchResultMetrics)(success, failed, 'BatchFunction');
            const { CloudWatchClient } = require('@aws-sdk/client-cloudwatch');
            const mockClient = new CloudWatchClient();
            expect(mockClient.send).toHaveBeenCalledTimes(2);
        });
    });
    describe('sendDisclosuresCollectedMetric', () => {
        it('should send disclosures collected metric without function name', async () => {
            await (0, metrics_1.sendDisclosuresCollectedMetric)(150);
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'DisclosuresCollected',
                        Value: 150,
                        Dimensions: [],
                    }),
                ]),
            }));
        });
        it('should send disclosures collected metric with function name', async () => {
            await (0, metrics_1.sendDisclosuresCollectedMetric)(150, 'CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'DisclosuresCollected',
                        Value: 150,
                        Dimensions: [
                            { Name: 'FunctionName', Value: 'CollectorFunction' },
                        ],
                    }),
                ]),
            }));
        });
    });
    describe('sendDisclosuresFailedMetric', () => {
        it('should send disclosures failed metric without function name', async () => {
            await (0, metrics_1.sendDisclosuresFailedMetric)(5);
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'DisclosuresFailed',
                        Value: 5,
                        Dimensions: [],
                    }),
                ]),
            }));
        });
        it('should send disclosures failed metric with function name', async () => {
            await (0, metrics_1.sendDisclosuresFailedMetric)(5, 'CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'DisclosuresFailed',
                        Value: 5,
                        Dimensions: [
                            { Name: 'FunctionName', Value: 'CollectorFunction' },
                        ],
                    }),
                ]),
            }));
        });
    });
    describe('sendCollectionSuccessRateMetric', () => {
        it('should send collection success rate metric without function name', async () => {
            await (0, metrics_1.sendCollectionSuccessRateMetric)(96.77);
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'CollectionSuccessRate',
                        Value: 96.77,
                        Unit: 'Count',
                        Dimensions: [],
                    }),
                ]),
            }));
        });
        it('should send collection success rate metric with function name', async () => {
            await (0, metrics_1.sendCollectionSuccessRateMetric)(96.77, 'CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        MetricName: 'CollectionSuccessRate',
                        Value: 96.77,
                        Unit: 'Count',
                        Dimensions: [
                            { Name: 'FunctionName', Value: 'CollectorFunction' },
                        ],
                    }),
                ]),
            }));
        });
        it('should handle 100% success rate', async () => {
            await (0, metrics_1.sendCollectionSuccessRateMetric)(100, 'CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        Value: 100,
                    }),
                ]),
            }));
        });
        it('should handle 0% success rate', async () => {
            await (0, metrics_1.sendCollectionSuccessRateMetric)(0, 'CollectorFunction');
            const { PutMetricDataCommand } = require('@aws-sdk/client-cloudwatch');
            expect(PutMetricDataCommand).toHaveBeenCalledWith(expect.objectContaining({
                MetricData: expect.arrayContaining([
                    expect.objectContaining({
                        Value: 0,
                    }),
                ]),
            }));
        });
    });
    describe('Custom Metrics Integration Example', () => {
        it('should demonstrate complete collection metrics workflow', async () => {
            // 収集結果のシミュレーション
            const collectedCount = 150;
            const failedCount = 5;
            const totalCount = collectedCount + failedCount;
            const successRate = (collectedCount / totalCount) * 100;
            // カスタムメトリクスを送信
            await Promise.all([
                (0, metrics_1.sendDisclosuresCollectedMetric)(collectedCount, 'CollectorFunction'),
                (0, metrics_1.sendDisclosuresFailedMetric)(failedCount, 'CollectorFunction'),
                (0, metrics_1.sendCollectionSuccessRateMetric)(successRate, 'CollectorFunction'),
            ]);
            const { CloudWatchClient } = require('@aws-sdk/client-cloudwatch');
            const mockClient = new CloudWatchClient();
            // 3つのメトリクスが送信される
            expect(mockClient.send).toHaveBeenCalledTimes(3);
        });
        it('should calculate success rate correctly', async () => {
            const testCases = [
                { collected: 100, failed: 0, expectedRate: 100 },
                { collected: 95, failed: 5, expectedRate: 95 },
                { collected: 150, failed: 5, expectedRate: 96.77419354838710 },
                { collected: 0, failed: 10, expectedRate: 0 },
            ];
            for (const testCase of testCases) {
                const totalCount = testCase.collected + testCase.failed;
                const successRate = totalCount > 0
                    ? (testCase.collected / totalCount) * 100
                    : 0;
                expect(successRate).toBeCloseTo(testCase.expectedRate, 2);
            }
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFx1dGlsc1xcX190ZXN0c19fXFxtZXRyaWNzLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7O0dBT0c7O0FBY0gsaUJBQWlCO0FBQ2pCLElBQUksQ0FBQyxJQUFJLENBQUMsNEJBQTRCLEVBQUUsR0FBRyxFQUFFO0lBQzNDLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUVqRCxPQUFPO1FBQ0wsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQy9CLElBQUksRUFBRSxRQUFRO1NBQ2YsQ0FBQyxDQUFDO1FBQ0gsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDO0tBQ2xELENBQUM7QUFDSixDQUFDLENBQUMsQ0FBQztBQXRCSCx3Q0FTb0I7QUFDcEIseUNBQStEO0FBYy9ELFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLEVBQUU7SUFDbEMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxZQUFZLEVBQUUsR0FBRyxFQUFFO1FBQzFCLEVBQUUsQ0FBQyx5Q0FBeUMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN2RCxNQUFNLElBQUEsb0JBQVUsRUFBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFFbEMsTUFBTSxFQUFFLGdCQUFnQixFQUFFLG9CQUFvQixFQUFFLEdBQUcsT0FBTyxDQUFDLDRCQUE0QixDQUFDLENBQUM7WUFDekYsTUFBTSxVQUFVLEdBQUcsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO1lBRTFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMscUJBQXFCLENB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QUUsU0FBUyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUU7YUFDOUMsQ0FBQztZQUVGLEtBQUssTUFBTSxRQUFRLElBQUksU0FBUyxFQUFFLENBQUM7Z0JBQ2pDLE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQztnQkFDeEQsTUFBTSxXQUFXLEdBQUcsVUFBVSxHQUFHLENBQUM7b0JBQ2hDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUcsVUFBVSxDQUFDLEdBQUcsR0FBRztvQkFDekMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFFTixNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDNUQsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXHRpMTk4XFxpbnZlc3RtZW50X2FuYWx5c2lzX29wb3BvXFxzcmNcXHV0aWxzXFxfX3Rlc3RzX19cXG1ldHJpY3MudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ2xvdWRXYXRjaOODoeODiOODquOCr+OCueODmOODq+ODkeODvOOBruODpuODi+ODg+ODiOODhuOCueODiFxyXG4gKlxyXG4gKiDjg6Hjg4jjg6rjgq/jgrnpgIHkv6HmqZ/og73jga7li5XkvZzjgpLmpJzoqLzjgZfjgb7jgZnjgIJcclxuICogTGFtYmRh5a6f6KOF44OB44Kn44OD44Kv44Oq44K544OI44Gu44CM44Ko44Op44O844Oh44OI44Oq44Kv44K56YCB5L+h44CN44Gr5a++5b+c44CCXHJcbiAqXHJcbiAqIFJlcXVpcmVtZW50czog6KaB5Lu2Ni4077yI44Ko44Op44O844Oh44OI44Oq44Kv44K577yJXHJcbiAqL1xyXG5cclxuaW1wb3J0IHtcclxuICBzZW5kTWV0cmljLFxyXG4gIHNlbmRFcnJvck1ldHJpYyxcclxuICBzZW5kU3VjY2Vzc01ldHJpYyxcclxuICBzZW5kRXhlY3V0aW9uVGltZU1ldHJpYyxcclxuICBzZW5kQmF0Y2hSZXN1bHRNZXRyaWNzLFxyXG4gIHNlbmREaXNjbG9zdXJlc0NvbGxlY3RlZE1ldHJpYyxcclxuICBzZW5kRGlzY2xvc3VyZXNGYWlsZWRNZXRyaWMsXHJcbiAgc2VuZENvbGxlY3Rpb25TdWNjZXNzUmF0ZU1ldHJpYyxcclxufSBmcm9tICcuLi9tZXRyaWNzJztcclxuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yLCBSZXRyeWFibGVFcnJvciB9IGZyb20gJy4uLy4uL2Vycm9ycyc7XHJcblxyXG4vLyBBV1MgU0RLIHYz44Gu44Oi44OD44KvXHJcbmplc3QubW9jaygnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnLCAoKSA9PiB7XHJcbiAgY29uc3QgbW9ja1NlbmQgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe30pO1xyXG4gIFxyXG4gIHJldHVybiB7XHJcbiAgICBDbG91ZFdhdGNoQ2xpZW50OiBqZXN0LmZuKCgpID0+ICh7XHJcbiAgICAgIHNlbmQ6IG1vY2tTZW5kLFxyXG4gICAgfSkpLFxyXG4gICAgUHV0TWV0cmljRGF0YUNvbW1hbmQ6IGplc3QuZm4oKHBhcmFtcykgPT4gcGFyYW1zKSxcclxuICB9O1xyXG59KTtcclxuXHJcbmRlc2NyaWJlKCdDbG91ZFdhdGNoIE1ldHJpY3MnLCAoKSA9PiB7XHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3NlbmRNZXRyaWMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHNlbmQgbWV0cmljIHdpdGggZGVmYXVsdCBvcHRpb25zJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZW5kTWV0cmljKCdUZXN0TWV0cmljJywgMSk7XHJcblxyXG4gICAgICBjb25zdCB7IENsb3VkV2F0Y2hDbGllbnQsIFB1dE1ldHJpY0RhdGFDb21tYW5kIH0gPSByZXF1aXJlKCdAYXdzLXNkay9jbGllbnQtY2xvdWR3YXRjaCcpO1xyXG4gICAgICBjb25zdCBtb2NrQ2xpZW50ID0gbmV3IENsb3VkV2F0Y2hDbGllbnQoKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChtb2NrQ2xpZW50LnNlbmQpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcclxuICAgICAgZXhwZWN0KFB1dE1ldHJpY0RhdGFDb21tYW5kKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICBOYW1lc3BhY2U6ICdURG5ldERhdGFDb2xsZWN0b3InLFxyXG4gICAgICAgICAgTWV0cmljRGF0YTogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICBNZXRyaWNOYW1lOiAnVGVzdE1ldHJpYycsXHJcbiAgICAgICAgICAgICAgVmFsdWU6IDEsXHJcbiAgICAgICAgICAgICAgVW5pdDogJ0NvdW50JyxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICBdKSxcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzZW5kIG1ldHJpYyB3aXRoIGN1c3RvbSBuYW1lc3BhY2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlbmRNZXRyaWMoJ1Rlc3RNZXRyaWMnLCAxLCB7XHJcbiAgICAgICAgbmFtZXNwYWNlOiAnQ3VzdG9tTmFtZXNwYWNlJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB7IFB1dE1ldHJpY0RhdGFDb21tYW5kIH0gPSByZXF1aXJlKCdAYXdzLXNkay9jbGllbnQtY2xvdWR3YXRjaCcpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KFB1dE1ldHJpY0RhdGFDb21tYW5kKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICBOYW1lc3BhY2U6ICdDdXN0b21OYW1lc3BhY2UnLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNlbmQgbWV0cmljIHdpdGggZGltZW5zaW9ucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VuZE1ldHJpYygnVGVzdE1ldHJpYycsIDEsIHtcclxuICAgICAgICBkaW1lbnNpb25zOiBbXHJcbiAgICAgICAgICB7IE5hbWU6ICdFcnJvclR5cGUnLCBWYWx1ZTogJ1ZhbGlkYXRpb25FcnJvcicgfSxcclxuICAgICAgICAgIHsgTmFtZTogJ0Z1bmN0aW9uTmFtZScsIFZhbHVlOiAnVGVzdEZ1bmN0aW9uJyB9LFxyXG4gICAgICAgIF0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChQdXRNZXRyaWNEYXRhQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgTWV0cmljRGF0YTogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICBEaW1lbnNpb25zOiBbXHJcbiAgICAgICAgICAgICAgICB7IE5hbWU6ICdFcnJvclR5cGUnLCBWYWx1ZTogJ1ZhbGlkYXRpb25FcnJvcicgfSxcclxuICAgICAgICAgICAgICAgIHsgTmFtZTogJ0Z1bmN0aW9uTmFtZScsIFZhbHVlOiAnVGVzdEZ1bmN0aW9uJyB9LFxyXG4gICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2VuZCBtZXRyaWMgd2l0aCBjdXN0b20gdW5pdCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VuZE1ldHJpYygnRXhlY3V0aW9uVGltZScsIDEyMzQsIHtcclxuICAgICAgICB1bml0OiAnTWlsbGlzZWNvbmRzJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB7IFB1dE1ldHJpY0RhdGFDb21tYW5kIH0gPSByZXF1aXJlKCdAYXdzLXNkay9jbGllbnQtY2xvdWR3YXRjaCcpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KFB1dE1ldHJpY0RhdGFDb21tYW5kKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICBNZXRyaWNEYXRhOiBleHBlY3QuYXJyYXlDb250YWluaW5nKFtcclxuICAgICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgICAgIFVuaXQ6ICdNaWxsaXNlY29uZHMnLFxyXG4gICAgICAgICAgICAgIFZhbHVlOiAxMjM0LFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIG5vdCB0aHJvdyBlcnJvciBvbiBtZXRyaWMgc2VuZCBmYWlsdXJlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB7IENsb3VkV2F0Y2hDbGllbnQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIGNvbnN0IG1vY2tDbGllbnQgPSBuZXcgQ2xvdWRXYXRjaENsaWVudCgpO1xyXG4gICAgICBtb2NrQ2xpZW50LnNlbmQubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKTtcclxuXHJcbiAgICAgIC8vIOODoeODiOODquOCr+OCuemAgeS/oeWkseaVl+OBp+OCguOCqOODqeODvOOCkuOCueODreODvOOBl+OBquOBhFxyXG4gICAgICBhd2FpdCBleHBlY3Qoc2VuZE1ldHJpYygnVGVzdE1ldHJpYycsIDEpKS5yZXNvbHZlcy5ub3QudG9UaHJvdygpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdzZW5kRXJyb3JNZXRyaWMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHNlbmQgZXJyb3IgbWV0cmljIHdpdGggZXJyb3IgdHlwZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgVmFsaWRhdGlvbkVycm9yKCdJbnZhbGlkIGlucHV0Jyk7XHJcbiAgICAgIFxyXG4gICAgICBhd2FpdCBzZW5kRXJyb3JNZXRyaWMoZXJyb3IpO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChQdXRNZXRyaWNEYXRhQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgTWV0cmljRGF0YTogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICBNZXRyaWNOYW1lOiAnTGFtYmRhRXJyb3InLFxyXG4gICAgICAgICAgICAgIFZhbHVlOiAxLFxyXG4gICAgICAgICAgICAgIERpbWVuc2lvbnM6IFtcclxuICAgICAgICAgICAgICAgIHsgTmFtZTogJ0Vycm9yVHlwZScsIFZhbHVlOiAnVmFsaWRhdGlvbkVycm9yJyB9LFxyXG4gICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2VuZCBlcnJvciBtZXRyaWMgd2l0aCBmdW5jdGlvbiBuYW1lJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBSZXRyeWFibGVFcnJvcignTmV0d29yayBlcnJvcicpO1xyXG4gICAgICBcclxuICAgICAgYXdhaXQgc2VuZEVycm9yTWV0cmljKGVycm9yLCAnQ29sbGVjdG9yRnVuY3Rpb24nKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgUHV0TWV0cmljRGF0YUNvbW1hbmQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoUHV0TWV0cmljRGF0YUNvbW1hbmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIE1ldHJpY0RhdGE6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xyXG4gICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgRGltZW5zaW9uczogW1xyXG4gICAgICAgICAgICAgICAgeyBOYW1lOiAnRXJyb3JUeXBlJywgVmFsdWU6ICdSZXRyeWFibGVFcnJvcicgfSxcclxuICAgICAgICAgICAgICAgIHsgTmFtZTogJ0Z1bmN0aW9uTmFtZScsIFZhbHVlOiAnQ29sbGVjdG9yRnVuY3Rpb24nIH0sXHJcbiAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICBdKSxcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc3RhbmRhcmQgRXJyb3Igb2JqZWN0cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1N0YW5kYXJkIGVycm9yJyk7XHJcbiAgICAgIFxyXG4gICAgICBhd2FpdCBzZW5kRXJyb3JNZXRyaWMoZXJyb3IpO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChQdXRNZXRyaWNEYXRhQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgTWV0cmljRGF0YTogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICBEaW1lbnNpb25zOiBbXHJcbiAgICAgICAgICAgICAgICB7IE5hbWU6ICdFcnJvclR5cGUnLCBWYWx1ZTogJ0Vycm9yJyB9LFxyXG4gICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnc2VuZFN1Y2Nlc3NNZXRyaWMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHNlbmQgc3VjY2VzcyBtZXRyaWMgd2l0aG91dCBmdW5jdGlvbiBuYW1lJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZW5kU3VjY2Vzc01ldHJpYygpO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChQdXRNZXRyaWNEYXRhQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgTWV0cmljRGF0YTogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICBNZXRyaWNOYW1lOiAnTGFtYmRhU3VjY2VzcycsXHJcbiAgICAgICAgICAgICAgVmFsdWU6IDEsXHJcbiAgICAgICAgICAgICAgRGltZW5zaW9uczogW10sXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2VuZCBzdWNjZXNzIG1ldHJpYyB3aXRoIGZ1bmN0aW9uIG5hbWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlbmRTdWNjZXNzTWV0cmljKCdDb2xsZWN0b3JGdW5jdGlvbicpO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChQdXRNZXRyaWNEYXRhQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgTWV0cmljRGF0YTogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICBEaW1lbnNpb25zOiBbXHJcbiAgICAgICAgICAgICAgICB7IE5hbWU6ICdGdW5jdGlvbk5hbWUnLCBWYWx1ZTogJ0NvbGxlY3RvckZ1bmN0aW9uJyB9LFxyXG4gICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnc2VuZEV4ZWN1dGlvblRpbWVNZXRyaWMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHNlbmQgZXhlY3V0aW9uIHRpbWUgbWV0cmljJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZW5kRXhlY3V0aW9uVGltZU1ldHJpYygxMjM0KTtcclxuXHJcbiAgICAgIGNvbnN0IHsgUHV0TWV0cmljRGF0YUNvbW1hbmQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoUHV0TWV0cmljRGF0YUNvbW1hbmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIE1ldHJpY0RhdGE6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xyXG4gICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgTWV0cmljTmFtZTogJ0V4ZWN1dGlvblRpbWUnLFxyXG4gICAgICAgICAgICAgIFZhbHVlOiAxMjM0LFxyXG4gICAgICAgICAgICAgIFVuaXQ6ICdNaWxsaXNlY29uZHMnLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNlbmQgZXhlY3V0aW9uIHRpbWUgbWV0cmljIHdpdGggZnVuY3Rpb24gbmFtZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VuZEV4ZWN1dGlvblRpbWVNZXRyaWMoMTIzNCwgJ0NvbGxlY3RvckZ1bmN0aW9uJyk7XHJcblxyXG4gICAgICBjb25zdCB7IFB1dE1ldHJpY0RhdGFDb21tYW5kIH0gPSByZXF1aXJlKCdAYXdzLXNkay9jbGllbnQtY2xvdWR3YXRjaCcpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KFB1dE1ldHJpY0RhdGFDb21tYW5kKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICBNZXRyaWNEYXRhOiBleHBlY3QuYXJyYXlDb250YWluaW5nKFtcclxuICAgICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgICAgIERpbWVuc2lvbnM6IFtcclxuICAgICAgICAgICAgICAgIHsgTmFtZTogJ0Z1bmN0aW9uTmFtZScsIFZhbHVlOiAnQ29sbGVjdG9yRnVuY3Rpb24nIH0sXHJcbiAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICBdKSxcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdzZW5kQmF0Y2hSZXN1bHRNZXRyaWNzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBzZW5kIGJhdGNoIHN1Y2Nlc3MgYW5kIGZhaWxlZCBtZXRyaWNzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZW5kQmF0Y2hSZXN1bHRNZXRyaWNzKDk1LCA1KTtcclxuXHJcbiAgICAgIGNvbnN0IHsgQ2xvdWRXYXRjaENsaWVudCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgY29uc3QgbW9ja0NsaWVudCA9IG5ldyBDbG91ZFdhdGNoQ2xpZW50KCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyAy5Zue5ZG844Gw44KM44KL77yIc3VjY2VzcyArIGZhaWxlZO+8iVxyXG4gICAgICBleHBlY3QobW9ja0NsaWVudC5zZW5kKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNlbmQgYmF0Y2ggbWV0cmljcyB3aXRoIGZ1bmN0aW9uIG5hbWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlbmRCYXRjaFJlc3VsdE1ldHJpY3MoOTUsIDUsICdDb2xsZWN0b3JGdW5jdGlvbicpO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEJhdGNoU3VjY2Vzc+OBqEJhdGNoRmFpbGVk44Gu5Lih5pa544GM6YCB5L+h44GV44KM44KLXHJcbiAgICAgIGNvbnN0IGNhbGxzID0gUHV0TWV0cmljRGF0YUNvbW1hbmQubW9jay5jYWxscztcclxuICAgICAgZXhwZWN0KGNhbGxzLmxlbmd0aCkudG9CZSgyKTtcclxuICAgICAgXHJcbiAgICAgIC8vIOWQhOWRvOOBs+WHuuOBl+OBq0Z1bmN0aW9uTmFtZeODh+OCo+ODoeODs+OCt+ODp+ODs+OBjOWQq+OBvuOCjOOCi1xyXG4gICAgICBjYWxscy5mb3JFYWNoKChjYWxsOiBhbnkpID0+IHtcclxuICAgICAgICBleHBlY3QoY2FsbFswXS5NZXRyaWNEYXRhWzBdLkRpbWVuc2lvbnMpLnRvQ29udGFpbkVxdWFsKHtcclxuICAgICAgICAgIE5hbWU6ICdGdW5jdGlvbk5hbWUnLFxyXG4gICAgICAgICAgVmFsdWU6ICdDb2xsZWN0b3JGdW5jdGlvbicsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzZW5kIGNvcnJlY3QgdmFsdWVzIGZvciBzdWNjZXNzIGFuZCBmYWlsZWQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlbmRCYXRjaFJlc3VsdE1ldHJpY3MoOTUsIDUpO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGNhbGxzID0gUHV0TWV0cmljRGF0YUNvbW1hbmQubW9jay5jYWxscztcclxuICAgICAgXHJcbiAgICAgIC8vIEJhdGNoU3VjY2Vzc+ODoeODiOODquOCr+OCuVxyXG4gICAgICBjb25zdCBzdWNjZXNzQ2FsbCA9IGNhbGxzLmZpbmQoXHJcbiAgICAgICAgKGNhbGw6IGFueSkgPT4gY2FsbFswXS5NZXRyaWNEYXRhWzBdLk1ldHJpY05hbWUgPT09ICdCYXRjaFN1Y2Nlc3MnXHJcbiAgICAgICk7XHJcbiAgICAgIGV4cGVjdChzdWNjZXNzQ2FsbFswXS5NZXRyaWNEYXRhWzBdLlZhbHVlKS50b0JlKDk1KTtcclxuICAgICAgXHJcbiAgICAgIC8vIEJhdGNoRmFpbGVk44Oh44OI44Oq44Kv44K5XHJcbiAgICAgIGNvbnN0IGZhaWxlZENhbGwgPSBjYWxscy5maW5kKFxyXG4gICAgICAgIChjYWxsOiBhbnkpID0+IGNhbGxbMF0uTWV0cmljRGF0YVswXS5NZXRyaWNOYW1lID09PSAnQmF0Y2hGYWlsZWQnXHJcbiAgICAgICk7XHJcbiAgICAgIGV4cGVjdChmYWlsZWRDYWxsWzBdLk1ldHJpY0RhdGFbMF0uVmFsdWUpLnRvQmUoNSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0xhbWJkYSBJbnRlZ3JhdGlvbiBFeGFtcGxlJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBkZW1vbnN0cmF0ZSBjb21wbGV0ZSBMYW1iZGEgZXJyb3IgaGFuZGxpbmcgd2l0aCBtZXRyaWNzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBMYW1iZGHlrp/oo4Xjg4Hjgqfjg4Pjgq/jg6rjgrnjg4jjgavmupbmi6DjgZfjgZ/lrp/oo4XkvotcclxuICAgICAgY29uc3QgbW9ja0hhbmRsZXIgPSBhc3luYyAoX2V2ZW50OiBhbnksIGNvbnRleHQ6IGFueSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIC8vIOODoeOCpOODs+WHpueQhu+8iOaIkOWKn++8iVxyXG4gICAgICAgICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSB9KTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8g5oiQ5Yqf44Oh44OI44Oq44Kv44K56YCB5L+hXHJcbiAgICAgICAgICBhd2FpdCBzZW5kU3VjY2Vzc01ldHJpYyhjb250ZXh0LmZ1bmN0aW9uTmFtZSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIOWun+ihjOaZgumWk+ODoeODiOODquOCr+OCuemAgeS/oVxyXG4gICAgICAgICAgY29uc3QgZXhlY3V0aW9uVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XHJcbiAgICAgICAgICBhd2FpdCBzZW5kRXhlY3V0aW9uVGltZU1ldHJpYyhleGVjdXRpb25UaW1lLCBjb250ZXh0LmZ1bmN0aW9uTmFtZSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHJldHVybiB7IHN0YXR1c0NvZGU6IDIwMCwgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBzdWNjZXNzOiB0cnVlIH0pIH07XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIC8vIOOCqOODqeODvOODoeODiOODquOCr+OCuemAgeS/oVxyXG4gICAgICAgICAgYXdhaXQgc2VuZEVycm9yTWV0cmljKGVycm9yIGFzIEVycm9yLCBjb250ZXh0LmZ1bmN0aW9uTmFtZSk7XHJcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBtb2NrQ29udGV4dCA9IHtcclxuICAgICAgICBmdW5jdGlvbk5hbWU6ICdUZXN0RnVuY3Rpb24nLFxyXG4gICAgICAgIHJlcXVlc3RJZDogJ3Rlc3QtcmVxdWVzdC1pZCcsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhd2FpdCBtb2NrSGFuZGxlcih7fSwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgY29uc3QgeyBDbG91ZFdhdGNoQ2xpZW50IH0gPSByZXF1aXJlKCdAYXdzLXNkay9jbGllbnQtY2xvdWR3YXRjaCcpO1xyXG4gICAgICBjb25zdCBtb2NrQ2xpZW50ID0gbmV3IENsb3VkV2F0Y2hDbGllbnQoKTtcclxuICAgICAgXHJcbiAgICAgIC8vIOaIkOWKn+ODoeODiOODquOCr+OCueOBqOWun+ihjOaZgumWk+ODoeODiOODquOCr+OCueOBjOmAgeS/oeOBleOCjOOCi1xyXG4gICAgICBleHBlY3QobW9ja0NsaWVudC5zZW5kKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGRlbW9uc3RyYXRlIGJhdGNoIHByb2Nlc3Npbmcgd2l0aCBtZXRyaWNzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpdGVtcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwMCB9LCAoXywgaSkgPT4gKHsgaWQ6IGkgfSkpO1xyXG4gICAgICBsZXQgc3VjY2VzcyA9IDA7XHJcbiAgICAgIGxldCBmYWlsZWQgPSAwO1xyXG5cclxuICAgICAgZm9yIChjb25zdCBfaXRlbSBvZiBpdGVtcykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAvLyA1JeOBrueiuueOh+OBp+WkseaVl1xyXG4gICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjA1KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmFuZG9tIGZhaWx1cmUnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHN1Y2Nlc3MrKztcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgZmFpbGVkKys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDjg5Djg4Pjg4HntZDmnpzjg6Hjg4jjg6rjgq/jgrnpgIHkv6FcclxuICAgICAgYXdhaXQgc2VuZEJhdGNoUmVzdWx0TWV0cmljcyhzdWNjZXNzLCBmYWlsZWQsICdCYXRjaEZ1bmN0aW9uJyk7XHJcblxyXG4gICAgICBjb25zdCB7IENsb3VkV2F0Y2hDbGllbnQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIGNvbnN0IG1vY2tDbGllbnQgPSBuZXcgQ2xvdWRXYXRjaENsaWVudCgpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KG1vY2tDbGllbnQuc2VuZCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdzZW5kRGlzY2xvc3VyZXNDb2xsZWN0ZWRNZXRyaWMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHNlbmQgZGlzY2xvc3VyZXMgY29sbGVjdGVkIG1ldHJpYyB3aXRob3V0IGZ1bmN0aW9uIG5hbWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlbmREaXNjbG9zdXJlc0NvbGxlY3RlZE1ldHJpYygxNTApO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChQdXRNZXRyaWNEYXRhQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgTWV0cmljRGF0YTogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICBNZXRyaWNOYW1lOiAnRGlzY2xvc3VyZXNDb2xsZWN0ZWQnLFxyXG4gICAgICAgICAgICAgIFZhbHVlOiAxNTAsXHJcbiAgICAgICAgICAgICAgRGltZW5zaW9uczogW10sXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2VuZCBkaXNjbG9zdXJlcyBjb2xsZWN0ZWQgbWV0cmljIHdpdGggZnVuY3Rpb24gbmFtZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VuZERpc2Nsb3N1cmVzQ29sbGVjdGVkTWV0cmljKDE1MCwgJ0NvbGxlY3RvckZ1bmN0aW9uJyk7XHJcblxyXG4gICAgICBjb25zdCB7IFB1dE1ldHJpY0RhdGFDb21tYW5kIH0gPSByZXF1aXJlKCdAYXdzLXNkay9jbGllbnQtY2xvdWR3YXRjaCcpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KFB1dE1ldHJpY0RhdGFDb21tYW5kKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICBNZXRyaWNEYXRhOiBleHBlY3QuYXJyYXlDb250YWluaW5nKFtcclxuICAgICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgICAgIE1ldHJpY05hbWU6ICdEaXNjbG9zdXJlc0NvbGxlY3RlZCcsXHJcbiAgICAgICAgICAgICAgVmFsdWU6IDE1MCxcclxuICAgICAgICAgICAgICBEaW1lbnNpb25zOiBbXHJcbiAgICAgICAgICAgICAgICB7IE5hbWU6ICdGdW5jdGlvbk5hbWUnLCBWYWx1ZTogJ0NvbGxlY3RvckZ1bmN0aW9uJyB9LFxyXG4gICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnc2VuZERpc2Nsb3N1cmVzRmFpbGVkTWV0cmljJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBzZW5kIGRpc2Nsb3N1cmVzIGZhaWxlZCBtZXRyaWMgd2l0aG91dCBmdW5jdGlvbiBuYW1lJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZW5kRGlzY2xvc3VyZXNGYWlsZWRNZXRyaWMoNSk7XHJcblxyXG4gICAgICBjb25zdCB7IFB1dE1ldHJpY0RhdGFDb21tYW5kIH0gPSByZXF1aXJlKCdAYXdzLXNkay9jbGllbnQtY2xvdWR3YXRjaCcpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KFB1dE1ldHJpY0RhdGFDb21tYW5kKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICBNZXRyaWNEYXRhOiBleHBlY3QuYXJyYXlDb250YWluaW5nKFtcclxuICAgICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgICAgIE1ldHJpY05hbWU6ICdEaXNjbG9zdXJlc0ZhaWxlZCcsXHJcbiAgICAgICAgICAgICAgVmFsdWU6IDUsXHJcbiAgICAgICAgICAgICAgRGltZW5zaW9uczogW10sXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2VuZCBkaXNjbG9zdXJlcyBmYWlsZWQgbWV0cmljIHdpdGggZnVuY3Rpb24gbmFtZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VuZERpc2Nsb3N1cmVzRmFpbGVkTWV0cmljKDUsICdDb2xsZWN0b3JGdW5jdGlvbicpO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChQdXRNZXRyaWNEYXRhQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgTWV0cmljRGF0YTogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICBNZXRyaWNOYW1lOiAnRGlzY2xvc3VyZXNGYWlsZWQnLFxyXG4gICAgICAgICAgICAgIFZhbHVlOiA1LFxyXG4gICAgICAgICAgICAgIERpbWVuc2lvbnM6IFtcclxuICAgICAgICAgICAgICAgIHsgTmFtZTogJ0Z1bmN0aW9uTmFtZScsIFZhbHVlOiAnQ29sbGVjdG9yRnVuY3Rpb24nIH0sXHJcbiAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICBdKSxcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdzZW5kQ29sbGVjdGlvblN1Y2Nlc3NSYXRlTWV0cmljJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBzZW5kIGNvbGxlY3Rpb24gc3VjY2VzcyByYXRlIG1ldHJpYyB3aXRob3V0IGZ1bmN0aW9uIG5hbWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlbmRDb2xsZWN0aW9uU3VjY2Vzc1JhdGVNZXRyaWMoOTYuNzcpO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChQdXRNZXRyaWNEYXRhQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgTWV0cmljRGF0YTogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICBNZXRyaWNOYW1lOiAnQ29sbGVjdGlvblN1Y2Nlc3NSYXRlJyxcclxuICAgICAgICAgICAgICBWYWx1ZTogOTYuNzcsXHJcbiAgICAgICAgICAgICAgVW5pdDogJ0NvdW50JyxcclxuICAgICAgICAgICAgICBEaW1lbnNpb25zOiBbXSxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICBdKSxcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzZW5kIGNvbGxlY3Rpb24gc3VjY2VzcyByYXRlIG1ldHJpYyB3aXRoIGZ1bmN0aW9uIG5hbWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlbmRDb2xsZWN0aW9uU3VjY2Vzc1JhdGVNZXRyaWMoOTYuNzcsICdDb2xsZWN0b3JGdW5jdGlvbicpO1xyXG5cclxuICAgICAgY29uc3QgeyBQdXRNZXRyaWNEYXRhQ29tbWFuZCB9ID0gcmVxdWlyZSgnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChQdXRNZXRyaWNEYXRhQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgTWV0cmljRGF0YTogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICBNZXRyaWNOYW1lOiAnQ29sbGVjdGlvblN1Y2Nlc3NSYXRlJyxcclxuICAgICAgICAgICAgICBWYWx1ZTogOTYuNzcsXHJcbiAgICAgICAgICAgICAgVW5pdDogJ0NvdW50JyxcclxuICAgICAgICAgICAgICBEaW1lbnNpb25zOiBbXHJcbiAgICAgICAgICAgICAgICB7IE5hbWU6ICdGdW5jdGlvbk5hbWUnLCBWYWx1ZTogJ0NvbGxlY3RvckZ1bmN0aW9uJyB9LFxyXG4gICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIDEwMCUgc3VjY2VzcyByYXRlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZW5kQ29sbGVjdGlvblN1Y2Nlc3NSYXRlTWV0cmljKDEwMCwgJ0NvbGxlY3RvckZ1bmN0aW9uJyk7XHJcblxyXG4gICAgICBjb25zdCB7IFB1dE1ldHJpY0RhdGFDb21tYW5kIH0gPSByZXF1aXJlKCdAYXdzLXNkay9jbGllbnQtY2xvdWR3YXRjaCcpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KFB1dE1ldHJpY0RhdGFDb21tYW5kKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICBNZXRyaWNEYXRhOiBleHBlY3QuYXJyYXlDb250YWluaW5nKFtcclxuICAgICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgICAgIFZhbHVlOiAxMDAsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIDAlIHN1Y2Nlc3MgcmF0ZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VuZENvbGxlY3Rpb25TdWNjZXNzUmF0ZU1ldHJpYygwLCAnQ29sbGVjdG9yRnVuY3Rpb24nKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgUHV0TWV0cmljRGF0YUNvbW1hbmQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoUHV0TWV0cmljRGF0YUNvbW1hbmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIE1ldHJpY0RhdGE6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xyXG4gICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgVmFsdWU6IDAsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQ3VzdG9tIE1ldHJpY3MgSW50ZWdyYXRpb24gRXhhbXBsZScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgZGVtb25zdHJhdGUgY29tcGxldGUgY29sbGVjdGlvbiBtZXRyaWNzIHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyDlj47pm4bntZDmnpzjga7jgrfjg5/jg6Xjg6zjg7zjgrfjg6fjg7NcclxuICAgICAgY29uc3QgY29sbGVjdGVkQ291bnQgPSAxNTA7XHJcbiAgICAgIGNvbnN0IGZhaWxlZENvdW50ID0gNTtcclxuICAgICAgY29uc3QgdG90YWxDb3VudCA9IGNvbGxlY3RlZENvdW50ICsgZmFpbGVkQ291bnQ7XHJcbiAgICAgIGNvbnN0IHN1Y2Nlc3NSYXRlID0gKGNvbGxlY3RlZENvdW50IC8gdG90YWxDb3VudCkgKiAxMDA7XHJcblxyXG4gICAgICAvLyDjgqvjgrnjgr/jg6Djg6Hjg4jjg6rjgq/jgrnjgpLpgIHkv6FcclxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgIHNlbmREaXNjbG9zdXJlc0NvbGxlY3RlZE1ldHJpYyhjb2xsZWN0ZWRDb3VudCwgJ0NvbGxlY3RvckZ1bmN0aW9uJyksXHJcbiAgICAgICAgc2VuZERpc2Nsb3N1cmVzRmFpbGVkTWV0cmljKGZhaWxlZENvdW50LCAnQ29sbGVjdG9yRnVuY3Rpb24nKSxcclxuICAgICAgICBzZW5kQ29sbGVjdGlvblN1Y2Nlc3NSYXRlTWV0cmljKHN1Y2Nlc3NSYXRlLCAnQ29sbGVjdG9yRnVuY3Rpb24nKSxcclxuICAgICAgXSk7XHJcblxyXG4gICAgICBjb25zdCB7IENsb3VkV2F0Y2hDbGllbnQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHdhdGNoJyk7XHJcbiAgICAgIGNvbnN0IG1vY2tDbGllbnQgPSBuZXcgQ2xvdWRXYXRjaENsaWVudCgpO1xyXG4gICAgICBcclxuICAgICAgLy8gM+OBpOOBruODoeODiOODquOCr+OCueOBjOmAgeS/oeOBleOCjOOCi1xyXG4gICAgICBleHBlY3QobW9ja0NsaWVudC5zZW5kKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBzdWNjZXNzIHJhdGUgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0ZXN0Q2FzZXMgPSBbXHJcbiAgICAgICAgeyBjb2xsZWN0ZWQ6IDEwMCwgZmFpbGVkOiAwLCBleHBlY3RlZFJhdGU6IDEwMCB9LFxyXG4gICAgICAgIHsgY29sbGVjdGVkOiA5NSwgZmFpbGVkOiA1LCBleHBlY3RlZFJhdGU6IDk1IH0sXHJcbiAgICAgICAgeyBjb2xsZWN0ZWQ6IDE1MCwgZmFpbGVkOiA1LCBleHBlY3RlZFJhdGU6IDk2Ljc3NDE5MzU0ODM4NzEwIH0sXHJcbiAgICAgICAgeyBjb2xsZWN0ZWQ6IDAsIGZhaWxlZDogMTAsIGV4cGVjdGVkUmF0ZTogMCB9LFxyXG4gICAgICBdO1xyXG5cclxuICAgICAgZm9yIChjb25zdCB0ZXN0Q2FzZSBvZiB0ZXN0Q2FzZXMpIHtcclxuICAgICAgICBjb25zdCB0b3RhbENvdW50ID0gdGVzdENhc2UuY29sbGVjdGVkICsgdGVzdENhc2UuZmFpbGVkO1xyXG4gICAgICAgIGNvbnN0IHN1Y2Nlc3NSYXRlID0gdG90YWxDb3VudCA+IDAgXHJcbiAgICAgICAgICA/ICh0ZXN0Q2FzZS5jb2xsZWN0ZWQgLyB0b3RhbENvdW50KSAqIDEwMCBcclxuICAgICAgICAgIDogMDtcclxuXHJcbiAgICAgICAgZXhwZWN0KHN1Y2Nlc3NSYXRlKS50b0JlQ2xvc2VUbyh0ZXN0Q2FzZS5leHBlY3RlZFJhdGUsIDIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJ2ZXJzaW9uIjozfQ==