8636ae0e478b784a4149b29e17db801a
"use strict";
/**
 * Property 10: エクスポートファイルの有効期限
 *
 * Validates: Requirements 7.2, 12.4
 * エクスポートファイルに7日後の自動削除ライフサイクルポリシーが適用されることを確認
 *
 * Requirements: 要件14.2（プロパティテスト）
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// モック
jest.mock('../../../utils/logger');
jest.mock('../../../utils/retry', () => ({
    retryWithBackoff: jest.fn((fn) => fn()),
}));
const fc = __importStar(require("fast-check"));
const export_to_s3_1 = require("../export-to-s3");
const client_s3_1 = require("@aws-sdk/client-s3");
const aws_sdk_client_mock_1 = require("aws-sdk-client-mock");
describe('Property 10: エクスポートファイルの有効期限', () => {
    const s3Mock = (0, aws_sdk_client_mock_1.mockClient)(client_s3_1.S3Client);
    beforeEach(() => {
        s3Mock.reset();
        process.env.EXPORT_BUCKET_NAME = 'test-exports-bucket';
        process.env.AWS_REGION = 'ap-northeast-1';
        // S3Client.send のモック - PutObjectCommandを正しくキャプチャ
        s3Mock.on(client_s3_1.PutObjectCommand).resolves({});
    });
    /**
     * Property: すべてのエクスポートファイルに auto-delete タグが設定される
     *
     * このプロパティは、エクスポートファイルがS3にアップロードされる際に、
     * 必ず auto-delete=true タグが設定されることを検証します。
     * このタグは、S3ライフサイクルポリシーによって7日後に自動削除されるために使用されます。
     */
    it('Property: すべてのエクスポートファイルに auto-delete タグが設定される', async () => {
        await fc.assert(fc.asyncProperty(
        // Arbitrary: エクスポートID
        fc.string({ minLength: 10, maxLength: 50 }), 
        // Arbitrary: フォーマット（json または csv）
        fc.constantFrom('json', 'csv'), 
        // Arbitrary: 開示情報のリスト（0〜100件）
        fc.array(fc.record({
            disclosure_id: fc.string({ minLength: 10, maxLength: 20 }),
            company_code: fc.stringOf(fc.integer({ min: 0, max: 9 }), { minLength: 4, maxLength: 4 }),
            company_name: fc.string({ minLength: 1, maxLength: 100 }),
            disclosure_type: fc.constantFrom('決算短信', '有価証券報告書', '適時開示'),
            title: fc.string({ minLength: 1, maxLength: 200 }),
            disclosed_at: fc
                .date({ min: new Date('2020-01-01'), max: new Date('2025-12-31') })
                .map((d) => d.toISOString()),
            pdf_url: fc.webUrl(),
            s3_key: fc.string({ minLength: 10, maxLength: 100 }),
            collected_at: fc
                .date({ min: new Date('2020-01-01'), max: new Date('2025-12-31') })
                .map((d) => d.toISOString()),
            date_partition: fc
                .date({ min: new Date('2020-01-01'), max: new Date('2025-12-31') })
                .map((d) => {
                const year = d.getFullYear();
                const month = String(d.getMonth() + 1).padStart(2, '0');
                return `${year}-${month}`;
            }),
        }), { minLength: 0, maxLength: 100 }), async (export_id, format, disclosures) => {
            // Arrange
            s3Mock.reset();
            s3Mock.on(client_s3_1.PutObjectCommand).resolves({});
            // Act
            await (0, export_to_s3_1.exportToS3)(export_id, disclosures, format);
            // Assert
            expect(s3Mock.calls()).toHaveLength(1);
            const call = s3Mock.call(0);
            // PutObjectCommandのinputプロパティにアクセス
            expect(call.args[0].input).toBeDefined();
            expect(call.args[0].input.Tagging).toBe('auto-delete=true');
        }), {
            numRuns: 100, // 100回のランダムテストを実行
            verbose: true,
        });
    });
    /**
     * Property: S3キーが正しいフォーマットで生成される
     *
     * このプロパティは、エクスポートファイルのS3キーが常に正しいフォーマット
     * （exports/YYYY/MM/DD/export_id.format）で生成されることを検証します。
     */
    it('Property: S3キーが正しいフォーマットで生成される', async () => {
        await fc.assert(fc.asyncProperty(
        // Arbitrary: エクスポートID（英数字とハイフンのみ、スラッシュや特殊文字を除外）
        fc.stringMatching(/^[a-zA-Z0-9_-]{10,50}$/), 
        // Arbitrary: フォーマット（json または csv）
        fc.constantFrom('json', 'csv'), 
        // Arbitrary: 開示情報のリスト（0〜10件、パフォーマンスのため少なめ）
        fc.array(fc.record({
            disclosure_id: fc.string({ minLength: 10, maxLength: 20 }),
            company_code: fc.stringOf(fc.integer({ min: 0, max: 9 }), { minLength: 4, maxLength: 4 }),
            company_name: fc.string({ minLength: 1, maxLength: 100 }),
            disclosure_type: fc.constantFrom('決算短信', '有価証券報告書', '適時開示'),
            title: fc.string({ minLength: 1, maxLength: 200 }),
            disclosed_at: fc
                .date({ min: new Date('2020-01-01'), max: new Date('2025-12-31') })
                .map((d) => d.toISOString()),
            pdf_url: fc.webUrl(),
            s3_key: fc.string({ minLength: 10, maxLength: 100 }),
            collected_at: fc
                .date({ min: new Date('2020-01-01'), max: new Date('2025-12-31') })
                .map((d) => d.toISOString()),
            date_partition: fc
                .date({ min: new Date('2020-01-01'), max: new Date('2025-12-31') })
                .map((d) => {
                const year = d.getFullYear();
                const month = String(d.getMonth() + 1).padStart(2, '0');
                return `${year}-${month}`;
            }),
        }), { minLength: 0, maxLength: 10 }), async (export_id, format, disclosures) => {
            // Act
            const s3_key = await (0, export_to_s3_1.exportToS3)(export_id, disclosures, format);
            // Assert
            // Property: S3キーが正しいフォーマット（exports/YYYY/MM/DD/export_id.format）
            const s3KeyRegex = new RegExp(`^exports/\\d{4}/\\d{2}/\\d{2}/[^/]+\\.${format}$`);
            expect(s3_key).toMatch(s3KeyRegex);
        }), {
            numRuns: 100,
            verbose: true,
        });
    });
    /**
     * Property: ContentTypeが正しく設定される
     *
     * このプロパティは、エクスポートファイルのContentTypeが
     * フォーマットに応じて正しく設定されることを検証します。
     * - JSON: application/json
     * - CSV: text/csv
     */
    it('Property: ContentTypeが正しく設定される', async () => {
        await fc.assert(fc.asyncProperty(
        // Arbitrary: エクスポートID
        fc.string({ minLength: 10, maxLength: 50 }), 
        // Arbitrary: フォーマット（json または csv）
        fc.constantFrom('json', 'csv'), 
        // Arbitrary: 開示情報のリスト（0〜10件）
        fc.array(fc.record({
            disclosure_id: fc.string({ minLength: 10, maxLength: 20 }),
            company_code: fc.stringOf(fc.integer({ min: 0, max: 9 }), { minLength: 4, maxLength: 4 }),
            company_name: fc.string({ minLength: 1, maxLength: 100 }),
            disclosure_type: fc.constantFrom('決算短信', '有価証券報告書', '適時開示'),
            title: fc.string({ minLength: 1, maxLength: 200 }),
            disclosed_at: fc
                .date({ min: new Date('2020-01-01'), max: new Date('2025-12-31') })
                .map((d) => d.toISOString()),
            pdf_url: fc.webUrl(),
            s3_key: fc.string({ minLength: 10, maxLength: 100 }),
            collected_at: fc
                .date({ min: new Date('2020-01-01'), max: new Date('2025-12-31') })
                .map((d) => d.toISOString()),
            date_partition: fc
                .date({ min: new Date('2020-01-01'), max: new Date('2025-12-31') })
                .map((d) => {
                const year = d.getFullYear();
                const month = String(d.getMonth() + 1).padStart(2, '0');
                return `${year}-${month}`;
            }),
        }), { minLength: 0, maxLength: 10 }), async (export_id, format, disclosures) => {
            // Arrange
            s3Mock.reset();
            s3Mock.on(client_s3_1.PutObjectCommand).resolves({});
            // Act
            await (0, export_to_s3_1.exportToS3)(export_id, disclosures, format);
            // Assert
            expect(s3Mock.calls()).toHaveLength(1);
            const call = s3Mock.call(0);
            // PutObjectCommandのinputプロパティにアクセス
            expect(call.args[0].input).toBeDefined();
            const contentType = call.args[0].input.ContentType;
            // Property: ContentTypeが正しく設定されている
            const expectedContentType = format === 'json' ? 'application/json' : 'text/csv';
            expect(contentType).toBe(expectedContentType);
        }), {
            numRuns: 100,
            verbose: true,
        });
    });
    /**
     * Property: CSV形式の場合、カンマを含む値が正しくエスケープされる
     *
     * このプロパティは、CSV形式でエクスポートする際に、
     * カンマを含む値が正しくダブルクォートで囲まれることを検証します。
     */
    it('Property: CSV形式の場合、カンマを含む値が正しくエスケープされる', async () => {
        await fc.assert(fc.asyncProperty(
        // Arbitrary: エクスポートID（英数字とハイフンのみ）
        fc.stringMatching(/^[a-zA-Z0-9_-]{10,50}$/), 
        // Arbitrary: カンマを含むタイトル（ダブルクォートを除外）
        fc.string({ minLength: 1, maxLength: 50 }).filter(s => !s.includes('"')).map((s) => `${s}, カンマ含む`), async (export_id, titleWithComma) => {
            // Arrange
            const disclosures = [
                {
                    disclosure_id: '20240115_1234_001',
                    company_code: '1234',
                    company_name: 'テスト株式会社',
                    disclosure_type: '決算短信',
                    title: titleWithComma,
                    disclosed_at: '2024-01-15T10:30:00Z',
                    pdf_url: 'https://example.com/pdf/20240115_1234_001.pdf',
                    s3_key: 'pdfs/2024/01/15/20240115_1234_001.pdf',
                    collected_at: '2024-01-15T10:35:00Z',
                    date_partition: '2024-01',
                },
            ];
            // Arrange
            s3Mock.reset();
            s3Mock.on(client_s3_1.PutObjectCommand).resolves({});
            // Act
            await (0, export_to_s3_1.exportToS3)(export_id, disclosures, 'csv');
            // Assert
            expect(s3Mock.calls()).toHaveLength(1);
            const call = s3Mock.call(0);
            // PutObjectCommandのinputプロパティにアクセス
            expect(call.args[0].input).toBeDefined();
            const body = call.args[0].input.Body;
            const lines = body.split('\n');
            // Property: カンマを含む値がダブルクォートで囲まれている
            expect(lines[1]).toContain(`"${titleWithComma}"`);
        }), {
            numRuns: 50,
            verbose: true,
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxsYW1iZGFcXGV4cG9ydFxcX190ZXN0c19fXFxleHBvcnQtZmlsZS1leHBpcmF0aW9uLnByb3BlcnR5LnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7O0dBT0c7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUUgsTUFBTTtBQUNOLElBQUksQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FBQztBQUNuQyxJQUFJLENBQUMsSUFBSSxDQUFDLHNCQUFzQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDdkMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Q0FDeEMsQ0FBQyxDQUFDLENBQUM7QUFWSiwrQ0FBaUM7QUFDakMsa0RBQTZDO0FBRTdDLGtEQUFnRTtBQUNoRSw2REFBaUQ7QUFRakQsUUFBUSxDQUFDLDhCQUE4QixFQUFFLEdBQUcsRUFBRTtJQUM1QyxNQUFNLE1BQU0sR0FBRyxJQUFBLGdDQUFVLEVBQUMsb0JBQVEsQ0FBQyxDQUFDO0lBRXBDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDZixPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixHQUFHLHFCQUFxQixDQUFDO1FBQ3ZELE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxHQUFHLGdCQUFnQixDQUFDO1FBRTFDLGlEQUFpRDtRQUNqRCxNQUFNLENBQUMsRUFBRSxDQUFDLDRCQUFnQixDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzNDLENBQUMsQ0FBQyxDQUFDO0lBRUg7Ozs7OztPQU1HO0lBQ0gsRUFBRSxDQUFDLGdEQUFnRCxFQUFFLEtBQUssSUFBSSxFQUFFO1FBQzlELE1BQU0sRUFBRSxDQUFDLE1BQU0sQ0FDYixFQUFFLENBQUMsYUFBYTtR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QUFLLENBQUMsSUFBSSxDQUFDO1lBQ3JDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFL0IsbUNBQW1DO1lBQ25DLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxjQUFjLEdBQUcsQ0FBQyxDQUFDO1FBQ3BELENBQUMsQ0FDRixFQUNEO1lBQ0UsT0FBTyxFQUFFLEVBQUU7WUFDWCxPQUFPLEVBQUUsSUFBSTtTQUNkLENBQ0YsQ0FBQztJQUNKLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxsYW1iZGFcXGV4cG9ydFxcX190ZXN0c19fXFxleHBvcnQtZmlsZS1leHBpcmF0aW9uLnByb3BlcnR5LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFByb3BlcnR5IDEwOiDjgqjjgq/jgrnjg53jg7zjg4jjg5XjgqHjgqTjg6vjga7mnInlirnmnJ/pmZBcclxuICpcclxuICogVmFsaWRhdGVzOiBSZXF1aXJlbWVudHMgNy4yLCAxMi40XHJcbiAqIOOCqOOCr+OCueODneODvOODiOODleOCoeOCpOODq+OBqzfml6Xlvozjga7oh6rli5XliYrpmaTjg6njgqTjg5XjgrXjgqTjgq/jg6vjg53jg6rjgrfjg7zjgYzpgannlKjjgZXjgozjgovjgZPjgajjgpLnorroqo1cclxuICpcclxuICogUmVxdWlyZW1lbnRzOiDopoHku7YxNC4y77yI44OX44Ot44OR44OG44Kj44OG44K544OI77yJXHJcbiAqL1xyXG5cclxuaW1wb3J0ICogYXMgZmMgZnJvbSAnZmFzdC1jaGVjayc7XHJcbmltcG9ydCB7IGV4cG9ydFRvUzMgfSBmcm9tICcuLi9leHBvcnQtdG8tczMnO1xyXG5pbXBvcnQgeyBEaXNjbG9zdXJlIH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBTM0NsaWVudCwgUHV0T2JqZWN0Q29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1zMyc7XHJcbmltcG9ydCB7IG1vY2tDbGllbnQgfSBmcm9tICdhd3Mtc2RrLWNsaWVudC1tb2NrJztcclxuXHJcbi8vIOODouODg+OCr1xyXG5qZXN0Lm1vY2soJy4uLy4uLy4uL3V0aWxzL2xvZ2dlcicpO1xyXG5qZXN0Lm1vY2soJy4uLy4uLy4uL3V0aWxzL3JldHJ5JywgKCkgPT4gKHtcclxuICByZXRyeVdpdGhCYWNrb2ZmOiBqZXN0LmZuKChmbikgPT4gZm4oKSksXHJcbn0pKTtcclxuXHJcbmRlc2NyaWJlKCdQcm9wZXJ0eSAxMDog44Ko44Kv44K544Od44O844OI44OV44Kh44Kk44Or44Gu5pyJ5Yq55pyf6ZmQJywgKCkgPT4ge1xyXG4gIGNvbnN0IHMzTW9jayA9IG1vY2tDbGllbnQoUzNDbGllbnQpO1xyXG5cclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIHMzTW9jay5yZXNldCgpO1xyXG4gICAgcHJvY2Vzcy5lbnYuRVhQT1JUX0JVQ0tFVF9OQU1FID0gJ3Rlc3QtZXhwb3J0cy1idWNrZXQnO1xyXG4gICAgcHJvY2Vzcy5lbnYuQVdTX1JFR0lPTiA9ICdhcC1ub3J0aGVhc3QtMSc7XHJcblxyXG4gICAgLy8gUzNDbGllbnQuc2VuZCDjga7jg6Ljg4Pjgq8gLSBQdXRPYmplY3RDb21tYW5k44KS5q2j44GX44GP44Kt44Oj44OX44OB44OjXHJcbiAgICBzM01vY2sub24oUHV0T2JqZWN0Q29tbWFuZCkucmVzb2x2ZXMoe30pO1xyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBQcm9wZXJ0eTog44GZ44G544Gm44Gu44Ko44Kv44K544Od44O844OI44OV44Kh44Kk44Or44GrIGF1dG8tZGVsZXRlIOOCv+OCsOOBjOioreWumuOBleOCjOOCi1xyXG4gICAqXHJcbiAgICog44GT44Gu44OX44Ot44OR44OG44Kj44Gv44CB44Ko44Kv44K544Od44O844OI44OV44Kh44Kk44Or44GMUzPjgavjgqLjg4Pjg5fjg63jg7zjg4njgZXjgozjgovpmpvjgavjgIFcclxuICAgKiDlv4XjgZogYXV0by1kZWxldGU9dHJ1ZSDjgr/jgrDjgYzoqK3lrprjgZXjgozjgovjgZPjgajjgpLmpJzoqLzjgZfjgb7jgZnjgIJcclxuICAgKiDjgZPjga7jgr/jgrDjga/jgIFTM+ODqeOCpOODleOCteOCpOOCr+ODq+ODneODquOCt+ODvOOBq+OCiOOBo+OBpjfml6Xlvozjgavoh6rli5XliYrpmaTjgZXjgozjgovjgZ/jgoHjgavkvb/nlKjjgZXjgozjgb7jgZnjgIJcclxuICAgKi9cclxuICBpdCgnUHJvcGVydHk6IOOBmeOBueOBpuOBruOCqOOCr+OCueODneODvOODiOODleOCoeOCpOODq+OBqyBhdXRvLWRlbGV0ZSDjgr/jgrDjgYzoqK3lrprjgZXjgozjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBhd2FpdCBmYy5hc3NlcnQoXHJcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXHJcbiAgICAgICAgLy8gQXJiaXRyYXJ5OiDjgqjjgq/jgrnjg53jg7zjg4hJRFxyXG4gICAgICAgIGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMTAsIG1heExlbmd0aDogNTAgfSksXHJcbiAgICAgICAgLy8gQXJiaXRyYXJ5OiDjg5Xjgqnjg7zjg57jg4Pjg4jvvIhqc29uIOOBvuOBn+OBryBjc3bvvIlcclxuICAgICAgICBmYy5jb25zdGFudEZyb20oJ2pzb24nIGFzIGNvbnN0LCAnY3N2JyBhcyBjb25zdCksXHJcbiAgICAgICAgLy8gQXJiaXRyYXJ5OiDplovnpLrmg4XloLHjga7jg6rjgrnjg4jvvIgw44CcMTAw5Lu277yJXHJcbiAgICAgICAgZmMuYXJyYXkoXHJcbiAgICAgICAgICBmYy5yZWNvcmQoe1xyXG4gICAgICAgICAgICBkaXNjbG9zdXJlX2lkOiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEwLCBtYXhMZW5ndGg6IDIwIH0pLFxyXG4gICAgICAgICAgICBjb21wYW55X2NvZGU6IGZjLnN0cmluZ09mKGZjLmludGVnZXIoeyBtaW46IDAsIG1heDogOSB9KSwgeyBtaW5MZW5ndGg6IDQsIG1heExlbmd0aDogNCB9KSxcclxuICAgICAgICAgICAgY29tcGFueV9uYW1lOiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMTAwIH0pLFxyXG4gICAgICAgICAgICBkaXNjbG9zdXJlX3R5cGU6IGZjLmNvbnN0YW50RnJvbSgn5rG6566X55+t5L+hJywgJ+acieS+oeiovOWIuOWgseWRiuabuCcsICfpganmmYLplovnpLonKSxcclxuICAgICAgICAgICAgdGl0bGU6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAyMDAgfSksXHJcbiAgICAgICAgICAgIGRpc2Nsb3NlZF9hdDogZmNcclxuICAgICAgICAgICAgICAuZGF0ZSh7IG1pbjogbmV3IERhdGUoJzIwMjAtMDEtMDEnKSwgbWF4OiBuZXcgRGF0ZSgnMjAyNS0xMi0zMScpIH0pXHJcbiAgICAgICAgICAgICAgLm1hcCgoZCkgPT4gZC50b0lTT1N0cmluZygpKSxcclxuICAgICAgICAgICAgcGRmX3VybDogZmMud2ViVXJsKCksXHJcbiAgICAgICAgICAgIHMzX2tleTogZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxMCwgbWF4TGVuZ3RoOiAxMDAgfSksXHJcbiAgICAgICAgICAgIGNvbGxlY3RlZF9hdDogZmNcclxuICAgICAgICAgICAgICAuZGF0ZSh7IG1pbjogbmV3IERhdGUoJzIwMjAtMDEtMDEnKSwgbWF4OiBuZXcgRGF0ZSgnMjAyNS0xMi0zMScpIH0pXHJcbiAgICAgICAgICAgICAgLm1hcCgoZCkgPT4gZC50b0lTT1N0cmluZygpKSxcclxuICAgICAgICAgICAgZGF0ZV9wYXJ0aXRpb246IGZjXHJcbiAgICAgICAgICAgICAgLmRhdGUoeyBtaW46IG5ldyBEYXRlKCcyMDIwLTAxLTAxJyksIG1heDogbmV3IERhdGUoJzIwMjUtMTItMzEnKSB9KVxyXG4gICAgICAgICAgICAgIC5tYXAoKGQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHllYXIgPSBkLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb250aCA9IFN0cmluZyhkLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9YDtcclxuICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgeyBtaW5MZW5ndGg6IDAsIG1heExlbmd0aDogMTAwIH1cclxuICAgICAgICApLFxyXG4gICAgICAgIGFzeW5jIChleHBvcnRfaWQsIGZvcm1hdCwgZGlzY2xvc3VyZXMpID0+IHtcclxuICAgICAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgICAgIHMzTW9jay5yZXNldCgpO1xyXG4gICAgICAgICAgczNNb2NrLm9uKFB1dE9iamVjdENvbW1hbmQpLnJlc29sdmVzKHt9KTtcclxuXHJcbiAgICAgICAgICAvLyBBY3RcclxuICAgICAgICAgIGF3YWl0IGV4cG9ydFRvUzMoZXhwb3J0X2lkLCBkaXNjbG9zdXJlcyBhcyBEaXNjbG9zdXJlW10sIGZvcm1hdCk7XHJcblxyXG4gICAgICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgICAgICBleHBlY3QoczNNb2NrLmNhbGxzKCkpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgICAgIGNvbnN0IGNhbGwgPSBzM01vY2suY2FsbCgwKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gUHV0T2JqZWN0Q29tbWFuZOOBrmlucHV044OX44Ot44OR44OG44Kj44Gr44Ki44Kv44K744K5XHJcbiAgICAgICAgICBleHBlY3QoY2FsbC5hcmdzWzBdLmlucHV0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICAgICAgZXhwZWN0KGNhbGwuYXJnc1swXS5pbnB1dC5UYWdnaW5nKS50b0JlKCdhdXRvLWRlbGV0ZT10cnVlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICApLFxyXG4gICAgICB7XHJcbiAgICAgICAgbnVtUnVuczogMTAwLCAvLyAxMDDlm57jga7jg6njg7Pjg4Djg6Djg4bjgrnjg4jjgpLlrp/ooYxcclxuICAgICAgICB2ZXJib3NlOiB0cnVlLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBQcm9wZXJ0eTogUzPjgq3jg7zjgYzmraPjgZfjgYTjg5Xjgqnjg7zjg57jg4Pjg4jjgafnlJ/miJDjgZXjgozjgotcclxuICAgKlxyXG4gICAqIOOBk+OBruODl+ODreODkeODhuOCo+OBr+OAgeOCqOOCr+OCueODneODvOODiOODleOCoeOCpOODq+OBrlMz44Kt44O844GM5bi444Gr5q2j44GX44GE44OV44Kp44O844Oe44OD44OIXHJcbiAgICog77yIZXhwb3J0cy9ZWVlZL01NL0REL2V4cG9ydF9pZC5mb3JtYXTvvInjgafnlJ/miJDjgZXjgozjgovjgZPjgajjgpLmpJzoqLzjgZfjgb7jgZnjgIJcclxuICAgKi9cclxuICBpdCgnUHJvcGVydHk6IFMz44Kt44O844GM5q2j44GX44GE44OV44Kp44O844Oe44OD44OI44Gn55Sf5oiQ44GV44KM44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgYXdhaXQgZmMuYXNzZXJ0KFxyXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxyXG4gICAgICAgIC8vIEFyYml0cmFyeTog44Ko44Kv44K544Od44O844OISUTvvIjoi7HmlbDlrZfjgajjg4/jgqTjg5Xjg7Pjga7jgb/jgIHjgrnjg6njg4Pjgrfjg6XjgoTnibnmrormloflrZfjgpLpmaTlpJbvvIlcclxuICAgICAgICBmYy5zdHJpbmdNYXRjaGluZygvXlthLXpBLVowLTlfLV17MTAsNTB9JC8pLFxyXG4gICAgICAgIC8vIEFyYml0cmFyeTog44OV44Kp44O844Oe44OD44OI77yIanNvbiDjgb7jgZ/jga8gY3N277yJXHJcbiAgICAgICAgZmMuY29uc3RhbnRGcm9tKCdqc29uJyBhcyBjb25zdCwgJ2NzdicgYXMgY29uc3QpLFxyXG4gICAgICAgIC8vIEFyYml0cmFyeTog6ZaL56S65oOF5aCx44Gu44Oq44K544OI77yIMOOAnDEw5Lu244CB44OR44OV44Kp44O844Oe44Oz44K544Gu44Gf44KB5bCR44Gq44KB77yJXHJcbiAgICAgICAgZmMuYXJyYXkoXHJcbiAgICAgICAgICBmYy5yZWNvcmQoe1xyXG4gICAgICAgICAgICBkaXNjbG9zdXJlX2lkOiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEwLCBtYXhMZW5ndGg6IDIwIH0pLFxyXG4gICAgICAgICAgICBjb21wYW55X2NvZGU6IGZjLnN0cmluZ09mKGZjLmludGVnZXIoeyBtaW46IDAsIG1heDogOSB9KSwgeyBtaW5MZW5ndGg6IDQsIG1heExlbmd0aDogNCB9KSxcclxuICAgICAgICAgICAgY29tcGFueV9uYW1lOiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMTAwIH0pLFxyXG4gICAgICAgICAgICBkaXNjbG9zdXJlX3R5cGU6IGZjLmNvbnN0YW50RnJvbSgn5rG6566X55+t5L+hJywgJ+acieS+oeiovOWIuOWgseWRiuabuCcsICfpganmmYLplovnpLonKSxcclxuICAgICAgICAgICAgdGl0bGU6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAyMDAgfSksXHJcbiAgICAgICAgICAgIGRpc2Nsb3NlZF9hdDogZmNcclxuICAgICAgICAgICAgICAuZGF0ZSh7IG1pbjogbmV3IERhdGUoJzIwMjAtMDEtMDEnKSwgbWF4OiBuZXcgRGF0ZSgnMjAyNS0xMi0zMScpIH0pXHJcbiAgICAgICAgICAgICAgLm1hcCgoZCkgPT4gZC50b0lTT1N0cmluZygpKSxcclxuICAgICAgICAgICAgcGRmX3VybDogZmMud2ViVXJsKCksXHJcbiAgICAgICAgICAgIHMzX2tleTogZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxMCwgbWF4TGVuZ3RoOiAxMDAgfSksXHJcbiAgICAgICAgICAgIGNvbGxlY3RlZF9hdDogZmNcclxuICAgICAgICAgICAgICAuZGF0ZSh7IG1pbjogbmV3IERhdGUoJzIwMjAtMDEtMDEnKSwgbWF4OiBuZXcgRGF0ZSgnMjAyNS0xMi0zMScpIH0pXHJcbiAgICAgICAgICAgICAgLm1hcCgoZCkgPT4gZC50b0lTT1N0cmluZygpKSxcclxuICAgICAgICAgICAgZGF0ZV9wYXJ0aXRpb246IGZjXHJcbiAgICAgICAgICAgICAgLmRhdGUoeyBtaW46IG5ldyBEYXRlKCcyMDIwLTAxLTAxJyksIG1heDogbmV3IERhdGUoJzIwMjUtMTItMzEnKSB9KVxyXG4gICAgICAgICAgICAgIC5tYXAoKGQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHllYXIgPSBkLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb250aCA9IFN0cmluZyhkLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9YDtcclxuICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgeyBtaW5MZW5ndGg6IDAsIG1heExlbmd0aDogMTAgfVxyXG4gICAgICAgICksXHJcbiAgICAgICAgYXN5bmMgKGV4cG9ydF9pZCwgZm9ybWF0LCBkaXNjbG9zdXJlcykgPT4ge1xyXG4gICAgICAgICAgLy8gQWN0XHJcbiAgICAgICAgICBjb25zdCBzM19rZXkgPSBhd2FpdCBleHBvcnRUb1MzKGV4cG9ydF9pZCwgZGlzY2xvc3VyZXMgYXMgRGlzY2xvc3VyZVtdLCBmb3JtYXQpO1xyXG5cclxuICAgICAgICAgIC8vIEFzc2VydFxyXG4gICAgICAgICAgLy8gUHJvcGVydHk6IFMz44Kt44O844GM5q2j44GX44GE44OV44Kp44O844Oe44OD44OI77yIZXhwb3J0cy9ZWVlZL01NL0REL2V4cG9ydF9pZC5mb3JtYXTvvIlcclxuICAgICAgICAgIGNvbnN0IHMzS2V5UmVnZXggPSBuZXcgUmVnRXhwKFxyXG4gICAgICAgICAgICBgXmV4cG9ydHMvXFxcXGR7NH0vXFxcXGR7Mn0vXFxcXGR7Mn0vW14vXStcXFxcLiR7Zm9ybWF0fSRgXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgZXhwZWN0KHMzX2tleSkudG9NYXRjaChzM0tleVJlZ2V4KTtcclxuICAgICAgICB9XHJcbiAgICAgICksXHJcbiAgICAgIHtcclxuICAgICAgICBudW1SdW5zOiAxMDAsXHJcbiAgICAgICAgdmVyYm9zZTogdHJ1ZSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogUHJvcGVydHk6IENvbnRlbnRUeXBl44GM5q2j44GX44GP6Kit5a6a44GV44KM44KLXHJcbiAgICpcclxuICAgKiDjgZPjga7jg5fjg63jg5Hjg4bjgqPjga/jgIHjgqjjgq/jgrnjg53jg7zjg4jjg5XjgqHjgqTjg6vjga5Db250ZW50VHlwZeOBjFxyXG4gICAqIOODleOCqeODvOODnuODg+ODiOOBq+W/nOOBmOOBpuato+OBl+OBj+ioreWumuOBleOCjOOCi+OBk+OBqOOCkuaknOiovOOBl+OBvuOBmeOAglxyXG4gICAqIC0gSlNPTjogYXBwbGljYXRpb24vanNvblxyXG4gICAqIC0gQ1NWOiB0ZXh0L2NzdlxyXG4gICAqL1xyXG4gIGl0KCdQcm9wZXJ0eTogQ29udGVudFR5cGXjgYzmraPjgZfjgY/oqK3lrprjgZXjgozjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBhd2FpdCBmYy5hc3NlcnQoXHJcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXHJcbiAgICAgICAgLy8gQXJiaXRyYXJ5OiDjgqjjgq/jgrnjg53jg7zjg4hJRFxyXG4gICAgICAgIGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMTAsIG1heExlbmd0aDogNTAgfSksXHJcbiAgICAgICAgLy8gQXJiaXRyYXJ5OiDjg5Xjgqnjg7zjg57jg4Pjg4jvvIhqc29uIOOBvuOBn+OBryBjc3bvvIlcclxuICAgICAgICBmYy5jb25zdGFudEZyb20oJ2pzb24nIGFzIGNvbnN0LCAnY3N2JyBhcyBjb25zdCksXHJcbiAgICAgICAgLy8gQXJiaXRyYXJ5OiDplovnpLrmg4XloLHjga7jg6rjgrnjg4jvvIgw44CcMTDku7bvvIlcclxuICAgICAgICBmYy5hcnJheShcclxuICAgICAgICAgIGZjLnJlY29yZCh7XHJcbiAgICAgICAgICAgIGRpc2Nsb3N1cmVfaWQ6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMTAsIG1heExlbmd0aDogMjAgfSksXHJcbiAgICAgICAgICAgIGNvbXBhbnlfY29kZTogZmMuc3RyaW5nT2YoZmMuaW50ZWdlcih7IG1pbjogMCwgbWF4OiA5IH0pLCB7IG1pbkxlbmd0aDogNCwgbWF4TGVuZ3RoOiA0IH0pLFxyXG4gICAgICAgICAgICBjb21wYW55X25hbWU6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAxMDAgfSksXHJcbiAgICAgICAgICAgIGRpc2Nsb3N1cmVfdHlwZTogZmMuY29uc3RhbnRGcm9tKCfmsbrnrpfnn63kv6EnLCAn5pyJ5L6h6Ki85Yi45aCx5ZGK5pu4JywgJ+mBqeaZgumWi+ekuicpLFxyXG4gICAgICAgICAgICB0aXRsZTogZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDIwMCB9KSxcclxuICAgICAgICAgICAgZGlzY2xvc2VkX2F0OiBmY1xyXG4gICAgICAgICAgICAgIC5kYXRlKHsgbWluOiBuZXcgRGF0ZSgnMjAyMC0wMS0wMScpLCBtYXg6IG5ldyBEYXRlKCcyMDI1LTEyLTMxJykgfSlcclxuICAgICAgICAgICAgICAubWFwKChkKSA9PiBkLnRvSVNPU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICBwZGZfdXJsOiBmYy53ZWJVcmwoKSxcclxuICAgICAgICAgICAgczNfa2V5OiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEwLCBtYXhMZW5ndGg6IDEwMCB9KSxcclxuICAgICAgICAgICAgY29sbGVjdGVkX2F0OiBmY1xyXG4gICAgICAgICAgICAgIC5kYXRlKHsgbWluOiBuZXcgRGF0ZSgnMjAyMC0wMS0wMScpLCBtYXg6IG5ldyBEYXRlKCcyMDI1LTEyLTMxJykgfSlcclxuICAgICAgICAgICAgICAubWFwKChkKSA9PiBkLnRvSVNPU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICBkYXRlX3BhcnRpdGlvbjogZmNcclxuICAgICAgICAgICAgICAuZGF0ZSh7IG1pbjogbmV3IERhdGUoJzIwMjAtMDEtMDEnKSwgbWF4OiBuZXcgRGF0ZSgnMjAyNS0xMi0zMScpIH0pXHJcbiAgICAgICAgICAgICAgLm1hcCgoZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeWVhciA9IGQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGQuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH1gO1xyXG4gICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICB7IG1pbkxlbmd0aDogMCwgbWF4TGVuZ3RoOiAxMCB9XHJcbiAgICAgICAgKSxcclxuICAgICAgICBhc3luYyAoZXhwb3J0X2lkLCBmb3JtYXQsIGRpc2Nsb3N1cmVzKSA9PiB7XHJcbiAgICAgICAgICAvLyBBcnJhbmdlXHJcbiAgICAgICAgICBzM01vY2sucmVzZXQoKTtcclxuICAgICAgICAgIHMzTW9jay5vbihQdXRPYmplY3RDb21tYW5kKS5yZXNvbHZlcyh7fSk7XHJcblxyXG4gICAgICAgICAgLy8gQWN0XHJcbiAgICAgICAgICBhd2FpdCBleHBvcnRUb1MzKGV4cG9ydF9pZCwgZGlzY2xvc3VyZXMgYXMgRGlzY2xvc3VyZVtdLCBmb3JtYXQpO1xyXG5cclxuICAgICAgICAgIC8vIEFzc2VydFxyXG4gICAgICAgICAgZXhwZWN0KHMzTW9jay5jYWxscygpKS50b0hhdmVMZW5ndGgoMSk7XHJcbiAgICAgICAgICBjb25zdCBjYWxsID0gczNNb2NrLmNhbGwoMCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFB1dE9iamVjdENvbW1hbmTjga5pbnB1dOODl+ODreODkeODhuOCo+OBq+OCouOCr+OCu+OCuVxyXG4gICAgICAgICAgZXhwZWN0KGNhbGwuYXJnc1swXS5pbnB1dCkudG9CZURlZmluZWQoKTtcclxuICAgICAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gY2FsbC5hcmdzWzBdLmlucHV0LkNvbnRlbnRUeXBlO1xyXG5cclxuICAgICAgICAgIC8vIFByb3BlcnR5OiBDb250ZW50VHlwZeOBjOato+OBl+OBj+ioreWumuOBleOCjOOBpuOBhOOCi1xyXG4gICAgICAgICAgY29uc3QgZXhwZWN0ZWRDb250ZW50VHlwZSA9IGZvcm1hdCA9PT0gJ2pzb24nID8gJ2FwcGxpY2F0aW9uL2pzb24nIDogJ3RleHQvY3N2JztcclxuICAgICAgICAgIGV4cGVjdChjb250ZW50VHlwZSkudG9CZShleHBlY3RlZENvbnRlbnRUeXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICksXHJcbiAgICAgIHtcclxuICAgICAgICBudW1SdW5zOiAxMDAsXHJcbiAgICAgICAgdmVyYm9zZTogdHJ1ZSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogUHJvcGVydHk6IENTVuW9ouW8j+OBruWgtOWQiOOAgeOCq+ODs+ODnuOCkuWQq+OCgOWApOOBjOato+OBl+OBj+OCqOOCueOCseODvOODl+OBleOCjOOCi1xyXG4gICAqXHJcbiAgICog44GT44Gu44OX44Ot44OR44OG44Kj44Gv44CBQ1NW5b2i5byP44Gn44Ko44Kv44K544Od44O844OI44GZ44KL6Zqb44Gr44CBXHJcbiAgICog44Kr44Oz44Oe44KS5ZCr44KA5YCk44GM5q2j44GX44GP44OA44OW44Or44Kv44Kp44O844OI44Gn5Zuy44G+44KM44KL44GT44Go44KS5qSc6Ki844GX44G+44GZ44CCXHJcbiAgICovXHJcbiAgaXQoJ1Byb3BlcnR5OiBDU1blvaLlvI/jga7loLTlkIjjgIHjgqvjg7Pjg57jgpLlkKvjgoDlgKTjgYzmraPjgZfjgY/jgqjjgrnjgrHjg7zjg5fjgZXjgozjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBhd2FpdCBmYy5hc3NlcnQoXHJcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXHJcbiAgICAgICAgLy8gQXJiaXRyYXJ5OiDjgqjjgq/jgrnjg53jg7zjg4hJRO+8iOiLseaVsOWtl+OBqOODj+OCpOODleODs+OBruOBv++8iVxyXG4gICAgICAgIGZjLnN0cmluZ01hdGNoaW5nKC9eW2EtekEtWjAtOV8tXXsxMCw1MH0kLyksXHJcbiAgICAgICAgLy8gQXJiaXRyYXJ5OiDjgqvjg7Pjg57jgpLlkKvjgoDjgr/jgqTjg4jjg6vvvIjjg4Djg5bjg6vjgq/jgqnjg7zjg4jjgpLpmaTlpJbvvIlcclxuICAgICAgICBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogNTAgfSkuZmlsdGVyKHMgPT4gIXMuaW5jbHVkZXMoJ1wiJykpLm1hcCgocykgPT4gYCR7c30sIOOCq+ODs+ODnuWQq+OCgGApLFxyXG4gICAgICAgIGFzeW5jIChleHBvcnRfaWQsIHRpdGxlV2l0aENvbW1hKSA9PiB7XHJcbiAgICAgICAgICAvLyBBcnJhbmdlXHJcbiAgICAgICAgICBjb25zdCBkaXNjbG9zdXJlczogRGlzY2xvc3VyZVtdID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgZGlzY2xvc3VyZV9pZDogJzIwMjQwMTE1XzEyMzRfMDAxJyxcclxuICAgICAgICAgICAgICBjb21wYW55X2NvZGU6ICcxMjM0JyxcclxuICAgICAgICAgICAgICBjb21wYW55X25hbWU6ICfjg4bjgrnjg4jmoKrlvI/kvJrnpL4nLFxyXG4gICAgICAgICAgICAgIGRpc2Nsb3N1cmVfdHlwZTogJ+axuueul+efreS/oScsXHJcbiAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlV2l0aENvbW1hLFxyXG4gICAgICAgICAgICAgIGRpc2Nsb3NlZF9hdDogJzIwMjQtMDEtMTVUMTA6MzA6MDBaJyxcclxuICAgICAgICAgICAgICBwZGZfdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9wZGYvMjAyNDAxMTVfMTIzNF8wMDEucGRmJyxcclxuICAgICAgICAgICAgICBzM19rZXk6ICdwZGZzLzIwMjQvMDEvMTUvMjAyNDAxMTVfMTIzNF8wMDEucGRmJyxcclxuICAgICAgICAgICAgICBjb2xsZWN0ZWRfYXQ6ICcyMDI0LTAxLTE1VDEwOjM1OjAwWicsXHJcbiAgICAgICAgICAgICAgZGF0ZV9wYXJ0aXRpb246ICcyMDI0LTAxJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICAgICAgczNNb2NrLnJlc2V0KCk7XHJcbiAgICAgICAgICBzM01vY2sub24oUHV0T2JqZWN0Q29tbWFuZCkucmVzb2x2ZXMoe30pO1xyXG5cclxuICAgICAgICAgIC8vIEFjdFxyXG4gICAgICAgICAgYXdhaXQgZXhwb3J0VG9TMyhleHBvcnRfaWQsIGRpc2Nsb3N1cmVzLCAnY3N2Jyk7XHJcblxyXG4gICAgICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgICAgICBleHBlY3QoczNNb2NrLmNhbGxzKCkpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgICAgIGNvbnN0IGNhbGwgPSBzM01vY2suY2FsbCgwKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gUHV0T2JqZWN0Q29tbWFuZOOBrmlucHV044OX44Ot44OR44OG44Kj44Gr44Ki44Kv44K744K5XHJcbiAgICAgICAgICBleHBlY3QoY2FsbC5hcmdzWzBdLmlucHV0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICAgICAgY29uc3QgYm9keSA9IGNhbGwuYXJnc1swXS5pbnB1dC5Cb2R5O1xyXG4gICAgICAgICAgY29uc3QgbGluZXMgPSBib2R5LnNwbGl0KCdcXG4nKTtcclxuXHJcbiAgICAgICAgICAvLyBQcm9wZXJ0eTog44Kr44Oz44Oe44KS5ZCr44KA5YCk44GM44OA44OW44Or44Kv44Kp44O844OI44Gn5Zuy44G+44KM44Gm44GE44KLXHJcbiAgICAgICAgICBleHBlY3QobGluZXNbMV0pLnRvQ29udGFpbihgXCIke3RpdGxlV2l0aENvbW1hfVwiYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICApLFxyXG4gICAgICB7XHJcbiAgICAgICAgbnVtUnVuczogNTAsXHJcbiAgICAgICAgdmVyYm9zZTogdHJ1ZSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJ2ZXJzaW9uIjozfQ==