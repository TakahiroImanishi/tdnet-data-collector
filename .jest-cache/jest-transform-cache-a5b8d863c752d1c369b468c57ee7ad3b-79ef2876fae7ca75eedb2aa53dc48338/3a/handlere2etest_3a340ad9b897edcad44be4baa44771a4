7f15bff3a7ead104edbb20eeda00e363
"use strict";
/**
 * Lambda Query Handler E2E Tests
 *
 * Property 9: APIキー認証の必須性
 *
 * Requirements: 要件11.3, 14.4（E2Eテスト、API認証）
 *
 * このE2Eテストは、LocalStack環境または開発環境で実行され、
 * 実際のAWS SDKクライアントを使用してAPIキー認証を検証します。
 */
Object.defineProperty(exports, "__esModule", { value: true });
const handler_1 = require("../handler");
const client_dynamodb_1 = require("@aws-sdk/client-dynamodb");
const lib_dynamodb_1 = require("@aws-sdk/lib-dynamodb");
// LocalStack環境設定
const isLocalStack = process.env.AWS_ENDPOINT_URL !== undefined;
const dynamoClient = new client_dynamodb_1.DynamoDBClient({
    region: process.env.AWS_REGION || 'ap-northeast-1',
    ...(isLocalStack && {
        endpoint: process.env.AWS_ENDPOINT_URL,
        credentials: {
            accessKeyId: process.env.AWS_ACCESS_KEY_ID || 'test',
            secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY || 'test',
        },
    }),
});
const docClient = lib_dynamodb_1.DynamoDBDocumentClient.from(dynamoClient, {
    marshallOptions: {
        removeUndefinedValues: true,
        convertClassInstanceToMap: true,
    },
});
describe('Lambda Query Handler E2E Tests - Property 9: API Key Authentication', () => {
    let mockContext;
    let mockEvent;
    const tableName = process.env.DYNAMODB_TABLE_NAME || 'tdnet_disclosures';
    beforeAll(async () => {
        // テストデータをDynamoDBに挿入
        const testDisclosure = {
            disclosure_id: 'TD20240115001',
            company_code: '7203',
            company_name: 'トヨタ自動車',
            disclosure_type: '決算短信',
            title: '2024年3月期 第3四半期決算短信',
            disclosed_at: '2024-01-15T10:30:00Z',
            pdf_url: 'https://www.release.tdnet.info/inbs/140120240115001.pdf',
            s3_key: '2024/01/15/TD20240115001_7203.pdf',
            collected_at: '2024-01-15T10:35:00Z',
            date_partition: '2024-01',
        };
        try {
            await docClient.send(new lib_dynamodb_1.PutCommand({
                TableName: tableName,
                Item: testDisclosure,
            }));
            console.log('Test data inserted successfully');
        }
        catch (error) {
            console.error('Failed to insert test data:', error);
            throw error;
        }
    });
    beforeEach(() => {
        // モックコンテキスト
        mockContext = {
            awsRequestId: 'test-request-id-e2e',
            functionName: 'tdnet-query-e2e',
            functionVersion: '1',
            invokedFunctionArn: 'arn:aws:lambda:ap-northeast-1:123456789012:function:tdnet-query-e2e',
            memoryLimitInMB: '256',
            logGroupName: '/aws/lambda/tdnet-query-e2e',
            logStreamName: '2024/01/15/[$LATEST]e2e-test',
            getRemainingTimeInMillis: () => 30000,
            callbackWaitsForEmptyEventLoop: true,
            done: jest.fn(),
            fail: jest.fn(),
            succeed: jest.fn(),
        };
        // モックイベント（基本）
        mockEvent = {
            body: null,
            headers: {},
            multiValueHeaders: {},
            httpMethod: 'GET',
            isBase64Encoded: false,
            path: '/disclosures',
            pathParameters: null,
            queryStringParameters: null,
            multiValueQueryStringParameters: null,
            stageVariables: null,
            requestContext: {
                accountId: '123456789012',
                apiId: 'test-api-id-e2e',
                protocol: 'HTTP/1.1',
                httpMethod: 'GET',
                path: '/disclosures',
                stage: 'test',
                requestId: 'test-request-id-e2e',
                requestTime: '15/Jan/2024:10:30:00 +0000',
                requestTimeEpoch: 1705315800000,
                identity: {
                    accessKey: null,
                    accountId: null,
                    apiKey: null,
                    apiKeyId: null,
                    caller: null,
                    clientCert: null,
                    cognitoAuthenticationProvider: null,
                    cognitoAuthenticationType: null,
                    cognitoIdentityId: null,
                    cognitoIdentityPoolId: null,
                    principalOrgId: null,
                    sourceIp: '192.168.1.1',
                    user: null,
                    userAgent: 'Mozilla/5.0',
                    userArn: null,
                },
                authorizer: null,
                domainName: 'api.example.com',
                domainPrefix: 'api',
                resourceId: 'test-resource-id',
                resourcePath: '/disclosures',
            },
            resource: '/disclosures',
        };
        // 環境変数設定
        process.env.API_KEY = 'test-api-key-e2e';
        process.env.DYNAMODB_TABLE_NAME = tableName;
        process.env.S3_BUCKET_NAME = 'tdnet-pdfs-local';
    });
    describe('Property 9.1: 無効なAPIキーで401 Unauthorizedが返される', () => {
        it('無効なAPIキーの場合は401エラーを返す', async () => {
            // Arrange
            mockEvent.headers = {
                'x-api-key': 'invalid-api-key',
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('UNAUTHORIZED');
            expect(body.error.message).toContain('Invalid API key');
            expect(body.request_id).toBe(mockContext.awsRequestId);
            // CORSヘッダーの確認
            expect(result.headers?.['Access-Control-Allow-Origin']).toBe('*');
        });
        it('APIキーが未設定の場合は401エラーを返す', async () => {
            // Arrange
            mockEvent.headers = {}; // APIキーなし
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('UNAUTHORIZED');
            expect(body.error.message).toContain('API key is required');
            expect(body.request_id).toBe(mockContext.awsRequestId);
            // CORSヘッダーの確認
            expect(result.headers?.['Access-Control-Allow-Origin']).toBe('*');
        });
        it('大文字小文字が異なるヘッダー名でも認証が機能する', async () => {
            // Arrange
            mockEvent.headers = {
                'X-Api-Key': 'invalid-api-key', // 大文字
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('UNAUTHORIZED');
            expect(body.error.message).toContain('Invalid API key');
        });
    });
    describe('Property 9.2: 有効なAPIキーで正常にレスポンスが返される', () => {
        it('有効なAPIキーで認証成功し、データが取得できる', async () => {
            // Arrange
            mockEvent.headers = {
                'x-api-key': 'test-api-key-e2e',
            };
            mockEvent.queryStringParameters = {
                company_code: '7203',
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Debug: Log error if status is not 200
            if (result.statusCode !== 200) {
                console.error('Test failed with status:', result.statusCode);
                console.error('Response body:', result.body);
            }
            // Assert
            expect(result.statusCode).toBe(200);
            expect(result.headers?.['Content-Type']).toBe('application/json');
            expect(result.headers?.['Access-Control-Allow-Origin']).toBe('*');
            const body = JSON.parse(result.body);
            expect(body).toHaveProperty('disclosures');
            expect(body).toHaveProperty('total');
            expect(body).toHaveProperty('count');
            expect(body).toHaveProperty('offset');
            expect(body).toHaveProperty('limit');
            // データの検証
            expect(Array.isArray(body.disclosures)).toBe(true);
            if (body.disclosures.length > 0) {
                const disclosure = body.disclosures[0];
                expect(disclosure).toHaveProperty('disclosure_id');
                expect(disclosure).toHaveProperty('company_code');
                expect(disclosure).toHaveProperty('company_name');
                expect(disclosure).toHaveProperty('disclosed_at');
            }
        });
        it('有効なAPIキーで日付範囲検索が機能する', async () => {
            // Arrange
            mockEvent.headers = {
                'x-api-key': 'test-api-key-e2e',
            };
            mockEvent.queryStringParameters = {
                start_date: '2024-01-15',
                end_date: '2024-01-20',
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(200);
            const body = JSON.parse(result.body);
            expect(body).toHaveProperty('disclosures');
            expect(body).toHaveProperty('total');
        });
        it('有効なAPIキーでCSV形式のレスポンスが取得できる', async () => {
            // Arrange
            mockEvent.headers = {
                'x-api-key': 'test-api-key-e2e',
            };
            mockEvent.queryStringParameters = {
                format: 'csv',
                company_code: '7203',
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(200);
            expect(result.headers?.['Content-Type']).toBe('text/csv');
            expect(result.headers?.['Content-Disposition']).toContain('attachment');
            expect(result.headers?.['Access-Control-Allow-Origin']).toBe('*');
            // CSVヘッダーの確認
            expect(result.body).toContain('disclosure_id');
            expect(result.body).toContain('company_code');
            expect(result.body).toContain('company_name');
        });
    });
    describe('Property 9.3: APIキー認証とバリデーションの組み合わせ', () => {
        it('有効なAPIキーでも不正なクエリパラメータは400エラーを返す', async () => {
            // Arrange
            mockEvent.headers = {
                'x-api-key': 'test-api-key-e2e',
            };
            mockEvent.queryStringParameters = {
                company_code: '123', // 4桁でない
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('Invalid company_code');
        });
        it('有効なAPIキーでも不正な日付形式は400エラーを返す', async () => {
            // Arrange
            mockEvent.headers = {
                'x-api-key': 'test-api-key-e2e',
            };
            mockEvent.queryStringParameters = {
                start_date: '2024/01/15', // YYYY-MM-DD形式でない
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('Invalid start_date format');
        });
        it('有効なAPIキーでも開始日が終了日より後の場合は400エラーを返す', async () => {
            // Arrange
            mockEvent.headers = {
                'x-api-key': 'test-api-key-e2e',
            };
            mockEvent.queryStringParameters = {
                start_date: '2024-01-20',
                end_date: '2024-01-15',
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('start_date');
            expect(body.error.message).toContain('must be before or equal to');
            expect(body.error.message).toContain('end_date');
        });
    });
    describe('Property 9.4: エラーレスポンスの一貫性', () => {
        it('すべてのエラーレスポンスにCORSヘッダーが含まれる', async () => {
            // Arrange: APIキーなし
            mockEvent.headers = {};
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(401);
            expect(result.headers?.['Access-Control-Allow-Origin']).toBe('*');
            expect(result.headers?.['Content-Type']).toBe('application/json');
        });
        it('すべてのエラーレスポンスにrequest_idが含まれる', async () => {
            // Arrange: 無効なAPIキー
            mockEvent.headers = {
                'x-api-key': 'invalid-api-key',
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.request_id).toBe(mockContext.awsRequestId);
        });
        it('エラーレスポンスの構造が一貫している', async () => {
            // Arrange: APIキーなし
            mockEvent.headers = {};
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            const body = JSON.parse(result.body);
            expect(body).toHaveProperty('status');
            expect(body).toHaveProperty('error');
            expect(body).toHaveProperty('request_id');
            expect(body.status).toBe('error');
            expect(body.error).toHaveProperty('code');
            expect(body.error).toHaveProperty('message');
            expect(typeof body.error.code).toBe('string');
            expect(typeof body.error.message).toBe('string');
            expect(typeof body.request_id).toBe('string');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxsYW1iZGFcXHF1ZXJ5XFxfX3Rlc3RzX19cXGhhbmRsZXIuZTJlLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7R0FTRzs7QUFHSCx3Q0FBcUM7QUFDckMsOERBQTBEO0FBQzFELHdEQUEyRTtBQUczRSxpQkFBaUI7QUFDakIsTUFBTSxZQUFZLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsS0FBSyxTQUFTLENBQUM7QUFDaEUsTUFBTSxZQUFZLEdBQUcsSUFBSSxnQ0FBYyxDQUFDO0lBQ3RDLE1BQU0sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsSUFBSSxnQkFBZ0I7SUFDbEQsR0FBRyxDQUFDLFlBQVksSUFBSTtRQUNsQixRQUFRLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0I7UUFDdEMsV0FBVyxFQUFFO1lBQ1gsV0FBVyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLElBQUksTUFBTTtZQUNwRCxlQUFlLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsSUFBSSxNQUFNO1NBQzdEO0tBQ0YsQ0FBQztDQUNILENBQUMsQ0FBQztBQUVILE1BQU0sU0FBUyxHQUFHLHFDQUFzQixDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUU7SUFDMUQsZUFBZSxFQUFFO1FBQ2YscUJBQXFCLEVBQUUsSUFBSTtRQUMzQix5QkFBeUIsRUFBRSxJQUFJO0tBQ2hDO0NBQ0YsQ0FBQyxDQUFDO0FBRUgsUUFBUSxDQUFDLHFFQUFxRSxFQUFFLEdBQUcsRUFBRTtJQUNuRixJQUFJLFdBQW9CLENBQUM7SUFDekIsSUFBSSxTQUErQixDQUFDO0lBQ3BDLE1BQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLElBQUksbUJBQW1CLENBQUM7SUFFekUsU0FBUyxDQUFDLEtBQUssSUFBSSxFQUFFO1FBQ25CLHFCQUFxQjtRQUNyQixNQUFNLGNB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Q0FBQyxTQUFTLENBQUMsQ0FBQztZQUM3QyxNQUFNLENBQUMsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNqRCxNQUFNLENBQUMsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXHRpMTk4XFxpbnZlc3RtZW50X2FuYWx5c2lzX29wb3BvXFxzcmNcXGxhbWJkYVxccXVlcnlcXF9fdGVzdHNfX1xcaGFuZGxlci5lMmUudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTGFtYmRhIFF1ZXJ5IEhhbmRsZXIgRTJFIFRlc3RzXHJcbiAqXHJcbiAqIFByb3BlcnR5IDk6IEFQSeOCreODvOiqjeiovOOBruW/hemgiOaAp1xyXG4gKlxyXG4gKiBSZXF1aXJlbWVudHM6IOimgeS7tjExLjMsIDE0LjTvvIhFMkXjg4bjgrnjg4jjgIFBUEnoqo3oqLzvvIlcclxuICpcclxuICog44GT44GuRTJF44OG44K544OI44Gv44CBTG9jYWxTdGFja+eSsOWig+OBvuOBn+OBr+mWi+eZuueSsOWig+OBp+Wun+ihjOOBleOCjOOAgVxyXG4gKiDlrp/pmpvjga5BV1MgU0RL44Kv44Op44Kk44Ki44Oz44OI44KS5L2/55So44GX44GmQVBJ44Kt44O86KqN6Ki844KS5qSc6Ki844GX44G+44GZ44CCXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQ29udGV4dCwgQVBJR2F0ZXdheVByb3h5RXZlbnQgfSBmcm9tICdhd3MtbGFtYmRhJztcclxuaW1wb3J0IHsgaGFuZGxlciB9IGZyb20gJy4uL2hhbmRsZXInO1xyXG5pbXBvcnQgeyBEeW5hbW9EQkNsaWVudCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1keW5hbW9kYic7XHJcbmltcG9ydCB7IER5bmFtb0RCRG9jdW1lbnRDbGllbnQsIFB1dENvbW1hbmQgfSBmcm9tICdAYXdzLXNkay9saWItZHluYW1vZGInO1xyXG5pbXBvcnQgeyBEaXNjbG9zdXJlIH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMnO1xyXG5cclxuLy8gTG9jYWxTdGFja+eSsOWig+ioreWumlxyXG5jb25zdCBpc0xvY2FsU3RhY2sgPSBwcm9jZXNzLmVudi5BV1NfRU5EUE9JTlRfVVJMICE9PSB1bmRlZmluZWQ7XHJcbmNvbnN0IGR5bmFtb0NsaWVudCA9IG5ldyBEeW5hbW9EQkNsaWVudCh7XHJcbiAgcmVnaW9uOiBwcm9jZXNzLmVudi5BV1NfUkVHSU9OIHx8ICdhcC1ub3J0aGVhc3QtMScsXHJcbiAgLi4uKGlzTG9jYWxTdGFjayAmJiB7XHJcbiAgICBlbmRwb2ludDogcHJvY2Vzcy5lbnYuQVdTX0VORFBPSU5UX1VSTCxcclxuICAgIGNyZWRlbnRpYWxzOiB7XHJcbiAgICAgIGFjY2Vzc0tleUlkOiBwcm9jZXNzLmVudi5BV1NfQUNDRVNTX0tFWV9JRCB8fCAndGVzdCcsXHJcbiAgICAgIHNlY3JldEFjY2Vzc0tleTogcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIHx8ICd0ZXN0JyxcclxuICAgIH0sXHJcbiAgfSksXHJcbn0pO1xyXG5cclxuY29uc3QgZG9jQ2xpZW50ID0gRHluYW1vREJEb2N1bWVudENsaWVudC5mcm9tKGR5bmFtb0NsaWVudCwge1xyXG4gIG1hcnNoYWxsT3B0aW9uczoge1xyXG4gICAgcmVtb3ZlVW5kZWZpbmVkVmFsdWVzOiB0cnVlLFxyXG4gICAgY29udmVydENsYXNzSW5zdGFuY2VUb01hcDogdHJ1ZSxcclxuICB9LFxyXG59KTtcclxuXHJcbmRlc2NyaWJlKCdMYW1iZGEgUXVlcnkgSGFuZGxlciBFMkUgVGVzdHMgLSBQcm9wZXJ0eSA5OiBBUEkgS2V5IEF1dGhlbnRpY2F0aW9uJywgKCkgPT4ge1xyXG4gIGxldCBtb2NrQ29udGV4dDogQ29udGV4dDtcclxuICBsZXQgbW9ja0V2ZW50OiBBUElHYXRld2F5UHJveHlFdmVudDtcclxuICBjb25zdCB0YWJsZU5hbWUgPSBwcm9jZXNzLmVudi5EWU5BTU9EQl9UQUJMRV9OQU1FIHx8ICd0ZG5ldF9kaXNjbG9zdXJlcyc7XHJcblxyXG4gIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XHJcbiAgICAvLyDjg4bjgrnjg4jjg4fjg7zjgr/jgpJEeW5hbW9EQuOBq+aMv+WFpVxyXG4gICAgY29uc3QgdGVzdERpc2Nsb3N1cmU6IERpc2Nsb3N1cmUgPSB7XHJcbiAgICAgIGRpc2Nsb3N1cmVfaWQ6ICdURDIwMjQwMTE1MDAxJyxcclxuICAgICAgY29tcGFueV9jb2RlOiAnNzIwMycsXHJcbiAgICAgIGNvbXBhbnlfbmFtZTogJ+ODiOODqOOCv+iHquWLlei7iicsXHJcbiAgICAgIGRpc2Nsb3N1cmVfdHlwZTogJ+axuueul+efreS/oScsXHJcbiAgICAgIHRpdGxlOiAnMjAyNOW5tDPmnIjmnJ8g56ysM+Wbm+WNiuacn+axuueul+efreS/oScsXHJcbiAgICAgIGRpc2Nsb3NlZF9hdDogJzIwMjQtMDEtMTVUMTA6MzA6MDBaJyxcclxuICAgICAgcGRmX3VybDogJ2h0dHBzOi8vd3d3LnJlbGVhc2UudGRuZXQuaW5mby9pbmJzLzE0MDEyMDI0MDExNTAwMS5wZGYnLFxyXG4gICAgICBzM19rZXk6ICcyMDI0LzAxLzE1L1REMjAyNDAxMTUwMDFfNzIwMy5wZGYnLFxyXG4gICAgICBjb2xsZWN0ZWRfYXQ6ICcyMDI0LTAxLTE1VDEwOjM1OjAwWicsXHJcbiAgICAgIGRhdGVfcGFydGl0aW9uOiAnMjAyNC0wMScsXHJcbiAgICB9O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGRvY0NsaWVudC5zZW5kKFxyXG4gICAgICAgIG5ldyBQdXRDb21tYW5kKHtcclxuICAgICAgICAgIFRhYmxlTmFtZTogdGFibGVOYW1lLFxyXG4gICAgICAgICAgSXRlbTogdGVzdERpc2Nsb3N1cmUsXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgICAgY29uc29sZS5sb2coJ1Rlc3QgZGF0YSBpbnNlcnRlZCBzdWNjZXNzZnVsbHknKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbnNlcnQgdGVzdCBkYXRhOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgLy8g44Oi44OD44Kv44Kz44Oz44OG44Kt44K544OIXHJcbiAgICBtb2NrQ29udGV4dCA9IHtcclxuICAgICAgYXdzUmVxdWVzdElkOiAndGVzdC1yZXF1ZXN0LWlkLWUyZScsXHJcbiAgICAgIGZ1bmN0aW9uTmFtZTogJ3RkbmV0LXF1ZXJ5LWUyZScsXHJcbiAgICAgIGZ1bmN0aW9uVmVyc2lvbjogJzEnLFxyXG4gICAgICBpbnZva2VkRnVuY3Rpb25Bcm46ICdhcm46YXdzOmxhbWJkYTphcC1ub3J0aGVhc3QtMToxMjM0NTY3ODkwMTI6ZnVuY3Rpb246dGRuZXQtcXVlcnktZTJlJyxcclxuICAgICAgbWVtb3J5TGltaXRJbk1COiAnMjU2JyxcclxuICAgICAgbG9nR3JvdXBOYW1lOiAnL2F3cy9sYW1iZGEvdGRuZXQtcXVlcnktZTJlJyxcclxuICAgICAgbG9nU3RyZWFtTmFtZTogJzIwMjQvMDEvMTUvWyRMQVRFU1RdZTJlLXRlc3QnLFxyXG4gICAgICBnZXRSZW1haW5pbmdUaW1lSW5NaWxsaXM6ICgpID0+IDMwMDAwLFxyXG4gICAgICBjYWxsYmFja1dhaXRzRm9yRW1wdHlFdmVudExvb3A6IHRydWUsXHJcbiAgICAgIGRvbmU6IGplc3QuZm4oKSxcclxuICAgICAgZmFpbDogamVzdC5mbigpLFxyXG4gICAgICBzdWNjZWVkOiBqZXN0LmZuKCksXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIOODouODg+OCr+OCpOODmeODs+ODiO+8iOWfuuacrO+8iVxyXG4gICAgbW9ja0V2ZW50ID0ge1xyXG4gICAgICBib2R5OiBudWxsLFxyXG4gICAgICBoZWFkZXJzOiB7fSxcclxuICAgICAgbXVsdGlWYWx1ZUhlYWRlcnM6IHt9LFxyXG4gICAgICBodHRwTWV0aG9kOiAnR0VUJyxcclxuICAgICAgaXNCYXNlNjRFbmNvZGVkOiBmYWxzZSxcclxuICAgICAgcGF0aDogJy9kaXNjbG9zdXJlcycsXHJcbiAgICAgIHBhdGhQYXJhbWV0ZXJzOiBudWxsLFxyXG4gICAgICBxdWVyeVN0cmluZ1BhcmFtZXRlcnM6IG51bGwsXHJcbiAgICAgIG11bHRpVmFsdWVRdWVyeVN0cmluZ1BhcmFtZXRlcnM6IG51bGwsXHJcbiAgICAgIHN0YWdlVmFyaWFibGVzOiBudWxsLFxyXG4gICAgICByZXF1ZXN0Q29udGV4dDoge1xyXG4gICAgICAgIGFjY291bnRJZDogJzEyMzQ1Njc4OTAxMicsXHJcbiAgICAgICAgYXBpSWQ6ICd0ZXN0LWFwaS1pZC1lMmUnLFxyXG4gICAgICAgIHByb3RvY29sOiAnSFRUUC8xLjEnLFxyXG4gICAgICAgIGh0dHBNZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIHBhdGg6ICcvZGlzY2xvc3VyZXMnLFxyXG4gICAgICAgIHN0YWdlOiAndGVzdCcsXHJcbiAgICAgICAgcmVxdWVzdElkOiAndGVzdC1yZXF1ZXN0LWlkLWUyZScsXHJcbiAgICAgICAgcmVxdWVzdFRpbWU6ICcxNS9KYW4vMjAyNDoxMDozMDowMCArMDAwMCcsXHJcbiAgICAgICAgcmVxdWVzdFRpbWVFcG9jaDogMTcwNTMxNTgwMDAwMCxcclxuICAgICAgICBpZGVudGl0eToge1xyXG4gICAgICAgICAgYWNjZXNzS2V5OiBudWxsLFxyXG4gICAgICAgICAgYWNjb3VudElkOiBudWxsLFxyXG4gICAgICAgICAgYXBpS2V5OiBudWxsLFxyXG4gICAgICAgICAgYXBpS2V5SWQ6IG51bGwsXHJcbiAgICAgICAgICBjYWxsZXI6IG51bGwsXHJcbiAgICAgICAgICBjbGllbnRDZXJ0OiBudWxsLFxyXG4gICAgICAgICAgY29nbml0b0F1dGhlbnRpY2F0aW9uUHJvdmlkZXI6IG51bGwsXHJcbiAgICAgICAgICBjb2duaXRvQXV0aGVudGljYXRpb25UeXBlOiBudWxsLFxyXG4gICAgICAgICAgY29nbml0b0lkZW50aXR5SWQ6IG51bGwsXHJcbiAgICAgICAgICBjb2duaXRvSWRlbnRpdHlQb29sSWQ6IG51bGwsXHJcbiAgICAgICAgICBwcmluY2lwYWxPcmdJZDogbnVsbCxcclxuICAgICAgICAgIHNvdXJjZUlwOiAnMTkyLjE2OC4xLjEnLFxyXG4gICAgICAgICAgdXNlcjogbnVsbCxcclxuICAgICAgICAgIHVzZXJBZ2VudDogJ01vemlsbGEvNS4wJyxcclxuICAgICAgICAgIHVzZXJBcm46IG51bGwsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhdXRob3JpemVyOiBudWxsLFxyXG4gICAgICAgIGRvbWFpbk5hbWU6ICdhcGkuZXhhbXBsZS5jb20nLFxyXG4gICAgICAgIGRvbWFpblByZWZpeDogJ2FwaScsXHJcbiAgICAgICAgcmVzb3VyY2VJZDogJ3Rlc3QtcmVzb3VyY2UtaWQnLFxyXG4gICAgICAgIHJlc291cmNlUGF0aDogJy9kaXNjbG9zdXJlcycsXHJcbiAgICAgIH0sXHJcbiAgICAgIHJlc291cmNlOiAnL2Rpc2Nsb3N1cmVzJyxcclxuICAgIH07XHJcblxyXG4gICAgLy8g55Kw5aKD5aSJ5pWw6Kit5a6aXHJcbiAgICBwcm9jZXNzLmVudi5BUElfS0VZID0gJ3Rlc3QtYXBpLWtleS1lMmUnO1xyXG4gICAgcHJvY2Vzcy5lbnYuRFlOQU1PREJfVEFCTEVfTkFNRSA9IHRhYmxlTmFtZTtcclxuICAgIHByb2Nlc3MuZW52LlMzX0JVQ0tFVF9OQU1FID0gJ3RkbmV0LXBkZnMtbG9jYWwnO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUHJvcGVydHkgOS4xOiDnhKHlirnjgapBUEnjgq3jg7zjgac0MDEgVW5hdXRob3JpemVk44GM6L+U44GV44KM44KLJywgKCkgPT4ge1xyXG4gICAgaXQoJ+eEoeWKueOBqkFQSeOCreODvOOBruWgtOWQiOOBrzQwMeOCqOODqeODvOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBtb2NrRXZlbnQuaGVhZGVycyA9IHtcclxuICAgICAgICAneC1hcGkta2V5JzogJ2ludmFsaWQtYXBpLWtleScsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihtb2NrRXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDAxKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5zdGF0dXMpLnRvQmUoJ2Vycm9yJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLmNvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ0ludmFsaWQgQVBJIGtleScpO1xyXG4gICAgICBleHBlY3QoYm9keS5yZXF1ZXN0X2lkKS50b0JlKG1vY2tDb250ZXh0LmF3c1JlcXVlc3RJZCk7XHJcblxyXG4gICAgICAvLyBDT1JT44OY44OD44OA44O844Gu56K66KqNXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaGVhZGVycz8uWydBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nXSkudG9CZSgnKicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ0FQSeOCreODvOOBjOacquioreWumuOBruWgtOWQiOOBrzQwMeOCqOODqeODvOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBtb2NrRXZlbnQuaGVhZGVycyA9IHt9OyAvLyBBUEnjgq3jg7zjgarjgZdcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKG1vY2tFdmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDEpO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LnN0YXR1cykudG9CZSgnZXJyb3InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IuY29kZSkudG9CZSgnVU5BVVRIT1JJWkVEJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignQVBJIGtleSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICBleHBlY3QoYm9keS5yZXF1ZXN0X2lkKS50b0JlKG1vY2tDb250ZXh0LmF3c1JlcXVlc3RJZCk7XHJcblxyXG4gICAgICAvLyBDT1JT44OY44OD44OA44O844Gu56K66KqNXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaGVhZGVycz8uWydBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nXSkudG9CZSgnKicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+Wkp+aWh+Wtl+Wwj+aWh+Wtl+OBjOeVsOOBquOCi+ODmOODg+ODgOODvOWQjeOBp+OCguiqjeiovOOBjOapn+iDveOBmeOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBtb2NrRXZlbnQuaGVhZGVycyA9IHtcclxuICAgICAgICAnWC1BcGktS2V5JzogJ2ludmFsaWQtYXBpLWtleScsIC8vIOWkp+aWh+Wtl1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIobW9ja0V2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDQwMSk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkuc3RhdHVzKS50b0JlKCdlcnJvcicpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5jb2RlKS50b0JlKCdVTkFVVEhPUklaRUQnKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdJbnZhbGlkIEFQSSBrZXknKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUHJvcGVydHkgOS4yOiDmnInlirnjgapBUEnjgq3jg7zjgafmraPluLjjgavjg6zjgrnjg53jg7PjgrnjgYzov5TjgZXjgozjgosnLCAoKSA9PiB7XHJcbiAgICBpdCgn5pyJ5Yq544GqQVBJ44Kt44O844Gn6KqN6Ki85oiQ5Yqf44GX44CB44OH44O844K/44GM5Y+W5b6X44Gn44GN44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIG1vY2tFdmVudC5oZWFkZXJzID0ge1xyXG4gICAgICAgICd4LWFwaS1rZXknOiAndGVzdC1hcGkta2V5LWUyZScsXHJcbiAgICAgIH07XHJcbiAgICAgIG1vY2tFdmVudC5xdWVyeVN0cmluZ1BhcmFtZXRlcnMgPSB7XHJcbiAgICAgICAgY29tcGFueV9jb2RlOiAnNzIwMycsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihtb2NrRXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIERlYnVnOiBMb2cgZXJyb3IgaWYgc3RhdHVzIGlzIG5vdCAyMDBcclxuICAgICAgaWYgKHJlc3VsdC5zdGF0dXNDb2RlICE9PSAyMDApIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdUZXN0IGZhaWxlZCB3aXRoIHN0YXR1czonLCByZXN1bHQuc3RhdHVzQ29kZSk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignUmVzcG9uc2UgYm9keTonLCByZXN1bHQuYm9keSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5oZWFkZXJzPy5bJ0NvbnRlbnQtVHlwZSddKS50b0JlKCdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaGVhZGVycz8uWydBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nXSkudG9CZSgnKicpO1xyXG5cclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keSkudG9IYXZlUHJvcGVydHkoJ2Rpc2Nsb3N1cmVzJyk7XHJcbiAgICAgIGV4cGVjdChib2R5KS50b0hhdmVQcm9wZXJ0eSgndG90YWwnKTtcclxuICAgICAgZXhwZWN0KGJvZHkpLnRvSGF2ZVByb3BlcnR5KCdjb3VudCcpO1xyXG4gICAgICBleHBlY3QoYm9keSkudG9IYXZlUHJvcGVydHkoJ29mZnNldCcpO1xyXG4gICAgICBleHBlY3QoYm9keSkudG9IYXZlUHJvcGVydHkoJ2xpbWl0Jyk7XHJcblxyXG4gICAgICAvLyDjg4fjg7zjgr/jga7mpJzoqLxcclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoYm9keS5kaXNjbG9zdXJlcykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGlmIChib2R5LmRpc2Nsb3N1cmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBkaXNjbG9zdXJlID0gYm9keS5kaXNjbG9zdXJlc1swXTtcclxuICAgICAgICBleHBlY3QoZGlzY2xvc3VyZSkudG9IYXZlUHJvcGVydHkoJ2Rpc2Nsb3N1cmVfaWQnKTtcclxuICAgICAgICBleHBlY3QoZGlzY2xvc3VyZSkudG9IYXZlUHJvcGVydHkoJ2NvbXBhbnlfY29kZScpO1xyXG4gICAgICAgIGV4cGVjdChkaXNjbG9zdXJlKS50b0hhdmVQcm9wZXJ0eSgnY29tcGFueV9uYW1lJyk7XHJcbiAgICAgICAgZXhwZWN0KGRpc2Nsb3N1cmUpLnRvSGF2ZVByb3BlcnR5KCdkaXNjbG9zZWRfYXQnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+acieWKueOBqkFQSeOCreODvOOBp+aXpeS7mOevhOWbsuaknOe0ouOBjOapn+iDveOBmeOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBtb2NrRXZlbnQuaGVhZGVycyA9IHtcclxuICAgICAgICAneC1hcGkta2V5JzogJ3Rlc3QtYXBpLWtleS1lMmUnLFxyXG4gICAgICB9O1xyXG4gICAgICBtb2NrRXZlbnQucXVlcnlTdHJpbmdQYXJhbWV0ZXJzID0ge1xyXG4gICAgICAgIHN0YXJ0X2RhdGU6ICcyMDI0LTAxLTE1JyxcclxuICAgICAgICBlbmRfZGF0ZTogJzIwMjQtMDEtMjAnLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIobW9ja0V2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDIwMCk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkpLnRvSGF2ZVByb3BlcnR5KCdkaXNjbG9zdXJlcycpO1xyXG4gICAgICBleHBlY3QoYm9keSkudG9IYXZlUHJvcGVydHkoJ3RvdGFsJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5pyJ5Yq544GqQVBJ44Kt44O844GnQ1NW5b2i5byP44Gu44Os44K544Od44Oz44K544GM5Y+W5b6X44Gn44GN44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIG1vY2tFdmVudC5oZWFkZXJzID0ge1xyXG4gICAgICAgICd4LWFwaS1rZXknOiAndGVzdC1hcGkta2V5LWUyZScsXHJcbiAgICAgIH07XHJcbiAgICAgIG1vY2tFdmVudC5xdWVyeVN0cmluZ1BhcmFtZXRlcnMgPSB7XHJcbiAgICAgICAgZm9ybWF0OiAnY3N2JyxcclxuICAgICAgICBjb21wYW55X2NvZGU6ICc3MjAzJyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKG1vY2tFdmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSgyMDApO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmhlYWRlcnM/LlsnQ29udGVudC1UeXBlJ10pLnRvQmUoJ3RleHQvY3N2Jyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaGVhZGVycz8uWydDb250ZW50LURpc3Bvc2l0aW9uJ10pLnRvQ29udGFpbignYXR0YWNobWVudCcpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmhlYWRlcnM/LlsnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJ10pLnRvQmUoJyonKTtcclxuXHJcbiAgICAgIC8vIENTVuODmOODg+ODgOODvOOBrueiuuiqjVxyXG4gICAgICBleHBlY3QocmVzdWx0LmJvZHkpLnRvQ29udGFpbignZGlzY2xvc3VyZV9pZCcpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmJvZHkpLnRvQ29udGFpbignY29tcGFueV9jb2RlJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuYm9keSkudG9Db250YWluKCdjb21wYW55X25hbWUnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUHJvcGVydHkgOS4zOiBBUEnjgq3jg7zoqo3oqLzjgajjg5Djg6rjg4fjg7zjgrfjg6fjg7Pjga7ntYTjgb/lkIjjgo/jgZsnLCAoKSA9PiB7XHJcbiAgICBpdCgn5pyJ5Yq544GqQVBJ44Kt44O844Gn44KC5LiN5q2j44Gq44Kv44Ko44Oq44OR44Op44Oh44O844K/44GvNDAw44Ko44Op44O844KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIG1vY2tFdmVudC5oZWFkZXJzID0ge1xyXG4gICAgICAgICd4LWFwaS1rZXknOiAndGVzdC1hcGkta2V5LWUyZScsXHJcbiAgICAgIH07XHJcbiAgICAgIG1vY2tFdmVudC5xdWVyeVN0cmluZ1BhcmFtZXRlcnMgPSB7XHJcbiAgICAgICAgY29tcGFueV9jb2RlOiAnMTIzJywgLy8gNOahgeOBp+OBquOBhFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIobW9ja0V2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDQwMCk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkuc3RhdHVzKS50b0JlKCdlcnJvcicpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignSW52YWxpZCBjb21wYW55X2NvZGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfmnInlirnjgapBUEnjgq3jg7zjgafjgoLkuI3mraPjgarml6Xku5jlvaLlvI/jga80MDDjgqjjg6njg7zjgpLov5TjgZknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgbW9ja0V2ZW50LmhlYWRlcnMgPSB7XHJcbiAgICAgICAgJ3gtYXBpLWtleSc6ICd0ZXN0LWFwaS1rZXktZTJlJyxcclxuICAgICAgfTtcclxuICAgICAgbW9ja0V2ZW50LnF1ZXJ5U3RyaW5nUGFyYW1ldGVycyA9IHtcclxuICAgICAgICBzdGFydF9kYXRlOiAnMjAyNC8wMS8xNScsIC8vIFlZWVktTU0tRETlvaLlvI/jgafjgarjgYRcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKG1vY2tFdmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LnN0YXR1cykudG9CZSgnZXJyb3InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ0ludmFsaWQgc3RhcnRfZGF0ZSBmb3JtYXQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfmnInlirnjgapBUEnjgq3jg7zjgafjgoLplovlp4vml6XjgYzntYLkuobml6Xjgojjgorlvozjga7loLTlkIjjga80MDDjgqjjg6njg7zjgpLov5TjgZknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgbW9ja0V2ZW50LmhlYWRlcnMgPSB7XHJcbiAgICAgICAgJ3gtYXBpLWtleSc6ICd0ZXN0LWFwaS1rZXktZTJlJyxcclxuICAgICAgfTtcclxuICAgICAgbW9ja0V2ZW50LnF1ZXJ5U3RyaW5nUGFyYW1ldGVycyA9IHtcclxuICAgICAgICBzdGFydF9kYXRlOiAnMjAyNC0wMS0yMCcsXHJcbiAgICAgICAgZW5kX2RhdGU6ICcyMDI0LTAxLTE1JyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKG1vY2tFdmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LnN0YXR1cykudG9CZSgnZXJyb3InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ3N0YXJ0X2RhdGUnKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdtdXN0IGJlIGJlZm9yZSBvciBlcXVhbCB0bycpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ2VuZF9kYXRlJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1Byb3BlcnR5IDkuNDog44Ko44Op44O844Os44K544Od44Oz44K544Gu5LiA6LKr5oCnJywgKCkgPT4ge1xyXG4gICAgaXQoJ+OBmeOBueOBpuOBruOCqOODqeODvOODrOOCueODneODs+OCueOBq0NPUlPjg5jjg4Pjg4Djg7zjgYzlkKvjgb7jgozjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2U6IEFQSeOCreODvOOBquOBl1xyXG4gICAgICBtb2NrRXZlbnQuaGVhZGVycyA9IHt9O1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIobW9ja0V2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDQwMSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaGVhZGVycz8uWydBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nXSkudG9CZSgnKicpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmhlYWRlcnM/LlsnQ29udGVudC1UeXBlJ10pLnRvQmUoJ2FwcGxpY2F0aW9uL2pzb24nKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfjgZnjgbnjgabjga7jgqjjg6njg7zjg6zjgrnjg53jg7PjgrnjgatyZXF1ZXN0X2lk44GM5ZCr44G+44KM44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlOiDnhKHlirnjgapBUEnjgq3jg7xcclxuICAgICAgbW9ja0V2ZW50LmhlYWRlcnMgPSB7XHJcbiAgICAgICAgJ3gtYXBpLWtleSc6ICdpbnZhbGlkLWFwaS1rZXknLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIobW9ja0V2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDQwMSk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkucmVxdWVzdF9pZCkudG9CZShtb2NrQ29udGV4dC5hd3NSZXF1ZXN0SWQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+OCqOODqeODvOODrOOCueODneODs+OCueOBruani+mAoOOBjOS4gOiyq+OBl+OBpuOBhOOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZTogQVBJ44Kt44O844Gq44GXXHJcbiAgICAgIG1vY2tFdmVudC5oZWFkZXJzID0ge307XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihtb2NrRXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5KS50b0hhdmVQcm9wZXJ0eSgnc3RhdHVzJyk7XHJcbiAgICAgIGV4cGVjdChib2R5KS50b0hhdmVQcm9wZXJ0eSgnZXJyb3InKTtcclxuICAgICAgZXhwZWN0KGJvZHkpLnRvSGF2ZVByb3BlcnR5KCdyZXF1ZXN0X2lkJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LnN0YXR1cykudG9CZSgnZXJyb3InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IpLnRvSGF2ZVByb3BlcnR5KCdjb2RlJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yKS50b0hhdmVQcm9wZXJ0eSgnbWVzc2FnZScpO1xyXG4gICAgICBleHBlY3QodHlwZW9mIGJvZHkuZXJyb3IuY29kZSkudG9CZSgnc3RyaW5nJyk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgYm9keS5lcnJvci5tZXNzYWdlKS50b0JlKCdzdHJpbmcnKTtcclxuICAgICAgZXhwZWN0KHR5cGVvZiBib2R5LnJlcXVlc3RfaWQpLnRvQmUoJ3N0cmluZycpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=