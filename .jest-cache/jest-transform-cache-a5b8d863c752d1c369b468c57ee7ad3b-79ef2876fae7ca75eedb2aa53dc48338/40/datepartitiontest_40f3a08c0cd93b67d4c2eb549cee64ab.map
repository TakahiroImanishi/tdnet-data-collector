{"file":"C:\\Users\\ti198\\investment_analysis_opopo\\src\\utils\\__tests__\\date-partition.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\ti198\\investment_analysis_opopo\\src\\utils\\__tests__\\date-partition.test.ts"],"sourcesContent":["/**\r\n * date-partition.test.ts\r\n *\r\n * date_partition生成ユーティリティのテスト\r\n *\r\n * Steering準拠チェック:\r\n * - JST基準でYYYY-MM形式を生成\r\n * - UTC→JST変換（+9時間）を正しく実装\r\n * - 月またぎのエッジケース処理\r\n * - ISO 8601形式のバリデーション\r\n * - 範囲チェック（1970-01-01以降、現在+1日以内）\r\n * - ValidationErrorのスロー\r\n */\r\n\r\nimport {\r\n  generateDatePartition,\r\n  validateDisclosedAt,\r\n  generateMonthRange,\r\n  validateYearMonth,\r\n} from '../date-partition';\r\nimport { ValidationError } from '../../errors';\r\n\r\ndescribe('validateDisclosedAt', () => {\r\n  describe('正常系: 有効なISO 8601形式', () => {\r\n    it('UTC形式（Z）を受け入れる', () => {\r\n      expect(() => validateDisclosedAt('2024-01-15T10:30:00Z')).not.toThrow();\r\n    });\r\n\r\n    it('ミリ秒付きUTC形式を受け入れる', () => {\r\n      expect(() => validateDisclosedAt('2024-01-15T10:30:00.123Z')).not.toThrow();\r\n    });\r\n\r\n    it('タイムゾーンオフセット形式を受け入れる', () => {\r\n      expect(() => validateDisclosedAt('2024-01-15T19:30:00+09:00')).not.toThrow();\r\n    });\r\n  });\r\n\r\n  describe('異常系: 不正なフォーマット', () => {\r\n    it('ISO 8601形式でない場合はValidationErrorをスロー', () => {\r\n      expect(() => validateDisclosedAt('2024-01-15')).toThrow(ValidationError);\r\n      expect(() => validateDisclosedAt('2024/01/15 10:30:00')).toThrow(ValidationError);\r\n      expect(() => validateDisclosedAt('invalid-date')).toThrow(ValidationError);\r\n    });\r\n\r\n    it('タイムゾーン指定がない場合はValidationErrorをスロー', () => {\r\n      expect(() => validateDisclosedAt('2024-01-15T10:30:00')).toThrow(ValidationError);\r\n    });\r\n  });\r\n\r\n  describe('異常系: 存在しない日付', () => {\r\n    it('2024-02-30（存在しない日付）はValidationErrorをスロー', () => {\r\n      expect(() => validateDisclosedAt('2024-02-30T10:30:00Z')).toThrow(ValidationError);\r\n    });\r\n\r\n    it('2023-02-29（非うるう年の2月29日）はValidationErrorをスロー', () => {\r\n      expect(() => validateDisclosedAt('2023-02-29T10:30:00Z')).toThrow(ValidationError);\r\n    });\r\n\r\n    it('2024-13-01（13月）はValidationErrorをスロー', () => {\r\n      expect(() => validateDisclosedAt('2024-13-01T10:30:00Z')).toThrow(ValidationError);\r\n    });\r\n\r\n    it('2024-01-32（32日）はValidationErrorをスロー', () => {\r\n      expect(() => validateDisclosedAt('2024-01-32T10:30:00Z')).toThrow(ValidationError);\r\n    });\r\n  });\r\n\r\n  describe('異常系: 範囲外の日付', () => {\r\n    it('1970-01-01より前の日付はValidationErrorをスロー', () => {\r\n      expect(() => validateDisclosedAt('1969-12-31T23:59:59Z')).toThrow(ValidationError);\r\n    });\r\n\r\n    it('現在時刻+2日以降の日付はValidationErrorをスロー', () => {\r\n      const futureDate = new Date(Date.now() + 2 * 24 * 60 * 60 * 1000);\r\n      const futureDateStr = futureDate.toISOString();\r\n      expect(() => validateDisclosedAt(futureDateStr)).toThrow(ValidationError);\r\n    });\r\n  });\r\n\r\n  describe('正常系: 境界値', () => {\r\n    it('1970-01-01T00:00:00Zを受け入れる', () => {\r\n      expect(() => validateDisclosedAt('1970-01-01T00:00:00Z')).not.toThrow();\r\n    });\r\n\r\n    it('現在時刻を受け入れる', () => {\r\n      const now = new Date().toISOString();\r\n      expect(() => validateDisclosedAt(now)).not.toThrow();\r\n    });\r\n\r\n    it('現在時刻+1日を受け入れる', () => {\r\n      const tomorrow = new Date(Date.now() + 24 * 60 * 60 * 1000);\r\n      const tomorrowStr = tomorrow.toISOString();\r\n      expect(() => validateDisclosedAt(tomorrowStr)).not.toThrow();\r\n    });\r\n  });\r\n});\r\n\r\ndescribe('generateDatePartition', () => {\r\n  describe('正常系: JST基準でYYYY-MM形式を生成', () => {\r\n    it('UTC: 2024-01-15T01:30:00Z → JST: 2024-01-15T10:30:00 → \"2024-01\"', () => {\r\n      expect(generateDatePartition('2024-01-15T01:30:00Z')).toBe('2024-01');\r\n    });\r\n\r\n    it('UTC: 2024-06-15T12:00:00Z → JST: 2024-06-15T21:00:00 → \"2024-06\"', () => {\r\n      expect(generateDatePartition('2024-06-15T12:00:00Z')).toBe('2024-06');\r\n    });\r\n\r\n    it('UTC: 2024-12-31T14:59:59Z → JST: 2024-12-31T23:59:59 → \"2024-12\"', () => {\r\n      expect(generateDatePartition('2024-12-31T14:59:59Z')).toBe('2024-12');\r\n    });\r\n  });\r\n\r\n  describe('エッジケース: 月またぎ（UTC→JST変換）', () => {\r\n    it('UTC: 2024-01-31T15:30:00Z → JST: 2024-02-01T00:30:00 → \"2024-02\"', () => {\r\n      expect(generateDatePartition('2024-01-31T15:30:00Z')).toBe('2024-02');\r\n    });\r\n\r\n    it('UTC: 2024-01-31T14:59:59Z → JST: 2024-01-31T23:59:59 → \"2024-01\"', () => {\r\n      expect(generateDatePartition('2024-01-31T14:59:59Z')).toBe('2024-01');\r\n    });\r\n\r\n    it('UTC: 2024-02-29T15:00:00Z → JST: 2024-03-01T00:00:00 → \"2024-03\"（うるう年）', () => {\r\n      expect(generateDatePartition('2024-02-29T15:00:00Z')).toBe('2024-03');\r\n    });\r\n\r\n    it('UTC: 2023-02-28T15:00:00Z → JST: 2023-03-01T00:00:00 → \"2023-03\"（非うるう年）', () => {\r\n      expect(generateDatePartition('2023-02-28T15:00:00Z')).toBe('2023-03');\r\n    });\r\n\r\n    it('UTC: 2023-12-31T15:30:00Z → JST: 2024-01-01T00:30:00 → \"2024-01\"（年またぎ）', () => {\r\n      expect(generateDatePartition('2023-12-31T15:30:00Z')).toBe('2024-01');\r\n    });\r\n\r\n    it('UTC: 2023-12-31T14:59:59Z → JST: 2023-12-31T23:59:59 → \"2023-12\"（年またぎ逆）', () => {\r\n      expect(generateDatePartition('2023-12-31T14:59:59Z')).toBe('2023-12');\r\n    });\r\n  });\r\n\r\n  describe('エッジケース: 月末の深夜', () => {\r\n    it('UTC: 2024-03-31T15:00:00Z → JST: 2024-04-01T00:00:00 → \"2024-04\"', () => {\r\n      expect(generateDatePartition('2024-03-31T15:00:00Z')).toBe('2024-04');\r\n    });\r\n\r\n    it('UTC: 2024-04-30T15:00:00Z → JST: 2024-05-01T00:00:00 → \"2024-05\"', () => {\r\n      expect(generateDatePartition('2024-04-30T15:00:00Z')).toBe('2024-05');\r\n    });\r\n\r\n    it('UTC: 2024-05-31T15:00:00Z → JST: 2024-06-01T00:00:00 → \"2024-06\"', () => {\r\n      expect(generateDatePartition('2024-05-31T15:00:00Z')).toBe('2024-06');\r\n    });\r\n  });\r\n\r\n  describe('異常系: 不正な入力', () => {\r\n    it('不正なフォーマットの場合はValidationErrorをスロー', () => {\r\n      expect(() => generateDatePartition('2024-01-15')).toThrow(ValidationError);\r\n      expect(() => generateDatePartition('invalid-date')).toThrow(ValidationError);\r\n    });\r\n\r\n    it('存在しない日付の場合はValidationErrorをスロー', () => {\r\n      expect(() => generateDatePartition('2024-02-30T10:30:00Z')).toThrow(ValidationError);\r\n    });\r\n\r\n    it('範囲外の日付の場合はValidationErrorをスロー', () => {\r\n      expect(() => generateDatePartition('1969-12-31T23:59:59Z')).toThrow(ValidationError);\r\n    });\r\n  });\r\n});\r\n\r\ndescribe('generateMonthRange', () => {\r\n  describe('正常系: 月範囲の生成', () => {\r\n    it('同一月の場合は1つの月を返す', () => {\r\n      expect(generateMonthRange('2024-01', '2024-01')).toEqual(['2024-01']);\r\n    });\r\n\r\n    it('連続する3ヶ月の範囲を生成', () => {\r\n      expect(generateMonthRange('2024-01', '2024-03')).toEqual([\r\n        '2024-01',\r\n        '2024-02',\r\n        '2024-03',\r\n      ]);\r\n    });\r\n\r\n    it('年をまたぐ範囲を生成', () => {\r\n      expect(generateMonthRange('2023-11', '2024-02')).toEqual([\r\n        '2023-11',\r\n        '2023-12',\r\n        '2024-01',\r\n        '2024-02',\r\n      ]);\r\n    });\r\n\r\n    it('1年間の範囲を生成', () => {\r\n      const result = generateMonthRange('2024-01', '2024-12');\r\n      expect(result).toHaveLength(12);\r\n      expect(result[0]).toBe('2024-01');\r\n      expect(result[11]).toBe('2024-12');\r\n    });\r\n  });\r\n\r\n  describe('異常系: 不正な入力', () => {\r\n    it('不正なフォーマットの場合はValidationErrorをスロー', () => {\r\n      expect(() => generateMonthRange('2024-1', '2024-03')).toThrow(ValidationError);\r\n      expect(() => generateMonthRange('2024/01', '2024/03')).toThrow(ValidationError);\r\n      expect(() => generateMonthRange('invalid', '2024-03')).toThrow(ValidationError);\r\n    });\r\n\r\n    it('開始月が終了月より後の場合はValidationErrorをスロー', () => {\r\n      expect(() => generateMonthRange('2024-03', '2024-01')).toThrow(ValidationError);\r\n      expect(() => generateMonthRange('2024-12', '2023-01')).toThrow(ValidationError);\r\n    });\r\n  });\r\n});\r\n\r\ndescribe('validateYearMonth', () => {\r\n  describe('正常系: 有効なYYYY-MM形式', () => {\r\n    it('2024-01を受け入れる', () => {\r\n      expect(() => validateYearMonth('2024-01')).not.toThrow();\r\n    });\r\n\r\n    it('2024-12を受け入れる', () => {\r\n      expect(() => validateYearMonth('2024-12')).not.toThrow();\r\n    });\r\n  });\r\n\r\n  describe('異常系: 不正なフォーマット', () => {\r\n    it('YYYY-MM形式でない場合はValidationErrorをスロー', () => {\r\n      expect(() => validateYearMonth('2024-1')).toThrow(ValidationError);\r\n      expect(() => validateYearMonth('2024/01')).toThrow(ValidationError);\r\n      expect(() => validateYearMonth('202401')).toThrow(ValidationError);\r\n    });\r\n\r\n    it('月が範囲外（00, 13）の場合はValidationErrorをスロー', () => {\r\n      expect(() => validateYearMonth('2024-00')).toThrow(ValidationError);\r\n      expect(() => validateYearMonth('2024-13')).toThrow(ValidationError);\r\n    });\r\n  });\r\n});\r\n"],"version":3}