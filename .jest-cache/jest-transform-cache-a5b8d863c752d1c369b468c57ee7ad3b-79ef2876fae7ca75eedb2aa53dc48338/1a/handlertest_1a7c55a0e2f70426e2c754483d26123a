2fda73c53f860ff4fe2b5c2211dc1ec1
"use strict";
/**
 * Lambda Collect Handler Tests
 *
 * POST /collect エンド�Eイント�EユニットテスチE
 */
Object.defineProperty(exports, "__esModule", { value: true });
const handler_1 = require("../handler");
const client_lambda_1 = require("@aws-sdk/client-lambda");
const client_secrets_manager_1 = require("@aws-sdk/client-secrets-manager");
const aws_sdk_client_mock_1 = require("aws-sdk-client-mock");
// AWS SDK Mocks
const lambdaMock = (0, aws_sdk_client_mock_1.mockClient)(client_lambda_1.LambdaClient);
const secretsMock = (0, aws_sdk_client_mock_1.mockClient)(client_secrets_manager_1.SecretsManagerClient);
// Mock Context
const mockContext = {
    callbackWaitsForEmptyEventLoop: false,
    functionName: 'tdnet-collect',
    functionVersion: '1',
    invokedFunctionArn: 'arn:aws:lambda:ap-northeast-1:123456789012:function:tdnet-collect',
    memoryLimitInMB: '256',
    awsRequestId: 'test-request-id-12345',
    logGroupName: '/aws/lambda/tdnet-collect',
    logStreamName: '2024/01/15/[$LATEST]abcdef',
    getRemainingTimeInMillis: () => 30000,
    done: () => { },
    fail: () => { },
    succeed: () => { },
};
/**
 * チE��ト用の日付を動的に生�E
 * 現在日から相対皁E��日付を返すことで、テストが常に有効な日付篁E��を使用できるようにする
 */
const getTestDates = () => {
    const today = new Date();
    const startDate = new Date(today);
    startDate.setDate(startDate.getDate() - 7); // 7日剁E
    const endDate = new Date(today);
    endDate.setDate(endDate.getDate() - 2); // 2日剁E
    return {
        start_date: startDate.toISOString().split('T')[0],
        end_date: endDate.toISOString().split('T')[0],
    };
};
/**
 * 持E��日数前�E日付を取征E
 */
const getDaysAgo = (days) => {
    const date = new Date();
    date.setDate(date.getDate() - days);
    return date.toISOString().split('T')[0];
};
/**
 * 持E��日数後�E日付を取征E
 */
const getDaysLater = (days) => {
    const date = new Date();
    date.setDate(date.getDate() + days);
    return date.toISOString().split('T')[0];
};
/**
 * テスト用のAPIGatewayProxyEventを作成
 */
const createTestEvent = (body, apiKey = 'test-api-key-12345') => {
    return {
        body: body === null ? null : JSON.stringify(body),
        headers: {
            'x-api-key': apiKey,
        },
        multiValueHeaders: {},
        httpMethod: 'POST',
        isBase64Encoded: false,
        path: '/collect',
        pathParameters: null,
        queryStringParameters: null,
        multiValueQueryStringParameters: null,
        stageVariables: null,
        requestContext: {},
        resource: '',
    };
};
describe('POST /collect Handler', () => {
    beforeEach(() => {
        lambdaMock.reset();
        secretsMock.reset();
        // Secrets Managerのモック設定（APIキーを返す）
        secretsMock.on(client_secrets_manager_1.GetSecretValueCommand).resolves({
            SecretString: 'test-api-key-12345',
        });
        process.env.COLLECTOR_FUNCTION_NAME = 'tdnet-collector';
        process.env.AWS_REGION = 'ap-northeast-1';
        process.env.API_KEY_SECRET_ARN = 'arn:aws:secretsmanager:ap-northeast-1:123456789012:secret:tdnet-api-key';
    });
    afterEach(() => {
        delete process.env.COLLECTOR_FUNCTION_NAME;
        delete process.env.AWS_REGION;
        delete process.env.API_KEY_SECRET_ARN;
    });
    describe('正常系', () => {
        it('有効なリクエストで200を返す', async () => {
            // Lambda Collectorの呼び出しをモチE���E�同期呼び出し！E
            const mockCollectorResponse = {
                execution_id: 'exec_1234567890_abc123_test1234',
                status: 'success',
                message: 'Collection started',
                collected_count: 0,
                failed_count: 0,
            };
            lambdaMock.on(client_lambda_1.InvokeCommand).resolves({
                StatusCode: 200,
                Payload: Buffer.from(JSON.stringify(mockCollectorResponse)),
            });
            const testDates = getTestDates();
            const event = createTestEvent(testDates);
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(200);
            expect(result.headers?.['Content-Type']).toBe('application/json');
            expect(result.headers?.['Access-Control-Allow-Origin']).toBe('*');
            const body = JSON.parse(result.body);
            expect(body.status).toBe('success');
            expect(body.data).toHaveProperty('execution_id');
            expect(body.data).toHaveProperty('status', 'pending');
            expect(body.data).toHaveProperty('message');
            expect(body.data).toHaveProperty('started_at');
        });
        it('Lambda Collectorから返されたexecution_idを使用する', async () => {
            const mockCollectorResponse = {
                execution_id: 'exec_1234567890_abc123_test1234',
                status: 'success',
                message: 'Collection started',
                collected_count: 0,
                failed_count: 0,
            };
            lambdaMock.on(client_lambda_1.InvokeCommand).resolves({
                StatusCode: 200,
                Payload: Buffer.from(JSON.stringify(mockCollectorResponse)),
            });
            const testDates = getTestDates();
            const event = createTestEvent(testDates);
            const result = await (0, handler_1.handler)(event, mockContext);
            const body = JSON.parse(result.body);
            // Lambda Collectorから返されたexecution_idが使用されてぁE��ことを確誁E
            expect(body.data.execution_id).toBe('exec_1234567890_abc123_test1234');
        });
        it('Lambda呼び出しがRequestResponseモードで実行される', async () => {
            const mockCollectorResponse = {
                execution_id: 'exec_1234567890_abc123_test1234',
                status: 'success',
                message: 'Collection started',
                collected_count: 0,
                failed_count: 0,
            };
            lambdaMock.on(client_lambda_1.InvokeCommand).resolves({
                StatusCode: 200,
                Payload: Buffer.from(JSON.stringify(mockCollectorResponse)),
            });
            const testDates = getTestDates();
            const event = createTestEvent(testDates);
            await (0, handler_1.handler)(event, mockContext);
            // InvokeCommandが正しいパラメータで呼ばれたことを確認
            const calls = lambdaMock.commandCalls(client_lambda_1.InvokeCommand);
            expect(calls.length).toBe(1);
            expect(calls[0].args[0].input.InvocationType).toBe('RequestResponse');
            expect(calls[0].args[0].input.FunctionName).toBe(process.env.COLLECTOR_FUNCTION_NAME || 'tdnet-collector');
        });
    });
    describe('バリチE�Eションエラー', () => {
        it('リクエスト�EチE��がなぁE��合�E400を返す', async () => {
            const event = createTestEvent(null);
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('Request body is required');
        });
        it('start_dateがなぁE��合�E400を返す', async () => {
            const event = {
                body: JSON.stringify({
                    end_date: getDaysAgo(2),
                }),
                headers: {
                    'x-api-key': 'test-api-key-12345',
                },
                multiValueHeaders: {},
                httpMethod: 'POST',
                isBase64Encoded: false,
                path: '/collect',
                pathParameters: null,
                queryStringParameters: null,
                multiValueQueryStringParameters: null,
                stageVariables: null,
                requestContext: {},
                resource: '',
            };
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('start_date is required');
        });
        it('end_dateがなぁE��合�E400を返す', async () => {
            const event = {
                body: JSON.stringify({
                    start_date: getDaysAgo(7),
                }),
                headers: {
                    'x-api-key': 'test-api-key-12345',
                },
                multiValueHeaders: {},
                httpMethod: 'POST',
                isBase64Encoded: false,
                path: '/collect',
                pathParameters: null,
                queryStringParameters: null,
                multiValueQueryStringParameters: null,
                stageVariables: null,
                requestContext: {},
                resource: '',
            };
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('end_date is required');
        });
        it('start_dateのフォーマットが不正な場合�E400を返す', async () => {
            const event = {
                body: JSON.stringify({
                    start_date: '2024/01/15', // 不正なフォーマッチE
                    end_date: getDaysAgo(2),
                }),
                headers: {
                    'x-api-key': 'test-api-key-12345',
                },
                multiValueHeaders: {},
                httpMethod: 'POST',
                isBase64Encoded: false,
                path: '/collect',
                pathParameters: null,
                queryStringParameters: null,
                multiValueQueryStringParameters: null,
                stageVariables: null,
                requestContext: {},
                resource: '',
            };
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('Invalid start_date format');
        });
        it('start_dateが存在しなぁE��付�E場合�E400を返す', async () => {
            // 存在しなぁE��付を使用�E�E朁E0日は存在しなぁE��E
            // ただし、E年以冁E�E日付を使用する忁E��がある
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth() + 1; // 現在の朁E
            const event = createTestEvent({
                start_date: `${year}-02-30`, // 2朁E0日は存在しなぁE
                end_date: `${year}-03-01`,
            });
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            // 日付�E整合性チェチE��で無効な日付を検�E
            expect(body.error.message).toContain('Invalid start_date');
        });
        it('start_dateがend_dateより後�E場合�E400を返す', async () => {
            const event = {
                body: JSON.stringify({
                    start_date: getDaysAgo(2),
                    end_date: getDaysAgo(7),
                }),
                headers: {
                    'x-api-key': 'test-api-key-12345',
                },
                multiValueHeaders: {},
                httpMethod: 'POST',
                isBase64Encoded: false,
                path: '/collect',
                pathParameters: null,
                queryStringParameters: null,
                multiValueQueryStringParameters: null,
                stageVariables: null,
                requestContext: {},
                resource: '',
            };
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('must be before or equal to');
        });
        it('start_dateぁE年以上前の場合�E400を返す', async () => {
            const twoYearsAgo = getDaysAgo(730); // 2年剁E
            const event = {
                body: JSON.stringify({
                    start_date: twoYearsAgo,
                    end_date: getDaysAgo(2),
                }),
                headers: {
                    'x-api-key': 'test-api-key-12345',
                },
                multiValueHeaders: {},
                httpMethod: 'POST',
                isBase64Encoded: false,
                path: '/collect',
                pathParameters: null,
                queryStringParameters: null,
                multiValueQueryStringParameters: null,
                stageVariables: null,
                requestContext: {},
                resource: '',
            };
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('too old');
        });
        it('end_dateが未来日の場合�E400を返す', async () => {
            const twoDaysLater = getDaysLater(2); // 2日征E
            const event = {
                body: JSON.stringify({
                    start_date: getDaysAgo(7),
                    end_date: twoDaysLater,
                }),
                headers: {
                    'x-api-key': 'test-api-key-12345',
                },
                multiValueHeaders: {},
                httpMethod: 'POST',
                isBase64Encoded: false,
                path: '/collect',
                pathParameters: null,
                queryStringParameters: null,
                multiValueQueryStringParameters: null,
                stageVariables: null,
                requestContext: {},
                resource: '',
            };
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('cannot be in the future');
        });
    });
    describe('Lambda呼び出しエラー', () => {
        it('Lambda Collectorの呼び出しに失敗した場合�E500を返す', async () => {
            lambdaMock.on(client_lambda_1.InvokeCommand).rejects(new Error('Lambda invocation failed'));
            const testDates = getTestDates();
            const event = createTestEvent(testDates);
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(500);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('INTERNAL_ERROR');
            expect(body.error.message).toContain('Failed to start data collection');
        });
        it('Lambda Collectorが空のPayloadを返した場合�E500を返す', async () => {
            lambdaMock.on(client_lambda_1.InvokeCommand).resolves({
                StatusCode: 200,
                Payload: undefined,
            });
            const testDates = getTestDates();
            const event = createTestEvent(testDates);
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(500);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('INTERNAL_ERROR');
        });
        it('Lambda Collectorがexecution_idを返さなぁE��合�E500を返す', async () => {
            const mockCollectorResponse = {
                status: 'success',
                message: 'Collection started',
                collected_count: 0,
                failed_count: 0,
                // execution_idがなぁE
            };
            lambdaMock.on(client_lambda_1.InvokeCommand).resolves({
                StatusCode: 200,
                Payload: Buffer.from(JSON.stringify(mockCollectorResponse)),
            });
            const testDates = getTestDates();
            const event = createTestEvent(testDates);
            const result = await (0, handler_1.handler)(event, mockContext);
            expect(result.statusCode).toBe(500);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('INTERNAL_ERROR');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxsYW1iZGFcXGNvbGxlY3RcXF9fdGVzdHNfX1xcaGFuZGxlci50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7OztHQUlHOztBQUdILHdDQUFxQztBQUNyQywwREFBcUU7QUFDckUsNEVBQThGO0FBQzlGLDZEQUFpRDtBQUVqRCxnQkFBZ0I7QUFDaEIsTUFBTSxVQUFVLEdBQUcsSUFBQSxnQ0FBVSxFQUFDLDRCQUFZLENBQUMsQ0FBQztBQUM1QyxNQUFNLFdBQVcsR0FBRyxJQUFBLGdDQUFVLEVBQUMsNkNBQW9CLENBQUMsQ0FBQztBQUVyRCxlQUFlO0FBQ2YsTUFBTSxXQUFXLEdBQVk7SUFDM0IsOEJBQThCLEVBQUUsS0FBSztJQUNyQyxZQUFZLEVBQUUsZUFBZTtJQUM3QixlQUFlLEVBQUUsR0FBRztJQUNwQixrQkFBa0IsRUFBRSxtRUFBbUU7SUFDdkYsZUFBZSxFQUFFLEtBQUs7SUFDdEIsWUFBWSxFQUFFLHVCQUF1QjtJQUNyQyxZQUFZLEVBQUUsMkJBQTJCO0lBQ3pDLGFBQWEsRUFBRSw0QkFBNEI7SUFDM0Msd0JBQXdCLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSztJQUNyQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztJQUNkLElBQUksRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO0lBQ2QsT0FBTyxFQUFFLEdBQUcsRUFBRSxHQUFFLENBQUM7Q0FDbEIsQ0FBQztBQUVGOzs7R0FHRztBQUNILE1BQU0sWUFBWSxHQUFHLEdBQUcsRUFBRTtJQUN4QixNQUFNLEtBQUssR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO0lBQ3pCLE1BQU0sU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2xDLFNBQVMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTztJQUNuRCxNQUFNLE9BQU8sR0FBRyxJ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QUksQ0FBQyxTQUFTLENBQUMscUJBQXFCLENBQUMsQ0FBQzthQUM1RCxDQUFDLENBQUM7WUFFSCxNQUFNLFNBQVMsR0FBRyxZQUFZLEVBQUUsQ0FBQztZQUNqQyxNQUFNLEtBQUssR0FBRyxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUM7WUFFekMsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFBLGlCQUFPLEVBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1lBRWpELE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3BDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3JDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ2xDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ2pELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXHRpMTk4XFxpbnZlc3RtZW50X2FuYWx5c2lzX29wb3BvXFxzcmNcXGxhbWJkYVxcY29sbGVjdFxcX190ZXN0c19fXFxoYW5kbGVyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIExhbWJkYSBDb2xsZWN0IEhhbmRsZXIgVGVzdHNcclxuICpcclxuICogUE9TVCAvY29sbGVjdCDjgqjjg7Pjg4nvv71F44Kk44Oz44OI77+9ReODpuODi+ODg+ODiOODhuOCueODgUVcclxuICovXHJcblxyXG5pbXBvcnQgeyBBUElHYXRld2F5UHJveHlFdmVudCwgQ29udGV4dCB9IGZyb20gJ2F3cy1sYW1iZGEnO1xyXG5pbXBvcnQgeyBoYW5kbGVyIH0gZnJvbSAnLi4vaGFuZGxlcic7XHJcbmltcG9ydCB7IExhbWJkYUNsaWVudCwgSW52b2tlQ29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1sYW1iZGEnO1xyXG5pbXBvcnQgeyBTZWNyZXRzTWFuYWdlckNsaWVudCwgR2V0U2VjcmV0VmFsdWVDb21tYW5kIH0gZnJvbSAnQGF3cy1zZGsvY2xpZW50LXNlY3JldHMtbWFuYWdlcic7XHJcbmltcG9ydCB7IG1vY2tDbGllbnQgfSBmcm9tICdhd3Mtc2RrLWNsaWVudC1tb2NrJztcclxuXHJcbi8vIEFXUyBTREsgTW9ja3NcclxuY29uc3QgbGFtYmRhTW9jayA9IG1vY2tDbGllbnQoTGFtYmRhQ2xpZW50KTtcclxuY29uc3Qgc2VjcmV0c01vY2sgPSBtb2NrQ2xpZW50KFNlY3JldHNNYW5hZ2VyQ2xpZW50KTtcclxuXHJcbi8vIE1vY2sgQ29udGV4dFxyXG5jb25zdCBtb2NrQ29udGV4dDogQ29udGV4dCA9IHtcclxuICBjYWxsYmFja1dhaXRzRm9yRW1wdHlFdmVudExvb3A6IGZhbHNlLFxyXG4gIGZ1bmN0aW9uTmFtZTogJ3RkbmV0LWNvbGxlY3QnLFxyXG4gIGZ1bmN0aW9uVmVyc2lvbjogJzEnLFxyXG4gIGludm9rZWRGdW5jdGlvbkFybjogJ2Fybjphd3M6bGFtYmRhOmFwLW5vcnRoZWFzdC0xOjEyMzQ1Njc4OTAxMjpmdW5jdGlvbjp0ZG5ldC1jb2xsZWN0JyxcclxuICBtZW1vcnlMaW1pdEluTUI6ICcyNTYnLFxyXG4gIGF3c1JlcXVlc3RJZDogJ3Rlc3QtcmVxdWVzdC1pZC0xMjM0NScsXHJcbiAgbG9nR3JvdXBOYW1lOiAnL2F3cy9sYW1iZGEvdGRuZXQtY29sbGVjdCcsXHJcbiAgbG9nU3RyZWFtTmFtZTogJzIwMjQvMDEvMTUvWyRMQVRFU1RdYWJjZGVmJyxcclxuICBnZXRSZW1haW5pbmdUaW1lSW5NaWxsaXM6ICgpID0+IDMwMDAwLFxyXG4gIGRvbmU6ICgpID0+IHt9LFxyXG4gIGZhaWw6ICgpID0+IHt9LFxyXG4gIHN1Y2NlZWQ6ICgpID0+IHt9LFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIOODgUXvv73vv73jg4jnlKjjga7ml6Xku5jjgpLli5XnmoTjgavnlJ/vv71FXHJcbiAqIOePvuWcqOaXpeOBi+OCieebuOWvvueagUXvv73vv73ml6Xku5jjgpLov5TjgZnjgZPjgajjgafjgIHjg4bjgrnjg4jjgYzluLjjgavmnInlirnjgarml6Xku5jnr4FF77+977+944KS5L2/55So44Gn44GN44KL44KI44GG44Gr44GZ44KLXHJcbiAqL1xyXG5jb25zdCBnZXRUZXN0RGF0ZXMgPSAoKSA9PiB7XHJcbiAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHRvZGF5KTtcclxuICBzdGFydERhdGUuc2V0RGF0ZShzdGFydERhdGUuZ2V0RGF0ZSgpIC0gNyk7IC8vIDfml6XliYFFXHJcbiAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKHRvZGF5KTtcclxuICBlbmREYXRlLnNldERhdGUoZW5kRGF0ZS5nZXREYXRlKCkgLSAyKTsgLy8gMuaXpeWJgUVcclxuICBcclxuICByZXR1cm4ge1xyXG4gICAgc3RhcnRfZGF0ZTogc3RhcnREYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcclxuICAgIGVuZF9kYXRlOiBlbmREYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcclxuICB9O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIOaMgUXvv73vv73ml6XmlbDliY3vv71F5pel5LuY44KS5Y+W5b6BRVxyXG4gKi9cclxuY29uc3QgZ2V0RGF5c0FnbyA9IChkYXlzOiBudW1iZXIpOiBzdHJpbmcgPT4ge1xyXG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGRheXMpO1xyXG4gIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiDmjIFF77+977+95pel5pWw5b6M77+9ReaXpeS7mOOCkuWPluW+gUVcclxuICovXHJcbmNvbnN0IGdldERheXNMYXRlciA9IChkYXlzOiBudW1iZXIpOiBzdHJpbmcgPT4ge1xyXG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIGRheXMpO1xyXG4gIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiDjg4bjgrnjg4jnlKjjga5BUElHYXRld2F5UHJveHlFdmVudOOCkuS9nOaIkFxyXG4gKi9cclxuY29uc3QgY3JlYXRlVGVzdEV2ZW50ID0gKGJvZHk6IGFueSwgYXBpS2V5OiBzdHJpbmcgPSAndGVzdC1hcGkta2V5LTEyMzQ1Jyk6IEFQSUdhdGV3YXlQcm94eUV2ZW50ID0+IHtcclxuICByZXR1cm4ge1xyXG4gICAgYm9keTogYm9keSA9PT0gbnVsbCA/IG51bGwgOiBKU09OLnN0cmluZ2lmeShib2R5KSxcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgJ3gtYXBpLWtleSc6IGFwaUtleSxcclxuICAgIH0sXHJcbiAgICBtdWx0aVZhbHVlSGVhZGVyczoge30sXHJcbiAgICBodHRwTWV0aG9kOiAnUE9TVCcsXHJcbiAgICBpc0Jhc2U2NEVuY29kZWQ6IGZhbHNlLFxyXG4gICAgcGF0aDogJy9jb2xsZWN0JyxcclxuICAgIHBhdGhQYXJhbWV0ZXJzOiBudWxsLFxyXG4gICAgcXVlcnlTdHJpbmdQYXJhbWV0ZXJzOiBudWxsLFxyXG4gICAgbXVsdGlWYWx1ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogbnVsbCxcclxuICAgIHN0YWdlVmFyaWFibGVzOiBudWxsLFxyXG4gICAgcmVxdWVzdENvbnRleHQ6IHt9IGFzIGFueSxcclxuICAgIHJlc291cmNlOiAnJyxcclxuICB9O1xyXG59O1xyXG5cclxuZGVzY3JpYmUoJ1BPU1QgL2NvbGxlY3QgSGFuZGxlcicsICgpID0+IHtcclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGxhbWJkYU1vY2sucmVzZXQoKTtcclxuICAgIHNlY3JldHNNb2NrLnJlc2V0KCk7XHJcbiAgICBcclxuICAgIC8vIFNlY3JldHMgTWFuYWdlcuOBruODouODg+OCr+ioreWumu+8iEFQSeOCreODvOOCkui/lOOBme+8iVxyXG4gICAgc2VjcmV0c01vY2sub24oR2V0U2VjcmV0VmFsdWVDb21tYW5kKS5yZXNvbHZlcyh7XHJcbiAgICAgIFNlY3JldFN0cmluZzogJ3Rlc3QtYXBpLWtleS0xMjM0NScsXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgcHJvY2Vzcy5lbnYuQ09MTEVDVE9SX0ZVTkNUSU9OX05BTUUgPSAndGRuZXQtY29sbGVjdG9yJztcclxuICAgIHByb2Nlc3MuZW52LkFXU19SRUdJT04gPSAnYXAtbm9ydGhlYXN0LTEnO1xyXG4gICAgcHJvY2Vzcy5lbnYuQVBJX0tFWV9TRUNSRVRfQVJOID0gJ2Fybjphd3M6c2VjcmV0c21hbmFnZXI6YXAtbm9ydGhlYXN0LTE6MTIzNDU2Nzg5MDEyOnNlY3JldDp0ZG5ldC1hcGkta2V5JztcclxuICB9KTtcclxuXHJcbiAgYWZ0ZXJFYWNoKCgpID0+IHtcclxuICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5DT0xMRUNUT1JfRlVOQ1RJT05fTkFNRTtcclxuICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5BV1NfUkVHSU9OO1xyXG4gICAgZGVsZXRlIHByb2Nlc3MuZW52LkFQSV9LRVlfU0VDUkVUX0FSTjtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+ato+W4uOezuycsICgpID0+IHtcclxuICAgIGl0KCfmnInlirnjgarjg6rjgq/jgqjjgrnjg4jjgacyMDDjgpLov5TjgZknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIExhbWJkYSBDb2xsZWN0b3Ljga7lkbzjgbPlh7rjgZfjgpLjg6Ljg4FF77+977+977+9Re+/veWQjOacn+WRvOOBs+WHuuOBl++8gUVcclxuICAgICAgY29uc3QgbW9ja0NvbGxlY3RvclJlc3BvbnNlID0ge1xyXG4gICAgICAgIGV4ZWN1dGlvbl9pZDogJ2V4ZWNfMTIzNDU2Nzg5MF9hYmMxMjNfdGVzdDEyMzQnLFxyXG4gICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdDb2xsZWN0aW9uIHN0YXJ0ZWQnLFxyXG4gICAgICAgIGNvbGxlY3RlZF9jb3VudDogMCxcclxuICAgICAgICBmYWlsZWRfY291bnQ6IDAsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBsYW1iZGFNb2NrLm9uKEludm9rZUNvbW1hbmQpLnJlc29sdmVzKHtcclxuICAgICAgICBTdGF0dXNDb2RlOiAyMDAsXHJcbiAgICAgICAgUGF5bG9hZDogQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkobW9ja0NvbGxlY3RvclJlc3BvbnNlKSksXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgdGVzdERhdGVzID0gZ2V0VGVzdERhdGVzKCk7XHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gY3JlYXRlVGVzdEV2ZW50KHRlc3REYXRlcyk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5oZWFkZXJzPy5bJ0NvbnRlbnQtVHlwZSddKS50b0JlKCdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaGVhZGVycz8uWydBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nXSkudG9CZSgnKicpO1xyXG5cclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5zdGF0dXMpLnRvQmUoJ3N1Y2Nlc3MnKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZGF0YSkudG9IYXZlUHJvcGVydHkoJ2V4ZWN1dGlvbl9pZCcpO1xyXG4gICAgICBleHBlY3QoYm9keS5kYXRhKS50b0hhdmVQcm9wZXJ0eSgnc3RhdHVzJywgJ3BlbmRpbmcnKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZGF0YSkudG9IYXZlUHJvcGVydHkoJ21lc3NhZ2UnKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZGF0YSkudG9IYXZlUHJvcGVydHkoJ3N0YXJ0ZWRfYXQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdMYW1iZGEgQ29sbGVjdG9y44GL44KJ6L+U44GV44KM44GfZXhlY3V0aW9uX2lk44KS5L2/55So44GZ44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrQ29sbGVjdG9yUmVzcG9uc2UgPSB7XHJcbiAgICAgICAgZXhlY3V0aW9uX2lkOiAnZXhlY18xMjM0NTY3ODkwX2FiYzEyM190ZXN0MTIzNCcsXHJcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgICAgbWVzc2FnZTogJ0NvbGxlY3Rpb24gc3RhcnRlZCcsXHJcbiAgICAgICAgY29sbGVjdGVkX2NvdW50OiAwLFxyXG4gICAgICAgIGZhaWxlZF9jb3VudDogMCxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGxhbWJkYU1vY2sub24oSW52b2tlQ29tbWFuZCkucmVzb2x2ZXMoe1xyXG4gICAgICAgIFN0YXR1c0NvZGU6IDIwMCxcclxuICAgICAgICBQYXlsb2FkOiBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShtb2NrQ29sbGVjdG9yUmVzcG9uc2UpKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0ZXN0RGF0ZXMgPSBnZXRUZXN0RGF0ZXMoKTtcclxuICAgICAgY29uc3QgZXZlbnQgPSBjcmVhdGVUZXN0RXZlbnQodGVzdERhdGVzKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG5cclxuICAgICAgLy8gTGFtYmRhIENvbGxlY3RvcuOBi+OCiei/lOOBleOCjOOBn2V4ZWN1dGlvbl9pZOOBjOS9v+eUqOOBleOCjOOBpuOBgUXvv73vv73jgZPjgajjgpLnorroqoFFXHJcbiAgICAgIGV4cGVjdChib2R5LmRhdGEuZXhlY3V0aW9uX2lkKS50b0JlKCdleGVjXzEyMzQ1Njc4OTBfYWJjMTIzX3Rlc3QxMjM0Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnTGFtYmRh5ZG844Gz5Ye644GX44GMUmVxdWVzdFJlc3BvbnNl44Oi44O844OJ44Gn5a6f6KGM44GV44KM44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrQ29sbGVjdG9yUmVzcG9uc2UgPSB7XHJcbiAgICAgICAgZXhlY3V0aW9uX2lkOiAnZXhlY18xMjM0NTY3ODkwX2FiYzEyM190ZXN0MTIzNCcsXHJcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgICAgbWVzc2FnZTogJ0NvbGxlY3Rpb24gc3RhcnRlZCcsXHJcbiAgICAgICAgY29sbGVjdGVkX2NvdW50OiAwLFxyXG4gICAgICAgIGZhaWxlZF9jb3VudDogMCxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGxhbWJkYU1vY2sub24oSW52b2tlQ29tbWFuZCkucmVzb2x2ZXMoe1xyXG4gICAgICAgIFN0YXR1c0NvZGU6IDIwMCxcclxuICAgICAgICBQYXlsb2FkOiBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShtb2NrQ29sbGVjdG9yUmVzcG9uc2UpKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0ZXN0RGF0ZXMgPSBnZXRUZXN0RGF0ZXMoKTtcclxuICAgICAgY29uc3QgZXZlbnQgPSBjcmVhdGVUZXN0RXZlbnQodGVzdERhdGVzKTtcclxuXHJcbiAgICAgIGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIEludm9rZUNvbW1hbmTjgYzmraPjgZfjgYTjg5Hjg6njg6Hjg7zjgr/jgaflkbzjgbDjgozjgZ/jgZPjgajjgpLnorroqo1cclxuICAgICAgY29uc3QgY2FsbHMgPSBsYW1iZGFNb2NrLmNvbW1hbmRDYWxscyhJbnZva2VDb21tYW5kKTtcclxuICAgICAgZXhwZWN0KGNhbGxzLmxlbmd0aCkudG9CZSgxKTtcclxuICAgICAgZXhwZWN0KGNhbGxzWzBdLmFyZ3NbMF0uaW5wdXQuSW52b2NhdGlvblR5cGUpLnRvQmUoJ1JlcXVlc3RSZXNwb25zZScpO1xyXG4gICAgICBleHBlY3QoY2FsbHNbMF0uYXJnc1swXS5pbnB1dC5GdW5jdGlvbk5hbWUpLnRvQmUocHJvY2Vzcy5lbnYuQ09MTEVDVE9SX0ZVTkNUSU9OX05BTUUgfHwgJ3RkbmV0LWNvbGxlY3RvcicpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfjg5Djg6rjg4FF77+9ReOCt+ODp+ODs+OCqOODqeODvCcsICgpID0+IHtcclxuICAgIGl0KCfjg6rjgq/jgqjjgrnjg4jvv71F44OBRe+/ve+/veOBjOOBquOBgUXvv73vv73lkIjvv71FNDAw44KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBldmVudCA9IGNyZWF0ZVRlc3RFdmVudChudWxsKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LnN0YXR1cykudG9CZSgnZXJyb3InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ1JlcXVlc3QgYm9keSBpcyByZXF1aXJlZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3N0YXJ0X2RhdGXjgYzjgarjgYFF77+977+95ZCI77+9RTQwMOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZXZlbnQ6IEFQSUdhdGV3YXlQcm94eUV2ZW50ID0ge1xyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGVuZF9kYXRlOiBnZXREYXlzQWdvKDIpLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICd4LWFwaS1rZXknOiAndGVzdC1hcGkta2V5LTEyMzQ1JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIG11bHRpVmFsdWVIZWFkZXJzOiB7fSxcclxuICAgICAgICBodHRwTWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaXNCYXNlNjRFbmNvZGVkOiBmYWxzZSxcclxuICAgICAgICBwYXRoOiAnL2NvbGxlY3QnLFxyXG4gICAgICAgIHBhdGhQYXJhbWV0ZXJzOiBudWxsLFxyXG4gICAgICAgIHF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogbnVsbCxcclxuICAgICAgICBtdWx0aVZhbHVlUXVlcnlTdHJpbmdQYXJhbWV0ZXJzOiBudWxsLFxyXG4gICAgICAgIHN0YWdlVmFyaWFibGVzOiBudWxsLFxyXG4gICAgICAgIHJlcXVlc3RDb250ZXh0OiB7fSBhcyBhbnksXHJcbiAgICAgICAgcmVzb3VyY2U6ICcnLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDQwMCk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ3N0YXJ0X2RhdGUgaXMgcmVxdWlyZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdlbmRfZGF0ZeOBjOOBquOBgUXvv73vv73lkIjvv71FNDAw44KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBldmVudDogQVBJR2F0ZXdheVByb3h5RXZlbnQgPSB7XHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgc3RhcnRfZGF0ZTogZ2V0RGF5c0Fnbyg3KSxcclxuICAgICAgICB9KSxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAneC1hcGkta2V5JzogJ3Rlc3QtYXBpLWtleS0xMjM0NScsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtdWx0aVZhbHVlSGVhZGVyczoge30sXHJcbiAgICAgICAgaHR0cE1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGlzQmFzZTY0RW5jb2RlZDogZmFsc2UsXHJcbiAgICAgICAgcGF0aDogJy9jb2xsZWN0JyxcclxuICAgICAgICBwYXRoUGFyYW1ldGVyczogbnVsbCxcclxuICAgICAgICBxdWVyeVN0cmluZ1BhcmFtZXRlcnM6IG51bGwsXHJcbiAgICAgICAgbXVsdGlWYWx1ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogbnVsbCxcclxuICAgICAgICBzdGFnZVZhcmlhYmxlczogbnVsbCxcclxuICAgICAgICByZXF1ZXN0Q29udGV4dDoge30gYXMgYW55LFxyXG4gICAgICAgIHJlc291cmNlOiAnJyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdlbmRfZGF0ZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3N0YXJ0X2RhdGXjga7jg5Xjgqnjg7zjg57jg4Pjg4jjgYzkuI3mraPjgarloLTlkIjvv71FNDAw44KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBldmVudDogQVBJR2F0ZXdheVByb3h5RXZlbnQgPSB7XHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgc3RhcnRfZGF0ZTogJzIwMjQvMDEvMTUnLCAvLyDkuI3mraPjgarjg5Xjgqnjg7zjg57jg4Pjg4FFXHJcbiAgICAgICAgICBlbmRfZGF0ZTogZ2V0RGF5c0FnbygyKSxcclxuICAgICAgICB9KSxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAneC1hcGkta2V5JzogJ3Rlc3QtYXBpLWtleS0xMjM0NScsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtdWx0aVZhbHVlSGVhZGVyczoge30sXHJcbiAgICAgICAgaHR0cE1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGlzQmFzZTY0RW5jb2RlZDogZmFsc2UsXHJcbiAgICAgICAgcGF0aDogJy9jb2xsZWN0JyxcclxuICAgICAgICBwYXRoUGFyYW1ldGVyczogbnVsbCxcclxuICAgICAgICBxdWVyeVN0cmluZ1BhcmFtZXRlcnM6IG51bGwsXHJcbiAgICAgICAgbXVsdGlWYWx1ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogbnVsbCxcclxuICAgICAgICBzdGFnZVZhcmlhYmxlczogbnVsbCxcclxuICAgICAgICByZXF1ZXN0Q29udGV4dDoge30gYXMgYW55LFxyXG4gICAgICAgIHJlc291cmNlOiAnJyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdJbnZhbGlkIHN0YXJ0X2RhdGUgZm9ybWF0Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc3RhcnRfZGF0ZeOBjOWtmOWcqOOBl+OBquOBgUXvv73vv73ku5jvv71F5aC05ZCI77+9RTQwMOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8g5a2Y5Zyo44GX44Gq44GBRe+/ve+/veS7mOOCkuS9v+eUqO+/vUXvv71F5pyBRTDml6Xjga/lrZjlnKjjgZfjgarjgYFF77+977+9RVxyXG4gICAgICAvLyDjgZ/jgaDjgZfjgIFF5bm05Lul5YaBRe+/vUXml6Xku5jjgpLkvb/nlKjjgZnjgovlv4FF77+977+944GM44GC44KLXHJcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgICAgY29uc3QgeWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgIGNvbnN0IG1vbnRoID0gdG9kYXkuZ2V0TW9udGgoKSArIDE7IC8vIOePvuWcqOOBruacgUVcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gY3JlYXRlVGVzdEV2ZW50KHtcclxuICAgICAgICAgIHN0YXJ0X2RhdGU6IGAke3llYXJ9LTAyLTMwYCwgLy8gMuacgUUw5pel44Gv5a2Y5Zyo44GX44Gq44GBRVxyXG4gICAgICAgICAgZW5kX2RhdGU6IGAke3llYXJ9LTAzLTAxYCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcclxuICAgICAgLy8g5pel5LuY77+9ReaVtOWQiOaAp+ODgeOCp+ODgUXvv73vv73jgafnhKHlirnjgarml6Xku5jjgpLmpJzvv71FXHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignSW52YWxpZCBzdGFydF9kYXRlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc3RhcnRfZGF0ZeOBjGVuZF9kYXRl44KI44KK5b6M77+9ReWgtOWQiO+/vUU0MDDjgpLov5TjgZknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGV2ZW50OiBBUElHYXRld2F5UHJveHlFdmVudCA9IHtcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBzdGFydF9kYXRlOiBnZXREYXlzQWdvKDIpLFxyXG4gICAgICAgICAgZW5kX2RhdGU6IGdldERheXNBZ28oNyksXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ3gtYXBpLWtleSc6ICd0ZXN0LWFwaS1rZXktMTIzNDUnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbXVsdGlWYWx1ZUhlYWRlcnM6IHt9LFxyXG4gICAgICAgIGh0dHBNZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBpc0Jhc2U2NEVuY29kZWQ6IGZhbHNlLFxyXG4gICAgICAgIHBhdGg6ICcvY29sbGVjdCcsXHJcbiAgICAgICAgcGF0aFBhcmFtZXRlcnM6IG51bGwsXHJcbiAgICAgICAgcXVlcnlTdHJpbmdQYXJhbWV0ZXJzOiBudWxsLFxyXG4gICAgICAgIG11bHRpVmFsdWVRdWVyeVN0cmluZ1BhcmFtZXRlcnM6IG51bGwsXHJcbiAgICAgICAgc3RhZ2VWYXJpYWJsZXM6IG51bGwsXHJcbiAgICAgICAgcmVxdWVzdENvbnRleHQ6IHt9IGFzIGFueSxcclxuICAgICAgICByZXNvdXJjZTogJycsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignbXVzdCBiZSBiZWZvcmUgb3IgZXF1YWwgdG8nKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzdGFydF9kYXRl44GBReW5tOS7peS4iuWJjeOBruWgtOWQiO+/vUU0MDDjgpLov5TjgZknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHR3b1llYXJzQWdvID0gZ2V0RGF5c0Fnbyg3MzApOyAvLyAy5bm05YmBRVxyXG5cclxuICAgICAgY29uc3QgZXZlbnQ6IEFQSUdhdGV3YXlQcm94eUV2ZW50ID0ge1xyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIHN0YXJ0X2RhdGU6IHR3b1llYXJzQWdvLFxyXG4gICAgICAgICAgZW5kX2RhdGU6IGdldERheXNBZ28oMiksXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ3gtYXBpLWtleSc6ICd0ZXN0LWFwaS1rZXktMTIzNDUnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbXVsdGlWYWx1ZUhlYWRlcnM6IHt9LFxyXG4gICAgICAgIGh0dHBNZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBpc0Jhc2U2NEVuY29kZWQ6IGZhbHNlLFxyXG4gICAgICAgIHBhdGg6ICcvY29sbGVjdCcsXHJcbiAgICAgICAgcGF0aFBhcmFtZXRlcnM6IG51bGwsXHJcbiAgICAgICAgcXVlcnlTdHJpbmdQYXJhbWV0ZXJzOiBudWxsLFxyXG4gICAgICAgIG11bHRpVmFsdWVRdWVyeVN0cmluZ1BhcmFtZXRlcnM6IG51bGwsXHJcbiAgICAgICAgc3RhZ2VWYXJpYWJsZXM6IG51bGwsXHJcbiAgICAgICAgcmVxdWVzdENvbnRleHQ6IHt9IGFzIGFueSxcclxuICAgICAgICByZXNvdXJjZTogJycsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbigndG9vIG9sZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2VuZF9kYXRl44GM5pyq5p2l5pel44Gu5aC05ZCI77+9RTQwMOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdHdvRGF5c0xhdGVyID0gZ2V0RGF5c0xhdGVyKDIpOyAvLyAy5pel5b6BRVxyXG5cclxuICAgICAgY29uc3QgZXZlbnQ6IEFQSUdhdGV3YXlQcm94eUV2ZW50ID0ge1xyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIHN0YXJ0X2RhdGU6IGdldERheXNBZ28oNyksXHJcbiAgICAgICAgICBlbmRfZGF0ZTogdHdvRGF5c0xhdGVyLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICd4LWFwaS1rZXknOiAndGVzdC1hcGkta2V5LTEyMzQ1JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIG11bHRpVmFsdWVIZWFkZXJzOiB7fSxcclxuICAgICAgICBodHRwTWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaXNCYXNlNjRFbmNvZGVkOiBmYWxzZSxcclxuICAgICAgICBwYXRoOiAnL2NvbGxlY3QnLFxyXG4gICAgICAgIHBhdGhQYXJhbWV0ZXJzOiBudWxsLFxyXG4gICAgICAgIHF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogbnVsbCxcclxuICAgICAgICBtdWx0aVZhbHVlUXVlcnlTdHJpbmdQYXJhbWV0ZXJzOiBudWxsLFxyXG4gICAgICAgIHN0YWdlVmFyaWFibGVzOiBudWxsLFxyXG4gICAgICAgIHJlcXVlc3RDb250ZXh0OiB7fSBhcyBhbnksXHJcbiAgICAgICAgcmVzb3VyY2U6ICcnLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDQwMCk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ2Nhbm5vdCBiZSBpbiB0aGUgZnV0dXJlJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0xhbWJkYeWRvOOBs+WHuuOBl+OCqOODqeODvCcsICgpID0+IHtcclxuICAgIGl0KCdMYW1iZGEgQ29sbGVjdG9y44Gu5ZG844Gz5Ye644GX44Gr5aSx5pWX44GX44Gf5aC05ZCI77+9RTUwMOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgbGFtYmRhTW9jay5vbihJbnZva2VDb21tYW5kKS5yZWplY3RzKG5ldyBFcnJvcignTGFtYmRhIGludm9jYXRpb24gZmFpbGVkJykpO1xyXG5cclxuICAgICAgY29uc3QgdGVzdERhdGVzID0gZ2V0VGVzdERhdGVzKCk7XHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gY3JlYXRlVGVzdEV2ZW50KHRlc3REYXRlcyk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNTAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5zdGF0dXMpLnRvQmUoJ2Vycm9yJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLmNvZGUpLnRvQmUoJ0lOVEVSTkFMX0VSUk9SJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignRmFpbGVkIHRvIHN0YXJ0IGRhdGEgY29sbGVjdGlvbicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ0xhbWJkYSBDb2xsZWN0b3LjgYznqbrjga5QYXlsb2Fk44KS6L+U44GX44Gf5aC05ZCI77+9RTUwMOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgbGFtYmRhTW9jay5vbihJbnZva2VDb21tYW5kKS5yZXNvbHZlcyh7XHJcbiAgICAgICAgU3RhdHVzQ29kZTogMjAwLFxyXG4gICAgICAgIFBheWxvYWQ6IHVuZGVmaW5lZCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0ZXN0RGF0ZXMgPSBnZXRUZXN0RGF0ZXMoKTtcclxuICAgICAgY29uc3QgZXZlbnQgPSBjcmVhdGVUZXN0RXZlbnQodGVzdERhdGVzKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg1MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LnN0YXR1cykudG9CZSgnZXJyb3InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IuY29kZSkudG9CZSgnSU5URVJOQUxfRVJST1InKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdMYW1iZGEgQ29sbGVjdG9y44GMZXhlY3V0aW9uX2lk44KS6L+U44GV44Gq44GBRe+/ve+/veWQiO+/vUU1MDDjgpLov5TjgZknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tDb2xsZWN0b3JSZXNwb25zZSA9IHtcclxuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgICBtZXNzYWdlOiAnQ29sbGVjdGlvbiBzdGFydGVkJyxcclxuICAgICAgICBjb2xsZWN0ZWRfY291bnQ6IDAsXHJcbiAgICAgICAgZmFpbGVkX2NvdW50OiAwLFxyXG4gICAgICAgIC8vIGV4ZWN1dGlvbl9pZOOBjOOBquOBgUVcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGxhbWJkYU1vY2sub24oSW52b2tlQ29tbWFuZCkucmVzb2x2ZXMoe1xyXG4gICAgICAgIFN0YXR1c0NvZGU6IDIwMCxcclxuICAgICAgICBQYXlsb2FkOiBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShtb2NrQ29sbGVjdG9yUmVzcG9uc2UpKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0ZXN0RGF0ZXMgPSBnZXRUZXN0RGF0ZXMoKTtcclxuICAgICAgY29uc3QgZXZlbnQgPSBjcmVhdGVUZXN0RXZlbnQodGVzdERhdGVzKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg1MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LnN0YXR1cykudG9CZSgnZXJyb3InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IuY29kZSkudG9CZSgnSU5URVJOQUxfRVJST1InKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sInZlcnNpb24iOjN9