e69b84b915c6105e79e41dd74108d35e
"use strict";
/**
 * saveMetadata関数のユニットテスト
 *
 * Requirements: 要件1.4, 2.4（メタデータ保存、重複チェック）
 */
Object.defineProperty(exports, "__esModule", { value: true });
const client_dynamodb_1 = require("@aws-sdk/client-dynamodb");
const aws_sdk_client_mock_1 = require("aws-sdk-client-mock");
const save_metadata_1 = require("../save-metadata");
const errors_1 = require("../../../errors");
const dynamoMock = (0, aws_sdk_client_mock_1.mockClient)(client_dynamodb_1.DynamoDBClient);
describe('saveMetadata', () => {
    const originalEnv = process.env.DYNAMODB_TABLE;
    beforeEach(() => {
        jest.clearAllMocks();
        dynamoMock.reset();
        process.env.DYNAMODB_TABLE = 'test-table';
    });
    afterEach(() => {
        process.env.DYNAMODB_TABLE = originalEnv;
    });
    describe('正常系', () => {
        it('メタデータをDynamoDBに保存できる', async () => {
            // Arrange
            const disclosure = {
                disclosure_id: 'TD20240115001',
                company_code: '1234',
                company_name: '株式会社サンプル',
                disclosure_type: '決算短信',
                title: '2024年3月期 第3四半期決算短信',
                disclosed_at: '2024-01-15T10:30:00Z',
                pdf_url: 'https://www.release.tdnet.info/inbs/140120240115001.pdf',
                s3_key: '',
                collected_at: '',
                date_partition: '',
            };
            const s3_key = '2024/01/15/TD20240115001.pdf';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            await (0, save_metadata_1.saveMetadata)(disclosure, s3_key);
            // Assert
            expect(dynamoMock.calls()).toHaveLength(1);
            const call = dynamoMock.call(0);
            expect(call.args[0].input).toMatchObject({
                TableName: 'test-table',
                ConditionExpression: 'attribute_not_exists(disclosure_id)',
            });
            // date_partitionが正しく生成されているか確認
            const input = call.args[0].input;
            const item = input.Item;
            expect(item?.date_partition?.S).toBe('2024-01');
            expect(item?.disclosure_id?.S).toBe('TD20240115001');
            expect(item?.s3_key?.S).toBe(s3_key);
        });
        it('date_partitionを事前生成してから保存する（Two-Phase Commit）', async () => {
            // Arrange
            const disclosure = {
                disclosure_id: 'TD20240115001',
                company_code: '1234',
                company_name: '株式会社サンプル',
                disclosure_type: '決算短信',
                title: '2024年3月期 第3四半期決算短信',
                disclosed_at: '2024-01-15T10:30:00Z',
                pdf_url: 'https://www.release.tdnet.info/inbs/140120240115001.pdf',
                s3_key: '',
                collected_at: '',
                date_partition: '',
            };
            const s3_key = '2024/01/15/TD20240115001.pdf';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            await (0, save_metadata_1.saveMetadata)(disclosure, s3_key);
            // Assert
            const call = dynamoMock.call(0);
            const input = call.args[0].input;
            const item = input.Item;
            // date_partitionが保存前に生成されている
            expect(item?.date_partition?.S).toBeDefined();
            expect(item?.date_partition?.S).toBe('2024-01');
        });
        it('月またぎ（UTC→JST）のdate_partitionを正しく生成できる', async () => {
            // Arrange: UTC 2024-01-31 15:30 → JST 2024-02-01 00:30
            const disclosure = {
                disclosure_id: 'TD20240131001',
                company_code: '1234',
                company_name: '株式会社サンプル',
                disclosure_type: '決算短信',
                title: '2024年3月期 第3四半期決算短信',
                disclosed_at: '2024-01-31T15:30:00Z',
                pdf_url: 'https://www.release.tdnet.info/inbs/140120240131001.pdf',
                s3_key: '',
                collected_at: '',
                date_partition: '',
            };
            const s3_key = '2024/02/01/TD20240131001.pdf';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            await (0, save_metadata_1.saveMetadata)(disclosure, s3_key);
            // Assert
            const call = dynamoMock.call(0);
            const input = call.args[0].input;
            const item = input.Item;
            expect(item?.date_partition?.S).toBe('2024-02');
        });
        it('年またぎ（UTC→JST）のdate_partitionを正しく生成できる', async () => {
            // Arrange: UTC 2023-12-31 15:30 → JST 2024-01-01 00:30
            const disclosure = {
                disclosure_id: 'TD20231231001',
                company_code: '1234',
                company_name: '株式会社サンプル',
                disclosure_type: '決算短信',
                title: '2024年3月期 第3四半期決算短信',
                disclosed_at: '2023-12-31T15:30:00Z',
                pdf_url: 'https://www.release.tdnet.info/inbs/140120231231001.pdf',
                s3_key: '',
                collected_at: '',
                date_partition: '',
            };
            const s3_key = '2024/01/01/TD20231231001.pdf';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            await (0, save_metadata_1.saveMetadata)(disclosure, s3_key);
            // Assert
            const call = dynamoMock.call(0);
            const input = call.args[0].input;
            const item = input.Item;
            expect(item?.date_partition?.S).toBe('2024-01');
        });
        it('collected_atに現在時刻を設定する', async () => {
            // Arrange
            const disclosure = {
                disclosure_id: 'TD20240115001',
                company_code: '1234',
                company_name: '株式会社サンプル',
                disclosure_type: '決算短信',
                title: '2024年3月期 第3四半期決算短信',
                disclosed_at: '2024-01-15T10:30:00Z',
                pdf_url: 'https://www.release.tdnet.info/inbs/140120240115001.pdf',
                s3_key: '',
                collected_at: '',
                date_partition: '',
            };
            const s3_key = '2024/01/15/TD20240115001.pdf';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            const beforeTime = new Date().toISOString();
            // Act
            await (0, save_metadata_1.saveMetadata)(disclosure, s3_key);
            const afterTime = new Date().toISOString();
            // Assert
            const call = dynamoMock.call(0);
            const input = call.args[0].input;
            const item = input.Item;
            const collectedAt = item?.collected_at?.S;
            expect(collectedAt).toBeDefined();
            expect(collectedAt).toMatch(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/);
            expect(collectedAt >= beforeTime).toBe(true);
            expect(collectedAt <= afterTime).toBe(true);
        });
    });
    describe('異常系', () => {
        it('重複する開示IDの場合、警告レベルで記録して正常終了する', async () => {
            // Arrange
            const disclosure = {
                disclosure_id: 'TD20240115001',
                company_code: '1234',
                company_name: '株式会社サンプル',
                disclosure_type: '決算短信',
                title: '2024年3月期 第3四半期決算短信',
                disclosed_at: '2024-01-15T10:30:00Z',
                pdf_url: 'https://www.release.tdnet.info/inbs/140120240115001.pdf',
                s3_key: '',
                collected_at: '',
                date_partition: '',
            };
            const s3_key = '2024/01/15/TD20240115001.pdf';
            const conditionalCheckError = new Error('ConditionalCheckFailedException');
            conditionalCheckError.name = 'ConditionalCheckFailedException';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).rejects(conditionalCheckError);
            // Act & Assert
            await expect((0, save_metadata_1.saveMetadata)(disclosure, s3_key)).resolves.toBeUndefined();
            expect(dynamoMock.calls()).toHaveLength(1);
        });
        it('不正なdisclosed_atフォーマットでValidationErrorをスローする', async () => {
            // Arrange
            const disclosure = {
                disclosure_id: 'TD20240115001',
                company_code: '1234',
                company_name: '株式会社サンプル',
                disclosure_type: '決算短信',
                title: '2024年3月期 第3四半期決算短信',
                disclosed_at: '2024-01-15 10:30:00', // 不正なフォーマット
                pdf_url: 'https://www.release.tdnet.info/inbs/140120240115001.pdf',
                s3_key: '',
                collected_at: '',
                date_partition: '',
            };
            const s3_key = '2024/01/15/TD20240115001.pdf';
            // Act & Assert
            await expect((0, save_metadata_1.saveMetadata)(disclosure, s3_key)).rejects.toThrow(errors_1.ValidationError);
            expect(dynamoMock.calls()).toHaveLength(0); // DynamoDBは呼ばれない
        });
        it('存在しない日付でValidationErrorをスローする', async () => {
            // Arrange
            const disclosure = {
                disclosure_id: 'TD20240230001',
                company_code: '1234',
                company_name: '株式会社サンプル',
                disclosure_type: '決算短信',
                title: '2024年3月期 第3四半期決算短信',
                disclosed_at: '2024-02-30T10:30:00Z', // 存在しない日付
                pdf_url: 'https://www.release.tdnet.info/inbs/140120240230001.pdf',
                s3_key: '',
                collected_at: '',
                date_partition: '',
            };
            const s3_key = '2024/02/30/TD20240230001.pdf';
            // Act & Assert
            await expect((0, save_metadata_1.saveMetadata)(disclosure, s3_key)).rejects.toThrow(errors_1.ValidationError);
            expect(dynamoMock.calls()).toHaveLength(0); // DynamoDBは呼ばれない
        });
        it('DynamoDBエラーで失敗する', async () => {
            // Arrange
            const disclosure = {
                disclosure_id: 'TD20240115001',
                company_code: '1234',
                company_name: '株式会社サンプル',
                disclosure_type: '決算短信',
                title: '2024年3月期 第3四半期決算短信',
                disclosed_at: '2024-01-15T10:30:00Z',
                pdf_url: 'https://www.release.tdnet.info/inbs/140120240115001.pdf',
                s3_key: '',
                collected_at: '',
                date_partition: '',
            };
            const s3_key = '2024/01/15/TD20240115001.pdf';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).rejects(new Error('DynamoDB error'));
            // Act & Assert
            await expect((0, save_metadata_1.saveMetadata)(disclosure, s3_key)).rejects.toThrow('DynamoDB error');
        });
    });
    describe('エッジケース', () => {
        it('うるう年2月末（UTC→JST）のdate_partitionを正しく生成できる', async () => {
            // Arrange: UTC 2024-02-29 15:00 → JST 2024-03-01 00:00
            const disclosure = {
                disclosure_id: 'TD20240229001',
                company_code: '1234',
                company_name: '株式会社サンプル',
                disclosure_type: '決算短信',
                title: '2024年3月期 第3四半期決算短信',
                disclosed_at: '2024-02-29T15:00:00Z',
                pdf_url: 'https://www.release.tdnet.info/inbs/140120240229001.pdf',
                s3_key: '',
                collected_at: '',
                date_partition: '',
            };
            const s3_key = '2024/03/01/TD20240229001.pdf';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            await (0, save_metadata_1.saveMetadata)(disclosure, s3_key);
            // Assert
            const call = dynamoMock.call(0);
            const input = call.args[0].input;
            const item = input.Item;
            expect(item?.date_partition?.S).toBe('2024-03');
        });
        it('環境変数DYNAMODB_TABLEが未設定の場合、デフォルト値を使用する', async () => {
            // Arrange
            delete process.env.DYNAMODB_TABLE;
            const disclosure = {
                disclosure_id: 'TD20240115001',
                company_code: '1234',
                company_name: '株式会社サンプル',
                disclosure_type: '決算短信',
                title: '2024年3月期 第3四半期決算短信',
                disclosed_at: '2024-01-15T10:30:00Z',
                pdf_url: 'https://www.release.tdnet.info/inbs/140120240115001.pdf',
                s3_key: '',
                collected_at: '',
                date_partition: '',
            };
            const s3_key = '2024/01/15/TD20240115001.pdf';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            await (0, save_metadata_1.saveMetadata)(disclosure, s3_key);
            // Assert
            const input = dynamoMock.call(0).args[0].input;
            expect(input.TableName).toBe('tdnet_disclosures');
        });
        it('すべてのメタデータフィールドが正しく保存される', async () => {
            // Arrange
            const disclosure = {
                disclosure_id: 'TD20240115001',
                company_code: '1234',
                company_name: '株式会社サンプル',
                disclosure_type: '決算短信',
                title: '2024年3月期 第3四半期決算短信',
                disclosed_at: '2024-01-15T10:30:00Z',
                pdf_url: 'https://www.release.tdnet.info/inbs/140120240115001.pdf',
                s3_key: '',
                collected_at: '',
                date_partition: '',
            };
            const s3_key = '2024/01/15/TD20240115001.pdf';
            dynamoMock.on(client_dynamodb_1.PutItemCommand).resolves({});
            // Act
            await (0, save_metadata_1.saveMetadata)(disclosure, s3_key);
            // Assert
            const call = dynamoMock.call(0);
            const input = call.args[0].input;
            const item = input.Item;
            expect(item?.disclosure_id?.S).toBe('TD20240115001');
            expect(item?.company_code?.S).toBe('1234');
            expect(item?.company_name?.S).toBe('株式会社サンプル');
            expect(item?.disclosure_type?.S).toBe('決算短信');
            expect(item?.title?.S).toBe('2024年3月期 第3四半期決算短信');
            expect(item?.disclosed_at?.S).toBe('2024-01-15T10:30:00Z');
            expect(item?.date_partition?.S).toBe('2024-01');
            expect(item?.pdf_url?.S).toBe('https://www.release.tdnet.info/inbs/140120240115001.pdf');
            expect(item?.s3_key?.S).toBe(s3_key);
            expect(item?.collected_at?.S).toBeDefined();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxsYW1iZGFcXGNvbGxlY3RvclxcX190ZXN0c19fXFxzYXZlLW1ldGFkYXRhLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7O0FBRUgsOERBQTBFO0FBQzFFLDZEQUFpRDtBQUNqRCxvREFBZ0Q7QUFFaEQsNENBQWtEO0FBRWxELE1BQU0sVUFBVSxHQUFHLElBQUEsZ0NBQVUsRUFBQyxnQ0FBYyxDQUFDLENBQUM7QUFFOUMsUUFBUSxDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7SUFDNUIsTUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUM7SUFFL0MsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUNyQixVQUFVLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDbkIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEdBQUcsWUFBWSxDQUFDO0lBQzVDLENBQUMsQ0FBQyxDQUFDO0lBRUgsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNiLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxHQUFHLFdBQVcsQ0FBQztJQUMzQyxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxLQUFLLEVBQUUsR0FBRyxFQUFFO1FBQ25CLEVBQUUsQ0FBQyxzQkFBc0IsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNwQyxVQUFVO1lBQ1YsTUFBTSxVQUFVLEdBQWU7Z0JBQzdCLGFBQWEsRUFBRSxlQUFlO2dCQUM5QixZQUFZLEVBQUUsTUFBTTtnQkFDcEIsWUFBWSxFQUFFLFVBQVU7Z0JBQ3hCLGVBQWUsRUFBRSxNQUFNO2dCQUN2QixLQUFLLEVBQUUsb0JBQW9CO2dCQUMzQixZQUFZLEVBQUUsc0JBQXNCO2dCQUNwQyxPQUFPLEVBQUUseURBQXlEO2dCQUNsRSxNQUFNLEVBQUUsRUFBRTtnQkFDVixZQUFZLEVBQUUsRUFBRTtnQkFDaEIsY0FBYyxF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LENBQUMsVUFBVSxDQUFDLENBQUM7WUFDL0MsTUFBTSxDQUFDLElBQUksRUFBRSxlQUFlLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzlDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1lBQ2xELE1BQU0sQ0FBQyxJQUFJLEVBQUUsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1lBQzNELE1BQU0sQ0FBQyxJQUFJLEVBQUUsY0FBYyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNoRCxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMseURBQXlELENBQUMsQ0FBQztZQUN6RixNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLElBQUksRUFBRSxZQUFZLEVBQUUsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDOUMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcdGkxOThcXGludmVzdG1lbnRfYW5hbHlzaXNfb3BvcG9cXHNyY1xcbGFtYmRhXFxjb2xsZWN0b3JcXF9fdGVzdHNfX1xcc2F2ZS1tZXRhZGF0YS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBzYXZlTWV0YWRhdGHplqLmlbDjga7jg6bjg4vjg4Pjg4jjg4bjgrnjg4hcclxuICpcclxuICogUmVxdWlyZW1lbnRzOiDopoHku7YxLjQsIDIuNO+8iOODoeOCv+ODh+ODvOOCv+S/neWtmOOAgemHjeikh+ODgeOCp+ODg+OCr++8iVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IER5bmFtb0RCQ2xpZW50LCBQdXRJdGVtQ29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1keW5hbW9kYic7XHJcbmltcG9ydCB7IG1vY2tDbGllbnQgfSBmcm9tICdhd3Mtc2RrLWNsaWVudC1tb2NrJztcclxuaW1wb3J0IHsgc2F2ZU1ldGFkYXRhIH0gZnJvbSAnLi4vc2F2ZS1tZXRhZGF0YSc7XHJcbmltcG9ydCB7IERpc2Nsb3N1cmUgfSBmcm9tICcuLi8uLi8uLi90eXBlcyc7XHJcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciB9IGZyb20gJy4uLy4uLy4uL2Vycm9ycyc7XHJcblxyXG5jb25zdCBkeW5hbW9Nb2NrID0gbW9ja0NsaWVudChEeW5hbW9EQkNsaWVudCk7XHJcblxyXG5kZXNjcmliZSgnc2F2ZU1ldGFkYXRhJywgKCkgPT4ge1xyXG4gIGNvbnN0IG9yaWdpbmFsRW52ID0gcHJvY2Vzcy5lbnYuRFlOQU1PREJfVEFCTEU7XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgICBkeW5hbW9Nb2NrLnJlc2V0KCk7XHJcbiAgICBwcm9jZXNzLmVudi5EWU5BTU9EQl9UQUJMRSA9ICd0ZXN0LXRhYmxlJztcclxuICB9KTtcclxuXHJcbiAgYWZ0ZXJFYWNoKCgpID0+IHtcclxuICAgIHByb2Nlc3MuZW52LkRZTkFNT0RCX1RBQkxFID0gb3JpZ2luYWxFbnY7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfmraPluLjns7snLCAoKSA9PiB7XHJcbiAgICBpdCgn44Oh44K/44OH44O844K/44KSRHluYW1vRELjgavkv53lrZjjgafjgY3jgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgY29uc3QgZGlzY2xvc3VyZTogRGlzY2xvc3VyZSA9IHtcclxuICAgICAgICBkaXNjbG9zdXJlX2lkOiAnVEQyMDI0MDExNTAwMScsXHJcbiAgICAgICAgY29tcGFueV9jb2RlOiAnMTIzNCcsXHJcbiAgICAgICAgY29tcGFueV9uYW1lOiAn5qCq5byP5Lya56S+44K144Oz44OX44OrJyxcclxuICAgICAgICBkaXNjbG9zdXJlX3R5cGU6ICfmsbrnrpfnn63kv6EnLFxyXG4gICAgICAgIHRpdGxlOiAnMjAyNOW5tDPmnIjmnJ8g56ysM+Wbm+WNiuacn+axuueul+efreS/oScsXHJcbiAgICAgICAgZGlzY2xvc2VkX2F0OiAnMjAyNC0wMS0xNVQxMDozMDowMFonLFxyXG4gICAgICAgIHBkZl91cmw6ICdodHRwczovL3d3dy5yZWxlYXNlLnRkbmV0LmluZm8vaW5icy8xNDAxMjAyNDAxMTUwMDEucGRmJyxcclxuICAgICAgICBzM19rZXk6ICcnLFxyXG4gICAgICAgIGNvbGxlY3RlZF9hdDogJycsXHJcbiAgICAgICAgZGF0ZV9wYXJ0aXRpb246ICcnLFxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBzM19rZXkgPSAnMjAyNC8wMS8xNS9URDIwMjQwMTE1MDAxLnBkZic7XHJcblxyXG4gICAgICBkeW5hbW9Nb2NrLm9uKFB1dEl0ZW1Db21tYW5kKS5yZXNvbHZlcyh7fSk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgYXdhaXQgc2F2ZU1ldGFkYXRhKGRpc2Nsb3N1cmUsIHMzX2tleSk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KGR5bmFtb01vY2suY2FsbHMoKSkudG9IYXZlTGVuZ3RoKDEpO1xyXG4gICAgICBjb25zdCBjYWxsID0gZHluYW1vTW9jay5jYWxsKDApO1xyXG4gICAgICBleHBlY3QoY2FsbC5hcmdzWzBdLmlucHV0KS50b01hdGNoT2JqZWN0KHtcclxuICAgICAgICBUYWJsZU5hbWU6ICd0ZXN0LXRhYmxlJyxcclxuICAgICAgICBDb25kaXRpb25FeHByZXNzaW9uOiAnYXR0cmlidXRlX25vdF9leGlzdHMoZGlzY2xvc3VyZV9pZCknLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIGRhdGVfcGFydGl0aW9u44GM5q2j44GX44GP55Sf5oiQ44GV44KM44Gm44GE44KL44GL56K66KqNXHJcbiAgICAgIGNvbnN0IGlucHV0ID0gY2FsbC5hcmdzWzBdLmlucHV0IGFzIGFueTtcclxuICAgICAgY29uc3QgaXRlbSA9IGlucHV0Lkl0ZW07XHJcbiAgICAgIGV4cGVjdChpdGVtPy5kYXRlX3BhcnRpdGlvbj8uUykudG9CZSgnMjAyNC0wMScpO1xyXG4gICAgICBleHBlY3QoaXRlbT8uZGlzY2xvc3VyZV9pZD8uUykudG9CZSgnVEQyMDI0MDExNTAwMScpO1xyXG4gICAgICBleHBlY3QoaXRlbT8uczNfa2V5Py5TKS50b0JlKHMzX2tleSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnZGF0ZV9wYXJ0aXRpb27jgpLkuovliY3nlJ/miJDjgZfjgabjgYvjgonkv53lrZjjgZnjgovvvIhUd28tUGhhc2UgQ29tbWl077yJJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IGRpc2Nsb3N1cmU6IERpc2Nsb3N1cmUgPSB7XHJcbiAgICAgICAgZGlzY2xvc3VyZV9pZDogJ1REMjAyNDAxMTUwMDEnLFxyXG4gICAgICAgIGNvbXBhbnlfY29kZTogJzEyMzQnLFxyXG4gICAgICAgIGNvbXBhbnlfbmFtZTogJ+agquW8j+S8muekvuOCteODs+ODl+ODqycsXHJcbiAgICAgICAgZGlzY2xvc3VyZV90eXBlOiAn5rG6566X55+t5L+hJyxcclxuICAgICAgICB0aXRsZTogJzIwMjTlubQz5pyI5pyfIOesrDPlm5vljYrmnJ/msbrnrpfnn63kv6EnLFxyXG4gICAgICAgIGRpc2Nsb3NlZF9hdDogJzIwMjQtMDEtMTVUMTA6MzA6MDBaJyxcclxuICAgICAgICBwZGZfdXJsOiAnaHR0cHM6Ly93d3cucmVsZWFzZS50ZG5ldC5pbmZvL2luYnMvMTQwMTIwMjQwMTE1MDAxLnBkZicsXHJcbiAgICAgICAgczNfa2V5OiAnJyxcclxuICAgICAgICBjb2xsZWN0ZWRfYXQ6ICcnLFxyXG4gICAgICAgIGRhdGVfcGFydGl0aW9uOiAnJyxcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgczNfa2V5ID0gJzIwMjQvMDEvMTUvVEQyMDI0MDExNTAwMS5wZGYnO1xyXG5cclxuICAgICAgZHluYW1vTW9jay5vbihQdXRJdGVtQ29tbWFuZCkucmVzb2x2ZXMoe30pO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGF3YWl0IHNhdmVNZXRhZGF0YShkaXNjbG9zdXJlLCBzM19rZXkpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGNvbnN0IGNhbGwgPSBkeW5hbW9Nb2NrLmNhbGwoMCk7XHJcbiAgICAgIGNvbnN0IGlucHV0ID0gY2FsbC5hcmdzWzBdLmlucHV0IGFzIGFueTtcclxuICAgICAgY29uc3QgaXRlbSA9IGlucHV0Lkl0ZW07XHJcblxyXG4gICAgICAvLyBkYXRlX3BhcnRpdGlvbuOBjOS/neWtmOWJjeOBq+eUn+aIkOOBleOCjOOBpuOBhOOCi1xyXG4gICAgICBleHBlY3QoaXRlbT8uZGF0ZV9wYXJ0aXRpb24/LlMpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChpdGVtPy5kYXRlX3BhcnRpdGlvbj8uUykudG9CZSgnMjAyNC0wMScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+aciOOBvuOBn+OBju+8iFVUQ+KGkkpTVO+8ieOBrmRhdGVfcGFydGl0aW9u44KS5q2j44GX44GP55Sf5oiQ44Gn44GN44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlOiBVVEMgMjAyNC0wMS0zMSAxNTozMCDihpIgSlNUIDIwMjQtMDItMDEgMDA6MzBcclxuICAgICAgY29uc3QgZGlzY2xvc3VyZTogRGlzY2xvc3VyZSA9IHtcclxuICAgICAgICBkaXNjbG9zdXJlX2lkOiAnVEQyMDI0MDEzMTAwMScsXHJcbiAgICAgICAgY29tcGFueV9jb2RlOiAnMTIzNCcsXHJcbiAgICAgICAgY29tcGFueV9uYW1lOiAn5qCq5byP5Lya56S+44K144Oz44OX44OrJyxcclxuICAgICAgICBkaXNjbG9zdXJlX3R5cGU6ICfmsbrnrpfnn63kv6EnLFxyXG4gICAgICAgIHRpdGxlOiAnMjAyNOW5tDPmnIjmnJ8g56ysM+Wbm+WNiuacn+axuueul+efreS/oScsXHJcbiAgICAgICAgZGlzY2xvc2VkX2F0OiAnMjAyNC0wMS0zMVQxNTozMDowMFonLFxyXG4gICAgICAgIHBkZl91cmw6ICdodHRwczovL3d3dy5yZWxlYXNlLnRkbmV0LmluZm8vaW5icy8xNDAxMjAyNDAxMzEwMDEucGRmJyxcclxuICAgICAgICBzM19rZXk6ICcnLFxyXG4gICAgICAgIGNvbGxlY3RlZF9hdDogJycsXHJcbiAgICAgICAgZGF0ZV9wYXJ0aXRpb246ICcnLFxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBzM19rZXkgPSAnMjAyNC8wMi8wMS9URDIwMjQwMTMxMDAxLnBkZic7XHJcblxyXG4gICAgICBkeW5hbW9Nb2NrLm9uKFB1dEl0ZW1Db21tYW5kKS5yZXNvbHZlcyh7fSk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgYXdhaXQgc2F2ZU1ldGFkYXRhKGRpc2Nsb3N1cmUsIHMzX2tleSk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgY29uc3QgY2FsbCA9IGR5bmFtb01vY2suY2FsbCgwKTtcclxuICAgICAgY29uc3QgaW5wdXQgPSBjYWxsLmFyZ3NbMF0uaW5wdXQgYXMgYW55O1xyXG4gICAgICBjb25zdCBpdGVtID0gaW5wdXQuSXRlbTtcclxuICAgICAgZXhwZWN0KGl0ZW0/LmRhdGVfcGFydGl0aW9uPy5TKS50b0JlKCcyMDI0LTAyJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bm044G+44Gf44GO77yIVVRD4oaSSlNU77yJ44GuZGF0ZV9wYXJ0aXRpb27jgpLmraPjgZfjgY/nlJ/miJDjgafjgY3jgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2U6IFVUQyAyMDIzLTEyLTMxIDE1OjMwIOKGkiBKU1QgMjAyNC0wMS0wMSAwMDozMFxyXG4gICAgICBjb25zdCBkaXNjbG9zdXJlOiBEaXNjbG9zdXJlID0ge1xyXG4gICAgICAgIGRpc2Nsb3N1cmVfaWQ6ICdURDIwMjMxMjMxMDAxJyxcclxuICAgICAgICBjb21wYW55X2NvZGU6ICcxMjM0JyxcclxuICAgICAgICBjb21wYW55X25hbWU6ICfmoKrlvI/kvJrnpL7jgrXjg7Pjg5fjg6snLFxyXG4gICAgICAgIGRpc2Nsb3N1cmVfdHlwZTogJ+axuueul+efreS/oScsXHJcbiAgICAgICAgdGl0bGU6ICcyMDI05bm0M+aciOacnyDnrKwz5Zub5Y2K5pyf5rG6566X55+t5L+hJyxcclxuICAgICAgICBkaXNjbG9zZWRfYXQ6ICcyMDIzLTEyLTMxVDE1OjMwOjAwWicsXHJcbiAgICAgICAgcGRmX3VybDogJ2h0dHBzOi8vd3d3LnJlbGVhc2UudGRuZXQuaW5mby9pbmJzLzE0MDEyMDIzMTIzMTAwMS5wZGYnLFxyXG4gICAgICAgIHMzX2tleTogJycsXHJcbiAgICAgICAgY29sbGVjdGVkX2F0OiAnJyxcclxuICAgICAgICBkYXRlX3BhcnRpdGlvbjogJycsXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IHMzX2tleSA9ICcyMDI0LzAxLzAxL1REMjAyMzEyMzEwMDEucGRmJztcclxuXHJcbiAgICAgIGR5bmFtb01vY2sub24oUHV0SXRlbUNvbW1hbmQpLnJlc29sdmVzKHt9KTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBhd2FpdCBzYXZlTWV0YWRhdGEoZGlzY2xvc3VyZSwgczNfa2V5KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBjb25zdCBjYWxsID0gZHluYW1vTW9jay5jYWxsKDApO1xyXG4gICAgICBjb25zdCBpbnB1dCA9IGNhbGwuYXJnc1swXS5pbnB1dCBhcyBhbnk7XHJcbiAgICAgIGNvbnN0IGl0ZW0gPSBpbnB1dC5JdGVtO1xyXG4gICAgICBleHBlY3QoaXRlbT8uZGF0ZV9wYXJ0aXRpb24/LlMpLnRvQmUoJzIwMjQtMDEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdjb2xsZWN0ZWRfYXTjgavnj77lnKjmmYLliLvjgpLoqK3lrprjgZnjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgY29uc3QgZGlzY2xvc3VyZTogRGlzY2xvc3VyZSA9IHtcclxuICAgICAgICBkaXNjbG9zdXJlX2lkOiAnVEQyMDI0MDExNTAwMScsXHJcbiAgICAgICAgY29tcGFueV9jb2RlOiAnMTIzNCcsXHJcbiAgICAgICAgY29tcGFueV9uYW1lOiAn5qCq5byP5Lya56S+44K144Oz44OX44OrJyxcclxuICAgICAgICBkaXNjbG9zdXJlX3R5cGU6ICfmsbrnrpfnn63kv6EnLFxyXG4gICAgICAgIHRpdGxlOiAnMjAyNOW5tDPmnIjmnJ8g56ysM+Wbm+WNiuacn+axuueul+efreS/oScsXHJcbiAgICAgICAgZGlzY2xvc2VkX2F0OiAnMjAyNC0wMS0xNVQxMDozMDowMFonLFxyXG4gICAgICAgIHBkZl91cmw6ICdodHRwczovL3d3dy5yZWxlYXNlLnRkbmV0LmluZm8vaW5icy8xNDAxMjAyNDAxMTUwMDEucGRmJyxcclxuICAgICAgICBzM19rZXk6ICcnLFxyXG4gICAgICAgIGNvbGxlY3RlZF9hdDogJycsXHJcbiAgICAgICAgZGF0ZV9wYXJ0aXRpb246ICcnLFxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBzM19rZXkgPSAnMjAyNC8wMS8xNS9URDIwMjQwMTE1MDAxLnBkZic7XHJcblxyXG4gICAgICBkeW5hbW9Nb2NrLm9uKFB1dEl0ZW1Db21tYW5kKS5yZXNvbHZlcyh7fSk7XHJcblxyXG4gICAgICBjb25zdCBiZWZvcmVUaW1lID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGF3YWl0IHNhdmVNZXRhZGF0YShkaXNjbG9zdXJlLCBzM19rZXkpO1xyXG5cclxuICAgICAgY29uc3QgYWZ0ZXJUaW1lID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGNvbnN0IGNhbGwgPSBkeW5hbW9Nb2NrLmNhbGwoMCk7XHJcbiAgICAgIGNvbnN0IGlucHV0ID0gY2FsbC5hcmdzWzBdLmlucHV0IGFzIGFueTtcclxuICAgICAgY29uc3QgaXRlbSA9IGlucHV0Lkl0ZW07XHJcbiAgICAgIGNvbnN0IGNvbGxlY3RlZEF0ID0gaXRlbT8uY29sbGVjdGVkX2F0Py5TO1xyXG5cclxuICAgICAgZXhwZWN0KGNvbGxlY3RlZEF0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoY29sbGVjdGVkQXQpLnRvTWF0Y2goL15cXGR7NH0tXFxkezJ9LVxcZHsyfVRcXGR7Mn06XFxkezJ9OlxcZHsyfVxcLlxcZHszfVokLyk7XHJcbiAgICAgIGV4cGVjdChjb2xsZWN0ZWRBdCEgPj0gYmVmb3JlVGltZSkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KGNvbGxlY3RlZEF0ISA8PSBhZnRlclRpbWUpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+eVsOW4uOezuycsICgpID0+IHtcclxuICAgIGl0KCfph43opIfjgZnjgovplovnpLpJROOBruWgtOWQiOOAgeitpuWRiuODrOODmeODq+OBp+iomOmMsuOBl+OBpuato+W4uOe1guS6huOBmeOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBjb25zdCBkaXNjbG9zdXJlOiBEaXNjbG9zdXJlID0ge1xyXG4gICAgICAgIGRpc2Nsb3N1cmVfaWQ6ICdURDIwMjQwMTE1MDAxJyxcclxuICAgICAgICBjb21wYW55X2NvZGU6ICcxMjM0JyxcclxuICAgICAgICBjb21wYW55X25hbWU6ICfmoKrlvI/kvJrnpL7jgrXjg7Pjg5fjg6snLFxyXG4gICAgICAgIGRpc2Nsb3N1cmVfdHlwZTogJ+axuueul+efreS/oScsXHJcbiAgICAgICAgdGl0bGU6ICcyMDI05bm0M+aciOacnyDnrKwz5Zub5Y2K5pyf5rG6566X55+t5L+hJyxcclxuICAgICAgICBkaXNjbG9zZWRfYXQ6ICcyMDI0LTAxLTE1VDEwOjMwOjAwWicsXHJcbiAgICAgICAgcGRmX3VybDogJ2h0dHBzOi8vd3d3LnJlbGVhc2UudGRuZXQuaW5mby9pbmJzLzE0MDEyMDI0MDExNTAwMS5wZGYnLFxyXG4gICAgICAgIHMzX2tleTogJycsXHJcbiAgICAgICAgY29sbGVjdGVkX2F0OiAnJyxcclxuICAgICAgICBkYXRlX3BhcnRpdGlvbjogJycsXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IHMzX2tleSA9ICcyMDI0LzAxLzE1L1REMjAyNDAxMTUwMDEucGRmJztcclxuXHJcbiAgICAgIGNvbnN0IGNvbmRpdGlvbmFsQ2hlY2tFcnJvciA9IG5ldyBFcnJvcignQ29uZGl0aW9uYWxDaGVja0ZhaWxlZEV4Y2VwdGlvbicpO1xyXG4gICAgICBjb25kaXRpb25hbENoZWNrRXJyb3IubmFtZSA9ICdDb25kaXRpb25hbENoZWNrRmFpbGVkRXhjZXB0aW9uJztcclxuICAgICAgZHluYW1vTW9jay5vbihQdXRJdGVtQ29tbWFuZCkucmVqZWN0cyhjb25kaXRpb25hbENoZWNrRXJyb3IpO1xyXG5cclxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XHJcbiAgICAgIGF3YWl0IGV4cGVjdChzYXZlTWV0YWRhdGEoZGlzY2xvc3VyZSwgczNfa2V5KSkucmVzb2x2ZXMudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoZHluYW1vTW9jay5jYWxscygpKS50b0hhdmVMZW5ndGgoMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5LiN5q2j44GqZGlzY2xvc2VkX2F044OV44Kp44O844Oe44OD44OI44GnVmFsaWRhdGlvbkVycm9y44KS44K544Ot44O844GZ44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IGRpc2Nsb3N1cmU6IERpc2Nsb3N1cmUgPSB7XHJcbiAgICAgICAgZGlzY2xvc3VyZV9pZDogJ1REMjAyNDAxMTUwMDEnLFxyXG4gICAgICAgIGNvbXBhbnlfY29kZTogJzEyMzQnLFxyXG4gICAgICAgIGNvbXBhbnlfbmFtZTogJ+agquW8j+S8muekvuOCteODs+ODl+ODqycsXHJcbiAgICAgICAgZGlzY2xvc3VyZV90eXBlOiAn5rG6566X55+t5L+hJyxcclxuICAgICAgICB0aXRsZTogJzIwMjTlubQz5pyI5pyfIOesrDPlm5vljYrmnJ/msbrnrpfnn63kv6EnLFxyXG4gICAgICAgIGRpc2Nsb3NlZF9hdDogJzIwMjQtMDEtMTUgMTA6MzA6MDAnLCAvLyDkuI3mraPjgarjg5Xjgqnjg7zjg57jg4Pjg4hcclxuICAgICAgICBwZGZfdXJsOiAnaHR0cHM6Ly93d3cucmVsZWFzZS50ZG5ldC5pbmZvL2luYnMvMTQwMTIwMjQwMTE1MDAxLnBkZicsXHJcbiAgICAgICAgczNfa2V5OiAnJyxcclxuICAgICAgICBjb2xsZWN0ZWRfYXQ6ICcnLFxyXG4gICAgICAgIGRhdGVfcGFydGl0aW9uOiAnJyxcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgczNfa2V5ID0gJzIwMjQvMDEvMTUvVEQyMDI0MDExNTAwMS5wZGYnO1xyXG5cclxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XHJcbiAgICAgIGF3YWl0IGV4cGVjdChzYXZlTWV0YWRhdGEoZGlzY2xvc3VyZSwgczNfa2V5KSkucmVqZWN0cy50b1Rocm93KFZhbGlkYXRpb25FcnJvcik7XHJcbiAgICAgIGV4cGVjdChkeW5hbW9Nb2NrLmNhbGxzKCkpLnRvSGF2ZUxlbmd0aCgwKTsgLy8gRHluYW1vRELjga/lkbzjgbDjgozjgarjgYRcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCflrZjlnKjjgZfjgarjgYTml6Xku5jjgadWYWxpZGF0aW9uRXJyb3LjgpLjgrnjg63jg7zjgZnjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgY29uc3QgZGlzY2xvc3VyZTogRGlzY2xvc3VyZSA9IHtcclxuICAgICAgICBkaXNjbG9zdXJlX2lkOiAnVEQyMDI0MDIzMDAwMScsXHJcbiAgICAgICAgY29tcGFueV9jb2RlOiAnMTIzNCcsXHJcbiAgICAgICAgY29tcGFueV9uYW1lOiAn5qCq5byP5Lya56S+44K144Oz44OX44OrJyxcclxuICAgICAgICBkaXNjbG9zdXJlX3R5cGU6ICfmsbrnrpfnn63kv6EnLFxyXG4gICAgICAgIHRpdGxlOiAnMjAyNOW5tDPmnIjmnJ8g56ysM+Wbm+WNiuacn+axuueul+efreS/oScsXHJcbiAgICAgICAgZGlzY2xvc2VkX2F0OiAnMjAyNC0wMi0zMFQxMDozMDowMFonLCAvLyDlrZjlnKjjgZfjgarjgYTml6Xku5hcclxuICAgICAgICBwZGZfdXJsOiAnaHR0cHM6Ly93d3cucmVsZWFzZS50ZG5ldC5pbmZvL2luYnMvMTQwMTIwMjQwMjMwMDAxLnBkZicsXHJcbiAgICAgICAgczNfa2V5OiAnJyxcclxuICAgICAgICBjb2xsZWN0ZWRfYXQ6ICcnLFxyXG4gICAgICAgIGRhdGVfcGFydGl0aW9uOiAnJyxcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgczNfa2V5ID0gJzIwMjQvMDIvMzAvVEQyMDI0MDIzMDAwMS5wZGYnO1xyXG5cclxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XHJcbiAgICAgIGF3YWl0IGV4cGVjdChzYXZlTWV0YWRhdGEoZGlzY2xvc3VyZSwgczNfa2V5KSkucmVqZWN0cy50b1Rocm93KFZhbGlkYXRpb25FcnJvcik7XHJcbiAgICAgIGV4cGVjdChkeW5hbW9Nb2NrLmNhbGxzKCkpLnRvSGF2ZUxlbmd0aCgwKTsgLy8gRHluYW1vRELjga/lkbzjgbDjgozjgarjgYRcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdEeW5hbW9EQuOCqOODqeODvOOBp+WkseaVl+OBmeOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBjb25zdCBkaXNjbG9zdXJlOiBEaXNjbG9zdXJlID0ge1xyXG4gICAgICAgIGRpc2Nsb3N1cmVfaWQ6ICdURDIwMjQwMTE1MDAxJyxcclxuICAgICAgICBjb21wYW55X2NvZGU6ICcxMjM0JyxcclxuICAgICAgICBjb21wYW55X25hbWU6ICfmoKrlvI/kvJrnpL7jgrXjg7Pjg5fjg6snLFxyXG4gICAgICAgIGRpc2Nsb3N1cmVfdHlwZTogJ+axuueul+efreS/oScsXHJcbiAgICAgICAgdGl0bGU6ICcyMDI05bm0M+aciOacnyDnrKwz5Zub5Y2K5pyf5rG6566X55+t5L+hJyxcclxuICAgICAgICBkaXNjbG9zZWRfYXQ6ICcyMDI0LTAxLTE1VDEwOjMwOjAwWicsXHJcbiAgICAgICAgcGRmX3VybDogJ2h0dHBzOi8vd3d3LnJlbGVhc2UudGRuZXQuaW5mby9pbmJzLzE0MDEyMDI0MDExNTAwMS5wZGYnLFxyXG4gICAgICAgIHMzX2tleTogJycsXHJcbiAgICAgICAgY29sbGVjdGVkX2F0OiAnJyxcclxuICAgICAgICBkYXRlX3BhcnRpdGlvbjogJycsXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IHMzX2tleSA9ICcyMDI0LzAxLzE1L1REMjAyNDAxMTUwMDEucGRmJztcclxuXHJcbiAgICAgIGR5bmFtb01vY2sub24oUHV0SXRlbUNvbW1hbmQpLnJlamVjdHMobmV3IEVycm9yKCdEeW5hbW9EQiBlcnJvcicpKTtcclxuXHJcbiAgICAgIC8vIEFjdCAmIEFzc2VydFxyXG4gICAgICBhd2FpdCBleHBlY3Qoc2F2ZU1ldGFkYXRhKGRpc2Nsb3N1cmUsIHMzX2tleSkpLnJlamVjdHMudG9UaHJvdygnRHluYW1vREIgZXJyb3InKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgn44Ko44OD44K444Kx44O844K5JywgKCkgPT4ge1xyXG4gICAgaXQoJ+OBhuOCi+OBhuW5tDLmnIjmnKvvvIhVVEPihpJKU1TvvInjga5kYXRlX3BhcnRpdGlvbuOCkuato+OBl+OBj+eUn+aIkOOBp+OBjeOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZTogVVRDIDIwMjQtMDItMjkgMTU6MDAg4oaSIEpTVCAyMDI0LTAzLTAxIDAwOjAwXHJcbiAgICAgIGNvbnN0IGRpc2Nsb3N1cmU6IERpc2Nsb3N1cmUgPSB7XHJcbiAgICAgICAgZGlzY2xvc3VyZV9pZDogJ1REMjAyNDAyMjkwMDEnLFxyXG4gICAgICAgIGNvbXBhbnlfY29kZTogJzEyMzQnLFxyXG4gICAgICAgIGNvbXBhbnlfbmFtZTogJ+agquW8j+S8muekvuOCteODs+ODl+ODqycsXHJcbiAgICAgICAgZGlzY2xvc3VyZV90eXBlOiAn5rG6566X55+t5L+hJyxcclxuICAgICAgICB0aXRsZTogJzIwMjTlubQz5pyI5pyfIOesrDPlm5vljYrmnJ/msbrnrpfnn63kv6EnLFxyXG4gICAgICAgIGRpc2Nsb3NlZF9hdDogJzIwMjQtMDItMjlUMTU6MDA6MDBaJyxcclxuICAgICAgICBwZGZfdXJsOiAnaHR0cHM6Ly93d3cucmVsZWFzZS50ZG5ldC5pbmZvL2luYnMvMTQwMTIwMjQwMjI5MDAxLnBkZicsXHJcbiAgICAgICAgczNfa2V5OiAnJyxcclxuICAgICAgICBjb2xsZWN0ZWRfYXQ6ICcnLFxyXG4gICAgICAgIGRhdGVfcGFydGl0aW9uOiAnJyxcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgczNfa2V5ID0gJzIwMjQvMDMvMDEvVEQyMDI0MDIyOTAwMS5wZGYnO1xyXG5cclxuICAgICAgZHluYW1vTW9jay5vbihQdXRJdGVtQ29tbWFuZCkucmVzb2x2ZXMoe30pO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGF3YWl0IHNhdmVNZXRhZGF0YShkaXNjbG9zdXJlLCBzM19rZXkpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGNvbnN0IGNhbGwgPSBkeW5hbW9Nb2NrLmNhbGwoMCk7XHJcbiAgICAgIGNvbnN0IGlucHV0ID0gY2FsbC5hcmdzWzBdLmlucHV0IGFzIGFueTtcclxuICAgICAgY29uc3QgaXRlbSA9IGlucHV0Lkl0ZW07XHJcbiAgICAgIGV4cGVjdChpdGVtPy5kYXRlX3BhcnRpdGlvbj8uUykudG9CZSgnMjAyNC0wMycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+eSsOWig+WkieaVsERZTkFNT0RCX1RBQkxF44GM5pyq6Kit5a6a44Gu5aC05ZCI44CB44OH44OV44Kp44Or44OI5YCk44KS5L2/55So44GZ44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5EWU5BTU9EQl9UQUJMRTtcclxuICAgICAgY29uc3QgZGlzY2xvc3VyZTogRGlzY2xvc3VyZSA9IHtcclxuICAgICAgICBkaXNjbG9zdXJlX2lkOiAnVEQyMDI0MDExNTAwMScsXHJcbiAgICAgICAgY29tcGFueV9jb2RlOiAnMTIzNCcsXHJcbiAgICAgICAgY29tcGFueV9uYW1lOiAn5qCq5byP5Lya56S+44K144Oz44OX44OrJyxcclxuICAgICAgICBkaXNjbG9zdXJlX3R5cGU6ICfmsbrnrpfnn63kv6EnLFxyXG4gICAgICAgIHRpdGxlOiAnMjAyNOW5tDPmnIjmnJ8g56ysM+Wbm+WNiuacn+axuueul+efreS/oScsXHJcbiAgICAgICAgZGlzY2xvc2VkX2F0OiAnMjAyNC0wMS0xNVQxMDozMDowMFonLFxyXG4gICAgICAgIHBkZl91cmw6ICdodHRwczovL3d3dy5yZWxlYXNlLnRkbmV0LmluZm8vaW5icy8xNDAxMjAyNDAxMTUwMDEucGRmJyxcclxuICAgICAgICBzM19rZXk6ICcnLFxyXG4gICAgICAgIGNvbGxlY3RlZF9hdDogJycsXHJcbiAgICAgICAgZGF0ZV9wYXJ0aXRpb246ICcnLFxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBzM19rZXkgPSAnMjAyNC8wMS8xNS9URDIwMjQwMTE1MDAxLnBkZic7XHJcblxyXG4gICAgICBkeW5hbW9Nb2NrLm9uKFB1dEl0ZW1Db21tYW5kKS5yZXNvbHZlcyh7fSk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgYXdhaXQgc2F2ZU1ldGFkYXRhKGRpc2Nsb3N1cmUsIHMzX2tleSk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgY29uc3QgaW5wdXQgPSBkeW5hbW9Nb2NrLmNhbGwoMCkuYXJnc1swXS5pbnB1dCBhcyBhbnk7XHJcbiAgICAgIGV4cGVjdChpbnB1dC5UYWJsZU5hbWUpLnRvQmUoJ3RkbmV0X2Rpc2Nsb3N1cmVzJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn44GZ44G544Gm44Gu44Oh44K/44OH44O844K/44OV44Kj44O844Or44OJ44GM5q2j44GX44GP5L+d5a2Y44GV44KM44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IGRpc2Nsb3N1cmU6IERpc2Nsb3N1cmUgPSB7XHJcbiAgICAgICAgZGlzY2xvc3VyZV9pZDogJ1REMjAyNDAxMTUwMDEnLFxyXG4gICAgICAgIGNvbXBhbnlfY29kZTogJzEyMzQnLFxyXG4gICAgICAgIGNvbXBhbnlfbmFtZTogJ+agquW8j+S8muekvuOCteODs+ODl+ODqycsXHJcbiAgICAgICAgZGlzY2xvc3VyZV90eXBlOiAn5rG6566X55+t5L+hJyxcclxuICAgICAgICB0aXRsZTogJzIwMjTlubQz5pyI5pyfIOesrDPlm5vljYrmnJ/msbrnrpfnn63kv6EnLFxyXG4gICAgICAgIGRpc2Nsb3NlZF9hdDogJzIwMjQtMDEtMTVUMTA6MzA6MDBaJyxcclxuICAgICAgICBwZGZfdXJsOiAnaHR0cHM6Ly93d3cucmVsZWFzZS50ZG5ldC5pbmZvL2luYnMvMTQwMTIwMjQwMTE1MDAxLnBkZicsXHJcbiAgICAgICAgczNfa2V5OiAnJyxcclxuICAgICAgICBjb2xsZWN0ZWRfYXQ6ICcnLFxyXG4gICAgICAgIGRhdGVfcGFydGl0aW9uOiAnJyxcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgczNfa2V5ID0gJzIwMjQvMDEvMTUvVEQyMDI0MDExNTAwMS5wZGYnO1xyXG5cclxuICAgICAgZHluYW1vTW9jay5vbihQdXRJdGVtQ29tbWFuZCkucmVzb2x2ZXMoe30pO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGF3YWl0IHNhdmVNZXRhZGF0YShkaXNjbG9zdXJlLCBzM19rZXkpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGNvbnN0IGNhbGwgPSBkeW5hbW9Nb2NrLmNhbGwoMCk7XHJcbiAgICAgIGNvbnN0IGlucHV0ID0gY2FsbC5hcmdzWzBdLmlucHV0IGFzIGFueTtcclxuICAgICAgY29uc3QgaXRlbSA9IGlucHV0Lkl0ZW07XHJcblxyXG4gICAgICBleHBlY3QoaXRlbT8uZGlzY2xvc3VyZV9pZD8uUykudG9CZSgnVEQyMDI0MDExNTAwMScpO1xyXG4gICAgICBleHBlY3QoaXRlbT8uY29tcGFueV9jb2RlPy5TKS50b0JlKCcxMjM0Jyk7XHJcbiAgICAgIGV4cGVjdChpdGVtPy5jb21wYW55X25hbWU/LlMpLnRvQmUoJ+agquW8j+S8muekvuOCteODs+ODl+ODqycpO1xyXG4gICAgICBleHBlY3QoaXRlbT8uZGlzY2xvc3VyZV90eXBlPy5TKS50b0JlKCfmsbrnrpfnn63kv6EnKTtcclxuICAgICAgZXhwZWN0KGl0ZW0/LnRpdGxlPy5TKS50b0JlKCcyMDI05bm0M+aciOacnyDnrKwz5Zub5Y2K5pyf5rG6566X55+t5L+hJyk7XHJcbiAgICAgIGV4cGVjdChpdGVtPy5kaXNjbG9zZWRfYXQ/LlMpLnRvQmUoJzIwMjQtMDEtMTVUMTA6MzA6MDBaJyk7XHJcbiAgICAgIGV4cGVjdChpdGVtPy5kYXRlX3BhcnRpdGlvbj8uUykudG9CZSgnMjAyNC0wMScpO1xyXG4gICAgICBleHBlY3QoaXRlbT8ucGRmX3VybD8uUykudG9CZSgnaHR0cHM6Ly93d3cucmVsZWFzZS50ZG5ldC5pbmZvL2luYnMvMTQwMTIwMjQwMTE1MDAxLnBkZicpO1xyXG4gICAgICBleHBlY3QoaXRlbT8uczNfa2V5Py5TKS50b0JlKHMzX2tleSk7XHJcbiAgICAgIGV4cGVjdChpdGVtPy5jb2xsZWN0ZWRfYXQ/LlMpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJ2ZXJzaW9uIjozfQ==