6d2ae3435699cae9b5df4faf19a2595a
"use strict";
/**
 * Export Status Lambda Function Tests
 *
 * GET /exports/{export_id} エンドポイントのテスト
 */
Object.defineProperty(exports, "__esModule", { value: true });
const client_dynamodb_1 = require("@aws-sdk/client-dynamodb");
const client_secrets_manager_1 = require("@aws-sdk/client-secrets-manager");
const aws_sdk_client_mock_1 = require("aws-sdk-client-mock");
const handler_1 = require("../export-status/handler");
// モック
const dynamoMock = (0, aws_sdk_client_mock_1.mockClient)(client_dynamodb_1.DynamoDBClient);
const secretsManagerMock = (0, aws_sdk_client_mock_1.mockClient)(client_secrets_manager_1.SecretsManagerClient);
// テスト用のContext
const mockContext = {
    awsRequestId: 'test-request-id',
    functionName: 'test-function',
    functionVersion: '1',
    invokedFunctionArn: 'arn:aws:lambda:ap-northeast-1:123456789012:function:test',
    memoryLimitInMB: '256',
    logGroupName: '/aws/lambda/test',
    logStreamName: '2024/01/15/[$LATEST]test',
    callbackWaitsForEmptyEventLoop: true,
    getRemainingTimeInMillis: () => 30000,
    done: () => { },
    fail: () => { },
    succeed: () => { },
};
describe('Export Status Lambda Handler', () => {
    beforeEach(() => {
        dynamoMock.reset();
        secretsManagerMock.reset();
        secretsManagerMock.on(client_secrets_manager_1.GetSecretValueCommand).resolves({
            SecretString: 'test-api-key',
        });
        process.env.EXPORT_STATUS_TABLE_NAME = 'tdnet_export_status';
        process.env.API_KEY = 'test-api-key';
        process.env.AWS_REGION = 'ap-northeast-1';
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe('正常系', () => {
        it('エクスポート状態（completed）を正しく返却する', async () => {
            // Arrange
            const event = {
                pathParameters: { export_id: 'export-20240115-xyz789' },
                headers: { 'x-api-key': 'test-api-key' },
            };
            dynamoMock.on(client_dynamodb_1.GetItemCommand).resolves({
                Item: {
                    export_id: { S: 'export-20240115-xyz789' },
                    status: { S: 'completed' },
                    progress: { N: '100' },
                    requested_at: { S: '2024-01-15T10:00:00Z' },
                    completed_at: { S: '2024-01-15T10:05:00Z' },
                    export_count: { N: '150' },
                    file_size: { N: '1024000' },
                    download_url: { S: 'https://s3.amazonaws.com/exports/file.csv' },
                    expires_at: { S: '2024-01-22T10:05:00Z' },
                },
            });
            // Act
            const result = await (0, handler_1.handler)(event, mockContext);
            // Assert
            expect(result.statusCode).toBe(200);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('success');
            expect(body.data).toEqual({
                export_id: 'export-20240115-xyz789',
                status: 'completed',
                progress: 100,
                requested_at: '2024-01-15T10:00:00Z',
                completed_at: '2024-01-15T10:05:00Z',
                export_count: 150,
                file_size: 1024000,
                download_url: 'https://s3.amazonaws.com/exports/file.csv',
                expires_at: '2024-01-22T10:05:00Z',
                error_message: null,
            });
        });
        it('エクスポート状態（processing）を正しく返却する', async () => {
            // Arrange
            const event = {
                pathParameters: { export_id: 'export-20240115-abc123' },
                headers: { 'x-api-key': 'test-api-key' },
            };
            dynamoMock.on(client_dynamodb_1.GetItemCommand).resolves({
                Item: {
                    export_id: { S: 'export-20240115-abc123' },
                    status: { S: 'processing' },
                    progress: { N: '50' },
                    requested_at: { S: '2024-01-15T10:00:00Z' },
                },
            });
            // Act
            const result = await (0, handler_1.handler)(event, mockContext);
            // Assert
            expect(result.statusCode).toBe(200);
            const body = JSON.parse(result.body);
            expect(body.data.status).toBe('processing');
            expect(body.data.progress).toBe(50);
            expect(body.data.download_url).toBeNull();
        });
        it('エクスポート状態（failed）を正しく返却する', async () => {
            // Arrange
            const event = {
                pathParameters: { export_id: 'export-20240115-failed' },
                headers: { 'x-api-key': 'test-api-key' },
            };
            dynamoMock.on(client_dynamodb_1.GetItemCommand).resolves({
                Item: {
                    export_id: { S: 'export-20240115-failed' },
                    status: { S: 'failed' },
                    progress: { N: '0' },
                    requested_at: { S: '2024-01-15T10:00:00Z' },
                    completed_at: { S: '2024-01-15T10:01:00Z' },
                    error_message: { S: 'DynamoDB query failed' },
                },
            });
            // Act
            const result = await (0, handler_1.handler)(event, mockContext);
            // Assert
            expect(result.statusCode).toBe(200);
            const body = JSON.parse(result.body);
            expect(body.data.status).toBe('failed');
            expect(body.data.error_message).toBe('DynamoDB query failed');
        });
    });
    describe('異常系 - バリデーションエラー', () => {
        it('export_idが未指定の場合、400エラーを返す', async () => {
            // Arrange
            const event = {
                pathParameters: {},
                headers: { 'x-api-key': 'test-api-key' },
            };
            // Act
            const result = await (0, handler_1.handler)(event, mockContext);
            // Assert
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.status).toBe('error');
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('export_id is required');
        });
        it('export_idのフォーマットが不正な場合、400エラーを返す', async () => {
            // Arrange
            const event = {
                pathParameters: { export_id: 'invalid-format' },
                headers: { 'x-api-key': 'test-api-key' },
            };
            // Act
            const result = await (0, handler_1.handler)(event, mockContext);
            // Assert
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('VALIDATION_ERROR');
            expect(body.error.message).toContain('Invalid export_id format');
        });
    });
    describe('異常系 - 認証エラー', () => {
        it('APIキーが未指定の場合、401エラーを返す', async () => {
            // Arrange
            const event = {
                pathParameters: { export_id: 'export-20240115-xyz789' },
                headers: {},
            };
            // Act
            const result = await (0, handler_1.handler)(event, mockContext);
            // Assert
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('UNAUTHORIZED');
            expect(body.error.message).toContain('API key is required');
        });
        it('APIキーが不正な場合、401エラーを返す', async () => {
            // Arrange
            const event = {
                pathParameters: { export_id: 'export-20240115-xyz789' },
                headers: { 'x-api-key': 'invalid-key' },
            };
            // Act
            const result = await (0, handler_1.handler)(event, mockContext);
            // Assert
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('UNAUTHORIZED');
            expect(body.error.message).toContain('Invalid API key');
        });
    });
    describe('異常系 - リソース不存在', () => {
        it('エクスポートが存在しない場合、404エラーを返す', async () => {
            // Arrange
            const event = {
                pathParameters: { export_id: 'export-20240115-notfound' },
                headers: { 'x-api-key': 'test-api-key' },
            };
            dynamoMock.on(client_dynamodb_1.GetItemCommand).resolves({
                Item: undefined,
            });
            // Act
            const result = await (0, handler_1.handler)(event, mockContext);
            // Assert
            expect(result.statusCode).toBe(404);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('NOT_FOUND');
            expect(body.error.message).toContain('Export not found');
        });
    });
    describe('異常系 - DynamoDBエラー', () => {
        it('DynamoDBエラー時、再試行後に500エラーを返す', async () => {
            // Arrange
            const event = {
                pathParameters: { export_id: 'export-20240115-xyz789' },
                headers: { 'x-api-key': 'test-api-key' },
            };
            dynamoMock.on(client_dynamodb_1.GetItemCommand).rejects(new Error('DynamoDB error'));
            // Act
            const result = await (0, handler_1.handler)(event, mockContext);
            // Assert
            expect(result.statusCode).toBe(500);
            const body = JSON.parse(result.body);
            expect(body.error.code).toBe('INTERNAL_ERROR');
        });
        it('ProvisionedThroughputExceededException時、再試行する', async () => {
            // Arrange
            const event = {
                pathParameters: { export_id: 'export-20240115-xyz789' },
                headers: { 'x-api-key': 'test-api-key' },
            };
            const throttleError = new Error('ProvisionedThroughputExceededException');
            throttleError.name = 'ProvisionedThroughputExceededException';
            dynamoMock
                .on(client_dynamodb_1.GetItemCommand)
                .rejectsOnce(throttleError)
                .rejectsOnce(throttleError)
                .resolves({
                Item: {
                    export_id: { S: 'export-20240115-xyz789' },
                    status: { S: 'completed' },
                    progress: { N: '100' },
                    requested_at: { S: '2024-01-15T10:00:00Z' },
                    completed_at: { S: '2024-01-15T10:05:00Z' },
                },
            });
            // Act
            const result = await (0, handler_1.handler)(event, mockContext);
            // Assert
            expect(result.statusCode).toBe(200);
            expect(dynamoMock.calls()).toHaveLength(3); // 2回失敗、3回目成功
        });
    });
    describe('CORS対応', () => {
        it('レスポンスにCORSヘッダーが含まれる', async () => {
            // Arrange
            const event = {
                pathParameters: { export_id: 'export-20240115-xyz789' },
                headers: { 'x-api-key': 'test-api-key' },
            };
            dynamoMock.on(client_dynamodb_1.GetItemCommand).resolves({
                Item: {
                    export_id: { S: 'export-20240115-xyz789' },
                    status: { S: 'completed' },
                    progress: { N: '100' },
                    requested_at: { S: '2024-01-15T10:00:00Z' },
                    completed_at: { S: '2024-01-15T10:05:00Z' },
                },
            });
            // Act
            const result = await (0, handler_1.handler)(event, mockContext);
            // Assert
            expect(result.headers).toHaveProperty('Access-Control-Allow-Origin', '*');
            expect(result.headers).toHaveProperty('Access-Control-Allow-Headers');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxsYW1iZGFcXGFwaVxcX190ZXN0c19fXFxleHBvcnQtc3RhdHVzLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7O0FBR0gsOERBQTBFO0FBQzFFLDRFQUE4RjtBQUM5Riw2REFBaUQ7QUFDakQsc0RBQW1EO0FBRW5ELE1BQU07QUFDTixNQUFNLFVBQVUsR0FBRyxJQUFBLGdDQUFVLEVBQUMsZ0NBQWMsQ0FBQyxDQUFDO0FBQzlDLE1BQU0sa0JBQWtCLEdBQUcsSUFBQSxnQ0FBVSxFQUFDLDZDQUFvQixDQUFDLENBQUM7QUFFNUQsZUFBZTtBQUNmLE1BQU0sV0FBVyxHQUFZO0lBQzNCLFlBQVksRUFBRSxpQkFBaUI7SUFDL0IsWUFBWSxFQUFFLGVBQWU7SUFDN0IsZUFBZSxFQUFFLEdBQUc7SUFDcEIsa0JBQWtCLEVBQUUsMERBQTBEO0lBQzlFLGVBQWUsRUFBRSxLQUFLO0lBQ3RCLFlBQVksRUFBRSxrQkFBa0I7SUFDaEMsYUFBYSxFQUFFLDBCQUEwQjtJQUN6Qyw4QkFBOEIsRUFBRSxJQUFJO0lBQ3BDLHdCQUF3QixFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUs7SUFDckMsSUFBSSxFQUFFLEdBQUcsRUFBRSxHQUFFLENBQUM7SUFDZCxJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztJQUNkLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO0NBQ1AsQ0FBQztBQUViLFFBQVEsQ0FBQyw4QkFBOEIsRUFBRSxHQUFHLEVBQUU7SUFDNUMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNuQixrQkFBa0IsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUMzQixrQkFBa0IsQ0FBQyxFQUFFLENBQUMsOENBQXFCLENBQUMsQ0FBQyxRQUFRLENBQUM7WUFDcEQsWUFBWSxFQUFFLGNBQWM7U0FDN0IsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxDQUFD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RSx3QkFBd0IsRUFBRTtnQkFDdkQsT0FBTyxFQUFFLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRTthQUN6QyxDQUFDO1lBRUYsVUFBVSxDQUFDLEVBQUUsQ0FBQyxnQ0FBYyxDQUFDLENBQUMsUUFBUSxDQUFDO2dCQUNyQyxJQUFJLEVBQUU7b0JBQ0osU0FBUyxFQUFFLEVBQUUsQ0FBQyxFQUFFLHdCQUF3QixFQUFFO29CQUMxQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUUsV0FBVyxFQUFFO29CQUMxQixRQUFRLEVBQUUsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFO29CQUN0QixZQUFZLEVBQUUsRUFBRSxDQUFDLEVBQUUsc0JBQXNCLEVBQUU7b0JBQzNDLFlBQVksRUFBRSxFQUFFLENBQUMsRUFBRSxzQkFBc0IsRUFBRTtpQkFDNUM7YUFDRixDQUFDLENBQUM7WUFFSCxNQUFNO1lBQ04sTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFBLGlCQUFPLEVBQUMsS0FBNkIsRUFBRSxXQUFXLENBQUMsQ0FBQztZQUV6RSxTQUFTO1lBQ1QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxjQUFjLENBQUMsNkJBQTZCLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDMUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxjQUFjLENBQUMsOEJBQThCLENBQUMsQ0FBQztRQUN4RSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxsYW1iZGFcXGFwaVxcX190ZXN0c19fXFxleHBvcnQtc3RhdHVzLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEV4cG9ydCBTdGF0dXMgTGFtYmRhIEZ1bmN0aW9uIFRlc3RzXHJcbiAqXHJcbiAqIEdFVCAvZXhwb3J0cy97ZXhwb3J0X2lkfSDjgqjjg7Pjg4njg53jgqTjg7Pjg4jjga7jg4bjgrnjg4hcclxuICovXHJcblxyXG5pbXBvcnQgeyBBUElHYXRld2F5UHJveHlFdmVudCwgQ29udGV4dCB9IGZyb20gJ2F3cy1sYW1iZGEnO1xyXG5pbXBvcnQgeyBEeW5hbW9EQkNsaWVudCwgR2V0SXRlbUNvbW1hbmQgfSBmcm9tICdAYXdzLXNkay9jbGllbnQtZHluYW1vZGInO1xyXG5pbXBvcnQgeyBTZWNyZXRzTWFuYWdlckNsaWVudCwgR2V0U2VjcmV0VmFsdWVDb21tYW5kIH0gZnJvbSAnQGF3cy1zZGsvY2xpZW50LXNlY3JldHMtbWFuYWdlcic7XHJcbmltcG9ydCB7IG1vY2tDbGllbnQgfSBmcm9tICdhd3Mtc2RrLWNsaWVudC1tb2NrJztcclxuaW1wb3J0IHsgaGFuZGxlciB9IGZyb20gJy4uL2V4cG9ydC1zdGF0dXMvaGFuZGxlcic7XHJcblxyXG4vLyDjg6Ljg4Pjgq9cclxuY29uc3QgZHluYW1vTW9jayA9IG1vY2tDbGllbnQoRHluYW1vREJDbGllbnQpO1xyXG5jb25zdCBzZWNyZXRzTWFuYWdlck1vY2sgPSBtb2NrQ2xpZW50KFNlY3JldHNNYW5hZ2VyQ2xpZW50KTtcclxuXHJcbi8vIOODhuOCueODiOeUqOOBrkNvbnRleHRcclxuY29uc3QgbW9ja0NvbnRleHQ6IENvbnRleHQgPSB7XHJcbiAgYXdzUmVxdWVzdElkOiAndGVzdC1yZXF1ZXN0LWlkJyxcclxuICBmdW5jdGlvbk5hbWU6ICd0ZXN0LWZ1bmN0aW9uJyxcclxuICBmdW5jdGlvblZlcnNpb246ICcxJyxcclxuICBpbnZva2VkRnVuY3Rpb25Bcm46ICdhcm46YXdzOmxhbWJkYTphcC1ub3J0aGVhc3QtMToxMjM0NTY3ODkwMTI6ZnVuY3Rpb246dGVzdCcsXHJcbiAgbWVtb3J5TGltaXRJbk1COiAnMjU2JyxcclxuICBsb2dHcm91cE5hbWU6ICcvYXdzL2xhbWJkYS90ZXN0JyxcclxuICBsb2dTdHJlYW1OYW1lOiAnMjAyNC8wMS8xNS9bJExBVEVTVF10ZXN0JyxcclxuICBjYWxsYmFja1dhaXRzRm9yRW1wdHlFdmVudExvb3A6IHRydWUsXHJcbiAgZ2V0UmVtYWluaW5nVGltZUluTWlsbGlzOiAoKSA9PiAzMDAwMCxcclxuICBkb25lOiAoKSA9PiB7fSxcclxuICBmYWlsOiAoKSA9PiB7fSxcclxuICBzdWNjZWVkOiAoKSA9PiB7fSxcclxufSBhcyBDb250ZXh0O1xyXG5cclxuZGVzY3JpYmUoJ0V4cG9ydCBTdGF0dXMgTGFtYmRhIEhhbmRsZXInLCAoKSA9PiB7XHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBkeW5hbW9Nb2NrLnJlc2V0KCk7XHJcbiAgICBzZWNyZXRzTWFuYWdlck1vY2sucmVzZXQoKTtcclxuICAgIHNlY3JldHNNYW5hZ2VyTW9jay5vbihHZXRTZWNyZXRWYWx1ZUNvbW1hbmQpLnJlc29sdmVzKHtcclxuICAgICAgU2VjcmV0U3RyaW5nOiAndGVzdC1hcGkta2V5JyxcclxuICAgIH0pO1xyXG4gICAgcHJvY2Vzcy5lbnYuRVhQT1JUX1NUQVRVU19UQUJMRV9OQU1FID0gJ3RkbmV0X2V4cG9ydF9zdGF0dXMnO1xyXG4gICAgcHJvY2Vzcy5lbnYuQVBJX0tFWSA9ICd0ZXN0LWFwaS1rZXknO1xyXG4gICAgcHJvY2Vzcy5lbnYuQVdTX1JFR0lPTiA9ICdhcC1ub3J0aGVhc3QtMSc7XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+ato+W4uOezuycsICgpID0+IHtcclxuICAgIGl0KCfjgqjjgq/jgrnjg53jg7zjg4jnirbmhYvvvIhjb21wbGV0ZWTvvInjgpLmraPjgZfjgY/ov5TljbTjgZnjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgY29uc3QgZXZlbnQ6IFBhcnRpYWw8QVBJR2F0ZXdheVByb3h5RXZlbnQ+ID0ge1xyXG4gICAgICAgIHBhdGhQYXJhbWV0ZXJzOiB7IGV4cG9ydF9pZDogJ2V4cG9ydC0yMDI0MDExNS14eXo3ODknIH0sXHJcbiAgICAgICAgaGVhZGVyczogeyAneC1hcGkta2V5JzogJ3Rlc3QtYXBpLWtleScgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGR5bmFtb01vY2sub24oR2V0SXRlbUNvbW1hbmQpLnJlc29sdmVzKHtcclxuICAgICAgICBJdGVtOiB7XHJcbiAgICAgICAgICBleHBvcnRfaWQ6IHsgUzogJ2V4cG9ydC0yMDI0MDExNS14eXo3ODknIH0sXHJcbiAgICAgICAgICBzdGF0dXM6IHsgUzogJ2NvbXBsZXRlZCcgfSxcclxuICAgICAgICAgIHByb2dyZXNzOiB7IE46ICcxMDAnIH0sXHJcbiAgICAgICAgICByZXF1ZXN0ZWRfYXQ6IHsgUzogJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyB9LFxyXG4gICAgICAgICAgY29tcGxldGVkX2F0OiB7IFM6ICcyMDI0LTAxLTE1VDEwOjA1OjAwWicgfSxcclxuICAgICAgICAgIGV4cG9ydF9jb3VudDogeyBOOiAnMTUwJyB9LFxyXG4gICAgICAgICAgZmlsZV9zaXplOiB7IE46ICcxMDI0MDAwJyB9LFxyXG4gICAgICAgICAgZG93bmxvYWRfdXJsOiB7IFM6ICdodHRwczovL3MzLmFtYXpvbmF3cy5jb20vZXhwb3J0cy9maWxlLmNzdicgfSxcclxuICAgICAgICAgIGV4cGlyZXNfYXQ6IHsgUzogJzIwMjQtMDEtMjJUMTA6MDU6MDBaJyB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQgYXMgQVBJR2F0ZXdheVByb3h5RXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoMjAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5zdGF0dXMpLnRvQmUoJ3N1Y2Nlc3MnKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZGF0YSkudG9FcXVhbCh7XHJcbiAgICAgICAgZXhwb3J0X2lkOiAnZXhwb3J0LTIwMjQwMTE1LXh5ejc4OScsXHJcbiAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcclxuICAgICAgICBwcm9ncmVzczogMTAwLFxyXG4gICAgICAgIHJlcXVlc3RlZF9hdDogJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyxcclxuICAgICAgICBjb21wbGV0ZWRfYXQ6ICcyMDI0LTAxLTE1VDEwOjA1OjAwWicsXHJcbiAgICAgICAgZXhwb3J0X2NvdW50OiAxNTAsXHJcbiAgICAgICAgZmlsZV9zaXplOiAxMDI0MDAwLFxyXG4gICAgICAgIGRvd25sb2FkX3VybDogJ2h0dHBzOi8vczMuYW1hem9uYXdzLmNvbS9leHBvcnRzL2ZpbGUuY3N2JyxcclxuICAgICAgICBleHBpcmVzX2F0OiAnMjAyNC0wMS0yMlQxMDowNTowMFonLFxyXG4gICAgICAgIGVycm9yX21lc3NhZ2U6IG51bGwsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+OCqOOCr+OCueODneODvOODiOeKtuaFi++8iHByb2Nlc3NpbmfvvInjgpLmraPjgZfjgY/ov5TljbTjgZnjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgY29uc3QgZXZlbnQ6IFBhcnRpYWw8QVBJR2F0ZXdheVByb3h5RXZlbnQ+ID0ge1xyXG4gICAgICAgIHBhdGhQYXJhbWV0ZXJzOiB7IGV4cG9ydF9pZDogJ2V4cG9ydC0yMDI0MDExNS1hYmMxMjMnIH0sXHJcbiAgICAgICAgaGVhZGVyczogeyAneC1hcGkta2V5JzogJ3Rlc3QtYXBpLWtleScgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGR5bmFtb01vY2sub24oR2V0SXRlbUNvbW1hbmQpLnJlc29sdmVzKHtcclxuICAgICAgICBJdGVtOiB7XHJcbiAgICAgICAgICBleHBvcnRfaWQ6IHsgUzogJ2V4cG9ydC0yMDI0MDExNS1hYmMxMjMnIH0sXHJcbiAgICAgICAgICBzdGF0dXM6IHsgUzogJ3Byb2Nlc3NpbmcnIH0sXHJcbiAgICAgICAgICBwcm9ncmVzczogeyBOOiAnNTAnIH0sXHJcbiAgICAgICAgICByZXF1ZXN0ZWRfYXQ6IHsgUzogJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQgYXMgQVBJR2F0ZXdheVByb3h5RXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoMjAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5kYXRhLnN0YXR1cykudG9CZSgncHJvY2Vzc2luZycpO1xyXG4gICAgICBleHBlY3QoYm9keS5kYXRhLnByb2dyZXNzKS50b0JlKDUwKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZGF0YS5kb3dubG9hZF91cmwpLnRvQmVOdWxsKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn44Ko44Kv44K544Od44O844OI54q25oWL77yIZmFpbGVk77yJ44KS5q2j44GX44GP6L+U5Y2044GZ44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IGV2ZW50OiBQYXJ0aWFsPEFQSUdhdGV3YXlQcm94eUV2ZW50PiA9IHtcclxuICAgICAgICBwYXRoUGFyYW1ldGVyczogeyBleHBvcnRfaWQ6ICdleHBvcnQtMjAyNDAxMTUtZmFpbGVkJyB9LFxyXG4gICAgICAgIGhlYWRlcnM6IHsgJ3gtYXBpLWtleSc6ICd0ZXN0LWFwaS1rZXknIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBkeW5hbW9Nb2NrLm9uKEdldEl0ZW1Db21tYW5kKS5yZXNvbHZlcyh7XHJcbiAgICAgICAgSXRlbToge1xyXG4gICAgICAgICAgZXhwb3J0X2lkOiB7IFM6ICdleHBvcnQtMjAyNDAxMTUtZmFpbGVkJyB9LFxyXG4gICAgICAgICAgc3RhdHVzOiB7IFM6ICdmYWlsZWQnIH0sXHJcbiAgICAgICAgICBwcm9ncmVzczogeyBOOiAnMCcgfSxcclxuICAgICAgICAgIHJlcXVlc3RlZF9hdDogeyBTOiAnMjAyNC0wMS0xNVQxMDowMDowMFonIH0sXHJcbiAgICAgICAgICBjb21wbGV0ZWRfYXQ6IHsgUzogJzIwMjQtMDEtMTVUMTA6MDE6MDBaJyB9LFxyXG4gICAgICAgICAgZXJyb3JfbWVzc2FnZTogeyBTOiAnRHluYW1vREIgcXVlcnkgZmFpbGVkJyB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQgYXMgQVBJR2F0ZXdheVByb3h5RXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoMjAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5kYXRhLnN0YXR1cykudG9CZSgnZmFpbGVkJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmRhdGEuZXJyb3JfbWVzc2FnZSkudG9CZSgnRHluYW1vREIgcXVlcnkgZmFpbGVkJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+eVsOW4uOezuyAtIOODkOODquODh+ODvOOCt+ODp+ODs+OCqOODqeODvCcsICgpID0+IHtcclxuICAgIGl0KCdleHBvcnRfaWTjgYzmnKrmjIflrprjga7loLTlkIjjgIE0MDDjgqjjg6njg7zjgpLov5TjgZknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgY29uc3QgZXZlbnQ6IFBhcnRpYWw8QVBJR2F0ZXdheVByb3h5RXZlbnQ+ID0ge1xyXG4gICAgICAgIHBhdGhQYXJhbWV0ZXJzOiB7fSxcclxuICAgICAgICBoZWFkZXJzOiB7ICd4LWFwaS1rZXknOiAndGVzdC1hcGkta2V5JyB9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQgYXMgQVBJR2F0ZXdheVByb3h5RXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5zdGF0dXMpLnRvQmUoJ2Vycm9yJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdleHBvcnRfaWQgaXMgcmVxdWlyZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdleHBvcnRfaWTjga7jg5Xjgqnjg7zjg57jg4Pjg4jjgYzkuI3mraPjgarloLTlkIjjgIE0MDDjgqjjg6njg7zjgpLov5TjgZknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgY29uc3QgZXZlbnQ6IFBhcnRpYWw8QVBJR2F0ZXdheVByb3h5RXZlbnQ+ID0ge1xyXG4gICAgICAgIHBhdGhQYXJhbWV0ZXJzOiB7IGV4cG9ydF9pZDogJ2ludmFsaWQtZm9ybWF0JyB9LFxyXG4gICAgICAgIGhlYWRlcnM6IHsgJ3gtYXBpLWtleSc6ICd0ZXN0LWFwaS1rZXknIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCBhcyBBUElHYXRld2F5UHJveHlFdmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdJbnZhbGlkIGV4cG9ydF9pZCBmb3JtYXQnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgn55Ww5bi457O7IC0g6KqN6Ki844Ko44Op44O8JywgKCkgPT4ge1xyXG4gICAgaXQoJ0FQSeOCreODvOOBjOacquaMh+WumuOBruWgtOWQiOOAgTQwMeOCqOODqeODvOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBjb25zdCBldmVudDogUGFydGlhbDxBUElHYXRld2F5UHJveHlFdmVudD4gPSB7XHJcbiAgICAgICAgcGF0aFBhcmFtZXRlcnM6IHsgZXhwb3J0X2lkOiAnZXhwb3J0LTIwMjQwMTE1LXh5ejc4OScgfSxcclxuICAgICAgICBoZWFkZXJzOiB7fSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50IGFzIEFQSUdhdGV3YXlQcm94eUV2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDQwMSk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IuY29kZSkudG9CZSgnVU5BVVRIT1JJWkVEJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignQVBJIGtleSBpcyByZXF1aXJlZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ0FQSeOCreODvOOBjOS4jeato+OBquWgtOWQiOOAgTQwMeOCqOODqeODvOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBjb25zdCBldmVudDogUGFydGlhbDxBUElHYXRld2F5UHJveHlFdmVudD4gPSB7XHJcbiAgICAgICAgcGF0aFBhcmFtZXRlcnM6IHsgZXhwb3J0X2lkOiAnZXhwb3J0LTIwMjQwMTE1LXh5ejc4OScgfSxcclxuICAgICAgICBoZWFkZXJzOiB7ICd4LWFwaS1rZXknOiAnaW52YWxpZC1rZXknIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCBhcyBBUElHYXRld2F5UHJveHlFdmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDEpO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLmNvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ0ludmFsaWQgQVBJIGtleScpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfnlbDluLjns7sgLSDjg6rjgr3jg7zjgrnkuI3lrZjlnKgnLCAoKSA9PiB7XHJcbiAgICBpdCgn44Ko44Kv44K544Od44O844OI44GM5a2Y5Zyo44GX44Gq44GE5aC05ZCI44CBNDA044Ko44Op44O844KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IGV2ZW50OiBQYXJ0aWFsPEFQSUdhdGV3YXlQcm94eUV2ZW50PiA9IHtcclxuICAgICAgICBwYXRoUGFyYW1ldGVyczogeyBleHBvcnRfaWQ6ICdleHBvcnQtMjAyNDAxMTUtbm90Zm91bmQnIH0sXHJcbiAgICAgICAgaGVhZGVyczogeyAneC1hcGkta2V5JzogJ3Rlc3QtYXBpLWtleScgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGR5bmFtb01vY2sub24oR2V0SXRlbUNvbW1hbmQpLnJlc29sdmVzKHtcclxuICAgICAgICBJdGVtOiB1bmRlZmluZWQsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQgYXMgQVBJR2F0ZXdheVByb3h5RXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDA0KTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvci5jb2RlKS50b0JlKCdOT1RfRk9VTkQnKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdFeHBvcnQgbm90IGZvdW5kJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+eVsOW4uOezuyAtIER5bmFtb0RC44Ko44Op44O8JywgKCkgPT4ge1xyXG4gICAgaXQoJ0R5bmFtb0RC44Ko44Op44O85pmC44CB5YaN6Kmm6KGM5b6M44GrNTAw44Ko44Op44O844KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIGNvbnN0IGV2ZW50OiBQYXJ0aWFsPEFQSUdhdGV3YXlQcm94eUV2ZW50PiA9IHtcclxuICAgICAgICBwYXRoUGFyYW1ldGVyczogeyBleHBvcnRfaWQ6ICdleHBvcnQtMjAyNDAxMTUteHl6Nzg5JyB9LFxyXG4gICAgICAgIGhlYWRlcnM6IHsgJ3gtYXBpLWtleSc6ICd0ZXN0LWFwaS1rZXknIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBkeW5hbW9Nb2NrLm9uKEdldEl0ZW1Db21tYW5kKS5yZWplY3RzKG5ldyBFcnJvcignRHluYW1vREIgZXJyb3InKSk7XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCBhcyBBUElHYXRld2F5UHJveHlFdmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg1MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yLmNvZGUpLnRvQmUoJ0lOVEVSTkFMX0VSUk9SJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnUHJvdmlzaW9uZWRUaHJvdWdocHV0RXhjZWVkZWRFeGNlcHRpb27mmYLjgIHlho3oqabooYzjgZnjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgY29uc3QgZXZlbnQ6IFBhcnRpYWw8QVBJR2F0ZXdheVByb3h5RXZlbnQ+ID0ge1xyXG4gICAgICAgIHBhdGhQYXJhbWV0ZXJzOiB7IGV4cG9ydF9pZDogJ2V4cG9ydC0yMDI0MDExNS14eXo3ODknIH0sXHJcbiAgICAgICAgaGVhZGVyczogeyAneC1hcGkta2V5JzogJ3Rlc3QtYXBpLWtleScgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHRocm90dGxlRXJyb3IgPSBuZXcgRXJyb3IoJ1Byb3Zpc2lvbmVkVGhyb3VnaHB1dEV4Y2VlZGVkRXhjZXB0aW9uJyk7XHJcbiAgICAgIHRocm90dGxlRXJyb3IubmFtZSA9ICdQcm92aXNpb25lZFRocm91Z2hwdXRFeGNlZWRlZEV4Y2VwdGlvbic7XHJcblxyXG4gICAgICBkeW5hbW9Nb2NrXHJcbiAgICAgICAgLm9uKEdldEl0ZW1Db21tYW5kKVxyXG4gICAgICAgIC5yZWplY3RzT25jZSh0aHJvdHRsZUVycm9yKVxyXG4gICAgICAgIC5yZWplY3RzT25jZSh0aHJvdHRsZUVycm9yKVxyXG4gICAgICAgIC5yZXNvbHZlcyh7XHJcbiAgICAgICAgICBJdGVtOiB7XHJcbiAgICAgICAgICAgIGV4cG9ydF9pZDogeyBTOiAnZXhwb3J0LTIwMjQwMTE1LXh5ejc4OScgfSxcclxuICAgICAgICAgICAgc3RhdHVzOiB7IFM6ICdjb21wbGV0ZWQnIH0sXHJcbiAgICAgICAgICAgIHByb2dyZXNzOiB7IE46ICcxMDAnIH0sXHJcbiAgICAgICAgICAgIHJlcXVlc3RlZF9hdDogeyBTOiAnMjAyNC0wMS0xNVQxMDowMDowMFonIH0sXHJcbiAgICAgICAgICAgIGNvbXBsZXRlZF9hdDogeyBTOiAnMjAyNC0wMS0xNVQxMDowNTowMFonIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQgYXMgQVBJR2F0ZXdheVByb3h5RXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KGR5bmFtb01vY2suY2FsbHMoKSkudG9IYXZlTGVuZ3RoKDMpOyAvLyAy5Zue5aSx5pWX44CBM+WbnuebruaIkOWKn1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdDT1JT5a++5b+cJywgKCkgPT4ge1xyXG4gICAgaXQoJ+ODrOOCueODneODs+OCueOBq0NPUlPjg5jjg4Pjg4Djg7zjgYzlkKvjgb7jgozjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgY29uc3QgZXZlbnQ6IFBhcnRpYWw8QVBJR2F0ZXdheVByb3h5RXZlbnQ+ID0ge1xyXG4gICAgICAgIHBhdGhQYXJhbWV0ZXJzOiB7IGV4cG9ydF9pZDogJ2V4cG9ydC0yMDI0MDExNS14eXo3ODknIH0sXHJcbiAgICAgICAgaGVhZGVyczogeyAneC1hcGkta2V5JzogJ3Rlc3QtYXBpLWtleScgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGR5bmFtb01vY2sub24oR2V0SXRlbUNvbW1hbmQpLnJlc29sdmVzKHtcclxuICAgICAgICBJdGVtOiB7XHJcbiAgICAgICAgICBleHBvcnRfaWQ6IHsgUzogJ2V4cG9ydC0yMDI0MDExNS14eXo3ODknIH0sXHJcbiAgICAgICAgICBzdGF0dXM6IHsgUzogJ2NvbXBsZXRlZCcgfSxcclxuICAgICAgICAgIHByb2dyZXNzOiB7IE46ICcxMDAnIH0sXHJcbiAgICAgICAgICByZXF1ZXN0ZWRfYXQ6IHsgUzogJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyB9LFxyXG4gICAgICAgICAgY29tcGxldGVkX2F0OiB7IFM6ICcyMDI0LTAxLTE1VDEwOjA1OjAwWicgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50IGFzIEFQSUdhdGV3YXlQcm94eUV2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdC5oZWFkZXJzKS50b0hhdmVQcm9wZXJ0eSgnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJyonKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5oZWFkZXJzKS50b0hhdmVQcm9wZXJ0eSgnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=