{"file":"C:\\Users\\ti198\\investment_analysis_opopo\\src\\utils\\__tests__\\logger.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\ti198\\investment_analysis_opopo\\src\\utils\\__tests__\\logger.test.ts"],"sourcesContent":["/**\r\n * ロガーのユニットテスト\r\n *\r\n * 構造化ロガーの動作を検証します。\r\n * ログレベルの適切性、ログフォーマット、コンテキストの記録を確認します。\r\n *\r\n * Requirements: 要件6.3, 6.5（構造化ログ、ログレベル）\r\n */\r\n\r\nimport { logger, LogLevel, setLogLevel, createErrorContext } from '../logger';\r\nimport { ValidationError, RetryableError } from '../../errors';\r\n\r\n// Winstonのモック\r\njest.mock('winston', () => {\r\n  const mFormat = {\r\n    combine: jest.fn(),\r\n    timestamp: jest.fn(),\r\n    errors: jest.fn(),\r\n    json: jest.fn(),\r\n    colorize: jest.fn(),\r\n    printf: jest.fn(),\r\n  };\r\n\r\n  const mTransports = {\r\n    Console: jest.fn(),\r\n  };\r\n\r\n  const mLogger = {\r\n    debug: jest.fn(),\r\n    info: jest.fn(),\r\n    warn: jest.fn(),\r\n    error: jest.fn(),\r\n    level: 'info',\r\n  };\r\n\r\n  return {\r\n    format: mFormat,\r\n    transports: mTransports,\r\n    createLogger: jest.fn(() => mLogger),\r\n  };\r\n});\r\n\r\ndescribe('Logger', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  /**\r\n   * Property 13: ログレベルの適切性\r\n   *\r\n   * エラーはERRORレベルで記録されることを確認します。\r\n   */\r\n  describe('Error Logging', () => {\r\n    it('should log errors at ERROR level', () => {\r\n      const errorMessage = 'Operation failed';\r\n      const context = {\r\n        error_type: 'NetworkError',\r\n        error_message: 'Connection timeout',\r\n      };\r\n\r\n      logger.error(errorMessage, context);\r\n\r\n      // Winstonのerrorメソッドが呼ばれることを確認\r\n      const winston = require('winston');\r\n      const mockLogger = winston.createLogger();\r\n      expect(mockLogger.error).toHaveBeenCalledWith(errorMessage, context);\r\n    });\r\n\r\n    it('should log errors with stack trace', () => {\r\n      const error = new Error('Test error');\r\n      const errorMessage = 'Failed to process disclosure';\r\n\r\n      logger.error(errorMessage, {\r\n        error_type: error.constructor.name,\r\n        error_message: error.message,\r\n        stack_trace: error.stack,\r\n      });\r\n\r\n      const winston = require('winston');\r\n      const mockLogger = winston.createLogger();\r\n      expect(mockLogger.error).toHaveBeenCalled();\r\n\r\n      const callArgs = mockLogger.error.mock.calls[0];\r\n      expect(callArgs[0]).toBe(errorMessage);\r\n      expect(callArgs[1]).toHaveProperty('error_type', 'Error');\r\n      expect(callArgs[1]).toHaveProperty('error_message', 'Test error');\r\n      expect(callArgs[1]).toHaveProperty('stack_trace');\r\n    });\r\n\r\n    it('should log custom error types', () => {\r\n      const error = new ValidationError('Invalid date format');\r\n      const errorMessage = 'Validation failed';\r\n\r\n      logger.error(errorMessage, {\r\n        error_type: error.constructor.name,\r\n        error_message: error.message,\r\n      });\r\n\r\n      const winston = require('winston');\r\n      const mockLogger = winston.createLogger();\r\n      expect(mockLogger.error).toHaveBeenCalled();\r\n\r\n      const callArgs = mockLogger.error.mock.calls[0];\r\n      expect(callArgs[1]).toHaveProperty('error_type', 'ValidationError');\r\n    });\r\n  });\r\n\r\n  /**\r\n   * Property 13: ログレベルの適切性\r\n   *\r\n   * 警告はWARNINGレベルで記録されることを確認します。\r\n   */\r\n  describe('Warning Logging', () => {\r\n    it('should log warnings at WARN level', () => {\r\n      const warningMessage = 'Duplicate item detected';\r\n      const context = {\r\n        disclosure_id: 'TD20240115001',\r\n      };\r\n\r\n      logger.warn(warningMessage, context);\r\n\r\n      const winston = require('winston');\r\n      const mockLogger = winston.createLogger();\r\n      expect(mockLogger.warn).toHaveBeenCalledWith(warningMessage, context);\r\n    });\r\n\r\n    it('should log partial failures as warnings', () => {\r\n      const warningMessage = 'Partial failure in batch processing';\r\n      const context = {\r\n        total: 100,\r\n        success: 95,\r\n        failed: 5,\r\n      };\r\n\r\n      logger.warn(warningMessage, context);\r\n\r\n      const winston = require('winston');\r\n      const mockLogger = winston.createLogger();\r\n      expect(mockLogger.warn).toHaveBeenCalled();\r\n\r\n      const callArgs = mockLogger.warn.mock.calls[0];\r\n      expect(callArgs[0]).toBe(warningMessage);\r\n      expect(callArgs[1]).toMatchObject(context);\r\n    });\r\n  });\r\n\r\n  describe('Info Logging', () => {\r\n    it('should log info messages at INFO level', () => {\r\n      const infoMessage = 'Disclosure saved successfully';\r\n      const context = {\r\n        disclosure_id: 'TD20240115001',\r\n        date_partition: '2024-01',\r\n      };\r\n\r\n      logger.info(infoMessage, context);\r\n\r\n      const winston = require('winston');\r\n      const mockLogger = winston.createLogger();\r\n      expect(mockLogger.info).toHaveBeenCalledWith(infoMessage, context);\r\n    });\r\n  });\r\n\r\n  describe('Debug Logging', () => {\r\n    it('should log debug messages at DEBUG level', () => {\r\n      const debugMessage = 'Processing disclosure';\r\n      const context = {\r\n        disclosure_id: 'TD20240115001',\r\n        company_code: '1234',\r\n      };\r\n\r\n      logger.debug(debugMessage, context);\r\n\r\n      const winston = require('winston');\r\n      const mockLogger = winston.createLogger();\r\n      expect(mockLogger.debug).toHaveBeenCalledWith(debugMessage, context);\r\n    });\r\n  });\r\n\r\n  describe('Log Context', () => {\r\n    it('should include context in log messages', () => {\r\n      const message = 'Operation completed';\r\n      const context = {\r\n        disclosure_id: 'TD20240115001',\r\n        execution_time: 1234,\r\n        retry_count: 2,\r\n      };\r\n\r\n      logger.info(message, context);\r\n\r\n      const winston = require('winston');\r\n      const mockLogger = winston.createLogger();\r\n      expect(mockLogger.info).toHaveBeenCalledWith(message, context);\r\n    });\r\n\r\n    it('should handle empty context', () => {\r\n      const message = 'Operation completed';\r\n\r\n      logger.info(message);\r\n\r\n      const winston = require('winston');\r\n      const mockLogger = winston.createLogger();\r\n      expect(mockLogger.info).toHaveBeenCalledWith(message, undefined);\r\n    });\r\n  });\r\n});\r\n\r\ndescribe('createErrorContext', () => {\r\n  it('should create error context from Error object', () => {\r\n    const error = new Error('Test error');\r\n    const context = createErrorContext(error);\r\n\r\n    expect(context).toHaveProperty('error_type', 'Error');\r\n    expect(context).toHaveProperty('error_message', 'Test error');\r\n    expect(context).toHaveProperty('stack_trace');\r\n    expect(context.stack_trace).toContain('Test error');\r\n  });\r\n\r\n  it('should create error context from custom error', () => {\r\n    const error = new ValidationError('Invalid date format');\r\n    const context = createErrorContext(error);\r\n\r\n    expect(context).toHaveProperty('error_type', 'ValidationError');\r\n    expect(context).toHaveProperty('error_message', 'Invalid date format');\r\n    expect(context).toHaveProperty('stack_trace');\r\n  });\r\n\r\n  it('should merge additional context', () => {\r\n    const error = new RetryableError('Network error');\r\n    const additionalContext = {\r\n      disclosure_id: 'TD20240115001',\r\n      retry_count: 2,\r\n    };\r\n\r\n    const context = createErrorContext(error, additionalContext);\r\n\r\n    expect(context).toHaveProperty('error_type', 'RetryableError');\r\n    expect(context).toHaveProperty('error_message', 'Network error');\r\n    expect(context).toHaveProperty('stack_trace');\r\n    expect(context).toHaveProperty('disclosure_id', 'TD20240115001');\r\n    expect(context).toHaveProperty('retry_count', 2);\r\n  });\r\n\r\n  it('should handle nested context objects', () => {\r\n    const error = new Error('Test error');\r\n    const additionalContext = {\r\n      context: {\r\n        disclosure_id: 'TD20240115001',\r\n        execution_id: 'exec-123',\r\n      },\r\n    };\r\n\r\n    const context = createErrorContext(error, additionalContext);\r\n\r\n    expect(context).toHaveProperty('error_type', 'Error');\r\n    expect(context).toHaveProperty('context');\r\n    expect(context.context).toMatchObject({\r\n      disclosure_id: 'TD20240115001',\r\n      execution_id: 'exec-123',\r\n    });\r\n  });\r\n});\r\n\r\ndescribe('setLogLevel', () => {\r\n  it('should set log level to DEBUG', () => {\r\n    setLogLevel(LogLevel.DEBUG);\r\n\r\n    const winston = require('winston');\r\n    const mockLogger = winston.createLogger();\r\n    expect(mockLogger.level).toBe('debug');\r\n  });\r\n\r\n  it('should set log level to INFO', () => {\r\n    setLogLevel(LogLevel.INFO);\r\n\r\n    const winston = require('winston');\r\n    const mockLogger = winston.createLogger();\r\n    expect(mockLogger.level).toBe('info');\r\n  });\r\n\r\n  it('should set log level to WARN', () => {\r\n    setLogLevel(LogLevel.WARN);\r\n\r\n    const winston = require('winston');\r\n    const mockLogger = winston.createLogger();\r\n    expect(mockLogger.level).toBe('warn');\r\n  });\r\n\r\n  it('should set log level to ERROR', () => {\r\n    setLogLevel(LogLevel.ERROR);\r\n\r\n    const winston = require('winston');\r\n    const mockLogger = winston.createLogger();\r\n    expect(mockLogger.level).toBe('error');\r\n  });\r\n});\r\n\r\ndescribe('Structured Logging Format', () => {\r\n  it('should log in JSON format for CloudWatch', () => {\r\n    const message = 'Test message';\r\n    const context = {\r\n      disclosure_id: 'TD20240115001',\r\n      timestamp: '2024-01-15T10:30:00Z',\r\n    };\r\n\r\n    logger.info(message, context);\r\n\r\n    const winston = require('winston');\r\n    const mockLogger = winston.createLogger();\r\n    expect(mockLogger.info).toHaveBeenCalledWith(message, context);\r\n  });\r\n\r\n  it('should include service metadata', () => {\r\n    // WinstonのcreateLoggerが呼ばれたときのdefaultMetaを確認\r\n    const winston = require('winston');\r\n    expect(winston.createLogger).toHaveBeenCalled();\r\n\r\n    // createLoggerが引数付きで呼ばれていることを確認\r\n    const calls = winston.createLogger.mock.calls;\r\n    expect(calls.length).toBeGreaterThan(0);\r\n    \r\n    // 最初の呼び出しに引数があれば、defaultMetaを確認\r\n    if (calls[0] && calls[0][0]) {\r\n      const createLoggerCall = calls[0][0];\r\n      expect(createLoggerCall).toHaveProperty('defaultMeta');\r\n      expect(createLoggerCall.defaultMeta).toHaveProperty('service', 'tdnet-data-collector');\r\n    }\r\n  });\r\n\r\n  it('should use LOG_LEVEL environment variable when set', () => {\r\n    // 環境変数を設定してモジュールを再読み込み\r\n    const originalLogLevel = process.env.LOG_LEVEL;\r\n    process.env.LOG_LEVEL = 'debug';\r\n\r\n    // モジュールキャッシュをクリアして再読み込み\r\n    jest.resetModules();\r\n    require('../logger');\r\n\r\n    const winston = require('winston');\r\n    const calls = winston.createLogger.mock.calls;\r\n    const lastCall = calls[calls.length - 1];\r\n    \r\n    if (lastCall && lastCall[0]) {\r\n      expect(lastCall[0].level).toBe('debug');\r\n    }\r\n\r\n    // 環境変数を元に戻す\r\n    if (originalLogLevel) {\r\n      process.env.LOG_LEVEL = originalLogLevel;\r\n    } else {\r\n      delete process.env.LOG_LEVEL;\r\n    }\r\n  });\r\n\r\n  it('should default to INFO level when LOG_LEVEL is not set', () => {\r\n    // 環境変数を削除してモジュールを再読み込み\r\n    const originalLogLevel = process.env.LOG_LEVEL;\r\n    delete process.env.LOG_LEVEL;\r\n\r\n    jest.resetModules();\r\n    require('../logger');\r\n\r\n    const winston = require('winston');\r\n    const calls = winston.createLogger.mock.calls;\r\n    const lastCall = calls[calls.length - 1];\r\n    \r\n    if (lastCall && lastCall[0]) {\r\n      expect(lastCall[0].level).toBe('info');\r\n    }\r\n\r\n    // 環境変数を元に戻す\r\n    if (originalLogLevel) {\r\n      process.env.LOG_LEVEL = originalLogLevel;\r\n    }\r\n  });\r\n\r\n  it('should use NODE_ENV environment variable when set', () => {\r\n    const originalNodeEnv = process.env.NODE_ENV;\r\n    process.env.NODE_ENV = 'production';\r\n\r\n    jest.resetModules();\r\n    require('../logger');\r\n\r\n    const winston = require('winston');\r\n    const calls = winston.createLogger.mock.calls;\r\n    const lastCall = calls[calls.length - 1];\r\n    \r\n    if (lastCall && lastCall[0]) {\r\n      expect(lastCall[0].defaultMeta.environment).toBe('production');\r\n    }\r\n\r\n    // 環境変数を元に戻す\r\n    if (originalNodeEnv) {\r\n      process.env.NODE_ENV = originalNodeEnv;\r\n    } else {\r\n      delete process.env.NODE_ENV;\r\n    }\r\n  });\r\n\r\n  it('should default to development when NODE_ENV is not set', () => {\r\n    const originalNodeEnv = process.env.NODE_ENV;\r\n    delete process.env.NODE_ENV;\r\n\r\n    jest.resetModules();\r\n    require('../logger');\r\n\r\n    const winston = require('winston');\r\n    const calls = winston.createLogger.mock.calls;\r\n    const lastCall = calls[calls.length - 1];\r\n    \r\n    if (lastCall && lastCall[0]) {\r\n      expect(lastCall[0].defaultMeta.environment).toBe('development');\r\n    }\r\n\r\n    // 環境変数を元に戻す\r\n    if (originalNodeEnv) {\r\n      process.env.NODE_ENV = originalNodeEnv;\r\n    }\r\n  });\r\n});\r\n\r\ndescribe('logLambdaError', () => {\r\n  it('should log Lambda error with standard format', () => {\r\n    const { logLambdaError } = require('../logger');\r\n    const error = new ValidationError('Invalid input');\r\n    const lambdaContext = {\r\n      requestId: 'test-request-id',\r\n      functionName: 'TestFunction',\r\n    };\r\n\r\n    logLambdaError('Lambda execution failed', error, lambdaContext);\r\n\r\n    const winston = require('winston');\r\n    const mockLogger = winston.createLogger();\r\n    \r\n    expect(mockLogger.error).toHaveBeenCalledWith(\r\n      'Lambda execution failed',\r\n      expect.objectContaining({\r\n        error_type: 'ValidationError',\r\n        error_message: 'Invalid input',\r\n        context: expect.objectContaining({\r\n          request_id: 'test-request-id',\r\n          function_name: 'TestFunction',\r\n        }),\r\n        stack_trace: expect.any(String),\r\n      })\r\n    );\r\n  });\r\n\r\n  it('should log Lambda error with additional context', () => {\r\n    const { logLambdaError } = require('../logger');\r\n    const error = new RetryableError('Network error');\r\n    const lambdaContext = {\r\n      requestId: 'test-request-id',\r\n      functionName: 'TestFunction',\r\n    };\r\n    const additionalContext = {\r\n      disclosure_id: 'TD20240115001',\r\n      retry_count: 2,\r\n    };\r\n\r\n    logLambdaError('Lambda execution failed', error, lambdaContext, additionalContext);\r\n\r\n    const winston = require('winston');\r\n    const mockLogger = winston.createLogger();\r\n    \r\n    expect(mockLogger.error).toHaveBeenCalledWith(\r\n      'Lambda execution failed',\r\n      expect.objectContaining({\r\n        error_type: 'RetryableError',\r\n        error_message: 'Network error',\r\n        context: expect.objectContaining({\r\n          request_id: 'test-request-id',\r\n          function_name: 'TestFunction',\r\n          disclosure_id: 'TD20240115001',\r\n          retry_count: 2,\r\n        }),\r\n        stack_trace: expect.any(String),\r\n      })\r\n    );\r\n  });\r\n\r\n  it('should handle missing Lambda context', () => {\r\n    const { logLambdaError } = require('../logger');\r\n    const error = new Error('Test error');\r\n\r\n    logLambdaError('Lambda execution failed', error);\r\n\r\n    const winston = require('winston');\r\n    const mockLogger = winston.createLogger();\r\n    \r\n    expect(mockLogger.error).toHaveBeenCalledWith(\r\n      'Lambda execution failed',\r\n      expect.objectContaining({\r\n        error_type: 'Error',\r\n        error_message: 'Test error',\r\n        context: expect.objectContaining({\r\n          request_id: undefined,\r\n          function_name: undefined,\r\n        }),\r\n        stack_trace: expect.any(String),\r\n      })\r\n    );\r\n  });\r\n});\r\n"],"version":3}