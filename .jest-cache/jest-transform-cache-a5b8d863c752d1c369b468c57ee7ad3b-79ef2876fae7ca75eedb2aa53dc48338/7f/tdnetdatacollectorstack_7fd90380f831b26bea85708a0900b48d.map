{"version":3,"names":["cdk","cov_19qmzbtoe3","s","__importStar","require","dynamodb","s3","lambda","TdnetDataCollectorStack","Stack","disclosuresTable","executionsTable","pdfsBucket","exportsBucket","dashboardBucket","cloudtrailLogsBucket","constructor","scope","id","props","f","Table","tableName","partitionKey","name","type","AttributeType","STRING","billingMode","BillingMode","PAY_PER_REQUEST","encryption","TableEncryption","AWS_MANAGED","pointInTimeRecovery","removalPolicy","RemovalPolicy","RETAIN","addGlobalSecondaryIndex","indexName","sortKey","projectionType","ProjectionType","ALL","timeToLiveAttribute","CfnOutput","value","description","exportName","Bucket","bucketName","account","BucketEncryption","S3_MANAGED","blockPublicAccess","BlockPublicAccess","BLOCK_ALL","versioned","autoDeleteObjects","lifecycleRules","enabled","transitions","storageClass","StorageClass","INFREQUENT_ACCESS","transitionAfter","Duration","days","GLACIER","expiration","collectorFunction","Function","functionName","runtime","Runtime","NODEJS_20_X","handler","code","Code","fromAsset","timeout","minutes","memorySize","environment","DYNAMODB_TABLE","DYNAMODB_EXECUTIONS_TABLE","S3_BUCKET","LOG_LEVEL","NODE_OPTIONS","reservedConcurrentExecutions","grantReadWriteData","grantPut","grantRead","addToRolePolicy","aws_iam","PolicyStatement","effect","Effect","ALLOW","actions","resources","functionArn","exports"],"sources":["C:\\Users\\ti198\\investment_analysis_opopo\\cdk\\lib\\tdnet-data-collector-stack.ts"],"sourcesContent":["import * as cdk from 'aws-cdk-lib';\nimport * as dynamodb from 'aws-cdk-lib/aws-dynamodb';\nimport * as s3 from 'aws-cdk-lib/aws-s3';\nimport * as lambda from 'aws-cdk-lib/aws-lambda';\nimport { Construct } from 'constructs';\n\nexport class TdnetDataCollectorStack extends cdk.Stack {\n  // Public properties for cross-stack references\n  public readonly disclosuresTable: dynamodb.Table;\n  public readonly executionsTable: dynamodb.Table;\n  public readonly pdfsBucket: s3.Bucket;\n  public readonly exportsBucket: s3.Bucket;\n  public readonly dashboardBucket: s3.Bucket;\n  public readonly cloudtrailLogsBucket: s3.Bucket;\n\n  constructor(scope: Construct, id: string, props?: cdk.StackProps) {\n    super(scope, id, props);\n\n    // ========================================\n    // Phase 1: DynamoDB Tables\n    // ========================================\n\n    // 1. tdnet_disclosures - 開示情報メタデータテーブル\n    this.disclosuresTable = new dynamodb.Table(this, 'DisclosuresTable', {\n      tableName: 'tdnet_disclosures',\n      partitionKey: {\n        name: 'disclosure_id',\n        type: dynamodb.AttributeType.STRING,\n      },\n      billingMode: dynamodb.BillingMode.PAY_PER_REQUEST, // オンデマンドモード\n      encryption: dynamodb.TableEncryption.AWS_MANAGED, // AWS管理キーで暗号化\n      pointInTimeRecovery: true, // ポイントインタイムリカバリ有効化\n      removalPolicy: cdk.RemovalPolicy.RETAIN, // 本番環境では削除保護\n    });\n\n    // GSI: CompanyCode_DiscloseDate - 企業コードと開示日時でクエリ\n    this.disclosuresTable.addGlobalSecondaryIndex({\n      indexName: 'GSI_CompanyCode_DiscloseDate',\n      partitionKey: {\n        name: 'company_code',\n        type: dynamodb.AttributeType.STRING,\n      },\n      sortKey: {\n        name: 'disclosed_at',\n        type: dynamodb.AttributeType.STRING,\n      },\n      projectionType: dynamodb.ProjectionType.ALL, // すべての属性を投影\n    });\n\n    // GSI: DatePartition - 月単位の効率的なクエリ（YYYY-MM形式）\n    this.disclosuresTable.addGlobalSecondaryIndex({\n      indexName: 'GSI_DatePartition',\n      partitionKey: {\n        name: 'date_partition',\n        type: dynamodb.AttributeType.STRING,\n      },\n      sortKey: {\n        name: 'disclosed_at',\n        type: dynamodb.AttributeType.STRING,\n      },\n      projectionType: dynamodb.ProjectionType.ALL,\n    });\n\n    // 2. tdnet_executions - 実行状態管理テーブル\n    this.executionsTable = new dynamodb.Table(this, 'ExecutionsTable', {\n      tableName: 'tdnet_executions',\n      partitionKey: {\n        name: 'execution_id',\n        type: dynamodb.AttributeType.STRING,\n      },\n      billingMode: dynamodb.BillingMode.PAY_PER_REQUEST, // オンデマンドモード\n      encryption: dynamodb.TableEncryption.AWS_MANAGED, // AWS管理キーで暗号化\n      timeToLiveAttribute: 'ttl', // TTL有効化（30日後に自動削除）\n      pointInTimeRecovery: true, // ポイントインタイムリカバリ有効化\n      removalPolicy: cdk.RemovalPolicy.RETAIN, // 本番環境では削除保護\n    });\n\n    // GSI: Status_StartedAt - 実行状態と開始日時でクエリ\n    this.executionsTable.addGlobalSecondaryIndex({\n      indexName: 'GSI_Status_StartedAt',\n      partitionKey: {\n        name: 'status',\n        type: dynamodb.AttributeType.STRING,\n      },\n      sortKey: {\n        name: 'started_at',\n        type: dynamodb.AttributeType.STRING,\n      },\n      projectionType: dynamodb.ProjectionType.ALL,\n    });\n\n    // CloudFormation Outputs\n    new cdk.CfnOutput(this, 'DisclosuresTableName', {\n      value: this.disclosuresTable.tableName,\n      description: 'DynamoDB table name for disclosures',\n      exportName: 'TdnetDisclosuresTableName',\n    });\n\n    new cdk.CfnOutput(this, 'ExecutionsTableName', {\n      value: this.executionsTable.tableName,\n      description: 'DynamoDB table name for executions',\n      exportName: 'TdnetExecutionsTableName',\n    });\n\n    // ========================================\n    // Phase 1: S3 Buckets\n    // ========================================\n\n    // 1. PDFバケット - TDnetからダウンロードしたPDFファイルの長期保存\n    this.pdfsBucket = new s3.Bucket(this, 'PdfsBucket', {\n      bucketName: `tdnet-data-collector-pdfs-${this.account}`,\n      encryption: s3.BucketEncryption.S3_MANAGED, // S3マネージドキーで暗号化\n      blockPublicAccess: s3.BlockPublicAccess.BLOCK_ALL, // パブリックアクセスブロック\n      versioned: true, // バージョニング有効化\n      removalPolicy: cdk.RemovalPolicy.RETAIN, // 本番環境では削除保護\n      autoDeleteObjects: false, // 自動削除無効\n      lifecycleRules: [\n        {\n          id: 'TransitionToStandardIA',\n          enabled: true,\n          transitions: [\n            {\n              storageClass: s3.StorageClass.INFREQUENT_ACCESS,\n              transitionAfter: cdk.Duration.days(90), // 90日後にStandard-IAに移行\n            },\n            {\n              storageClass: s3.StorageClass.GLACIER,\n              transitionAfter: cdk.Duration.days(365), // 365日後にGlacierに移行\n            },\n          ],\n        },\n      ],\n    });\n\n    // 2. エクスポートバケット - ユーザーがエクスポートしたCSV/JSONファイルの一時保存\n    this.exportsBucket = new s3.Bucket(this, 'ExportsBucket', {\n      bucketName: `tdnet-data-collector-exports-${this.account}`,\n      encryption: s3.BucketEncryption.S3_MANAGED,\n      blockPublicAccess: s3.BlockPublicAccess.BLOCK_ALL,\n      versioned: true,\n      removalPolicy: cdk.RemovalPolicy.RETAIN,\n      autoDeleteObjects: false,\n      lifecycleRules: [\n        {\n          id: 'DeleteAfter7Days',\n          enabled: true,\n          expiration: cdk.Duration.days(7), // 7日後に自動削除\n        },\n      ],\n    });\n\n    // 3. ダッシュボードバケット - Webダッシュボードの静的ファイルホスティング\n    this.dashboardBucket = new s3.Bucket(this, 'DashboardBucket', {\n      bucketName: `tdnet-dashboard-${this.account}`,\n      encryption: s3.BucketEncryption.S3_MANAGED,\n      blockPublicAccess: s3.BlockPublicAccess.BLOCK_ALL, // CloudFront OAI経由でのみアクセス\n      versioned: true,\n      removalPolicy: cdk.RemovalPolicy.RETAIN,\n      autoDeleteObjects: false,\n      // ライフサイクルポリシーなし（静的ファイルは永続保存）\n    });\n\n    // 4. CloudTrailログバケット - 監査ログの長期保存\n    this.cloudtrailLogsBucket = new s3.Bucket(this, 'CloudTrailLogsBucket', {\n      bucketName: `tdnet-cloudtrail-logs-${this.account}`,\n      encryption: s3.BucketEncryption.S3_MANAGED,\n      blockPublicAccess: s3.BlockPublicAccess.BLOCK_ALL,\n      versioned: true,\n      removalPolicy: cdk.RemovalPolicy.RETAIN,\n      autoDeleteObjects: false,\n      lifecycleRules: [\n        {\n          id: 'ArchiveAndDelete',\n          enabled: true,\n          transitions: [\n            {\n              storageClass: s3.StorageClass.GLACIER,\n              transitionAfter: cdk.Duration.days(90), // 90日後にGlacierに移行\n            },\n          ],\n          expiration: cdk.Duration.days(2555), // 7年後に自動削除（コンプライアンス要件）\n        },\n      ],\n    });\n\n    // CloudFormation Outputs\n    new cdk.CfnOutput(this, 'PdfsBucketName', {\n      value: this.pdfsBucket.bucketName,\n      description: 'S3 bucket name for PDF files',\n      exportName: 'TdnetPdfsBucketName',\n    });\n\n    new cdk.CfnOutput(this, 'ExportsBucketName', {\n      value: this.exportsBucket.bucketName,\n      description: 'S3 bucket name for export files',\n      exportName: 'TdnetExportsBucketName',\n    });\n\n    new cdk.CfnOutput(this, 'DashboardBucketName', {\n      value: this.dashboardBucket.bucketName,\n      description: 'S3 bucket name for dashboard',\n      exportName: 'TdnetDashboardBucketName',\n    });\n\n    new cdk.CfnOutput(this, 'CloudTrailLogsBucketName', {\n      value: this.cloudtrailLogsBucket.bucketName,\n      description: 'S3 bucket name for CloudTrail logs',\n      exportName: 'TdnetCloudTrailLogsBucketName',\n    });\n\n    // ========================================\n    // Phase 1: Lambda Functions\n    // ========================================\n\n    // Lambda Collector Function\n    const collectorFunction = new lambda.Function(this, 'CollectorFunction', {\n      functionName: 'tdnet-collector',\n      runtime: lambda.Runtime.NODEJS_20_X,\n      handler: 'index.handler',\n      code: lambda.Code.fromAsset('dist/src/lambda/collector'),\n      timeout: cdk.Duration.minutes(15),\n      memorySize: 512,\n      environment: {\n        DYNAMODB_TABLE: this.disclosuresTable.tableName,\n        DYNAMODB_EXECUTIONS_TABLE: this.executionsTable.tableName,\n        S3_BUCKET: this.pdfsBucket.bucketName,\n        LOG_LEVEL: 'info',\n        NODE_OPTIONS: '--enable-source-maps',\n      },\n      reservedConcurrentExecutions: 1, // 同時実行数を1に制限（レート制限のため）\n    });\n\n    // IAM権限の付与\n    // DynamoDB: 両テーブルへの読み書き権限\n    this.disclosuresTable.grantReadWriteData(collectorFunction);\n    this.executionsTable.grantReadWriteData(collectorFunction);\n\n    // S3: PDFバケットへの書き込み権限\n    this.pdfsBucket.grantPut(collectorFunction);\n    this.pdfsBucket.grantRead(collectorFunction);\n\n    // CloudWatch Metrics: カスタムメトリクス送信権限\n    collectorFunction.addToRolePolicy(\n      new cdk.aws_iam.PolicyStatement({\n        effect: cdk.aws_iam.Effect.ALLOW,\n        actions: ['cloudwatch:PutMetricData'],\n        resources: ['*'],\n      })\n    );\n\n    // CloudFormation Outputs\n    new cdk.CfnOutput(this, 'CollectorFunctionName', {\n      value: collectorFunction.functionName,\n      description: 'Lambda Collector function name',\n      exportName: 'TdnetCollectorFunctionName',\n    });\n\n    new cdk.CfnOutput(this, 'CollectorFunctionArn', {\n      value: collectorFunction.functionArn,\n      description: 'Lambda Collector function ARN',\n      exportName: 'TdnetCollectorFunctionArn',\n    });\n\n    // Stack resources will be added here in subsequent tasks\n    // Phase 2: API Gateway, Lambda Query/Export functions\n    // Phase 3: EventBridge rules, SNS topics, CloudWatch monitoring\n    // Phase 4: CloudTrail, WAF, security configurations\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}