e9aab1279642877fff32af7acdc49f78
"use strict";
/**
 * S3 Bucket Structure Verification Test
 *
 * Task 4.2: S3バケット構造の検証テスト
 * Requirements: 要件3.5, 12.4, 13.3（ファイルストレージ、コスト最適化、暗号化）
 *
 * このテストは、CDKで定義されたS3バケットが設計通りに構成されていることを検証します。
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const cdk = __importStar(require("aws-cdk-lib"));
const assertions_1 = require("aws-cdk-lib/assertions");
const tdnet_data_collector_stack_1 = require("../lib/tdnet-data-collector-stack");
describe('S3 Buckets', () => {
    let template;
    const testAccountId = '123456789012';
    beforeAll(() => {
        const app = new cdk.App();
        const stack = new tdnet_data_collector_stack_1.TdnetDataCollectorStack(app, 'TestStack', {
            env: { account: testAccountId, region: 'ap-northeast-1' },
        });
        template = assertions_1.Template.fromStack(stack);
    });
    describe('PDFs Bucket', () => {
        it('should be created with correct name', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-pdfs-dev-', { Ref: 'AWS::AccountId' }]] },
            });
        });
        it('should have encryption enabled', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-pdfs-dev-', { Ref: 'AWS::AccountId' }]] },
                BucketEncryption: {
                    ServerSideEncryptionConfiguration: [
                        {
                            ServerSideEncryptionByDefault: {
                                SSEAlgorithm: 'AES256', // S3マネージド暗号化
                            },
                        },
                    ],
                },
            });
        });
        it('should have public access blocked', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-pdfs-dev-', { Ref: 'AWS::AccountId' }]] },
                PublicAccessBlockConfiguration: {
                    BlockPublicAcls: true,
                    BlockPublicPolicy: true,
                    IgnorePublicAcls: true,
                    RestrictPublicBuckets: true,
                },
            });
        });
        it('should have versioning enabled', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-pdfs-dev-', { Ref: 'AWS::AccountId' }]] },
                VersioningConfiguration: {
                    Status: 'Enabled',
                },
            });
        });
        it('should have lifecycle rules for cost optimization', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-pdfs-dev-', { Ref: 'AWS::AccountId' }]] },
                LifecycleConfiguration: {
                    Rules: [
                        {
                            Id: 'TransitionToStandardIA',
                            Status: 'Enabled',
                            Transitions: [
                                {
                                    StorageClass: 'STANDARD_IA',
                                    TransitionInDays: 90, // 90日後にStandard-IAに移行
                                },
                                {
                                    StorageClass: 'GLACIER',
                                    TransitionInDays: 365, // 365日後にGlacierに移行
                                },
                            ],
                        },
                    ],
                },
            });
        });
    });
    describe('Exports Bucket', () => {
        it('should be created with correct name', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-exports-dev-', { Ref: 'AWS::AccountId' }]] },
            });
        });
        it('should have encryption enabled', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-exports-dev-', { Ref: 'AWS::AccountId' }]] },
                BucketEncryption: {
                    ServerSideEncryptionConfiguration: [
                        {
                            ServerSideEncryptionByDefault: {
                                SSEAlgorithm: 'AES256',
                            },
                        },
                    ],
                },
            });
        });
        it('should have public access blocked', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-exports-dev-', { Ref: 'AWS::AccountId' }]] },
                PublicAccessBlockConfiguration: {
                    BlockPublicAcls: true,
                    BlockPublicPolicy: true,
                    IgnorePublicAcls: true,
                    RestrictPublicBuckets: true,
                },
            });
        });
        it('should have versioning enabled', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-exports-dev-', { Ref: 'AWS::AccountId' }]] },
                VersioningConfiguration: {
                    Status: 'Enabled',
                },
            });
        });
        it('should have lifecycle rule to delete after 7 days', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-data-collector-exports-dev-', { Ref: 'AWS::AccountId' }]] },
                LifecycleConfiguration: {
                    Rules: [
                        {
                            Id: 'DeleteAfter7Days',
                            Status: 'Enabled',
                            ExpirationInDays: 7, // 7日後に自動削除
                        },
                    ],
                },
            });
        });
    });
    describe('Dashboard Bucket', () => {
        it('should be created with correct name', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-dashboard-dev-', { Ref: 'AWS::AccountId' }]] },
            });
        });
        it('should have encryption enabled', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-dashboard-dev-', { Ref: 'AWS::AccountId' }]] },
                BucketEncryption: {
                    ServerSideEncryptionConfiguration: [
                        {
                            ServerSideEncryptionByDefault: {
                                SSEAlgorithm: 'AES256',
                            },
                        },
                    ],
                },
            });
        });
        it('should have public access blocked', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-dashboard-dev-', { Ref: 'AWS::AccountId' }]] },
                PublicAccessBlockConfiguration: {
                    BlockPublicAcls: true,
                    BlockPublicPolicy: true,
                    IgnorePublicAcls: true,
                    RestrictPublicBuckets: true,
                },
            });
        });
        it('should have versioning enabled', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: { 'Fn::Join': ['', ['tdnet-dashboard-dev-', { Ref: 'AWS::AccountId' }]] },
                VersioningConfiguration: {
                    Status: 'Enabled',
                },
            });
        });
        it('should not have lifecycle rules (static files persist)', () => {
            // ダッシュボードバケットはライフサイクルルールを持たない
            const resources = template.toJSON().Resources;
            const dashboardBucket = Object.values(resources).find((r) => r.Type === 'AWS::S3::Bucket' &&
                r.Properties?.BucketName?.['Fn::Join']?.[1]?.[0] === 'tdnet-dashboard-dev-');
            expect(dashboardBucket).toBeDefined();
            expect(dashboardBucket.Properties.LifecycleConfiguration).toBeUndefined();
        });
    });
    describe('CloudTrail Logs Bucket', () => {
        it('should be created with correct name', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: `tdnet-cloudtrail-logs-${testAccountId}`,
            });
        });
        it('should have encryption enabled', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: `tdnet-cloudtrail-logs-${testAccountId}`,
                BucketEncryption: {
                    ServerSideEncryptionConfiguration: [
                        {
                            ServerSideEncryptionByDefault: {
                                SSEAlgorithm: 'AES256',
                            },
                        },
                    ],
                },
            });
        });
        it('should have public access blocked', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: `tdnet-cloudtrail-logs-${testAccountId}`,
                PublicAccessBlockConfiguration: {
                    BlockPublicAcls: true,
                    BlockPublicPolicy: true,
                    IgnorePublicAcls: true,
                    RestrictPublicBuckets: true,
                },
            });
        });
        it('should have versioning enabled', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: `tdnet-cloudtrail-logs-${testAccountId}`,
                VersioningConfiguration: {
                    Status: 'Enabled',
                },
            });
        });
        it('should have lifecycle rules for compliance', () => {
            template.hasResourceProperties('AWS::S3::Bucket', {
                BucketName: `tdnet-cloudtrail-logs-${testAccountId}`,
                LifecycleConfiguration: {
                    Rules: [
                        {
                            Id: 'ArchiveAndDelete',
                            Status: 'Enabled',
                            Transitions: [
                                {
                                    StorageClass: 'GLACIER',
                                    TransitionInDays: 90, // 90日後にGlacierに移行
                                },
                            ],
                            ExpirationInDays: 2555, // 7年後に自動削除（コンプライアンス要件）
                        },
                    ],
                },
            });
        });
    });
    describe('CloudFormation Outputs', () => {
        it('should export PdfsBucketName', () => {
            template.hasOutput('PdfsBucketName', {
                Value: {
                    Ref: assertions_1.Match.stringLikeRegexp('PdfsBucket'),
                },
                Export: {
                    Name: 'TdnetPdfsBucketName',
                },
            });
        });
        it('should export ExportsBucketName', () => {
            template.hasOutput('ExportsBucketName', {
                Value: {
                    Ref: assertions_1.Match.stringLikeRegexp('ExportsBucket'),
                },
                Export: {
                    Name: 'TdnetExportsBucketName',
                },
            });
        });
        it('should export DashboardBucketName', () => {
            template.hasOutput('DashboardBucketName', {
                Value: {
                    Ref: assertions_1.Match.stringLikeRegexp('DashboardBucket'),
                },
                Export: {
                    Name: 'TdnetDashboardBucketName',
                },
            });
        });
        it('should export CloudTrailLogsBucketName', () => {
            template.hasOutput('CloudTrailLogsBucketName', {
                Value: {
                    Ref: assertions_1.Match.stringLikeRegexp('CloudTrailLogsBucket'),
                },
                Export: {
                    Name: 'TdnetCloudTrailLogsBucketName',
                },
            });
        });
    });
    describe('Security and Compliance', () => {
        it('should have encryption enabled on all buckets', () => {
            // すべてのS3バケットで暗号化が有効化されていることを確認
            const buckets = template.findResources('AWS::S3::Bucket');
            const bucketKeys = Object.keys(buckets);
            expect(bucketKeys.length).toBeGreaterThanOrEqual(4);
            bucketKeys.forEach((key) => {
                const bucket = buckets[key];
                expect(bucket.Properties.BucketEncryption).toBeDefined();
                expect(bucket.Properties.BucketEncryption.ServerSideEncryptionConfiguration).toBeDefined();
                expect(bucket.Properties.BucketEncryption
                    .ServerSideEncryptionConfiguration[0].ServerSideEncryptionByDefault
                    .SSEAlgorithm).toBe('AES256');
            });
        });
        it('should have public access blocked on all buckets', () => {
            // すべてのS3バケットでパブリックアクセスがブロックされていることを確認
            const buckets = template.findResources('AWS::S3::Bucket');
            const bucketKeys = Object.keys(buckets);
            bucketKeys.forEach((key) => {
                const bucket = buckets[key];
                expect(bucket.Properties.PublicAccessBlockConfiguration).toBeDefined();
                expect(bucket.Properties.PublicAccessBlockConfiguration.BlockPublicAcls).toBe(true);
                expect(bucket.Properties.PublicAccessBlockConfiguration.BlockPublicPolicy).toBe(true);
                expect(bucket.Properties.PublicAccessBlockConfiguration.IgnorePublicAcls).toBe(true);
                expect(bucket.Properties.PublicAccessBlockConfiguration
                    .RestrictPublicBuckets).toBe(true);
            });
        });
        it('should have versioning enabled on all buckets', () => {
            // すべてのS3バケットでバージョニングが有効化されていることを確認
            const buckets = template.findResources('AWS::S3::Bucket');
            const bucketKeys = Object.keys(buckets);
            bucketKeys.forEach((key) => {
                const bucket = buckets[key];
                expect(bucket.Properties.VersioningConfiguration).toBeDefined();
                expect(bucket.Properties.VersioningConfiguration.Status).toBe('Enabled');
            });
        });
        it('should have lifecycle rules for cost optimization', () => {
            // PDFバケットとCloudTrailログバケットにライフサイクルルールが設定されていることを確認
            const pdfsBucket = template.findResources('AWS::S3::Bucket', {
                Properties: {
                    BucketName: `tdnet-data-collector-pdfs-${testAccountId}`,
                },
            });
            const cloudtrailBucket = template.findResources('AWS::S3::Bucket', {
                Properties: {
                    BucketName: `tdnet-cloudtrail-logs-${testAccountId}`,
                },
            });
            const pdfsBucketKey = Object.keys(pdfsBucket)[0];
            const cloudtrailBucketKey = Object.keys(cloudtrailBucket)[0];
            expect(pdfsBucket[pdfsBucketKey].Properties.LifecycleConfiguration).toBeDefined();
            expect(cloudtrailBucket[cloudtrailBucketKey].Properties.LifecycleConfiguration).toBeDefined();
        });
    });
    describe('Bucket Count', () => {
        it('should have exactly 4 S3 buckets', () => {
            // S3バケットが正確に4つ存在することを確認
            template.resourceCountIs('AWS::S3::Bucket', 4);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcY2RrXFxfX3Rlc3RzX19cXHMzLWJ1Y2tldHMudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7R0FPRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFSCxpREFBbUM7QUFDbkMsdURBQXlEO0FBQ3pELGtGQUE0RTtBQUU1RSxRQUFRLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRTtJQUMxQixJQUFJLFFBQWtCLENBQUM7SUFDdkIsTUFBTSxhQUFhLEdBQUcsY0FBYyxDQUFDO0lBRXJDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDYixNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUMxQixNQUFNLEtBQUssR0FBRyxJQUFJLG9EQUF1QixDQUFDLEdBQUcsRUFBRSxXQUFXLEVBQUU7WUFDMUQsR0FBRyxFQUFFLEVBQUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLEVBQUUsZ0JBQWdCLEVBQUU7U0FDMUQsQ0FBQyxDQUFDO1FBQ0gsUUFBUSxHQUFHLHFCQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3ZDLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUU7UUFDM0IsRUFBRSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtZQUM3QyxRQUFRLENBQUMscUJBQXFCLENBQUMsaUJBQWlCLEVBQUU7Z0JBQ2hELFVBQVUsRUFBRSxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLGdDQUFnQyxFQUFFLEVBQUUsR0FBRyxFQUFFLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxFQUFFO2FBQ2hHLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGdDQUFnQyxFQUFFLEdBQUcsRUFBRTtZQUN4QyxRQUFRLENBQUMscUJBQXFCLENBQUMsaUJBQWlCLEVBQUU7Z0JB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O2dCQUNqRSxVQUFVLEVBQUU7b0JBQ1YsVUFBVSxFQUFFLHlCQUF5QixhQUFhLEVBQUU7aUJBQ3JEO2FBQ0YsQ0FBQyxDQUFDO1lBRUgsTUFBTSxhQUFhLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNqRCxNQUFNLG1CQUFtQixHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUU3RCxNQUFNLENBQ0osVUFBVSxDQUFDLGFBQWEsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxzQkFBc0IsQ0FDNUQsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUNoQixNQUFNLENBQ0osZ0JBQWdCLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxVQUFVLENBQUMsc0JBQXNCLENBQ3hFLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDbEIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxjQUFjLEVBQUUsR0FBRyxFQUFFO1FBQzVCLEVBQUUsQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUU7WUFDMUMsd0JBQXdCO1lBQ3hCLFFBQVEsQ0FBQyxlQUFlLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDakQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcdGkxOThcXGludmVzdG1lbnRfYW5hbHlzaXNfb3BvcG9cXGNka1xcX190ZXN0c19fXFxzMy1idWNrZXRzLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFMzIEJ1Y2tldCBTdHJ1Y3R1cmUgVmVyaWZpY2F0aW9uIFRlc3RcclxuICpcclxuICogVGFzayA0LjI6IFMz44OQ44Kx44OD44OI5qeL6YCg44Gu5qSc6Ki844OG44K544OIXHJcbiAqIFJlcXVpcmVtZW50czog6KaB5Lu2My41LCAxMi40LCAxMy4z77yI44OV44Kh44Kk44Or44K544OI44Os44O844K444CB44Kz44K544OI5pyA6YGp5YyW44CB5pqX5Y+35YyW77yJXHJcbiAqXHJcbiAqIOOBk+OBruODhuOCueODiOOBr+OAgUNES+OBp+Wumue+qeOBleOCjOOBn1Mz44OQ44Kx44OD44OI44GM6Kit6KiI6YCa44KK44Gr5qeL5oiQ44GV44KM44Gm44GE44KL44GT44Go44KS5qSc6Ki844GX44G+44GZ44CCXHJcbiAqL1xyXG5cclxuaW1wb3J0ICogYXMgY2RrIGZyb20gJ2F3cy1jZGstbGliJztcclxuaW1wb3J0IHsgVGVtcGxhdGUsIE1hdGNoIH0gZnJvbSAnYXdzLWNkay1saWIvYXNzZXJ0aW9ucyc7XHJcbmltcG9ydCB7IFRkbmV0RGF0YUNvbGxlY3RvclN0YWNrIH0gZnJvbSAnLi4vbGliL3RkbmV0LWRhdGEtY29sbGVjdG9yLXN0YWNrJztcclxuXHJcbmRlc2NyaWJlKCdTMyBCdWNrZXRzJywgKCkgPT4ge1xyXG4gIGxldCB0ZW1wbGF0ZTogVGVtcGxhdGU7XHJcbiAgY29uc3QgdGVzdEFjY291bnRJZCA9ICcxMjM0NTY3ODkwMTInO1xyXG5cclxuICBiZWZvcmVBbGwoKCkgPT4ge1xyXG4gICAgY29uc3QgYXBwID0gbmV3IGNkay5BcHAoKTtcclxuICAgIGNvbnN0IHN0YWNrID0gbmV3IFRkbmV0RGF0YUNvbGxlY3RvclN0YWNrKGFwcCwgJ1Rlc3RTdGFjaycsIHtcclxuICAgICAgZW52OiB7IGFjY291bnQ6IHRlc3RBY2NvdW50SWQsIHJlZ2lvbjogJ2FwLW5vcnRoZWFzdC0xJyB9LFxyXG4gICAgfSk7XHJcbiAgICB0ZW1wbGF0ZSA9IFRlbXBsYXRlLmZyb21TdGFjayhzdGFjayk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQREZzIEJ1Y2tldCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgYmUgY3JlYXRlZCB3aXRoIGNvcnJlY3QgbmFtZScsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgQnVja2V0TmFtZTogeyAnRm46OkpvaW4nOiBbJycsIFsndGRuZXQtZGF0YS1jb2xsZWN0b3ItcGRmcy1kZXYtJywgeyBSZWY6ICdBV1M6OkFjY291bnRJZCcgfV1dIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGVuY3J5cHRpb24gZW5hYmxlZCcsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgQnVja2V0TmFtZTogeyAnRm46OkpvaW4nOiBbJycsIFsndGRuZXQtZGF0YS1jb2xsZWN0b3ItcGRmcy1kZXYtJywgeyBSZWY6ICdBV1M6OkFjY291bnRJZCcgfV1dIH0sXHJcbiAgICAgICAgQnVja2V0RW5jcnlwdGlvbjoge1xyXG4gICAgICAgICAgU2VydmVyU2lkZUVuY3J5cHRpb25Db25maWd1cmF0aW9uOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBTZXJ2ZXJTaWRlRW5jcnlwdGlvbkJ5RGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgU1NFQWxnb3JpdGhtOiAnQUVTMjU2JywgLy8gUzPjg57jg43jg7zjgrjjg4nmmpflj7fljJZcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGF2ZSBwdWJsaWMgYWNjZXNzIGJsb2NrZWQnLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgIEJ1Y2tldE5hbWU6IHsgJ0ZuOjpKb2luJzogWycnLCBbJ3RkbmV0LWRhdGEtY29sbGVjdG9yLXBkZnMtZGV2LScsIHsgUmVmOiAnQVdTOjpBY2NvdW50SWQnIH1dXSB9LFxyXG4gICAgICAgIFB1YmxpY0FjY2Vzc0Jsb2NrQ29uZmlndXJhdGlvbjoge1xyXG4gICAgICAgICAgQmxvY2tQdWJsaWNBY2xzOiB0cnVlLFxyXG4gICAgICAgICAgQmxvY2tQdWJsaWNQb2xpY3k6IHRydWUsXHJcbiAgICAgICAgICBJZ25vcmVQdWJsaWNBY2xzOiB0cnVlLFxyXG4gICAgICAgICAgUmVzdHJpY3RQdWJsaWNCdWNrZXRzOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHZlcnNpb25pbmcgZW5hYmxlZCcsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgQnVja2V0TmFtZTogeyAnRm46OkpvaW4nOiBbJycsIFsndGRuZXQtZGF0YS1jb2xsZWN0b3ItcGRmcy1kZXYtJywgeyBSZWY6ICdBV1M6OkFjY291bnRJZCcgfV1dIH0sXHJcbiAgICAgICAgVmVyc2lvbmluZ0NvbmZpZ3VyYXRpb246IHtcclxuICAgICAgICAgIFN0YXR1czogJ0VuYWJsZWQnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGxpZmVjeWNsZSBydWxlcyBmb3IgY29zdCBvcHRpbWl6YXRpb24nLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgIEJ1Y2tldE5hbWU6IHsgJ0ZuOjpKb2luJzogWycnLCBbJ3RkbmV0LWRhdGEtY29sbGVjdG9yLXBkZnMtZGV2LScsIHsgUmVmOiAnQVdTOjpBY2NvdW50SWQnIH1dXSB9LFxyXG4gICAgICAgIExpZmVjeWNsZUNvbmZpZ3VyYXRpb246IHtcclxuICAgICAgICAgIFJ1bGVzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBJZDogJ1RyYW5zaXRpb25Ub1N0YW5kYXJkSUEnLFxyXG4gICAgICAgICAgICAgIFN0YXR1czogJ0VuYWJsZWQnLFxyXG4gICAgICAgICAgICAgIFRyYW5zaXRpb25zOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgIFN0b3JhZ2VDbGFzczogJ1NUQU5EQVJEX0lBJyxcclxuICAgICAgICAgICAgICAgICAgVHJhbnNpdGlvbkluRGF5czogOTAsIC8vIDkw5pel5b6M44GrU3RhbmRhcmQtSUHjgavnp7vooYxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgIFN0b3JhZ2VDbGFzczogJ0dMQUNJRVInLFxyXG4gICAgICAgICAgICAgICAgICBUcmFuc2l0aW9uSW5EYXlzOiAzNjUsIC8vIDM2NeaXpeW+jOOBq0dsYWNpZXLjgavnp7vooYxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0V4cG9ydHMgQnVja2V0JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBiZSBjcmVhdGVkIHdpdGggY29ycmVjdCBuYW1lJywgKCkgPT4ge1xyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6UzM6OkJ1Y2tldCcsIHtcclxuICAgICAgICBCdWNrZXROYW1lOiB7ICdGbjo6Sm9pbic6IFsnJywgWyd0ZG5ldC1kYXRhLWNvbGxlY3Rvci1leHBvcnRzLWRldi0nLCB7IFJlZjogJ0FXUzo6QWNjb3VudElkJyB9XV0gfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgZW5jcnlwdGlvbiBlbmFibGVkJywgKCkgPT4ge1xyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6UzM6OkJ1Y2tldCcsIHtcclxuICAgICAgICBCdWNrZXROYW1lOiB7ICdGbjo6Sm9pbic6IFsnJywgWyd0ZG5ldC1kYXRhLWNvbGxlY3Rvci1leHBvcnRzLWRldi0nLCB7IFJlZjogJ0FXUzo6QWNjb3VudElkJyB9XV0gfSxcclxuICAgICAgICBCdWNrZXRFbmNyeXB0aW9uOiB7XHJcbiAgICAgICAgICBTZXJ2ZXJTaWRlRW5jcnlwdGlvbkNvbmZpZ3VyYXRpb246IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIFNlcnZlclNpZGVFbmNyeXB0aW9uQnlEZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICBTU0VBbGdvcml0aG06ICdBRVMyNTYnLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHB1YmxpYyBhY2Nlc3MgYmxvY2tlZCcsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgQnVja2V0TmFtZTogeyAnRm46OkpvaW4nOiBbJycsIFsndGRuZXQtZGF0YS1jb2xsZWN0b3ItZXhwb3J0cy1kZXYtJywgeyBSZWY6ICdBV1M6OkFjY291bnRJZCcgfV1dIH0sXHJcbiAgICAgICAgUHVibGljQWNjZXNzQmxvY2tDb25maWd1cmF0aW9uOiB7XHJcbiAgICAgICAgICBCbG9ja1B1YmxpY0FjbHM6IHRydWUsXHJcbiAgICAgICAgICBCbG9ja1B1YmxpY1BvbGljeTogdHJ1ZSxcclxuICAgICAgICAgIElnbm9yZVB1YmxpY0FjbHM6IHRydWUsXHJcbiAgICAgICAgICBSZXN0cmljdFB1YmxpY0J1Y2tldHM6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgdmVyc2lvbmluZyBlbmFibGVkJywgKCkgPT4ge1xyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6UzM6OkJ1Y2tldCcsIHtcclxuICAgICAgICBCdWNrZXROYW1lOiB7ICdGbjo6Sm9pbic6IFsnJywgWyd0ZG5ldC1kYXRhLWNvbGxlY3Rvci1leHBvcnRzLWRldi0nLCB7IFJlZjogJ0FXUzo6QWNjb3VudElkJyB9XV0gfSxcclxuICAgICAgICBWZXJzaW9uaW5nQ29uZmlndXJhdGlvbjoge1xyXG4gICAgICAgICAgU3RhdHVzOiAnRW5hYmxlZCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgbGlmZWN5Y2xlIHJ1bGUgdG8gZGVsZXRlIGFmdGVyIDcgZGF5cycsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgQnVja2V0TmFtZTogeyAnRm46OkpvaW4nOiBbJycsIFsndGRuZXQtZGF0YS1jb2xsZWN0b3ItZXhwb3J0cy1kZXYtJywgeyBSZWY6ICdBV1M6OkFjY291bnRJZCcgfV1dIH0sXHJcbiAgICAgICAgTGlmZWN5Y2xlQ29uZmlndXJhdGlvbjoge1xyXG4gICAgICAgICAgUnVsZXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIElkOiAnRGVsZXRlQWZ0ZXI3RGF5cycsXHJcbiAgICAgICAgICAgICAgU3RhdHVzOiAnRW5hYmxlZCcsXHJcbiAgICAgICAgICAgICAgRXhwaXJhdGlvbkluRGF5czogNywgLy8gN+aXpeW+jOOBq+iHquWLleWJiumZpFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnRGFzaGJvYXJkIEJ1Y2tldCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgYmUgY3JlYXRlZCB3aXRoIGNvcnJlY3QgbmFtZScsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgQnVja2V0TmFtZTogeyAnRm46OkpvaW4nOiBbJycsIFsndGRuZXQtZGFzaGJvYXJkLWRldi0nLCB7IFJlZjogJ0FXUzo6QWNjb3VudElkJyB9XV0gfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgZW5jcnlwdGlvbiBlbmFibGVkJywgKCkgPT4ge1xyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6UzM6OkJ1Y2tldCcsIHtcclxuICAgICAgICBCdWNrZXROYW1lOiB7ICdGbjo6Sm9pbic6IFsnJywgWyd0ZG5ldC1kYXNoYm9hcmQtZGV2LScsIHsgUmVmOiAnQVdTOjpBY2NvdW50SWQnIH1dXSB9LFxyXG4gICAgICAgIEJ1Y2tldEVuY3J5cHRpb246IHtcclxuICAgICAgICAgIFNlcnZlclNpZGVFbmNyeXB0aW9uQ29uZmlndXJhdGlvbjogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgU2VydmVyU2lkZUVuY3J5cHRpb25CeURlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgIFNTRUFsZ29yaXRobTogJ0FFUzI1NicsXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgcHVibGljIGFjY2VzcyBibG9ja2VkJywgKCkgPT4ge1xyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6UzM6OkJ1Y2tldCcsIHtcclxuICAgICAgICBCdWNrZXROYW1lOiB7ICdGbjo6Sm9pbic6IFsnJywgWyd0ZG5ldC1kYXNoYm9hcmQtZGV2LScsIHsgUmVmOiAnQVdTOjpBY2NvdW50SWQnIH1dXSB9LFxyXG4gICAgICAgIFB1YmxpY0FjY2Vzc0Jsb2NrQ29uZmlndXJhdGlvbjoge1xyXG4gICAgICAgICAgQmxvY2tQdWJsaWNBY2xzOiB0cnVlLFxyXG4gICAgICAgICAgQmxvY2tQdWJsaWNQb2xpY3k6IHRydWUsXHJcbiAgICAgICAgICBJZ25vcmVQdWJsaWNBY2xzOiB0cnVlLFxyXG4gICAgICAgICAgUmVzdHJpY3RQdWJsaWNCdWNrZXRzOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHZlcnNpb25pbmcgZW5hYmxlZCcsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgQnVja2V0TmFtZTogeyAnRm46OkpvaW4nOiBbJycsIFsndGRuZXQtZGFzaGJvYXJkLWRldi0nLCB7IFJlZjogJ0FXUzo6QWNjb3VudElkJyB9XV0gfSxcclxuICAgICAgICBWZXJzaW9uaW5nQ29uZmlndXJhdGlvbjoge1xyXG4gICAgICAgICAgU3RhdHVzOiAnRW5hYmxlZCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIG5vdCBoYXZlIGxpZmVjeWNsZSBydWxlcyAoc3RhdGljIGZpbGVzIHBlcnNpc3QpJywgKCkgPT4ge1xyXG4gICAgICAvLyDjg4Djg4Pjgrfjg6Xjg5zjg7zjg4njg5DjgrHjg4Pjg4jjga/jg6njgqTjg5XjgrXjgqTjgq/jg6vjg6vjg7zjg6vjgpLmjIHjgZ/jgarjgYRcclxuICAgICAgY29uc3QgcmVzb3VyY2VzID0gdGVtcGxhdGUudG9KU09OKCkuUmVzb3VyY2VzO1xyXG4gICAgICBjb25zdCBkYXNoYm9hcmRCdWNrZXQgPSBPYmplY3QudmFsdWVzKHJlc291cmNlcykuZmluZChcclxuICAgICAgICAocjogYW55KSA9PiByLlR5cGUgPT09ICdBV1M6OlMzOjpCdWNrZXQnICYmIFxyXG4gICAgICAgIHIuUHJvcGVydGllcz8uQnVja2V0TmFtZT8uWydGbjo6Sm9pbiddPy5bMV0/LlswXSA9PT0gJ3RkbmV0LWRhc2hib2FyZC1kZXYtJ1xyXG4gICAgICApIGFzIGFueTtcclxuXHJcbiAgICAgIGV4cGVjdChkYXNoYm9hcmRCdWNrZXQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChkYXNoYm9hcmRCdWNrZXQuUHJvcGVydGllcy5MaWZlY3ljbGVDb25maWd1cmF0aW9uKS50b0JlVW5kZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0Nsb3VkVHJhaWwgTG9ncyBCdWNrZXQnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGJlIGNyZWF0ZWQgd2l0aCBjb3JyZWN0IG5hbWUnLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgIEJ1Y2tldE5hbWU6IGB0ZG5ldC1jbG91ZHRyYWlsLWxvZ3MtJHt0ZXN0QWNjb3VudElkfWAsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGVuY3J5cHRpb24gZW5hYmxlZCcsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgQnVja2V0TmFtZTogYHRkbmV0LWNsb3VkdHJhaWwtbG9ncy0ke3Rlc3RBY2NvdW50SWR9YCxcclxuICAgICAgICBCdWNrZXRFbmNyeXB0aW9uOiB7XHJcbiAgICAgICAgICBTZXJ2ZXJTaWRlRW5jcnlwdGlvbkNvbmZpZ3VyYXRpb246IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIFNlcnZlclNpZGVFbmNyeXB0aW9uQnlEZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICBTU0VBbGdvcml0aG06ICdBRVMyNTYnLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHB1YmxpYyBhY2Nlc3MgYmxvY2tlZCcsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgQnVja2V0TmFtZTogYHRkbmV0LWNsb3VkdHJhaWwtbG9ncy0ke3Rlc3RBY2NvdW50SWR9YCxcclxuICAgICAgICBQdWJsaWNBY2Nlc3NCbG9ja0NvbmZpZ3VyYXRpb246IHtcclxuICAgICAgICAgIEJsb2NrUHVibGljQWNsczogdHJ1ZSxcclxuICAgICAgICAgIEJsb2NrUHVibGljUG9saWN5OiB0cnVlLFxyXG4gICAgICAgICAgSWdub3JlUHVibGljQWNsczogdHJ1ZSxcclxuICAgICAgICAgIFJlc3RyaWN0UHVibGljQnVja2V0czogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGF2ZSB2ZXJzaW9uaW5nIGVuYWJsZWQnLCAoKSA9PiB7XHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpTMzo6QnVja2V0Jywge1xyXG4gICAgICAgIEJ1Y2tldE5hbWU6IGB0ZG5ldC1jbG91ZHRyYWlsLWxvZ3MtJHt0ZXN0QWNjb3VudElkfWAsXHJcbiAgICAgICAgVmVyc2lvbmluZ0NvbmZpZ3VyYXRpb246IHtcclxuICAgICAgICAgIFN0YXR1czogJ0VuYWJsZWQnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGxpZmVjeWNsZSBydWxlcyBmb3IgY29tcGxpYW5jZScsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgQnVja2V0TmFtZTogYHRkbmV0LWNsb3VkdHJhaWwtbG9ncy0ke3Rlc3RBY2NvdW50SWR9YCxcclxuICAgICAgICBMaWZlY3ljbGVDb25maWd1cmF0aW9uOiB7XHJcbiAgICAgICAgICBSdWxlczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgSWQ6ICdBcmNoaXZlQW5kRGVsZXRlJyxcclxuICAgICAgICAgICAgICBTdGF0dXM6ICdFbmFibGVkJyxcclxuICAgICAgICAgICAgICBUcmFuc2l0aW9uczogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBTdG9yYWdlQ2xhc3M6ICdHTEFDSUVSJyxcclxuICAgICAgICAgICAgICAgICAgVHJhbnNpdGlvbkluRGF5czogOTAsIC8vIDkw5pel5b6M44GrR2xhY2llcuOBq+enu+ihjFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgIEV4cGlyYXRpb25JbkRheXM6IDI1NTUsIC8vIDflubTlvozjgavoh6rli5XliYrpmaTvvIjjgrPjg7Pjg5fjg6njgqTjgqLjg7PjgrnopoHku7bvvIlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0Nsb3VkRm9ybWF0aW9uIE91dHB1dHMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGV4cG9ydCBQZGZzQnVja2V0TmFtZScsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzT3V0cHV0KCdQZGZzQnVja2V0TmFtZScsIHtcclxuICAgICAgICBWYWx1ZToge1xyXG4gICAgICAgICAgUmVmOiBNYXRjaC5zdHJpbmdMaWtlUmVnZXhwKCdQZGZzQnVja2V0JyksXHJcbiAgICAgICAgfSxcclxuICAgICAgICBFeHBvcnQ6IHtcclxuICAgICAgICAgIE5hbWU6ICdUZG5ldFBkZnNCdWNrZXROYW1lJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZXhwb3J0IEV4cG9ydHNCdWNrZXROYW1lJywgKCkgPT4ge1xyXG4gICAgICB0ZW1wbGF0ZS5oYXNPdXRwdXQoJ0V4cG9ydHNCdWNrZXROYW1lJywge1xyXG4gICAgICAgIFZhbHVlOiB7XHJcbiAgICAgICAgICBSZWY6IE1hdGNoLnN0cmluZ0xpa2VSZWdleHAoJ0V4cG9ydHNCdWNrZXQnKSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIEV4cG9ydDoge1xyXG4gICAgICAgICAgTmFtZTogJ1RkbmV0RXhwb3J0c0J1Y2tldE5hbWUnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBleHBvcnQgRGFzaGJvYXJkQnVja2V0TmFtZScsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzT3V0cHV0KCdEYXNoYm9hcmRCdWNrZXROYW1lJywge1xyXG4gICAgICAgIFZhbHVlOiB7XHJcbiAgICAgICAgICBSZWY6IE1hdGNoLnN0cmluZ0xpa2VSZWdleHAoJ0Rhc2hib2FyZEJ1Y2tldCcpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgRXhwb3J0OiB7XHJcbiAgICAgICAgICBOYW1lOiAnVGRuZXREYXNoYm9hcmRCdWNrZXROYW1lJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZXhwb3J0IENsb3VkVHJhaWxMb2dzQnVja2V0TmFtZScsICgpID0+IHtcclxuICAgICAgdGVtcGxhdGUuaGFzT3V0cHV0KCdDbG91ZFRyYWlsTG9nc0J1Y2tldE5hbWUnLCB7XHJcbiAgICAgICAgVmFsdWU6IHtcclxuICAgICAgICAgIFJlZjogTWF0Y2guc3RyaW5nTGlrZVJlZ2V4cCgnQ2xvdWRUcmFpbExvZ3NCdWNrZXQnKSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIEV4cG9ydDoge1xyXG4gICAgICAgICAgTmFtZTogJ1RkbmV0Q2xvdWRUcmFpbExvZ3NCdWNrZXROYW1lJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnU2VjdXJpdHkgYW5kIENvbXBsaWFuY2UnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgZW5jcnlwdGlvbiBlbmFibGVkIG9uIGFsbCBidWNrZXRzJywgKCkgPT4ge1xyXG4gICAgICAvLyDjgZnjgbnjgabjga5TM+ODkOOCseODg+ODiOOBp+aal+WPt+WMluOBjOacieWKueWMluOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICBjb25zdCBidWNrZXRzID0gdGVtcGxhdGUuZmluZFJlc291cmNlcygnQVdTOjpTMzo6QnVja2V0Jyk7XHJcbiAgICAgIGNvbnN0IGJ1Y2tldEtleXMgPSBPYmplY3Qua2V5cyhidWNrZXRzKTtcclxuXHJcbiAgICAgIGV4cGVjdChidWNrZXRLZXlzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCg0KTtcclxuXHJcbiAgICAgIGJ1Y2tldEtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgICAgY29uc3QgYnVja2V0ID0gYnVja2V0c1trZXldO1xyXG4gICAgICAgIGV4cGVjdChidWNrZXQuUHJvcGVydGllcy5CdWNrZXRFbmNyeXB0aW9uKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICAgIGV4cGVjdChcclxuICAgICAgICAgIGJ1Y2tldC5Qcm9wZXJ0aWVzLkJ1Y2tldEVuY3J5cHRpb24uU2VydmVyU2lkZUVuY3J5cHRpb25Db25maWd1cmF0aW9uXHJcbiAgICAgICAgKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICAgIGV4cGVjdChcclxuICAgICAgICAgIGJ1Y2tldC5Qcm9wZXJ0aWVzLkJ1Y2tldEVuY3J5cHRpb25cclxuICAgICAgICAgICAgLlNlcnZlclNpZGVFbmNyeXB0aW9uQ29uZmlndXJhdGlvblswXS5TZXJ2ZXJTaWRlRW5jcnlwdGlvbkJ5RGVmYXVsdFxyXG4gICAgICAgICAgICAuU1NFQWxnb3JpdGhtXHJcbiAgICAgICAgKS50b0JlKCdBRVMyNTYnKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgcHVibGljIGFjY2VzcyBibG9ja2VkIG9uIGFsbCBidWNrZXRzJywgKCkgPT4ge1xyXG4gICAgICAvLyDjgZnjgbnjgabjga5TM+ODkOOCseODg+ODiOOBp+ODkeODluODquODg+OCr+OCouOCr+OCu+OCueOBjOODluODreODg+OCr+OBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICBjb25zdCBidWNrZXRzID0gdGVtcGxhdGUuZmluZFJlc291cmNlcygnQVdTOjpTMzo6QnVja2V0Jyk7XHJcbiAgICAgIGNvbnN0IGJ1Y2tldEtleXMgPSBPYmplY3Qua2V5cyhidWNrZXRzKTtcclxuXHJcbiAgICAgIGJ1Y2tldEtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgICAgY29uc3QgYnVja2V0ID0gYnVja2V0c1trZXldO1xyXG4gICAgICAgIGV4cGVjdChidWNrZXQuUHJvcGVydGllcy5QdWJsaWNBY2Nlc3NCbG9ja0NvbmZpZ3VyYXRpb24pLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgICAgZXhwZWN0KFxyXG4gICAgICAgICAgYnVja2V0LlByb3BlcnRpZXMuUHVibGljQWNjZXNzQmxvY2tDb25maWd1cmF0aW9uLkJsb2NrUHVibGljQWNsc1xyXG4gICAgICAgICkudG9CZSh0cnVlKTtcclxuICAgICAgICBleHBlY3QoXHJcbiAgICAgICAgICBidWNrZXQuUHJvcGVydGllcy5QdWJsaWNBY2Nlc3NCbG9ja0NvbmZpZ3VyYXRpb24uQmxvY2tQdWJsaWNQb2xpY3lcclxuICAgICAgICApLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgZXhwZWN0KFxyXG4gICAgICAgICAgYnVja2V0LlByb3BlcnRpZXMuUHVibGljQWNjZXNzQmxvY2tDb25maWd1cmF0aW9uLklnbm9yZVB1YmxpY0FjbHNcclxuICAgICAgICApLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgZXhwZWN0KFxyXG4gICAgICAgICAgYnVja2V0LlByb3BlcnRpZXMuUHVibGljQWNjZXNzQmxvY2tDb25maWd1cmF0aW9uXHJcbiAgICAgICAgICAgIC5SZXN0cmljdFB1YmxpY0J1Y2tldHNcclxuICAgICAgICApLnRvQmUodHJ1ZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHZlcnNpb25pbmcgZW5hYmxlZCBvbiBhbGwgYnVja2V0cycsICgpID0+IHtcclxuICAgICAgLy8g44GZ44G544Gm44GuUzPjg5DjgrHjg4Pjg4jjgafjg5Djg7zjgrjjg6fjg4vjg7PjgrDjgYzmnInlirnljJbjgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgY29uc3QgYnVja2V0cyA9IHRlbXBsYXRlLmZpbmRSZXNvdXJjZXMoJ0FXUzo6UzM6OkJ1Y2tldCcpO1xyXG4gICAgICBjb25zdCBidWNrZXRLZXlzID0gT2JqZWN0LmtleXMoYnVja2V0cyk7XHJcblxyXG4gICAgICBidWNrZXRLZXlzLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJ1Y2tldCA9IGJ1Y2tldHNba2V5XTtcclxuICAgICAgICBleHBlY3QoYnVja2V0LlByb3BlcnRpZXMuVmVyc2lvbmluZ0NvbmZpZ3VyYXRpb24pLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgICAgZXhwZWN0KGJ1Y2tldC5Qcm9wZXJ0aWVzLlZlcnNpb25pbmdDb25maWd1cmF0aW9uLlN0YXR1cykudG9CZShcclxuICAgICAgICAgICdFbmFibGVkJ1xyXG4gICAgICAgICk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGxpZmVjeWNsZSBydWxlcyBmb3IgY29zdCBvcHRpbWl6YXRpb24nLCAoKSA9PiB7XHJcbiAgICAgIC8vIFBERuODkOOCseODg+ODiOOBqENsb3VkVHJhaWzjg63jgrDjg5DjgrHjg4Pjg4jjgavjg6njgqTjg5XjgrXjgqTjgq/jg6vjg6vjg7zjg6vjgYzoqK3lrprjgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgY29uc3QgcGRmc0J1Y2tldCA9IHRlbXBsYXRlLmZpbmRSZXNvdXJjZXMoJ0FXUzo6UzM6OkJ1Y2tldCcsIHtcclxuICAgICAgICBQcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgICBCdWNrZXROYW1lOiBgdGRuZXQtZGF0YS1jb2xsZWN0b3ItcGRmcy0ke3Rlc3RBY2NvdW50SWR9YCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGNsb3VkdHJhaWxCdWNrZXQgPSB0ZW1wbGF0ZS5maW5kUmVzb3VyY2VzKCdBV1M6OlMzOjpCdWNrZXQnLCB7XHJcbiAgICAgICAgUHJvcGVydGllczoge1xyXG4gICAgICAgICAgQnVja2V0TmFtZTogYHRkbmV0LWNsb3VkdHJhaWwtbG9ncy0ke3Rlc3RBY2NvdW50SWR9YCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHBkZnNCdWNrZXRLZXkgPSBPYmplY3Qua2V5cyhwZGZzQnVja2V0KVswXTtcclxuICAgICAgY29uc3QgY2xvdWR0cmFpbEJ1Y2tldEtleSA9IE9iamVjdC5rZXlzKGNsb3VkdHJhaWxCdWNrZXQpWzBdO1xyXG5cclxuICAgICAgZXhwZWN0KFxyXG4gICAgICAgIHBkZnNCdWNrZXRbcGRmc0J1Y2tldEtleV0uUHJvcGVydGllcy5MaWZlY3ljbGVDb25maWd1cmF0aW9uXHJcbiAgICAgICkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KFxyXG4gICAgICAgIGNsb3VkdHJhaWxCdWNrZXRbY2xvdWR0cmFpbEJ1Y2tldEtleV0uUHJvcGVydGllcy5MaWZlY3ljbGVDb25maWd1cmF0aW9uXHJcbiAgICAgICkudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQnVja2V0IENvdW50JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGV4YWN0bHkgNCBTMyBidWNrZXRzJywgKCkgPT4ge1xyXG4gICAgICAvLyBTM+ODkOOCseODg+ODiOOBjOato+eiuuOBqzTjgaTlrZjlnKjjgZnjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgdGVtcGxhdGUucmVzb3VyY2VDb3VudElzKCdBV1M6OlMzOjpCdWNrZXQnLCA0KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sInZlcnNpb24iOjN9