5e4d69a71915ba0686c92c3ddc5e5b99
"use strict";

/**
 * S3エクスポート
 *
 * JSON/CSV形式でS3に保存します。大量データ対応（ストリーム処理）。
 *
 * Requirements: 要件5.2（エクスポート形式）
 */
/* istanbul ignore next */
function cov_1vn32myjbx() {
  var path = "C:\\Users\\ti198\\investment_analysis_opopo\\src\\lambda\\export\\export-to-s3.ts";
  var hash = "6cdf097a5f415b9a718ff1406c8cd5dba313a348";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\ti198\\investment_analysis_opopo\\src\\lambda\\export\\export-to-s3.ts",
    statementMap: {
      "0": {
        start: {
          line: 9,
          column: 0
        },
        end: {
          line: 9,
          column: 62
        }
      },
      "1": {
        start: {
          line: 10,
          column: 0
        },
        end: {
          line: 10,
          column: 32
        }
      },
      "2": {
        start: {
          line: 11,
          column: 20
        },
        end: {
          line: 11,
          column: 49
        }
      },
      "3": {
        start: {
          line: 12,
          column: 17
        },
        end: {
          line: 12,
          column: 46
        }
      },
      "4": {
        start: {
          line: 13,
          column: 16
        },
        end: {
          line: 13,
          column: 44
        }
      },
      "5": {
        start: {
          line: 15,
          column: 17
        },
        end: {
          line: 15,
          column: 97
        }
      },
      "6": {
        start: {
          line: 17,
          column: 22
        },
        end: {
          line: 17,
          column: 71
        }
      },
      "7": {
        start: {
          line: 27,
          column: 4
        },
        end: {
          line: 31,
          column: 7
        }
      },
      "8": {
        start: {
          line: 33,
          column: 19
        },
        end: {
          line: 33,
          column: 51
        }
      },
      "9": {
        start: {
          line: 35,
          column: 20
        },
        end: {
          line: 35,
          column: 80
        }
      },
      "10": {
        start: {
          line: 37,
          column: 4
        },
        end: {
          line: 51,
          column: 7
        }
      },
      "11": {
        start: {
          line: 38,
          column: 8
        },
        end: {
          line: 45,
          column: 12
        }
      },
      "12": {
        start: {
          line: 52,
          column: 4
        },
        end: {
          line: 56,
          column: 7
        }
      },
      "13": {
        start: {
          line: 57,
          column: 4
        },
        end: {
          line: 57,
          column: 18
        }
      },
      "14": {
        start: {
          line: 70,
          column: 16
        },
        end: {
          line: 70,
          column: 26
        }
      },
      "15": {
        start: {
          line: 71,
          column: 17
        },
        end: {
          line: 71,
          column: 37
        }
      },
      "16": {
        start: {
          line: 72,
          column: 18
        },
        end: {
          line: 72,
          column: 64
        }
      },
      "17": {
        start: {
          line: 73,
          column: 16
        },
        end: {
          line: 73,
          column: 57
        }
      },
      "18": {
        start: {
          line: 74,
          column: 4
        },
        end: {
          line: 74,
          column: 68
        }
      },
      "19": {
        start: {
          line: 83,
          column: 4
        },
        end: {
          line: 86,
          column: 16
        }
      },
      "20": {
        start: {
          line: 96,
          column: 20
        },
        end: {
          line: 107,
          column: 5
        }
      },
      "21": {
        start: {
          line: 109,
          column: 22
        },
        end: {
          line: 109,
          column: 39
        }
      },
      "22": {
        start: {
          line: 111,
          column: 21
        },
        end: {
          line: 119,
          column: 6
        }
      },
      "23": {
        start: {
          line: 112,
          column: 8
        },
        end: {
          line: 118,
          column: 23
        }
      },
      "24": {
        start: {
          line: 114,
          column: 26
        },
        end: {
          line: 114,
          column: 44
        }
      },
      "25": {
        start: {
          line: 116,
          column: 12
        },
        end: {
          line: 116,
          column: 49
        }
      },
      "26": {
        start: {
          line: 121,
          column: 4
        },
        end: {
          line: 121,
          column: 47
        }
      },
      "27": {
        start: {
          line: 134,
          column: 4
        },
        end: {
          line: 138,
          column: 5
        }
      },
      "28": {
        start: {
          line: 136,
          column: 24
        },
        end: {
          line: 136,
          column: 49
        }
      },
      "29": {
        start: {
          line: 137,
          column: 8
        },
        end: {
          line: 137,
          column: 30
        }
      },
      "30": {
        start: {
          line: 139,
          column: 4
        },
        end: {
          line: 139,
          column: 17
        }
      }
    },
    fnMap: {
      "0": {
        name: "exportToS3",
        decl: {
          start: {
            line: 26,
            column: 15
          },
          end: {
            line: 26,
            column: 25
          }
        },
        loc: {
          start: {
            line: 26,
            column: 58
          },
          end: {
            line: 58,
            column: 1
          }
        },
        line: 26
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 37,
            column: 40
          },
          end: {
            line: 37,
            column: 41
          }
        },
        loc: {
          start: {
            line: 37,
            column: 52
          },
          end: {
            line: 46,
            column: 5
          }
        },
        line: 37
      },
      "2": {
        name: "generateS3Key",
        decl: {
          start: {
            line: 69,
            column: 9
          },
          end: {
            line: 69,
            column: 22
          }
        },
        loc: {
          start: {
            line: 69,
            column: 42
          },
          end: {
            line: 75,
            column: 1
          }
        },
        line: 69
      },
      "3": {
        name: "toJSON",
        decl: {
          start: {
            line: 82,
            column: 9
          },
          end: {
            line: 82,
            column: 15
          }
        },
        loc: {
          start: {
            line: 82,
            column: 29
          },
          end: {
            line: 87,
            column: 1
          }
        },
        line: 82
      },
      "4": {
        name: "toCSV",
        decl: {
          start: {
            line: 94,
            column: 9
          },
          end: {
            line: 94,
            column: 14
          }
        },
        loc: {
          start: {
            line: 94,
            column: 28
          },
          end: {
            line: 122,
            column: 1
          }
        },
        line: 94
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 111,
            column: 37
          },
          end: {
            line: 111,
            column: 38
          }
        },
        loc: {
          start: {
            line: 111,
            column: 53
          },
          end: {
            line: 119,
            column: 5
          }
        },
        line: 111
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 113,
            column: 17
          },
          end: {
            line: 113,
            column: 18
          }
        },
        loc: {
          start: {
            line: 113,
            column: 29
          },
          end: {
            line: 117,
            column: 9
          }
        },
        line: 113
      },
      "7": {
        name: "escapeCSVValue",
        decl: {
          start: {
            line: 132,
            column: 9
          },
          end: {
            line: 132,
            column: 23
          }
        },
        loc: {
          start: {
            line: 132,
            column: 31
          },
          end: {
            line: 140,
            column: 1
          }
        },
        line: 132
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 15,
            column: 52
          },
          end: {
            line: 15,
            column: 94
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 15,
            column: 52
          },
          end: {
            line: 15,
            column: 74
          }
        }, {
          start: {
            line: 15,
            column: 78
          },
          end: {
            line: 15,
            column: 94
          }
        }],
        line: 15
      },
      "1": {
        loc: {
          start: {
            line: 17,
            column: 22
          },
          end: {
            line: 17,
            column: 71
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 17,
            column: 22
          },
          end: {
            line: 17,
            column: 52
          }
        }, {
          start: {
            line: 17,
            column: 56
          },
          end: {
            line: 17,
            column: 71
          }
        }],
        line: 17
      },
      "2": {
        loc: {
          start: {
            line: 35,
            column: 20
          },
          end: {
            line: 35,
            column: 80
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 35,
            column: 40
          },
          end: {
            line: 35,
            column: 59
          }
        }, {
          start: {
            line: 35,
            column: 62
          },
          end: {
            line: 35,
            column: 80
          }
        }],
        line: 35
      },
      "3": {
        loc: {
          start: {
            line: 42,
            column: 25
          },
          end: {
            line: 42,
            column: 76
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 42,
            column: 45
          },
          end: {
            line: 42,
            column: 63
          }
        }, {
          start: {
            line: 42,
            column: 66
          },
          end: {
            line: 42,
            column: 76
          }
        }],
        line: 42
      },
      "4": {
        loc: {
          start: {
            line: 134,
            column: 4
          },
          end: {
            line: 138,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 134,
            column: 4
          },
          end: {
            line: 138,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 134
      },
      "5": {
        loc: {
          start: {
            line: 134,
            column: 8
          },
          end: {
            line: 134,
            column: 74
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 134,
            column: 8
          },
          end: {
            line: 134,
            column: 27
          }
        }, {
          start: {
            line: 134,
            column: 31
          },
          end: {
            line: 134,
            column: 50
          }
        }, {
          start: {
            line: 134,
            column: 54
          },
          end: {
            line: 134,
            column: 74
          }
        }],
        line: 134
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0, 0]
    },
    inputSourceMap: {
      file: "C:\\Users\\ti198\\investment_analysis_opopo\\src\\lambda\\export\\export-to-s3.ts",
      mappings: "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",
      names: [],
      sources: ["C:\\Users\\ti198\\investment_analysis_opopo\\src\\lambda\\export\\export-to-s3.ts"],
      sourcesContent: ["/**\r\n * S3\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\r\n *\r\n * JSON/CSV\u5F62\u5F0F\u3067S3\u306B\u4FDD\u5B58\u3057\u307E\u3059\u3002\u5927\u91CF\u30C7\u30FC\u30BF\u5BFE\u5FDC\uFF08\u30B9\u30C8\u30EA\u30FC\u30E0\u51E6\u7406\uFF09\u3002\r\n *\r\n * Requirements: \u8981\u4EF65.2\uFF08\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u5F62\u5F0F\uFF09\r\n */\r\n\r\nimport { S3Client, PutObjectCommand } from '@aws-sdk/client-s3';\r\nimport { logger } from '../../utils/logger';\r\nimport { retryWithBackoff } from '../../utils/retry';\r\nimport { Disclosure } from '../../types';\r\n\r\n// S3\u30AF\u30E9\u30A4\u30A2\u30F3\u30C8\uFF08\u30B0\u30ED\u30FC\u30D0\u30EB\u30B9\u30B3\u30FC\u30D7\u3067\u521D\u671F\u5316\uFF09\r\nconst s3Client = new S3Client({ region: process.env.AWS_REGION || 'ap-northeast-1' });\r\n\r\n// \u74B0\u5883\u5909\u6570\r\nconst EXPORT_BUCKET = process.env.EXPORT_BUCKET_NAME || 'tdnet-exports';\r\n\r\n/**\r\n * S3\u306B\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\r\n *\r\n * @param export_id \u30A8\u30AF\u30B9\u30DD\u30FC\u30C8ID\r\n * @param disclosures \u958B\u793A\u60C5\u5831\u306E\u30EA\u30B9\u30C8\r\n * @param format \u30D5\u30A9\u30FC\u30DE\u30C3\u30C8\uFF08json, csv\uFF09\r\n * @returns S3\u30AD\u30FC\r\n */\r\nexport async function exportToS3(\r\n  export_id: string,\r\n  disclosures: Disclosure[],\r\n  format: 'json' | 'csv'\r\n): Promise<string> {\r\n  logger.info('Exporting to S3', {\r\n    export_id,\r\n    format,\r\n    count: disclosures.length,\r\n  });\r\n\r\n  // S3\u30AD\u30FC\u3092\u751F\u6210\r\n  const s3_key = generateS3Key(export_id, format);\r\n\r\n  // \u30D5\u30A9\u30FC\u30DE\u30C3\u30C8\u306B\u5FDC\u3058\u3066\u5909\u63DB\r\n  const content = format === 'json' ? toJSON(disclosures) : toCSV(disclosures);\r\n\r\n  // S3\u306B\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\r\n  await retryWithBackoff(\r\n    async () => {\r\n      await s3Client.send(\r\n        new PutObjectCommand({\r\n          Bucket: EXPORT_BUCKET,\r\n          Key: s3_key,\r\n          Body: content,\r\n          ContentType: format === 'json' ? 'application/json' : 'text/csv',\r\n          // \u30E9\u30A4\u30D5\u30B5\u30A4\u30AF\u30EB\u30DD\u30EA\u30B7\u30FC\u30677\u65E5\u5F8C\u306B\u81EA\u52D5\u524A\u9664\u3055\u308C\u308B\u3088\u3046\u306B\u30BF\u30B0\u3092\u8A2D\u5B9A\r\n          Tagging: 'auto-delete=true',\r\n        })\r\n      );\r\n    },\r\n    {\r\n      maxRetries: 3,\r\n      initialDelay: 2000,\r\n      backoffMultiplier: 2,\r\n      jitter: true,\r\n    }\r\n  );\r\n\r\n  logger.info('Exported to S3 successfully', {\r\n    export_id,\r\n    s3_key,\r\n    size_bytes: Buffer.byteLength(content, 'utf8'),\r\n  });\r\n\r\n  return s3_key;\r\n}\r\n\r\n/**\r\n * S3\u30AD\u30FC\u3092\u751F\u6210\r\n *\r\n * \u30D5\u30A9\u30FC\u30DE\u30C3\u30C8: exports/YYYY/MM/DD/export_id.format\r\n * \u4F8B: exports/2024/01/15/export_1705305600000_abc123_12345678.json\r\n *\r\n * @param export_id \u30A8\u30AF\u30B9\u30DD\u30FC\u30C8ID\r\n * @param format \u30D5\u30A9\u30FC\u30DE\u30C3\u30C8\uFF08json, csv\uFF09\r\n * @returns S3\u30AD\u30FC\r\n */\r\nfunction generateS3Key(export_id: string, format: 'json' | 'csv'): string {\r\n  const now = new Date();\r\n  const year = now.getUTCFullYear();\r\n  const month = String(now.getUTCMonth() + 1).padStart(2, '0');\r\n  const day = String(now.getUTCDate()).padStart(2, '0');\r\n\r\n  return `exports/${year}/${month}/${day}/${export_id}.${format}`;\r\n}\r\n\r\n/**\r\n * JSON\u5F62\u5F0F\u306B\u5909\u63DB\r\n *\r\n * @param disclosures \u958B\u793A\u60C5\u5831\u306E\u30EA\u30B9\u30C8\r\n * @returns JSON\u6587\u5B57\u5217\r\n */\r\nfunction toJSON(disclosures: Disclosure[]): string {\r\n  return JSON.stringify(\r\n    {\r\n      count: disclosures.length,\r\n      disclosures,\r\n    },\r\n    null,\r\n    2\r\n  );\r\n}\r\n\r\n/**\r\n * CSV\u5F62\u5F0F\u306B\u5909\u63DB\r\n *\r\n * @param disclosures \u958B\u793A\u60C5\u5831\u306E\u30EA\u30B9\u30C8\r\n * @returns CSV\u6587\u5B57\u5217\r\n */\r\nfunction toCSV(disclosures: Disclosure[]): string {\r\n  // CSV\u30D8\u30C3\u30C0\u30FC\r\n  const headers = [\r\n    'disclosure_id',\r\n    'company_code',\r\n    'company_name',\r\n    'disclosure_type',\r\n    'title',\r\n    'disclosed_at',\r\n    'pdf_url',\r\n    's3_key',\r\n    'collected_at',\r\n    'date_partition',\r\n  ];\r\n\r\n  // CSV\u30D8\u30C3\u30C0\u30FC\u884C\r\n  const headerRow = headers.join(',');\r\n\r\n  // CSV\u30C7\u30FC\u30BF\u884C\r\n  const dataRows = disclosures.map((disclosure) => {\r\n    return headers\r\n      .map((header) => {\r\n        const value = disclosure[header as keyof Disclosure];\r\n        // \u30AB\u30F3\u30DE\u3084\u30C0\u30D6\u30EB\u30AF\u30A9\u30FC\u30C8\u3092\u542B\u3080\u5834\u5408\u306F\u30A8\u30B9\u30B1\u30FC\u30D7\r\n        return escapeCSVValue(String(value));\r\n      })\r\n      .join(',');\r\n  });\r\n\r\n  // \u30D8\u30C3\u30C0\u30FC + \u30C7\u30FC\u30BF\u884C\r\n  return [headerRow, ...dataRows].join('\\n');\r\n}\r\n\r\n/**\r\n * CSV\u5024\u3092\u30A8\u30B9\u30B1\u30FC\u30D7\r\n *\r\n * \u30AB\u30F3\u30DE\u3001\u30C0\u30D6\u30EB\u30AF\u30A9\u30FC\u30C8\u3001\u6539\u884C\u3092\u542B\u3080\u5834\u5408\u306F\u30C0\u30D6\u30EB\u30AF\u30A9\u30FC\u30C8\u3067\u56F2\u307F\u3001\r\n * \u30C0\u30D6\u30EB\u30AF\u30A9\u30FC\u30C8\u306F2\u3064\u91CD\u306D\u3066\u30A8\u30B9\u30B1\u30FC\u30D7\u3057\u307E\u3059\u3002\r\n *\r\n * @param value \u5024\r\n * @returns \u30A8\u30B9\u30B1\u30FC\u30D7\u5F8C\u306E\u5024\r\n */\r\nfunction escapeCSVValue(value: string): string {\r\n  // \u30AB\u30F3\u30DE\u3001\u30C0\u30D6\u30EB\u30AF\u30A9\u30FC\u30C8\u3001\u6539\u884C\u3092\u542B\u3080\u5834\u5408\u306F\u30A8\u30B9\u30B1\u30FC\u30D7\u304C\u5FC5\u8981\r\n  if (value.includes(',') || value.includes('\"') || value.includes('\\n')) {\r\n    // \u30C0\u30D6\u30EB\u30AF\u30A9\u30FC\u30C8\u30922\u3064\u91CD\u306D\u3066\u30A8\u30B9\u30B1\u30FC\u30D7\r\n    const escaped = value.replace(/\"/g, '\"\"');\r\n    return `\"${escaped}\"`;\r\n  }\r\n  return value;\r\n}\r\n"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "6cdf097a5f415b9a718ff1406c8cd5dba313a348"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1vn32myjbx = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1vn32myjbx();
cov_1vn32myjbx().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_1vn32myjbx().s[1]++;
exports.exportToS3 = exportToS3;
const client_s3_1 =
/* istanbul ignore next */
(cov_1vn32myjbx().s[2]++, require("@aws-sdk/client-s3"));
const logger_1 =
/* istanbul ignore next */
(cov_1vn32myjbx().s[3]++, require("../../utils/logger"));
const retry_1 =
/* istanbul ignore next */
(cov_1vn32myjbx().s[4]++, require("../../utils/retry"));
// S3クライアント（グローバルスコープで初期化）
const s3Client =
/* istanbul ignore next */
(cov_1vn32myjbx().s[5]++, new client_s3_1.S3Client({
  region: 
  /* istanbul ignore next */
  (cov_1vn32myjbx().b[0][0]++, process.env.AWS_REGION) ||
  /* istanbul ignore next */
  (cov_1vn32myjbx().b[0][1]++, 'ap-northeast-1')
}));
// 環境変数
const EXPORT_BUCKET =
/* istanbul ignore next */
(cov_1vn32myjbx().s[6]++, 
/* istanbul ignore next */
(cov_1vn32myjbx().b[1][0]++, process.env.EXPORT_BUCKET_NAME) ||
/* istanbul ignore next */
(cov_1vn32myjbx().b[1][1]++, 'tdnet-exports'));
/**
 * S3にエクスポート
 *
 * @param export_id エクスポートID
 * @param disclosures 開示情報のリスト
 * @param format フォーマット（json, csv）
 * @returns S3キー
 */
async function exportToS3(export_id, disclosures, format) {
  /* istanbul ignore next */
  cov_1vn32myjbx().f[0]++;
  cov_1vn32myjbx().s[7]++;
  logger_1.logger.info('Exporting to S3', {
    export_id,
    format,
    count: disclosures.length
  });
  // S3キーを生成
  const s3_key =
  /* istanbul ignore next */
  (cov_1vn32myjbx().s[8]++, generateS3Key(export_id, format));
  // フォーマットに応じて変換
  const content =
  /* istanbul ignore next */
  (cov_1vn32myjbx().s[9]++, format === 'json' ?
  /* istanbul ignore next */
  (cov_1vn32myjbx().b[2][0]++, toJSON(disclosures)) :
  /* istanbul ignore next */
  (cov_1vn32myjbx().b[2][1]++, toCSV(disclosures)));
  // S3にアップロード
  /* istanbul ignore next */
  cov_1vn32myjbx().s[10]++;
  await (0, retry_1.retryWithBackoff)(async () => {
    /* istanbul ignore next */
    cov_1vn32myjbx().f[1]++;
    cov_1vn32myjbx().s[11]++;
    await s3Client.send(new client_s3_1.PutObjectCommand({
      Bucket: EXPORT_BUCKET,
      Key: s3_key,
      Body: content,
      ContentType: format === 'json' ?
      /* istanbul ignore next */
      (cov_1vn32myjbx().b[3][0]++, 'application/json') :
      /* istanbul ignore next */
      (cov_1vn32myjbx().b[3][1]++, 'text/csv'),
      // ライフサイクルポリシーで7日後に自動削除されるようにタグを設定
      Tagging: 'auto-delete=true'
    }));
  }, {
    maxRetries: 3,
    initialDelay: 2000,
    backoffMultiplier: 2,
    jitter: true
  });
  /* istanbul ignore next */
  cov_1vn32myjbx().s[12]++;
  logger_1.logger.info('Exported to S3 successfully', {
    export_id,
    s3_key,
    size_bytes: Buffer.byteLength(content, 'utf8')
  });
  /* istanbul ignore next */
  cov_1vn32myjbx().s[13]++;
  return s3_key;
}
/**
 * S3キーを生成
 *
 * フォーマット: exports/YYYY/MM/DD/export_id.format
 * 例: exports/2024/01/15/export_1705305600000_abc123_12345678.json
 *
 * @param export_id エクスポートID
 * @param format フォーマット（json, csv）
 * @returns S3キー
 */
function generateS3Key(export_id, format) {
  /* istanbul ignore next */
  cov_1vn32myjbx().f[2]++;
  const now =
  /* istanbul ignore next */
  (cov_1vn32myjbx().s[14]++, new Date());
  const year =
  /* istanbul ignore next */
  (cov_1vn32myjbx().s[15]++, now.getUTCFullYear());
  const month =
  /* istanbul ignore next */
  (cov_1vn32myjbx().s[16]++, String(now.getUTCMonth() + 1).padStart(2, '0'));
  const day =
  /* istanbul ignore next */
  (cov_1vn32myjbx().s[17]++, String(now.getUTCDate()).padStart(2, '0'));
  /* istanbul ignore next */
  cov_1vn32myjbx().s[18]++;
  return `exports/${year}/${month}/${day}/${export_id}.${format}`;
}
/**
 * JSON形式に変換
 *
 * @param disclosures 開示情報のリスト
 * @returns JSON文字列
 */
function toJSON(disclosures) {
  /* istanbul ignore next */
  cov_1vn32myjbx().f[3]++;
  cov_1vn32myjbx().s[19]++;
  return JSON.stringify({
    count: disclosures.length,
    disclosures
  }, null, 2);
}
/**
 * CSV形式に変換
 *
 * @param disclosures 開示情報のリスト
 * @returns CSV文字列
 */
function toCSV(disclosures) {
  /* istanbul ignore next */
  cov_1vn32myjbx().f[4]++;
  // CSVヘッダー
  const headers =
  /* istanbul ignore next */
  (cov_1vn32myjbx().s[20]++, ['disclosure_id', 'company_code', 'company_name', 'disclosure_type', 'title', 'disclosed_at', 'pdf_url', 's3_key', 'collected_at', 'date_partition']);
  // CSVヘッダー行
  const headerRow =
  /* istanbul ignore next */
  (cov_1vn32myjbx().s[21]++, headers.join(','));
  // CSVデータ行
  const dataRows =
  /* istanbul ignore next */
  (cov_1vn32myjbx().s[22]++, disclosures.map(disclosure => {
    /* istanbul ignore next */
    cov_1vn32myjbx().f[5]++;
    cov_1vn32myjbx().s[23]++;
    return headers.map(header => {
      /* istanbul ignore next */
      cov_1vn32myjbx().f[6]++;
      const value =
      /* istanbul ignore next */
      (cov_1vn32myjbx().s[24]++, disclosure[header]);
      // カンマやダブルクォートを含む場合はエスケープ
      /* istanbul ignore next */
      cov_1vn32myjbx().s[25]++;
      return escapeCSVValue(String(value));
    }).join(',');
  }));
  // ヘッダー + データ行
  /* istanbul ignore next */
  cov_1vn32myjbx().s[26]++;
  return [headerRow, ...dataRows].join('\n');
}
/**
 * CSV値をエスケープ
 *
 * カンマ、ダブルクォート、改行を含む場合はダブルクォートで囲み、
 * ダブルクォートは2つ重ねてエスケープします。
 *
 * @param value 値
 * @returns エスケープ後の値
 */
function escapeCSVValue(value) {
  /* istanbul ignore next */
  cov_1vn32myjbx().f[7]++;
  cov_1vn32myjbx().s[27]++;
  // カンマ、ダブルクォート、改行を含む場合はエスケープが必要
  if (
  /* istanbul ignore next */
  (cov_1vn32myjbx().b[5][0]++, value.includes(',')) ||
  /* istanbul ignore next */
  (cov_1vn32myjbx().b[5][1]++, value.includes('"')) ||
  /* istanbul ignore next */
  (cov_1vn32myjbx().b[5][2]++, value.includes('\n'))) {
    /* istanbul ignore next */
    cov_1vn32myjbx().b[4][0]++;
    // ダブルクォートを2つ重ねてエスケープ
    const escaped =
    /* istanbul ignore next */
    (cov_1vn32myjbx().s[28]++, value.replace(/"/g, '""'));
    /* istanbul ignore next */
    cov_1vn32myjbx().s[29]++;
    return `"${escaped}"`;
  } else
  /* istanbul ignore next */
  {
    cov_1vn32myjbx().b[4][1]++;
  }
  cov_1vn32myjbx().s[30]++;
  return value;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXZuMzJteWpieCIsInBhdGgiLCJoYXNoIiwiZ2xvYmFsIiwiRnVuY3Rpb24iLCJnY3YiLCJjb3ZlcmFnZURhdGEiLCJzdGF0ZW1lbnRNYXAiLCJzdGFydCIsImxpbmUiLCJjb2x1bW4iLCJlbmQiLCJmbk1hcCIsIm5hbWUiLCJkZWNsIiwibG9jIiwiYnJhbmNoTWFwIiwidHlwZSIsImxvY2F0aW9ucyIsInVuZGVmaW5lZCIsInMiLCJmIiwiYiIsImlucHV0U291cmNlTWFwIiwiZmlsZSIsIm1hcHBpbmdzIiwibmFtZXMiLCJzb3VyY2VzIiwic291cmNlc0NvbnRlbnQiLCJ2ZXJzaW9uIiwiX2NvdmVyYWdlU2NoZW1hIiwiY292ZXJhZ2UiLCJhY3R1YWxDb3ZlcmFnZSIsImV4cG9ydHMiLCJleHBvcnRUb1MzIiwiY2xpZW50X3MzXzEiLCJyZXF1aXJlIiwibG9nZ2VyXzEiLCJyZXRyeV8xIiwiczNDbGllbnQiLCJTM0NsaWVudCIsInJlZ2lvbiIsInByb2Nlc3MiLCJlbnYiLCJBV1NfUkVHSU9OIiwiRVhQT1JUX0JVQ0tFVCIsIkVYUE9SVF9CVUNLRVRfTkFNRSIsImV4cG9ydF9pZCIsImRpc2Nsb3N1cmVzIiwiZm9ybWF0IiwibG9nZ2VyIiwiaW5mbyIsImNvdW50IiwibGVuZ3RoIiwiczNfa2V5IiwiZ2VuZXJhdGVTM0tleSIsImNvbnRlbnQiLCJ0b0pTT04iLCJ0b0NTViIsInJldHJ5V2l0aEJhY2tvZmYiLCJzZW5kIiwiUHV0T2JqZWN0Q29tbWFuZCIsIkJ1Y2tldCIsIktleSIsIkJvZHkiLCJDb250ZW50VHlwZSIsIlRhZ2dpbmciLCJtYXhSZXRyaWVzIiwiaW5pdGlhbERlbGF5IiwiYmFja29mZk11bHRpcGxpZXIiLCJqaXR0ZXIiLCJzaXplX2J5dGVzIiwiQnVmZmVyIiwiYnl0ZUxlbmd0aCIsIm5vdyIsIkRhdGUiLCJ5ZWFyIiwiZ2V0VVRDRnVsbFllYXIiLCJtb250aCIsIlN0cmluZyIsImdldFVUQ01vbnRoIiwicGFkU3RhcnQiLCJkYXkiLCJnZXRVVENEYXRlIiwiSlNPTiIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJoZWFkZXJSb3ciLCJqb2luIiwiZGF0YVJvd3MiLCJtYXAiLCJkaXNjbG9zdXJlIiwiaGVhZGVyIiwidmFsdWUiLCJlc2NhcGVDU1ZWYWx1ZSIsImluY2x1ZGVzIiwiZXNjYXBlZCIsInJlcGxhY2UiXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXHRpMTk4XFxpbnZlc3RtZW50X2FuYWx5c2lzX29wb3BvXFxzcmNcXGxhbWJkYVxcZXhwb3J0XFxleHBvcnQtdG8tczMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFMz44Ko44Kv44K544Od44O844OIXHJcbiAqXHJcbiAqIEpTT04vQ1NW5b2i5byP44GnUzPjgavkv53lrZjjgZfjgb7jgZnjgILlpKfph4/jg4fjg7zjgr/lr77lv5zvvIjjgrnjg4jjg6rjg7zjg6Dlh6bnkIbvvInjgIJcclxuICpcclxuICogUmVxdWlyZW1lbnRzOiDopoHku7Y1LjLvvIjjgqjjgq/jgrnjg53jg7zjg4jlvaLlvI/vvIlcclxuICovXHJcblxyXG5pbXBvcnQgeyBTM0NsaWVudCwgUHV0T2JqZWN0Q29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1zMyc7XHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uLy4uL3V0aWxzL2xvZ2dlcic7XHJcbmltcG9ydCB7IHJldHJ5V2l0aEJhY2tvZmYgfSBmcm9tICcuLi8uLi91dGlscy9yZXRyeSc7XHJcbmltcG9ydCB7IERpc2Nsb3N1cmUgfSBmcm9tICcuLi8uLi90eXBlcyc7XHJcblxyXG4vLyBTM+OCr+ODqeOCpOOCouODs+ODiO+8iOOCsOODreODvOODkOODq+OCueOCs+ODvOODl+OBp+WIneacn+WMlu+8iVxyXG5jb25zdCBzM0NsaWVudCA9IG5ldyBTM0NsaWVudCh7IHJlZ2lvbjogcHJvY2Vzcy5lbnYuQVdTX1JFR0lPTiB8fCAnYXAtbm9ydGhlYXN0LTEnIH0pO1xyXG5cclxuLy8g55Kw5aKD5aSJ5pWwXHJcbmNvbnN0IEVYUE9SVF9CVUNLRVQgPSBwcm9jZXNzLmVudi5FWFBPUlRfQlVDS0VUX05BTUUgfHwgJ3RkbmV0LWV4cG9ydHMnO1xyXG5cclxuLyoqXHJcbiAqIFMz44Gr44Ko44Kv44K544Od44O844OIXHJcbiAqXHJcbiAqIEBwYXJhbSBleHBvcnRfaWQg44Ko44Kv44K544Od44O844OISURcclxuICogQHBhcmFtIGRpc2Nsb3N1cmVzIOmWi+ekuuaDheWgseOBruODquOCueODiFxyXG4gKiBAcGFyYW0gZm9ybWF0IOODleOCqeODvOODnuODg+ODiO+8iGpzb24sIGNzdu+8iVxyXG4gKiBAcmV0dXJucyBTM+OCreODvFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4cG9ydFRvUzMoXHJcbiAgZXhwb3J0X2lkOiBzdHJpbmcsXHJcbiAgZGlzY2xvc3VyZXM6IERpc2Nsb3N1cmVbXSxcclxuICBmb3JtYXQ6ICdqc29uJyB8ICdjc3YnXHJcbik6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgbG9nZ2VyLmluZm8oJ0V4cG9ydGluZyB0byBTMycsIHtcclxuICAgIGV4cG9ydF9pZCxcclxuICAgIGZvcm1hdCxcclxuICAgIGNvdW50OiBkaXNjbG9zdXJlcy5sZW5ndGgsXHJcbiAgfSk7XHJcblxyXG4gIC8vIFMz44Kt44O844KS55Sf5oiQXHJcbiAgY29uc3QgczNfa2V5ID0gZ2VuZXJhdGVTM0tleShleHBvcnRfaWQsIGZvcm1hdCk7XHJcblxyXG4gIC8vIOODleOCqeODvOODnuODg+ODiOOBq+W/nOOBmOOBpuWkieaPm1xyXG4gIGNvbnN0IGNvbnRlbnQgPSBmb3JtYXQgPT09ICdqc29uJyA/IHRvSlNPTihkaXNjbG9zdXJlcykgOiB0b0NTVihkaXNjbG9zdXJlcyk7XHJcblxyXG4gIC8vIFMz44Gr44Ki44OD44OX44Ot44O844OJXHJcbiAgYXdhaXQgcmV0cnlXaXRoQmFja29mZihcclxuICAgIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgczNDbGllbnQuc2VuZChcclxuICAgICAgICBuZXcgUHV0T2JqZWN0Q29tbWFuZCh7XHJcbiAgICAgICAgICBCdWNrZXQ6IEVYUE9SVF9CVUNLRVQsXHJcbiAgICAgICAgICBLZXk6IHMzX2tleSxcclxuICAgICAgICAgIEJvZHk6IGNvbnRlbnQsXHJcbiAgICAgICAgICBDb250ZW50VHlwZTogZm9ybWF0ID09PSAnanNvbicgPyAnYXBwbGljYXRpb24vanNvbicgOiAndGV4dC9jc3YnLFxyXG4gICAgICAgICAgLy8g44Op44Kk44OV44K144Kk44Kv44Or44Od44Oq44K344O844GnN+aXpeW+jOOBq+iHquWLleWJiumZpOOBleOCjOOCi+OCiOOBhuOBq+OCv+OCsOOCkuioreWumlxyXG4gICAgICAgICAgVGFnZ2luZzogJ2F1dG8tZGVsZXRlPXRydWUnLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBtYXhSZXRyaWVzOiAzLFxyXG4gICAgICBpbml0aWFsRGVsYXk6IDIwMDAsXHJcbiAgICAgIGJhY2tvZmZNdWx0aXBsaWVyOiAyLFxyXG4gICAgICBqaXR0ZXI6IHRydWUsXHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgbG9nZ2VyLmluZm8oJ0V4cG9ydGVkIHRvIFMzIHN1Y2Nlc3NmdWxseScsIHtcclxuICAgIGV4cG9ydF9pZCxcclxuICAgIHMzX2tleSxcclxuICAgIHNpemVfYnl0ZXM6IEJ1ZmZlci5ieXRlTGVuZ3RoKGNvbnRlbnQsICd1dGY4JyksXHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBzM19rZXk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTM+OCreODvOOCkueUn+aIkFxyXG4gKlxyXG4gKiDjg5Xjgqnjg7zjg57jg4Pjg4g6IGV4cG9ydHMvWVlZWS9NTS9ERC9leHBvcnRfaWQuZm9ybWF0XHJcbiAqIOS+izogZXhwb3J0cy8yMDI0LzAxLzE1L2V4cG9ydF8xNzA1MzA1NjAwMDAwX2FiYzEyM18xMjM0NTY3OC5qc29uXHJcbiAqXHJcbiAqIEBwYXJhbSBleHBvcnRfaWQg44Ko44Kv44K544Od44O844OISURcclxuICogQHBhcmFtIGZvcm1hdCDjg5Xjgqnjg7zjg57jg4Pjg4jvvIhqc29uLCBjc3bvvIlcclxuICogQHJldHVybnMgUzPjgq3jg7xcclxuICovXHJcbmZ1bmN0aW9uIGdlbmVyYXRlUzNLZXkoZXhwb3J0X2lkOiBzdHJpbmcsIGZvcm1hdDogJ2pzb24nIHwgJ2NzdicpOiBzdHJpbmcge1xyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgY29uc3QgeWVhciA9IG5vdy5nZXRVVENGdWxsWWVhcigpO1xyXG4gIGNvbnN0IG1vbnRoID0gU3RyaW5nKG5vdy5nZXRVVENNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcclxuICBjb25zdCBkYXkgPSBTdHJpbmcobm93LmdldFVUQ0RhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcclxuXHJcbiAgcmV0dXJuIGBleHBvcnRzLyR7eWVhcn0vJHttb250aH0vJHtkYXl9LyR7ZXhwb3J0X2lkfS4ke2Zvcm1hdH1gO1xyXG59XHJcblxyXG4vKipcclxuICogSlNPTuW9ouW8j+OBq+WkieaPm1xyXG4gKlxyXG4gKiBAcGFyYW0gZGlzY2xvc3VyZXMg6ZaL56S65oOF5aCx44Gu44Oq44K544OIXHJcbiAqIEByZXR1cm5zIEpTT07mloflrZfliJdcclxuICovXHJcbmZ1bmN0aW9uIHRvSlNPTihkaXNjbG9zdXJlczogRGlzY2xvc3VyZVtdKTogc3RyaW5nIHtcclxuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoXHJcbiAgICB7XHJcbiAgICAgIGNvdW50OiBkaXNjbG9zdXJlcy5sZW5ndGgsXHJcbiAgICAgIGRpc2Nsb3N1cmVzLFxyXG4gICAgfSxcclxuICAgIG51bGwsXHJcbiAgICAyXHJcbiAgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENTVuW9ouW8j+OBq+WkieaPm1xyXG4gKlxyXG4gKiBAcGFyYW0gZGlzY2xvc3VyZXMg6ZaL56S65oOF5aCx44Gu44Oq44K544OIXHJcbiAqIEByZXR1cm5zIENTVuaWh+Wtl+WIl1xyXG4gKi9cclxuZnVuY3Rpb24gdG9DU1YoZGlzY2xvc3VyZXM6IERpc2Nsb3N1cmVbXSk6IHN0cmluZyB7XHJcbiAgLy8gQ1NW44OY44OD44OA44O8XHJcbiAgY29uc3QgaGVhZGVycyA9IFtcclxuICAgICdkaXNjbG9zdXJlX2lkJyxcclxuICAgICdjb21wYW55X2NvZGUnLFxyXG4gICAgJ2NvbXBhbnlfbmFtZScsXHJcbiAgICAnZGlzY2xvc3VyZV90eXBlJyxcclxuICAgICd0aXRsZScsXHJcbiAgICAnZGlzY2xvc2VkX2F0JyxcclxuICAgICdwZGZfdXJsJyxcclxuICAgICdzM19rZXknLFxyXG4gICAgJ2NvbGxlY3RlZF9hdCcsXHJcbiAgICAnZGF0ZV9wYXJ0aXRpb24nLFxyXG4gIF07XHJcblxyXG4gIC8vIENTVuODmOODg+ODgOODvOihjFxyXG4gIGNvbnN0IGhlYWRlclJvdyA9IGhlYWRlcnMuam9pbignLCcpO1xyXG5cclxuICAvLyBDU1bjg4fjg7zjgr/ooYxcclxuICBjb25zdCBkYXRhUm93cyA9IGRpc2Nsb3N1cmVzLm1hcCgoZGlzY2xvc3VyZSkgPT4ge1xyXG4gICAgcmV0dXJuIGhlYWRlcnNcclxuICAgICAgLm1hcCgoaGVhZGVyKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkaXNjbG9zdXJlW2hlYWRlciBhcyBrZXlvZiBEaXNjbG9zdXJlXTtcclxuICAgICAgICAvLyDjgqvjg7Pjg57jgoTjg4Djg5bjg6vjgq/jgqnjg7zjg4jjgpLlkKvjgoDloLTlkIjjga/jgqjjgrnjgrHjg7zjg5dcclxuICAgICAgICByZXR1cm4gZXNjYXBlQ1NWVmFsdWUoU3RyaW5nKHZhbHVlKSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5qb2luKCcsJyk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIOODmOODg+ODgOODvCArIOODh+ODvOOCv+ihjFxyXG4gIHJldHVybiBbaGVhZGVyUm93LCAuLi5kYXRhUm93c10uam9pbignXFxuJyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDU1blgKTjgpLjgqjjgrnjgrHjg7zjg5dcclxuICpcclxuICog44Kr44Oz44Oe44CB44OA44OW44Or44Kv44Kp44O844OI44CB5pS56KGM44KS5ZCr44KA5aC05ZCI44Gv44OA44OW44Or44Kv44Kp44O844OI44Gn5Zuy44G/44CBXHJcbiAqIOODgOODluODq+OCr+OCqeODvOODiOOBrzLjgaTph43jga3jgabjgqjjgrnjgrHjg7zjg5fjgZfjgb7jgZnjgIJcclxuICpcclxuICogQHBhcmFtIHZhbHVlIOWApFxyXG4gKiBAcmV0dXJucyDjgqjjgrnjgrHjg7zjg5flvozjga7lgKRcclxuICovXHJcbmZ1bmN0aW9uIGVzY2FwZUNTVlZhbHVlKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIC8vIOOCq+ODs+ODnuOAgeODgOODluODq+OCr+OCqeODvOODiOOAgeaUueihjOOCkuWQq+OCgOWgtOWQiOOBr+OCqOOCueOCseODvOODl+OBjOW/heimgVxyXG4gIGlmICh2YWx1ZS5pbmNsdWRlcygnLCcpIHx8IHZhbHVlLmluY2x1ZGVzKCdcIicpIHx8IHZhbHVlLmluY2x1ZGVzKCdcXG4nKSkge1xyXG4gICAgLy8g44OA44OW44Or44Kv44Kp44O844OI44KSMuOBpOmHjeOBreOBpuOCqOOCueOCseODvOODl1xyXG4gICAgY29uc3QgZXNjYXBlZCA9IHZhbHVlLnJlcGxhY2UoL1wiL2csICdcIlwiJyk7XHJcbiAgICByZXR1cm4gYFwiJHtlc2NhcGVkfVwiYDtcclxuICB9XHJcbiAgcmV0dXJuIHZhbHVlO1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7OztBQUFBO0FBQUEsU0FBQUEsZUFBQTtFQUFBLElBQUFDLElBQUE7RUFBQSxJQUFBQyxJQUFBO0VBQUEsSUFBQUMsTUFBQSxPQUFBQyxRQUFBO0VBQUEsSUFBQUMsR0FBQTtFQUFBLElBQUFDLFlBQUE7SUFBQUwsSUFBQTtJQUFBTSxZQUFBO01BQUE7UUFBQUMsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7SUFBQTtJQUFBRSxLQUFBO01BQUE7UUFBQUMsSUFBQTtRQUFBQyxJQUFBO1VBQUFOLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFLLEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQUQsSUFBQTtNQUFBO01BQUE7UUFBQUksSUFBQTtRQUFBQyxJQUFBO1VBQUFOLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFLLEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQUQsSUFBQTtNQUFBO01BQUE7UUFBQUksSUFBQTtRQUFBQyxJQUFBO1VBQUFOLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFLLEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQUQsSUFBQTtNQUFBO01BQUE7UUFBQUksSUFBQTtRQUFBQyxJQUFBO1VBQUFOLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFLLEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQUQsSUFBQTtNQUFBO01BQUE7UUFBQUksSUFBQTtRQUFBQyxJQUFBO1VBQUFOLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFLLEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQUQsSUFBQTtNQUFBO01BQUE7UUFBQUksSUFBQTtRQUFBQyxJQUFBO1VBQUFOLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFLLEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQUQsSUFBQTtNQUFBO01BQUE7UUFBQUksSUFBQTtRQUFBQyxJQUFBO1VBQUFOLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFLLEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQUQsSUFBQTtNQUFBO01BQUE7UUFBQUksSUFBQTtRQUFBQyxJQUFBO1VBQUFOLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFLLEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQUQsSUFBQTtNQUFBO0lBQUE7SUFBQU8sU0FBQTtNQUFBO1FBQUFELEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQU8sSUFBQTtRQUFBQyxTQUFBO1VBQUFWLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1VBQUFGLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFNLEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQU8sSUFBQTtRQUFBQyxTQUFBO1VBQUFWLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1VBQUFGLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFNLEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQU8sSUFBQTtRQUFBQyxTQUFBO1VBQUFWLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1VBQUFGLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFNLEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQU8sSUFBQTtRQUFBQyxTQUFBO1VBQUFWLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1VBQUFGLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFNLEdBQUE7VUFBQVAsS0FBQTtZQUFBQyxJQUFBO1lBQUFDLE1BQUE7VUFBQTtVQUFBQyxHQUFBO1lBQUFGLElBQUE7WUFBQUMsTUFBQTtVQUFBO1FBQUE7UUFBQU8sSUFBQTtRQUFBQyxTQUFBO1VBQUFWLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1VBQUFGLEtBQUE7WUFBQUMsSUFBQSxFQUFBVSxTQUFBO1lBQUFULE1BQUEsRUFBQVM7VUFBQTtVQUFBUixHQUFBO1lBQUFGLElBQUEsRUFBQVUsU0FBQTtZQUFBVCxNQUFBLEVBQUFTO1VBQUE7UUFBQTtRQUFBVixJQUFBO01BQUE7TUFBQTtRQUFBTSxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFPLElBQUE7UUFBQUMsU0FBQTtVQUFBVixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtVQUFBRixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtVQUFBRixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBRCxJQUFBO01BQUE7SUFBQTtJQUFBVyxDQUFBO01BQUE7TUFBQTtNQUFBO01BQUE7TUFBQTtN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