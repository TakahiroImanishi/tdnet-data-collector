cbf30366088b3217156de6fe52a4883a
"use strict";
/**
 * CloudWatch Integration Tests
 *
 * すべてのCloudWatchコンポーネント（メトリクス、アラーム、ダッシュボード）が
 * 正しく統合されていることを検証します。
 *
 * Requirements: 要件14.1（テスト）
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const cdk = __importStar(require("aws-cdk-lib"));
const lambda = __importStar(require("aws-cdk-lib/aws-lambda"));
const dynamodb = __importStar(require("aws-cdk-lib/aws-dynamodb"));
const s3 = __importStar(require("aws-cdk-lib/aws-s3"));
const apigateway = __importStar(require("aws-cdk-lib/aws-apigateway"));
const assertions_1 = require("aws-cdk-lib/assertions");
const cloudwatch_alarms_1 = require("../lib/constructs/cloudwatch-alarms");
const cloudwatch_dashboard_1 = require("../lib/constructs/cloudwatch-dashboard");
describe('CloudWatch Integration Tests', () => {
    let stack;
    let mockLambdaFunctions;
    let mockDynamodbTables;
    let mockS3Buckets;
    let mockApiGateway;
    beforeEach(() => {
        stack = new cdk.Stack();
        // モックLambda関数を作成
        const createMockLambda = (id) => {
            return new lambda.Function(stack, id, {
                runtime: lambda.Runtime.NODEJS_20_X,
                handler: 'index.handler',
                code: lambda.Code.fromInline('exports.handler = async () => {};'),
                functionName: `test-${id.toLowerCase()}`,
            });
        };
        mockLambdaFunctions = {
            collector: createMockLambda('CollectorFunction'),
            query: createMockLambda('QueryFunction'),
            export: createMockLambda('ExportFunction'),
        };
        // モックDynamoDBテーブルを作成
        mockDynamodbTables = {
            disclosures: new dynamodb.Table(stack, 'DisclosuresTable', {
                partitionKey: { name: 'disclosure_id', type: dynamodb.AttributeType.STRING },
            }),
            executions: new dynamodb.Table(stack, 'ExecutionsTable', {
                partitionKey: { name: 'execution_id', type: dynamodb.AttributeType.STRING },
            }),
            exportStatus: new dynamodb.Table(stack, 'ExportStatusTable', {
                partitionKey: { name: 'export_id', type: dynamodb.AttributeType.STRING },
            }),
        };
        // モックS3バケットを作成
        mockS3Buckets = {
            pdfs: new s3.Bucket(stack, 'PdfsBucket'),
            exports: new s3.Bucket(stack, 'ExportsBucket'),
        };
        // モックAPI Gatewayを作成
        mockApiGateway = new apigateway.RestApi(stack, 'TestApi', {
            restApiName: 'test-api',
            deploy: false,
        });
        // ダミーリソースとメソッドを追加
        const resource = mockApiGateway.root.addResource('test');
        resource.addMethod('GET');
    });
    describe('カスタムメトリクスの送信確認', () => {
        test('Lambda関数にCloudWatchメトリクス送信権限が付与されていること', () => {
            // Lambda関数にメトリクス送信権限を付与
            Object.values(mockLambdaFunctions).forEach((fn) => {
                fn.addToRolePolicy(new cdk.aws_iam.PolicyStatement({
                    effect: cdk.aws_iam.Effect.ALLOW,
                    actions: ['cloudwatch:PutMetricData'],
                    resources: ['*'],
                }));
            });
            const template = assertions_1.Template.fromStack(stack);
            // IAMポリシーが作成されていることを確認
            template.hasResourceProperties('AWS::IAM::Policy', {
                PolicyDocument: {
                    Statement: assertions_1.Match.arrayWith([
                        assertions_1.Match.objectLike({
                            Action: 'cloudwatch:PutMetricData',
                            Effect: 'Allow',
                            Resource: '*',
                        }),
                    ]),
                },
            });
        });
        test('カスタムメトリクス名前空間が正しく設定されていること', () => {
            // メトリクス送信のテスト（実際のメトリクス送信はsrc/utils/metrics.tsでテスト済み）
            // ここではLambda関数が正しい環境変数を持っていることを確認
            const template = assertions_1.Template.fromStack(stack);
            // Lambda関数が作成されていることを確認
            template.resourceCountIs('AWS::Lambda::Function', 3);
        });
        test('すべてのLambda関数がメトリクス送信権限を持つこと', () => {
            // すべてのLambda関数にメトリクス送信権限を付与
            Object.values(mockLambdaFunctions).forEach((fn) => {
                fn.addToRolePolicy(new cdk.aws_iam.PolicyStatement({
                    effect: cdk.aws_iam.Effect.ALLOW,
                    actions: ['cloudwatch:PutMetricData'],
                    resources: ['*'],
                }));
            });
            const template = assertions_1.Template.fromStack(stack);
            // 3つのLambda関数に対して3つのIAMポリシーが作成される
            template.resourceCountIs('AWS::IAM::Policy', 3);
        });
    });
    describe('アラームの設定確認', () => {
        test('すべてのLambda関数に対してアラームが作成されること', () => {
            // CloudWatch Alarmsを作成
            new cloudwatch_alarms_1.CloudWatchAlarms(stack, 'TestAlarms', {
                lambdaFunctions: Object.values(mockLambdaFunctions),
                environment: 'test',
            });
            const template = assertions_1.Template.fromStack(stack);
            // 各Lambda関数に対して3つのアラーム（Error Rate, Duration, Throttles）
            // + カスタムメトリクスアラーム3つ（CollectionSuccessRate, NoData, CollectionFailure）
            // = 3 * 3 + 3 = 12個のアラーム
            template.resourceCountIs('AWS::CloudWatch::Alarm', 12);
        });
        test('アラームにSNSトピックが関連付けられていること', () => {
            // CloudWatch Alarmsを作成
            new cloudwatch_alarms_1.CloudWatchAlarms(stack, 'TestAlarms', {
                lambdaFunctions: Object.values(mockLambdaFunctions),
                environment: 'test',
            });
            const template = assertions_1.Template.fromStack(stack);
            // SNS Topicが作成されていることを確認
            template.resourceCountIs('AWS::SNS::Topic', 1);
            // すべてのアラームにAlarmActionsが設定されていることを確認
            const alarms = template.findResources('AWS::CloudWatch::Alarm');
            const alarmKeys = Object.keys(alarms);
            expect(alarmKeys.length).toBeGreaterThan(0);
            alarmKeys.forEach((key) => {
                const alarm = alarms[key];
                expect(alarm.Properties.AlarmActions).toBeDefined();
                expect(alarm.Properties.AlarmActions.length).toBeGreaterThan(0);
            });
        });
        test('カスタムメトリクスアラームが作成されること', () => {
            // CloudWatch Alarmsを作成
            new cloudwatch_alarms_1.CloudWatchAlarms(stack, 'TestAlarms', {
                lambdaFunctions: Object.values(mockLambdaFunctions),
                environment: 'test',
            });
            const template = assertions_1.Template.fromStack(stack);
            // CollectionSuccessRateアラーム（MathExpressionを使用しているためMetricName/Namespaceは未定義）
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                AlarmName: 'tdnet-collection-success-rate-test',
                ComparisonOperator: 'LessThanThreshold',
                Threshold: 95,
            });
            // NoDataCollectedアラーム
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                AlarmName: 'tdnet-no-data-collected-test',
                MetricName: 'DisclosuresCollected',
                Namespace: 'TDnet/Collector',
            });
            // CollectionFailureアラーム
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                AlarmName: 'tdnet-collection-failures-test',
                MetricName: 'DisclosuresFailed',
                Namespace: 'TDnet/Collector',
            });
        });
        test('アラーム閾値が正しく設定されていること', () => {
            // CloudWatch Alarmsを作成
            new cloudwatch_alarms_1.CloudWatchAlarms(stack, 'TestAlarms', {
                lambdaFunctions: Object.values(mockLambdaFunctions),
                environment: 'test',
                errorRateThreshold: 5,
                durationThreshold: 600,
                collectionSuccessRateThreshold: 90,
            });
            const template = assertions_1.Template.fromStack(stack);
            // Error Rate: 5%
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                Threshold: 5,
                ComparisonOperator: 'GreaterThanThreshold',
            });
            // Duration: 600秒 = 600000ミリ秒
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                Threshold: 600000,
                ComparisonOperator: 'GreaterThanThreshold',
            });
            // CollectionSuccessRate: 90%
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                AlarmName: 'tdnet-collection-success-rate-test',
                Threshold: 90,
                ComparisonOperator: 'LessThanThreshold',
            });
        });
    });
    describe('ダッシュボードの表示確認', () => {
        test('ダッシュボードが正しく作成されること', () => {
            // CloudWatch Dashboardを作成
            const dashboard = new cloudwatch_dashboard_1.CloudWatchDashboard(stack, 'TestDashboard', {
                environment: 'test',
                lambdaFunctions: {
                    collector: mockLambdaFunctions.collector,
                    query: mockLambdaFunctions.query,
                    export: mockLambdaFunctions.export,
                    collect: mockLambdaFunctions.collector, // 同じ関数を使用
                    collectStatus: mockLambdaFunctions.collector,
                    exportStatus: mockLambdaFunctions.export,
                    pdfDownload: mockLambdaFunctions.query,
                },
                dynamodbTables: mockDynamodbTables,
                s3Buckets: mockS3Buckets,
                apiGateway: mockApiGateway,
            });
            // ダッシュボードが作成されていることを確認
            expect(dashboard.dashboard).toBeDefined();
            const template = assertions_1.Template.fromStack(stack);
            // ダッシュボードリソースが存在することを確認
            template.hasResourceProperties('AWS::CloudWatch::Dashboard', {
                DashboardName: 'tdnet-collector-test',
            });
        });
        test('ダッシュボードにすべてのウィジェットが含まれていること', () => {
            // CloudWatch Dashboardを作成
            new cloudwatch_dashboard_1.CloudWatchDashboard(stack, 'TestDashboard', {
                environment: 'test',
                lambdaFunctions: {
                    collector: mockLambdaFunctions.collector,
                    query: mockLambdaFunctions.query,
                    export: mockLambdaFunctions.export,
                    collect: mockLambdaFunctions.collector,
                    collectStatus: mockLambdaFunctions.collector,
                    exportStatus: mockLambdaFunctions.export,
                    pdfDownload: mockLambdaFunctions.query,
                },
                dynamodbTables: mockDynamodbTables,
                s3Buckets: mockS3Buckets,
                apiGateway: mockApiGateway,
            });
            const template = assertions_1.Template.fromStack(stack);
            // ダッシュボードリソースが存在することを確認
            template.resourceCountIs('AWS::CloudWatch::Dashboard', 1);
            // ダッシュボードリソースを取得
            const dashboards = template.findResources('AWS::CloudWatch::Dashboard');
            const dashboardKeys = Object.keys(dashboards);
            expect(dashboardKeys.length).toBe(1);
            // DashboardBodyプロパティが存在することを確認
            const dashboard = dashboards[dashboardKeys[0]];
            expect(dashboard.Properties.DashboardBody).toBeDefined();
        });
        test('ダッシュボード名に環境名が含まれていること', () => {
            // 本番環境でダッシュボードを作成
            new cloudwatch_dashboard_1.CloudWatchDashboard(stack, 'ProdDashboard', {
                environment: 'prod',
                lambdaFunctions: {
                    collector: mockLambdaFunctions.collector,
                    query: mockLambdaFunctions.query,
                    export: mockLambdaFunctions.export,
                    collect: mockLambdaFunctions.collector,
                    collectStatus: mockLambdaFunctions.collector,
                    exportStatus: mockLambdaFunctions.export,
                    pdfDownload: mockLambdaFunctions.query,
                },
                dynamodbTables: mockDynamodbTables,
                s3Buckets: mockS3Buckets,
                apiGateway: mockApiGateway,
            });
            const template = assertions_1.Template.fromStack(stack);
            // ダッシュボード名に環境名が含まれていることを確認
            template.hasResourceProperties('AWS::CloudWatch::Dashboard', {
                DashboardName: 'tdnet-collector-prod',
            });
        });
    });
    describe('CloudWatch統合の完全性確認', () => {
        test('メトリクス、アラーム、ダッシュボードがすべて連携していること', () => {
            // すべてのLambda関数にメトリクス送信権限を付与
            Object.values(mockLambdaFunctions).forEach((fn) => {
                fn.addToRolePolicy(new cdk.aws_iam.PolicyStatement({
                    effect: cdk.aws_iam.Effect.ALLOW,
                    actions: ['cloudwatch:PutMetricData'],
                    resources: ['*'],
                }));
            });
            // CloudWatch Alarmsを作成
            new cloudwatch_alarms_1.CloudWatchAlarms(stack, 'TestAlarms', {
                lambdaFunctions: Object.values(mockLambdaFunctions),
                environment: 'test',
            });
            // CloudWatch Dashboardを作成
            new cloudwatch_dashboard_1.CloudWatchDashboard(stack, 'TestDashboard', {
                environment: 'test',
                lambdaFunctions: {
                    collector: mockLambdaFunctions.collector,
                    query: mockLambdaFunctions.query,
                    export: mockLambdaFunctions.export,
                    collect: mockLambdaFunctions.collector,
                    collectStatus: mockLambdaFunctions.collector,
                    exportStatus: mockLambdaFunctions.export,
                    pdfDownload: mockLambdaFunctions.query,
                },
                dynamodbTables: mockDynamodbTables,
                s3Buckets: mockS3Buckets,
                apiGateway: mockApiGateway,
            });
            const template = assertions_1.Template.fromStack(stack);
            // Lambda関数が作成されていることを確認
            template.resourceCountIs('AWS::Lambda::Function', 3);
            // IAMポリシーが作成されていることを確認（メトリクス送信権限）
            template.resourceCountIs('AWS::IAM::Policy', 3);
            // CloudWatch Alarmsが作成されていることを確認
            template.resourceCountIs('AWS::CloudWatch::Alarm', 12);
            // SNS Topicが作成されていることを確認
            template.resourceCountIs('AWS::SNS::Topic', 1);
            // CloudWatch Dashboardが作成されていることを確認
            template.resourceCountIs('AWS::CloudWatch::Dashboard', 1);
        });
        test('環境ごとに異なる設定が適用されること', () => {
            // 開発環境
            const devStack = new cdk.Stack();
            const devLambda = new lambda.Function(devStack, 'DevFunction', {
                runtime: lambda.Runtime.NODEJS_20_X,
                handler: 'index.handler',
                code: lambda.Code.fromInline('exports.handler = async () => {};'),
            });
            new cloudwatch_alarms_1.CloudWatchAlarms(devStack, 'DevAlarms', {
                lambdaFunctions: [devLambda],
                environment: 'dev',
            });
            const devTemplate = assertions_1.Template.fromStack(devStack);
            // 開発環境のアラーム名を確認
            devTemplate.hasResourceProperties('AWS::CloudWatch::Alarm', {
                AlarmName: 'tdnet-collection-success-rate-dev',
            });
            // 本番環境
            const prodStack = new cdk.Stack();
            const prodLambda = new lambda.Function(prodStack, 'ProdFunction', {
                runtime: lambda.Runtime.NODEJS_20_X,
                handler: 'index.handler',
                code: lambda.Code.fromInline('exports.handler = async () => {};'),
            });
            new cloudwatch_alarms_1.CloudWatchAlarms(prodStack, 'ProdAlarms', {
                lambdaFunctions: [prodLambda],
                environment: 'prod',
            });
            const prodTemplate = assertions_1.Template.fromStack(prodStack);
            // 本番環境のアラーム名を確認
            prodTemplate.hasResourceProperties('AWS::CloudWatch::Alarm', {
                AlarmName: 'tdnet-collection-success-rate-prod',
            });
        });
        test('すべてのリソースが正しい名前空間を使用していること', () => {
            // CloudWatch Alarmsを作成
            new cloudwatch_alarms_1.CloudWatchAlarms(stack, 'TestAlarms', {
                lambdaFunctions: Object.values(mockLambdaFunctions),
                environment: 'test',
            });
            const template = assertions_1.Template.fromStack(stack);
            // カスタムメトリクスアラームがTDnet/Collector名前空間を使用していることを確認
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                MetricName: 'DisclosuresCollected',
                Namespace: 'TDnet/Collector',
            });
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                MetricName: 'DisclosuresFailed',
                Namespace: 'TDnet/Collector',
            });
            // Lambda関数のメトリクスはAWS/Lambda名前空間を使用
            template.hasResourceProperties('AWS::CloudWatch::Alarm', {
                MetricName: 'Duration',
                Namespace: 'AWS/Lambda',
            });
        });
    });
    describe('エラーシナリオの確認', () => {
        test('Lambda関数が存在しない場合でもスタックが作成できること', () => {
            // Lambda関数なしでCloudWatch Alarmsを作成
            expect(() => {
                new cloudwatch_alarms_1.CloudWatchAlarms(stack, 'EmptyAlarms', {
                    lambdaFunctions: [],
                    environment: 'test',
                });
            }).not.toThrow();
            const template = assertions_1.Template.fromStack(stack);
            // カスタムメトリクスアラームのみが作成される（3個）
            template.resourceCountIs('AWS::CloudWatch::Alarm', 3);
        });
        test('無効な環境名でもスタックが作成できること', () => {
            expect(() => {
                new cloudwatch_alarms_1.CloudWatchAlarms(stack, 'InvalidEnvAlarms', {
                    lambdaFunctions: Object.values(mockLambdaFunctions),
                    environment: 'invalid-env',
                });
            }).not.toThrow();
            const template = assertions_1.Template.fromStack(stack);
            // アラームが作成されていることを確認
            template.resourceCountIs('AWS::CloudWatch::Alarm', 12);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcY2RrXFxfX3Rlc3RzX19cXGNsb3Vkd2F0Y2gtaW50ZWdyYXRpb24udGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7R0FPRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFSCxpREFBbUM7QUFDbkMsK0RBQWlEO0FBQ2pELG1FQUFxRDtBQUNyRCx1REFBeUM7QUFDekMsdUVBQXlEO0FBQ3pELHVEQUF5RDtBQUN6RCwyRUFBdUU7QUFDdkUsaUZBQTZFO0FBRTdFLFFBQVEsQ0FBQyw4QkFBOEIsRUFBRSxHQUFHLEVBQUU7SUFDNUMsSUFBSSxLQUFnQixDQUFDO0lBQ3JCLElBQUksbUJBSUgsQ0FBQztJQUNGLElBQUksa0JBSUgsQ0FBQztJQUNGLElBQUksYUFHSCxDQUFDO0lBQ0YsSUFBSSxjQUFtQyxDQUFDO0lBRXhDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxLQUFLLEdBQUcsSUFBSSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUM7UUFFeEIsaUJBQWlCO1FBQ2pCLE1BQU0sZ0JBQWdCLEdBQUcsQ0FBQyxFQUFVLEVBQW9CLEVBQUU7WUFDeEQsT0FBTyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRTtnQkFDcEMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVztnQkFDbkMsT0FBTyxFQUFFLGVBQWU7Z0JBQ3hCLElBQUksRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxtQ0FBbUMsQ0FBQztnQkFDakUsWUFBWSxFQUFFLFFBQVEsRUFBRSxDQUFDLFdBQVcsRUFBRSxFQUFFO2FBQ3pDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQztRQUVGLG1CQUFtQixHQUFHO1lBQ3BCLFNBQVMsRUFBRSxnQkFBZ0IsQ0FBQyxtQkFBbUIsQ0FBQztZQUNoRCxLQUFLLEVBQUUsZ0JBQWdCLENBQUMsZUFBZSxDQUFDO1lBQ3hDLE1B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QUFFLEdBQUcsRUFBRTtZQUNoQyxNQUFNLENBQUMsR0FBRyxFQUFFO2dCQUNWLElBQUksb0NBQWdCLENBQUMsS0FBSyxFQUFFLGtCQUFrQixFQUFFO29CQUM5QyxlQUFlLEVBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQztvQkFDbkQsV0FBVyxFQUFFLGFBQWE7aUJBQzNCLENBQUMsQ0FBQztZQUNMLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUVqQixNQUFNLFFBQVEsR0FBRyxxQkFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUUzQyxvQkFBb0I7WUFDcEIsUUFBUSxDQUFDLGVBQWUsQ0FBQyx3QkFBd0IsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUN6RCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcY2RrXFxfX3Rlc3RzX19cXGNsb3Vkd2F0Y2gtaW50ZWdyYXRpb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ2xvdWRXYXRjaCBJbnRlZ3JhdGlvbiBUZXN0c1xyXG4gKiBcclxuICog44GZ44G544Gm44GuQ2xvdWRXYXRjaOOCs+ODs+ODneODvOODjeODs+ODiO+8iOODoeODiOODquOCr+OCueOAgeOCouODqeODvOODoOOAgeODgOODg+OCt+ODpeODnOODvOODie+8ieOBjFxyXG4gKiDmraPjgZfjgY/ntbHlkIjjgZXjgozjgabjgYTjgovjgZPjgajjgpLmpJzoqLzjgZfjgb7jgZnjgIJcclxuICogXHJcbiAqIFJlcXVpcmVtZW50czog6KaB5Lu2MTQuMe+8iOODhuOCueODiO+8iVxyXG4gKi9cclxuXHJcbmltcG9ydCAqIGFzIGNkayBmcm9tICdhd3MtY2RrLWxpYic7XHJcbmltcG9ydCAqIGFzIGxhbWJkYSBmcm9tICdhd3MtY2RrLWxpYi9hd3MtbGFtYmRhJztcclxuaW1wb3J0ICogYXMgZHluYW1vZGIgZnJvbSAnYXdzLWNkay1saWIvYXdzLWR5bmFtb2RiJztcclxuaW1wb3J0ICogYXMgczMgZnJvbSAnYXdzLWNkay1saWIvYXdzLXMzJztcclxuaW1wb3J0ICogYXMgYXBpZ2F0ZXdheSBmcm9tICdhd3MtY2RrLWxpYi9hd3MtYXBpZ2F0ZXdheSc7XHJcbmltcG9ydCB7IFRlbXBsYXRlLCBNYXRjaCB9IGZyb20gJ2F3cy1jZGstbGliL2Fzc2VydGlvbnMnO1xyXG5pbXBvcnQgeyBDbG91ZFdhdGNoQWxhcm1zIH0gZnJvbSAnLi4vbGliL2NvbnN0cnVjdHMvY2xvdWR3YXRjaC1hbGFybXMnO1xyXG5pbXBvcnQgeyBDbG91ZFdhdGNoRGFzaGJvYXJkIH0gZnJvbSAnLi4vbGliL2NvbnN0cnVjdHMvY2xvdWR3YXRjaC1kYXNoYm9hcmQnO1xyXG5cclxuZGVzY3JpYmUoJ0Nsb3VkV2F0Y2ggSW50ZWdyYXRpb24gVGVzdHMnLCAoKSA9PiB7XHJcbiAgbGV0IHN0YWNrOiBjZGsuU3RhY2s7XHJcbiAgbGV0IG1vY2tMYW1iZGFGdW5jdGlvbnM6IHtcclxuICAgIGNvbGxlY3RvcjogbGFtYmRhLklGdW5jdGlvbjtcclxuICAgIHF1ZXJ5OiBsYW1iZGEuSUZ1bmN0aW9uO1xyXG4gICAgZXhwb3J0OiBsYW1iZGEuSUZ1bmN0aW9uO1xyXG4gIH07XHJcbiAgbGV0IG1vY2tEeW5hbW9kYlRhYmxlczoge1xyXG4gICAgZGlzY2xvc3VyZXM6IGR5bmFtb2RiLklUYWJsZTtcclxuICAgIGV4ZWN1dGlvbnM6IGR5bmFtb2RiLklUYWJsZTtcclxuICAgIGV4cG9ydFN0YXR1czogZHluYW1vZGIuSVRhYmxlO1xyXG4gIH07XHJcbiAgbGV0IG1vY2tTM0J1Y2tldHM6IHtcclxuICAgIHBkZnM6IHMzLklCdWNrZXQ7XHJcbiAgICBleHBvcnRzOiBzMy5JQnVja2V0O1xyXG4gIH07XHJcbiAgbGV0IG1vY2tBcGlHYXRld2F5OiBhcGlnYXRld2F5LklSZXN0QXBpO1xyXG5cclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xyXG5cclxuICAgIC8vIOODouODg+OCr0xhbWJkYemWouaVsOOCkuS9nOaIkFxyXG4gICAgY29uc3QgY3JlYXRlTW9ja0xhbWJkYSA9IChpZDogc3RyaW5nKTogbGFtYmRhLklGdW5jdGlvbiA9PiB7XHJcbiAgICAgIHJldHVybiBuZXcgbGFtYmRhLkZ1bmN0aW9uKHN0YWNrLCBpZCwge1xyXG4gICAgICAgIHJ1bnRpbWU6IGxhbWJkYS5SdW50aW1lLk5PREVKU18yMF9YLFxyXG4gICAgICAgIGhhbmRsZXI6ICdpbmRleC5oYW5kbGVyJyxcclxuICAgICAgICBjb2RlOiBsYW1iZGEuQ29kZS5mcm9tSW5saW5lKCdleHBvcnRzLmhhbmRsZXIgPSBhc3luYyAoKSA9PiB7fTsnKSxcclxuICAgICAgICBmdW5jdGlvbk5hbWU6IGB0ZXN0LSR7aWQudG9Mb3dlckNhc2UoKX1gLFxyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgbW9ja0xhbWJkYUZ1bmN0aW9ucyA9IHtcclxuICAgICAgY29sbGVjdG9yOiBjcmVhdGVNb2NrTGFtYmRhKCdDb2xsZWN0b3JGdW5jdGlvbicpLFxyXG4gICAgICBxdWVyeTogY3JlYXRlTW9ja0xhbWJkYSgnUXVlcnlGdW5jdGlvbicpLFxyXG4gICAgICBleHBvcnQ6IGNyZWF0ZU1vY2tMYW1iZGEoJ0V4cG9ydEZ1bmN0aW9uJyksXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIOODouODg+OCr0R5bmFtb0RC44OG44O844OW44Or44KS5L2c5oiQXHJcbiAgICBtb2NrRHluYW1vZGJUYWJsZXMgPSB7XHJcbiAgICAgIGRpc2Nsb3N1cmVzOiBuZXcgZHluYW1vZGIuVGFibGUoc3RhY2ssICdEaXNjbG9zdXJlc1RhYmxlJywge1xyXG4gICAgICAgIHBhcnRpdGlvbktleTogeyBuYW1lOiAnZGlzY2xvc3VyZV9pZCcsIHR5cGU6IGR5bmFtb2RiLkF0dHJpYnV0ZVR5cGUuU1RSSU5HIH0sXHJcbiAgICAgIH0pLFxyXG4gICAgICBleGVjdXRpb25zOiBuZXcgZHluYW1vZGIuVGFibGUoc3RhY2ssICdFeGVjdXRpb25zVGFibGUnLCB7XHJcbiAgICAgICAgcGFydGl0aW9uS2V5OiB7IG5hbWU6ICdleGVjdXRpb25faWQnLCB0eXBlOiBkeW5hbW9kYi5BdHRyaWJ1dGVUeXBlLlNUUklORyB9LFxyXG4gICAgICB9KSxcclxuICAgICAgZXhwb3J0U3RhdHVzOiBuZXcgZHluYW1vZGIuVGFibGUoc3RhY2ssICdFeHBvcnRTdGF0dXNUYWJsZScsIHtcclxuICAgICAgICBwYXJ0aXRpb25LZXk6IHsgbmFtZTogJ2V4cG9ydF9pZCcsIHR5cGU6IGR5bmFtb2RiLkF0dHJpYnV0ZVR5cGUuU1RSSU5HIH0sXHJcbiAgICAgIH0pLFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyDjg6Ljg4Pjgq9TM+ODkOOCseODg+ODiOOCkuS9nOaIkFxyXG4gICAgbW9ja1MzQnVja2V0cyA9IHtcclxuICAgICAgcGRmczogbmV3IHMzLkJ1Y2tldChzdGFjaywgJ1BkZnNCdWNrZXQnKSxcclxuICAgICAgZXhwb3J0czogbmV3IHMzLkJ1Y2tldChzdGFjaywgJ0V4cG9ydHNCdWNrZXQnKSxcclxuICAgIH07XHJcblxyXG4gICAgLy8g44Oi44OD44KvQVBJIEdhdGV3YXnjgpLkvZzmiJBcclxuICAgIG1vY2tBcGlHYXRld2F5ID0gbmV3IGFwaWdhdGV3YXkuUmVzdEFwaShzdGFjaywgJ1Rlc3RBcGknLCB7XHJcbiAgICAgIHJlc3RBcGlOYW1lOiAndGVzdC1hcGknLFxyXG4gICAgICBkZXBsb3k6IGZhbHNlLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g44OA44Of44O844Oq44K944O844K544Go44Oh44K944OD44OJ44KS6L+95YqgXHJcbiAgICBjb25zdCByZXNvdXJjZSA9IG1vY2tBcGlHYXRld2F5LnJvb3QuYWRkUmVzb3VyY2UoJ3Rlc3QnKTtcclxuICAgIHJlc291cmNlLmFkZE1ldGhvZCgnR0VUJyk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfjgqvjgrnjgr/jg6Djg6Hjg4jjg6rjgq/jgrnjga7pgIHkv6Hnorroqo0nLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCdMYW1iZGHplqLmlbDjgatDbG91ZFdhdGNo44Oh44OI44Oq44Kv44K56YCB5L+h5qip6ZmQ44GM5LuY5LiO44GV44KM44Gm44GE44KL44GT44GoJywgKCkgPT4ge1xyXG4gICAgICAvLyBMYW1iZGHplqLmlbDjgavjg6Hjg4jjg6rjgq/jgrnpgIHkv6HmqKnpmZDjgpLku5jkuI5cclxuICAgICAgT2JqZWN0LnZhbHVlcyhtb2NrTGFtYmRhRnVuY3Rpb25zKS5mb3JFYWNoKChmbikgPT4ge1xyXG4gICAgICAgIGZuLmFkZFRvUm9sZVBvbGljeShcclxuICAgICAgICAgIG5ldyBjZGsuYXdzX2lhbS5Qb2xpY3lTdGF0ZW1lbnQoe1xyXG4gICAgICAgICAgICBlZmZlY3Q6IGNkay5hd3NfaWFtLkVmZmVjdC5BTExPVyxcclxuICAgICAgICAgICAgYWN0aW9uczogWydjbG91ZHdhdGNoOlB1dE1ldHJpY0RhdGEnXSxcclxuICAgICAgICAgICAgcmVzb3VyY2VzOiBbJyonXSxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IFRlbXBsYXRlLmZyb21TdGFjayhzdGFjayk7XHJcblxyXG4gICAgICAvLyBJQU3jg53jg6rjgrfjg7zjgYzkvZzmiJDjgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OklBTTo6UG9saWN5Jywge1xyXG4gICAgICAgIFBvbGljeURvY3VtZW50OiB7XHJcbiAgICAgICAgICBTdGF0ZW1lbnQ6IE1hdGNoLmFycmF5V2l0aChbXHJcbiAgICAgICAgICAgIE1hdGNoLm9iamVjdExpa2Uoe1xyXG4gICAgICAgICAgICAgIEFjdGlvbjogJ2Nsb3Vkd2F0Y2g6UHV0TWV0cmljRGF0YScsXHJcbiAgICAgICAgICAgICAgRWZmZWN0OiAnQWxsb3cnLFxyXG4gICAgICAgICAgICAgIFJlc291cmNlOiAnKicsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCfjgqvjgrnjgr/jg6Djg6Hjg4jjg6rjgq/jgrnlkI3liY3nqbrplpPjgYzmraPjgZfjgY/oqK3lrprjgZXjgozjgabjgYTjgovjgZPjgagnLCAoKSA9PiB7XHJcbiAgICAgIC8vIOODoeODiOODquOCr+OCuemAgeS/oeOBruODhuOCueODiO+8iOWun+mam+OBruODoeODiOODquOCr+OCuemAgeS/oeOBr3NyYy91dGlscy9tZXRyaWNzLnRz44Gn44OG44K544OI5riI44G/77yJXHJcbiAgICAgIC8vIOOBk+OBk+OBp+OBr0xhbWJkYemWouaVsOOBjOato+OBl+OBhOeSsOWig+WkieaVsOOCkuaMgeOBo+OBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG5cclxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spO1xyXG5cclxuICAgICAgLy8gTGFtYmRh6Zai5pWw44GM5L2c5oiQ44GV44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIHRlbXBsYXRlLnJlc291cmNlQ291bnRJcygnQVdTOjpMYW1iZGE6OkZ1bmN0aW9uJywgMyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCfjgZnjgbnjgabjga5MYW1iZGHplqLmlbDjgYzjg6Hjg4jjg6rjgq/jgrnpgIHkv6HmqKnpmZDjgpLmjIHjgaTjgZPjgagnLCAoKSA9PiB7XHJcbiAgICAgIC8vIOOBmeOBueOBpuOBrkxhbWJkYemWouaVsOOBq+ODoeODiOODquOCr+OCuemAgeS/oeaoqemZkOOCkuS7mOS4jlxyXG4gICAgICBPYmplY3QudmFsdWVzKG1vY2tMYW1iZGFGdW5jdGlvbnMpLmZvckVhY2goKGZuKSA9PiB7XHJcbiAgICAgICAgZm4uYWRkVG9Sb2xlUG9saWN5KFxyXG4gICAgICAgICAgbmV3IGNkay5hd3NfaWFtLlBvbGljeVN0YXRlbWVudCh7XHJcbiAgICAgICAgICAgIGVmZmVjdDogY2RrLmF3c19pYW0uRWZmZWN0LkFMTE9XLFxyXG4gICAgICAgICAgICBhY3Rpb25zOiBbJ2Nsb3Vkd2F0Y2g6UHV0TWV0cmljRGF0YSddLFxyXG4gICAgICAgICAgICByZXNvdXJjZXM6IFsnKiddLFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKTtcclxuXHJcbiAgICAgIC8vIDPjgaTjga5MYW1iZGHplqLmlbDjgavlr77jgZfjgaYz44Gk44GuSUFN44Od44Oq44K344O844GM5L2c5oiQ44GV44KM44KLXHJcbiAgICAgIHRlbXBsYXRlLnJlc291cmNlQ291bnRJcygnQVdTOjpJQU06OlBvbGljeScsIDMpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfjgqLjg6njg7zjg6Djga7oqK3lrprnorroqo0nLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCfjgZnjgbnjgabjga5MYW1iZGHplqLmlbDjgavlr77jgZfjgabjgqLjg6njg7zjg6DjgYzkvZzmiJDjgZXjgozjgovjgZPjgagnLCAoKSA9PiB7XHJcbiAgICAgIC8vIENsb3VkV2F0Y2ggQWxhcm1z44KS5L2c5oiQXHJcbiAgICAgIG5ldyBDbG91ZFdhdGNoQWxhcm1zKHN0YWNrLCAnVGVzdEFsYXJtcycsIHtcclxuICAgICAgICBsYW1iZGFGdW5jdGlvbnM6IE9iamVjdC52YWx1ZXMobW9ja0xhbWJkYUZ1bmN0aW9ucyksXHJcbiAgICAgICAgZW52aXJvbm1lbnQ6ICd0ZXN0JyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IFRlbXBsYXRlLmZyb21TdGFjayhzdGFjayk7XHJcblxyXG4gICAgICAvLyDlkIRMYW1iZGHplqLmlbDjgavlr77jgZfjgaYz44Gk44Gu44Ki44Op44O844Og77yIRXJyb3IgUmF0ZSwgRHVyYXRpb24sIFRocm90dGxlc++8iVxyXG4gICAgICAvLyArIOOCq+OCueOCv+ODoOODoeODiOODquOCr+OCueOCouODqeODvOODoDPjgaTvvIhDb2xsZWN0aW9uU3VjY2Vzc1JhdGUsIE5vRGF0YSwgQ29sbGVjdGlvbkZhaWx1cmXvvIlcclxuICAgICAgLy8gPSAzICogMyArIDMgPSAxMuWAi+OBruOCouODqeODvOODoFxyXG4gICAgICB0ZW1wbGF0ZS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6Q2xvdWRXYXRjaDo6QWxhcm0nLCAxMik7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCfjgqLjg6njg7zjg6DjgatTTlPjg4jjg5Tjg4Pjgq/jgYzplqLpgKPku5jjgZHjgonjgozjgabjgYTjgovjgZPjgagnLCAoKSA9PiB7XHJcbiAgICAgIC8vIENsb3VkV2F0Y2ggQWxhcm1z44KS5L2c5oiQXHJcbiAgICAgIG5ldyBDbG91ZFdhdGNoQWxhcm1zKHN0YWNrLCAnVGVzdEFsYXJtcycsIHtcclxuICAgICAgICBsYW1iZGFGdW5jdGlvbnM6IE9iamVjdC52YWx1ZXMobW9ja0xhbWJkYUZ1bmN0aW9ucyksXHJcbiAgICAgICAgZW52aXJvbm1lbnQ6ICd0ZXN0JyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IFRlbXBsYXRlLmZyb21TdGFjayhzdGFjayk7XHJcblxyXG4gICAgICAvLyBTTlMgVG9waWPjgYzkvZzmiJDjgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgdGVtcGxhdGUucmVzb3VyY2VDb3VudElzKCdBV1M6OlNOUzo6VG9waWMnLCAxKTtcclxuXHJcbiAgICAgIC8vIOOBmeOBueOBpuOBruOCouODqeODvOODoOOBq0FsYXJtQWN0aW9uc+OBjOioreWumuOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICBjb25zdCBhbGFybXMgPSB0ZW1wbGF0ZS5maW5kUmVzb3VyY2VzKCdBV1M6OkNsb3VkV2F0Y2g6OkFsYXJtJyk7XHJcbiAgICAgIGNvbnN0IGFsYXJtS2V5cyA9IE9iamVjdC5rZXlzKGFsYXJtcyk7XHJcblxyXG4gICAgICBleHBlY3QoYWxhcm1LZXlzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG5cclxuICAgICAgYWxhcm1LZXlzLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFsYXJtID0gYWxhcm1zW2tleV07XHJcbiAgICAgICAgZXhwZWN0KGFsYXJtLlByb3BlcnRpZXMuQWxhcm1BY3Rpb25zKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICAgIGV4cGVjdChhbGFybS5Qcm9wZXJ0aWVzLkFsYXJtQWN0aW9ucy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCfjgqvjgrnjgr/jg6Djg6Hjg4jjg6rjgq/jgrnjgqLjg6njg7zjg6DjgYzkvZzmiJDjgZXjgozjgovjgZPjgagnLCAoKSA9PiB7XHJcbiAgICAgIC8vIENsb3VkV2F0Y2ggQWxhcm1z44KS5L2c5oiQXHJcbiAgICAgIG5ldyBDbG91ZFdhdGNoQWxhcm1zKHN0YWNrLCAnVGVzdEFsYXJtcycsIHtcclxuICAgICAgICBsYW1iZGFGdW5jdGlvbnM6IE9iamVjdC52YWx1ZXMobW9ja0xhbWJkYUZ1bmN0aW9ucyksXHJcbiAgICAgICAgZW52aXJvbm1lbnQ6ICd0ZXN0JyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IFRlbXBsYXRlLmZyb21TdGFjayhzdGFjayk7XHJcblxyXG4gICAgICAvLyBDb2xsZWN0aW9uU3VjY2Vzc1JhdGXjgqLjg6njg7zjg6DvvIhNYXRoRXhwcmVzc2lvbuOCkuS9v+eUqOOBl+OBpuOBhOOCi+OBn+OCgU1ldHJpY05hbWUvTmFtZXNwYWNl44Gv5pyq5a6a576p77yJXHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDbG91ZFdhdGNoOjpBbGFybScsIHtcclxuICAgICAgICBBbGFybU5hbWU6ICd0ZG5ldC1jb2xsZWN0aW9uLXN1Y2Nlc3MtcmF0ZS10ZXN0JyxcclxuICAgICAgICBDb21wYXJpc29uT3BlcmF0b3I6ICdMZXNzVGhhblRocmVzaG9sZCcsXHJcbiAgICAgICAgVGhyZXNob2xkOiA5NSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBOb0RhdGFDb2xsZWN0ZWTjgqLjg6njg7zjg6BcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNsb3VkV2F0Y2g6OkFsYXJtJywge1xyXG4gICAgICAgIEFsYXJtTmFtZTogJ3RkbmV0LW5vLWRhdGEtY29sbGVjdGVkLXRlc3QnLFxyXG4gICAgICAgIE1ldHJpY05hbWU6ICdEaXNjbG9zdXJlc0NvbGxlY3RlZCcsXHJcbiAgICAgICAgTmFtZXNwYWNlOiAnVERuZXQvQ29sbGVjdG9yJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBDb2xsZWN0aW9uRmFpbHVyZeOCouODqeODvOODoFxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q2xvdWRXYXRjaDo6QWxhcm0nLCB7XHJcbiAgICAgICAgQWxhcm1OYW1lOiAndGRuZXQtY29sbGVjdGlvbi1mYWlsdXJlcy10ZXN0JyxcclxuICAgICAgICBNZXRyaWNOYW1lOiAnRGlzY2xvc3VyZXNGYWlsZWQnLFxyXG4gICAgICAgIE5hbWVzcGFjZTogJ1REbmV0L0NvbGxlY3RvcicsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgn44Ki44Op44O844Og6Za+5YCk44GM5q2j44GX44GP6Kit5a6a44GV44KM44Gm44GE44KL44GT44GoJywgKCkgPT4ge1xyXG4gICAgICAvLyBDbG91ZFdhdGNoIEFsYXJtc+OCkuS9nOaIkFxyXG4gICAgICBuZXcgQ2xvdWRXYXRjaEFsYXJtcyhzdGFjaywgJ1Rlc3RBbGFybXMnLCB7XHJcbiAgICAgICAgbGFtYmRhRnVuY3Rpb25zOiBPYmplY3QudmFsdWVzKG1vY2tMYW1iZGFGdW5jdGlvbnMpLFxyXG4gICAgICAgIGVudmlyb25tZW50OiAndGVzdCcsXHJcbiAgICAgICAgZXJyb3JSYXRlVGhyZXNob2xkOiA1LFxyXG4gICAgICAgIGR1cmF0aW9uVGhyZXNob2xkOiA2MDAsXHJcbiAgICAgICAgY29sbGVjdGlvblN1Y2Nlc3NSYXRlVGhyZXNob2xkOiA5MCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IFRlbXBsYXRlLmZyb21TdGFjayhzdGFjayk7XHJcblxyXG4gICAgICAvLyBFcnJvciBSYXRlOiA1JVxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q2xvdWRXYXRjaDo6QWxhcm0nLCB7XHJcbiAgICAgICAgVGhyZXNob2xkOiA1LFxyXG4gICAgICAgIENvbXBhcmlzb25PcGVyYXRvcjogJ0dyZWF0ZXJUaGFuVGhyZXNob2xkJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBEdXJhdGlvbjogNjAw56eSID0gNjAwMDAw44Of44Oq56eSXHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDbG91ZFdhdGNoOjpBbGFybScsIHtcclxuICAgICAgICBUaHJlc2hvbGQ6IDYwMDAwMCxcclxuICAgICAgICBDb21wYXJpc29uT3BlcmF0b3I6ICdHcmVhdGVyVGhhblRocmVzaG9sZCcsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gQ29sbGVjdGlvblN1Y2Nlc3NSYXRlOiA5MCVcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNsb3VkV2F0Y2g6OkFsYXJtJywge1xyXG4gICAgICAgIEFsYXJtTmFtZTogJ3RkbmV0LWNvbGxlY3Rpb24tc3VjY2Vzcy1yYXRlLXRlc3QnLFxyXG4gICAgICAgIFRocmVzaG9sZDogOTAsXHJcbiAgICAgICAgQ29tcGFyaXNvbk9wZXJhdG9yOiAnTGVzc1RoYW5UaHJlc2hvbGQnLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgn44OA44OD44K344Ol44Oc44O844OJ44Gu6KGo56S656K66KqNJywgKCkgPT4ge1xyXG4gICAgdGVzdCgn44OA44OD44K344Ol44Oc44O844OJ44GM5q2j44GX44GP5L2c5oiQ44GV44KM44KL44GT44GoJywgKCkgPT4ge1xyXG4gICAgICAvLyBDbG91ZFdhdGNoIERhc2hib2FyZOOCkuS9nOaIkFxyXG4gICAgICBjb25zdCBkYXNoYm9hcmQgPSBuZXcgQ2xvdWRXYXRjaERhc2hib2FyZChzdGFjaywgJ1Rlc3REYXNoYm9hcmQnLCB7XHJcbiAgICAgICAgZW52aXJvbm1lbnQ6ICd0ZXN0JyxcclxuICAgICAgICBsYW1iZGFGdW5jdGlvbnM6IHtcclxuICAgICAgICAgIGNvbGxlY3RvcjogbW9ja0xhbWJkYUZ1bmN0aW9ucy5jb2xsZWN0b3IsXHJcbiAgICAgICAgICBxdWVyeTogbW9ja0xhbWJkYUZ1bmN0aW9ucy5xdWVyeSxcclxuICAgICAgICAgIGV4cG9ydDogbW9ja0xhbWJkYUZ1bmN0aW9ucy5leHBvcnQsXHJcbiAgICAgICAgICBjb2xsZWN0OiBtb2NrTGFtYmRhRnVuY3Rpb25zLmNvbGxlY3RvciwgLy8g5ZCM44GY6Zai5pWw44KS5L2/55SoXHJcbiAgICAgICAgICBjb2xsZWN0U3RhdHVzOiBtb2NrTGFtYmRhRnVuY3Rpb25zLmNvbGxlY3RvcixcclxuICAgICAgICAgIGV4cG9ydFN0YXR1czogbW9ja0xhbWJkYUZ1bmN0aW9ucy5leHBvcnQsXHJcbiAgICAgICAgICBwZGZEb3dubG9hZDogbW9ja0xhbWJkYUZ1bmN0aW9ucy5xdWVyeSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGR5bmFtb2RiVGFibGVzOiBtb2NrRHluYW1vZGJUYWJsZXMsXHJcbiAgICAgICAgczNCdWNrZXRzOiBtb2NrUzNCdWNrZXRzLFxyXG4gICAgICAgIGFwaUdhdGV3YXk6IG1vY2tBcGlHYXRld2F5LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIOODgOODg+OCt+ODpeODnOODvOODieOBjOS9nOaIkOOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICBleHBlY3QoZGFzaGJvYXJkLmRhc2hib2FyZCkudG9CZURlZmluZWQoKTtcclxuXHJcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKTtcclxuXHJcbiAgICAgIC8vIOODgOODg+OCt+ODpeODnOODvOODieODquOCveODvOOCueOBjOWtmOWcqOOBmeOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q2xvdWRXYXRjaDo6RGFzaGJvYXJkJywge1xyXG4gICAgICAgIERhc2hib2FyZE5hbWU6ICd0ZG5ldC1jb2xsZWN0b3ItdGVzdCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgn44OA44OD44K344Ol44Oc44O844OJ44Gr44GZ44G544Gm44Gu44Km44Kj44K444Kn44OD44OI44GM5ZCr44G+44KM44Gm44GE44KL44GT44GoJywgKCkgPT4ge1xyXG4gICAgICAvLyBDbG91ZFdhdGNoIERhc2hib2FyZOOCkuS9nOaIkFxyXG4gICAgICBuZXcgQ2xvdWRXYXRjaERhc2hib2FyZChzdGFjaywgJ1Rlc3REYXNoYm9hcmQnLCB7XHJcbiAgICAgICAgZW52aXJvbm1lbnQ6ICd0ZXN0JyxcclxuICAgICAgICBsYW1iZGFGdW5jdGlvbnM6IHtcclxuICAgICAgICAgIGNvbGxlY3RvcjogbW9ja0xhbWJkYUZ1bmN0aW9ucy5jb2xsZWN0b3IsXHJcbiAgICAgICAgICBxdWVyeTogbW9ja0xhbWJkYUZ1bmN0aW9ucy5xdWVyeSxcclxuICAgICAgICAgIGV4cG9ydDogbW9ja0xhbWJkYUZ1bmN0aW9ucy5leHBvcnQsXHJcbiAgICAgICAgICBjb2xsZWN0OiBtb2NrTGFtYmRhRnVuY3Rpb25zLmNvbGxlY3RvcixcclxuICAgICAgICAgIGNvbGxlY3RTdGF0dXM6IG1vY2tMYW1iZGFGdW5jdGlvbnMuY29sbGVjdG9yLFxyXG4gICAgICAgICAgZXhwb3J0U3RhdHVzOiBtb2NrTGFtYmRhRnVuY3Rpb25zLmV4cG9ydCxcclxuICAgICAgICAgIHBkZkRvd25sb2FkOiBtb2NrTGFtYmRhRnVuY3Rpb25zLnF1ZXJ5LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHluYW1vZGJUYWJsZXM6IG1vY2tEeW5hbW9kYlRhYmxlcyxcclxuICAgICAgICBzM0J1Y2tldHM6IG1vY2tTM0J1Y2tldHMsXHJcbiAgICAgICAgYXBpR2F0ZXdheTogbW9ja0FwaUdhdGV3YXksXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spO1xyXG5cclxuICAgICAgLy8g44OA44OD44K344Ol44Oc44O844OJ44Oq44K944O844K544GM5a2Y5Zyo44GZ44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIHRlbXBsYXRlLnJlc291cmNlQ291bnRJcygnQVdTOjpDbG91ZFdhdGNoOjpEYXNoYm9hcmQnLCAxKTtcclxuXHJcbiAgICAgIC8vIOODgOODg+OCt+ODpeODnOODvOODieODquOCveODvOOCueOCkuWPluW+l1xyXG4gICAgICBjb25zdCBkYXNoYm9hcmRzID0gdGVtcGxhdGUuZmluZFJlc291cmNlcygnQVdTOjpDbG91ZFdhdGNoOjpEYXNoYm9hcmQnKTtcclxuICAgICAgY29uc3QgZGFzaGJvYXJkS2V5cyA9IE9iamVjdC5rZXlzKGRhc2hib2FyZHMpO1xyXG4gICAgICBleHBlY3QoZGFzaGJvYXJkS2V5cy5sZW5ndGgpLnRvQmUoMSk7XHJcblxyXG4gICAgICAvLyBEYXNoYm9hcmRCb2R544OX44Ot44OR44OG44Kj44GM5a2Y5Zyo44GZ44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIGNvbnN0IGRhc2hib2FyZCA9IGRhc2hib2FyZHNbZGFzaGJvYXJkS2V5c1swXV07XHJcbiAgICAgIGV4cGVjdChkYXNoYm9hcmQuUHJvcGVydGllcy5EYXNoYm9hcmRCb2R5KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgn44OA44OD44K344Ol44Oc44O844OJ5ZCN44Gr55Kw5aKD5ZCN44GM5ZCr44G+44KM44Gm44GE44KL44GT44GoJywgKCkgPT4ge1xyXG4gICAgICAvLyDmnKznlarnkrDlooPjgafjg4Djg4Pjgrfjg6Xjg5zjg7zjg4njgpLkvZzmiJBcclxuICAgICAgbmV3IENsb3VkV2F0Y2hEYXNoYm9hcmQoc3RhY2ssICdQcm9kRGFzaGJvYXJkJywge1xyXG4gICAgICAgIGVudmlyb25tZW50OiAncHJvZCcsXHJcbiAgICAgICAgbGFtYmRhRnVuY3Rpb25zOiB7XHJcbiAgICAgICAgICBjb2xsZWN0b3I6IG1vY2tMYW1iZGFGdW5jdGlvbnMuY29sbGVjdG9yLFxyXG4gICAgICAgICAgcXVlcnk6IG1vY2tMYW1iZGFGdW5jdGlvbnMucXVlcnksXHJcbiAgICAgICAgICBleHBvcnQ6IG1vY2tMYW1iZGFGdW5jdGlvbnMuZXhwb3J0LFxyXG4gICAgICAgICAgY29sbGVjdDogbW9ja0xhbWJkYUZ1bmN0aW9ucy5jb2xsZWN0b3IsXHJcbiAgICAgICAgICBjb2xsZWN0U3RhdHVzOiBtb2NrTGFtYmRhRnVuY3Rpb25zLmNvbGxlY3RvcixcclxuICAgICAgICAgIGV4cG9ydFN0YXR1czogbW9ja0xhbWJkYUZ1bmN0aW9ucy5leHBvcnQsXHJcbiAgICAgICAgICBwZGZEb3dubG9hZDogbW9ja0xhbWJkYUZ1bmN0aW9ucy5xdWVyeSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGR5bmFtb2RiVGFibGVzOiBtb2NrRHluYW1vZGJUYWJsZXMsXHJcbiAgICAgICAgczNCdWNrZXRzOiBtb2NrUzNCdWNrZXRzLFxyXG4gICAgICAgIGFwaUdhdGV3YXk6IG1vY2tBcGlHYXRld2F5LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKTtcclxuXHJcbiAgICAgIC8vIOODgOODg+OCt+ODpeODnOODvOODieWQjeOBq+eSsOWig+WQjeOBjOWQq+OBvuOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q2xvdWRXYXRjaDo6RGFzaGJvYXJkJywge1xyXG4gICAgICAgIERhc2hib2FyZE5hbWU6ICd0ZG5ldC1jb2xsZWN0b3ItcHJvZCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdDbG91ZFdhdGNo57Wx5ZCI44Gu5a6M5YWo5oCn56K66KqNJywgKCkgPT4ge1xyXG4gICAgdGVzdCgn44Oh44OI44Oq44Kv44K544CB44Ki44Op44O844Og44CB44OA44OD44K344Ol44Oc44O844OJ44GM44GZ44G544Gm6YCj5pC644GX44Gm44GE44KL44GT44GoJywgKCkgPT4ge1xyXG4gICAgICAvLyDjgZnjgbnjgabjga5MYW1iZGHplqLmlbDjgavjg6Hjg4jjg6rjgq/jgrnpgIHkv6HmqKnpmZDjgpLku5jkuI5cclxuICAgICAgT2JqZWN0LnZhbHVlcyhtb2NrTGFtYmRhRnVuY3Rpb25zKS5mb3JFYWNoKChmbikgPT4ge1xyXG4gICAgICAgIGZuLmFkZFRvUm9sZVBvbGljeShcclxuICAgICAgICAgIG5ldyBjZGsuYXdzX2lhbS5Qb2xpY3lTdGF0ZW1lbnQoe1xyXG4gICAgICAgICAgICBlZmZlY3Q6IGNkay5hd3NfaWFtLkVmZmVjdC5BTExPVyxcclxuICAgICAgICAgICAgYWN0aW9uczogWydjbG91ZHdhdGNoOlB1dE1ldHJpY0RhdGEnXSxcclxuICAgICAgICAgICAgcmVzb3VyY2VzOiBbJyonXSxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBDbG91ZFdhdGNoIEFsYXJtc+OCkuS9nOaIkFxyXG4gICAgICBuZXcgQ2xvdWRXYXRjaEFsYXJtcyhzdGFjaywgJ1Rlc3RBbGFybXMnLCB7XHJcbiAgICAgICAgbGFtYmRhRnVuY3Rpb25zOiBPYmplY3QudmFsdWVzKG1vY2tMYW1iZGFGdW5jdGlvbnMpLFxyXG4gICAgICAgIGVudmlyb25tZW50OiAndGVzdCcsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gQ2xvdWRXYXRjaCBEYXNoYm9hcmTjgpLkvZzmiJBcclxuICAgICAgbmV3IENsb3VkV2F0Y2hEYXNoYm9hcmQoc3RhY2ssICdUZXN0RGFzaGJvYXJkJywge1xyXG4gICAgICAgIGVudmlyb25tZW50OiAndGVzdCcsXHJcbiAgICAgICAgbGFtYmRhRnVuY3Rpb25zOiB7XHJcbiAgICAgICAgICBjb2xsZWN0b3I6IG1vY2tMYW1iZGFGdW5jdGlvbnMuY29sbGVjdG9yLFxyXG4gICAgICAgICAgcXVlcnk6IG1vY2tMYW1iZGFGdW5jdGlvbnMucXVlcnksXHJcbiAgICAgICAgICBleHBvcnQ6IG1vY2tMYW1iZGFGdW5jdGlvbnMuZXhwb3J0LFxyXG4gICAgICAgICAgY29sbGVjdDogbW9ja0xhbWJkYUZ1bmN0aW9ucy5jb2xsZWN0b3IsXHJcbiAgICAgICAgICBjb2xsZWN0U3RhdHVzOiBtb2NrTGFtYmRhRnVuY3Rpb25zLmNvbGxlY3RvcixcclxuICAgICAgICAgIGV4cG9ydFN0YXR1czogbW9ja0xhbWJkYUZ1bmN0aW9ucy5leHBvcnQsXHJcbiAgICAgICAgICBwZGZEb3dubG9hZDogbW9ja0xhbWJkYUZ1bmN0aW9ucy5xdWVyeSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGR5bmFtb2RiVGFibGVzOiBtb2NrRHluYW1vZGJUYWJsZXMsXHJcbiAgICAgICAgczNCdWNrZXRzOiBtb2NrUzNCdWNrZXRzLFxyXG4gICAgICAgIGFwaUdhdGV3YXk6IG1vY2tBcGlHYXRld2F5LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKTtcclxuXHJcbiAgICAgIC8vIExhbWJkYemWouaVsOOBjOS9nOaIkOOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6TGFtYmRhOjpGdW5jdGlvbicsIDMpO1xyXG5cclxuICAgICAgLy8gSUFN44Od44Oq44K344O844GM5L2c5oiQ44GV44KM44Gm44GE44KL44GT44Go44KS56K66KqN77yI44Oh44OI44Oq44Kv44K56YCB5L+h5qip6ZmQ77yJXHJcbiAgICAgIHRlbXBsYXRlLnJlc291cmNlQ291bnRJcygnQVdTOjpJQU06OlBvbGljeScsIDMpO1xyXG5cclxuICAgICAgLy8gQ2xvdWRXYXRjaCBBbGFybXPjgYzkvZzmiJDjgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgdGVtcGxhdGUucmVzb3VyY2VDb3VudElzKCdBV1M6OkNsb3VkV2F0Y2g6OkFsYXJtJywgMTIpO1xyXG5cclxuICAgICAgLy8gU05TIFRvcGlj44GM5L2c5oiQ44GV44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIHRlbXBsYXRlLnJlc291cmNlQ291bnRJcygnQVdTOjpTTlM6OlRvcGljJywgMSk7XHJcblxyXG4gICAgICAvLyBDbG91ZFdhdGNoIERhc2hib2FyZOOBjOS9nOaIkOOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6Q2xvdWRXYXRjaDo6RGFzaGJvYXJkJywgMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCfnkrDlooPjgZTjgajjgavnlbDjgarjgovoqK3lrprjgYzpgannlKjjgZXjgozjgovjgZPjgagnLCAoKSA9PiB7XHJcbiAgICAgIC8vIOmWi+eZuueSsOWig1xyXG4gICAgICBjb25zdCBkZXZTdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcclxuICAgICAgY29uc3QgZGV2TGFtYmRhID0gbmV3IGxhbWJkYS5GdW5jdGlvbihkZXZTdGFjaywgJ0RldkZ1bmN0aW9uJywge1xyXG4gICAgICAgIHJ1bnRpbWU6IGxhbWJkYS5SdW50aW1lLk5PREVKU18yMF9YLFxyXG4gICAgICAgIGhhbmRsZXI6ICdpbmRleC5oYW5kbGVyJyxcclxuICAgICAgICBjb2RlOiBsYW1iZGEuQ29kZS5mcm9tSW5saW5lKCdleHBvcnRzLmhhbmRsZXIgPSBhc3luYyAoKSA9PiB7fTsnKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBuZXcgQ2xvdWRXYXRjaEFsYXJtcyhkZXZTdGFjaywgJ0RldkFsYXJtcycsIHtcclxuICAgICAgICBsYW1iZGFGdW5jdGlvbnM6IFtkZXZMYW1iZGFdLFxyXG4gICAgICAgIGVudmlyb25tZW50OiAnZGV2JyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBkZXZUZW1wbGF0ZSA9IFRlbXBsYXRlLmZyb21TdGFjayhkZXZTdGFjayk7XHJcblxyXG4gICAgICAvLyDplovnmbrnkrDlooPjga7jgqLjg6njg7zjg6DlkI3jgpLnorroqo1cclxuICAgICAgZGV2VGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNsb3VkV2F0Y2g6OkFsYXJtJywge1xyXG4gICAgICAgIEFsYXJtTmFtZTogJ3RkbmV0LWNvbGxlY3Rpb24tc3VjY2Vzcy1yYXRlLWRldicsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8g5pys55Wq55Kw5aKDXHJcbiAgICAgIGNvbnN0IHByb2RTdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcclxuICAgICAgY29uc3QgcHJvZExhbWJkYSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24ocHJvZFN0YWNrLCAnUHJvZEZ1bmN0aW9uJywge1xyXG4gICAgICAgIHJ1bnRpbWU6IGxhbWJkYS5SdW50aW1lLk5PREVKU18yMF9YLFxyXG4gICAgICAgIGhhbmRsZXI6ICdpbmRleC5oYW5kbGVyJyxcclxuICAgICAgICBjb2RlOiBsYW1iZGEuQ29kZS5mcm9tSW5saW5lKCdleHBvcnRzLmhhbmRsZXIgPSBhc3luYyAoKSA9PiB7fTsnKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBuZXcgQ2xvdWRXYXRjaEFsYXJtcyhwcm9kU3RhY2ssICdQcm9kQWxhcm1zJywge1xyXG4gICAgICAgIGxhbWJkYUZ1bmN0aW9uczogW3Byb2RMYW1iZGFdLFxyXG4gICAgICAgIGVudmlyb25tZW50OiAncHJvZCcsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcHJvZFRlbXBsYXRlID0gVGVtcGxhdGUuZnJvbVN0YWNrKHByb2RTdGFjayk7XHJcblxyXG4gICAgICAvLyDmnKznlarnkrDlooPjga7jgqLjg6njg7zjg6DlkI3jgpLnorroqo1cclxuICAgICAgcHJvZFRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpDbG91ZFdhdGNoOjpBbGFybScsIHtcclxuICAgICAgICBBbGFybU5hbWU6ICd0ZG5ldC1jb2xsZWN0aW9uLXN1Y2Nlc3MtcmF0ZS1wcm9kJyxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCfjgZnjgbnjgabjga7jg6rjgr3jg7zjgrnjgYzmraPjgZfjgYTlkI3liY3nqbrplpPjgpLkvb/nlKjjgZfjgabjgYTjgovjgZPjgagnLCAoKSA9PiB7XHJcbiAgICAgIC8vIENsb3VkV2F0Y2ggQWxhcm1z44KS5L2c5oiQXHJcbiAgICAgIG5ldyBDbG91ZFdhdGNoQWxhcm1zKHN0YWNrLCAnVGVzdEFsYXJtcycsIHtcclxuICAgICAgICBsYW1iZGFGdW5jdGlvbnM6IE9iamVjdC52YWx1ZXMobW9ja0xhbWJkYUZ1bmN0aW9ucyksXHJcbiAgICAgICAgZW52aXJvbm1lbnQ6ICd0ZXN0JyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IFRlbXBsYXRlLmZyb21TdGFjayhzdGFjayk7XHJcblxyXG4gICAgICAvLyDjgqvjgrnjgr/jg6Djg6Hjg4jjg6rjgq/jgrnjgqLjg6njg7zjg6DjgYxURG5ldC9Db2xsZWN0b3LlkI3liY3nqbrplpPjgpLkvb/nlKjjgZfjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNsb3VkV2F0Y2g6OkFsYXJtJywge1xyXG4gICAgICAgIE1ldHJpY05hbWU6ICdEaXNjbG9zdXJlc0NvbGxlY3RlZCcsXHJcbiAgICAgICAgTmFtZXNwYWNlOiAnVERuZXQvQ29sbGVjdG9yJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6Q2xvdWRXYXRjaDo6QWxhcm0nLCB7XHJcbiAgICAgICAgTWV0cmljTmFtZTogJ0Rpc2Nsb3N1cmVzRmFpbGVkJyxcclxuICAgICAgICBOYW1lc3BhY2U6ICdURG5ldC9Db2xsZWN0b3InLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIExhbWJkYemWouaVsOOBruODoeODiOODquOCr+OCueOBr0FXUy9MYW1iZGHlkI3liY3nqbrplpPjgpLkvb/nlKhcclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNsb3VkV2F0Y2g6OkFsYXJtJywge1xyXG4gICAgICAgIE1ldHJpY05hbWU6ICdEdXJhdGlvbicsXHJcbiAgICAgICAgTmFtZXNwYWNlOiAnQVdTL0xhbWJkYScsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfjgqjjg6njg7zjgrfjg4rjg6rjgqrjga7norroqo0nLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCdMYW1iZGHplqLmlbDjgYzlrZjlnKjjgZfjgarjgYTloLTlkIjjgafjgoLjgrnjgr/jg4Pjgq/jgYzkvZzmiJDjgafjgY3jgovjgZPjgagnLCAoKSA9PiB7XHJcbiAgICAgIC8vIExhbWJkYemWouaVsOOBquOBl+OBp0Nsb3VkV2F0Y2ggQWxhcm1z44KS5L2c5oiQXHJcbiAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgbmV3IENsb3VkV2F0Y2hBbGFybXMoc3RhY2ssICdFbXB0eUFsYXJtcycsIHtcclxuICAgICAgICAgIGxhbWJkYUZ1bmN0aW9uczogW10sXHJcbiAgICAgICAgICBlbnZpcm9ubWVudDogJ3Rlc3QnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xyXG5cclxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spO1xyXG5cclxuICAgICAgLy8g44Kr44K544K/44Og44Oh44OI44Oq44Kv44K544Ki44Op44O844Og44Gu44G/44GM5L2c5oiQ44GV44KM44KL77yIM+WAi++8iVxyXG4gICAgICB0ZW1wbGF0ZS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6Q2xvdWRXYXRjaDo6QWxhcm0nLCAzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRlc3QoJ+eEoeWKueOBqueSsOWig+WQjeOBp+OCguOCueOCv+ODg+OCr+OBjOS9nOaIkOOBp+OBjeOCi+OBk+OBqCcsICgpID0+IHtcclxuICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICBuZXcgQ2xvdWRXYXRjaEFsYXJtcyhzdGFjaywgJ0ludmFsaWRFbnZBbGFybXMnLCB7XHJcbiAgICAgICAgICBsYW1iZGFGdW5jdGlvbnM6IE9iamVjdC52YWx1ZXMobW9ja0xhbWJkYUZ1bmN0aW9ucyksXHJcbiAgICAgICAgICBlbnZpcm9ubWVudDogJ2ludmFsaWQtZW52JyxcclxuICAgICAgICB9KTtcclxuICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuXHJcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKTtcclxuXHJcbiAgICAgIC8vIOOCouODqeODvOODoOOBjOS9nOaIkOOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5yZXNvdXJjZUNvdW50SXMoJ0FXUzo6Q2xvdWRXYXRjaDo6QWxhcm0nLCAxMik7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJ2ZXJzaW9uIjozfQ==