edc9be1c83fb4049f6c6fc1d248067ee
"use strict";
/**
 * 開示ID生成のプロパティベーステスト
 *
 * Property 4: 開示IDの一意性
 * - 異なる入力は異なるIDを生成
 * - 同じ入力は同じIDを生成
 *
 * Requirements: 要件2.3（開示ID生成）
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const fc = __importStar(require("fast-check"));
const disclosure_id_1 = require("../disclosure-id");
const errors_1 = require("../../errors");
describe('generateDisclosureId - Property Tests', () => {
    describe('Property 4: 開示IDの一意性', () => {
        it('異なる入力は異なるIDを生成', () => {
            fc.assert(fc.property(fc.array(fc.record({
                disclosedAt: fc
                    .date({ min: new Date('2020-01-01'), max: new Date('2030-12-31') })
                    .map((d) => d.toISOString()),
                companyCode: fc.integer({ min: 1000, max: 9999 }).map(String),
                sequence: fc.integer({ min: 1, max: 999 }),
            }), { minLength: 2, maxLength: 100 }), (inputs) => {
                const ids = inputs.map((input) => (0, disclosure_id_1.generateDisclosureId)(input.disclosedAt, input.companyCode, input.sequence));
                // すべてのIDが一意であることを確認
                const uniqueIds = new Set(ids);
                expect(uniqueIds.size).toBe(ids.length);
            }), { numRuns: 100 });
        });
        it('同じ入力は同じIDを生成（冪等性）', () => {
            fc.assert(fc.property(fc.record({
                disclosedAt: fc
                    .date({ min: new Date('2020-01-01'), max: new Date('2030-12-31') })
                    .map((d) => d.toISOString()),
                companyCode: fc.integer({ min: 1000, max: 9999 }).map(String),
                sequence: fc.integer({ min: 1, max: 999 }),
            }), (input) => {
                const id1 = (0, disclosure_id_1.generateDisclosureId)(input.disclosedAt, input.companyCode, input.sequence);
                const id2 = (0, disclosure_id_1.generateDisclosureId)(input.disclosedAt, input.companyCode, input.sequence);
                expect(id1).toBe(id2);
            }), { numRuns: 100 });
        });
    });
    describe('Unit Tests', () => {
        it('正しいフォーマットでIDを生成', () => {
            const disclosedAt = '2024-01-15T10:30:00Z';
            const companyCode = '1234';
            const sequence = 1;
            const id = (0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, sequence);
            expect(id).toBe('20240115_1234_001');
        });
        it('連番を3桁にゼロパディング', () => {
            const disclosedAt = '2024-01-15T10:30:00Z';
            const companyCode = '1234';
            expect((0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, 1)).toBe('20240115_1234_001');
            expect((0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, 10)).toBe('20240115_1234_010');
            expect((0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, 100)).toBe('20240115_1234_100');
            expect((0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, 999)).toBe('20240115_1234_999');
        });
        it('異なる日付で異なるIDを生成', () => {
            const companyCode = '1234';
            const sequence = 1;
            const id1 = (0, disclosure_id_1.generateDisclosureId)('2024-01-15T10:30:00Z', companyCode, sequence);
            const id2 = (0, disclosure_id_1.generateDisclosureId)('2024-01-16T10:30:00Z', companyCode, sequence);
            expect(id1).not.toBe(id2);
            expect(id1).toBe('20240115_1234_001');
            expect(id2).toBe('20240116_1234_001');
        });
        it('異なる企業コードで異なるIDを生成', () => {
            const disclosedAt = '2024-01-15T10:30:00Z';
            const sequence = 1;
            const id1 = (0, disclosure_id_1.generateDisclosureId)(disclosedAt, '1234', sequence);
            const id2 = (0, disclosure_id_1.generateDisclosureId)(disclosedAt, '5678', sequence);
            expect(id1).not.toBe(id2);
            expect(id1).toBe('20240115_1234_001');
            expect(id2).toBe('20240115_5678_001');
        });
        it('異なる連番で異なるIDを生成', () => {
            const disclosedAt = '2024-01-15T10:30:00Z';
            const companyCode = '1234';
            const id1 = (0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, 1);
            const id2 = (0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, 2);
            expect(id1).not.toBe(id2);
            expect(id1).toBe('20240115_1234_001');
            expect(id2).toBe('20240115_1234_002');
        });
    });
    describe('Validation Tests', () => {
        it('不正な日付フォーマットでエラー', () => {
            expect(() => (0, disclosure_id_1.generateDisclosureId)('invalid', '1234', 1)).toThrow(errors_1.ValidationError);
            expect(() => (0, disclosure_id_1.generateDisclosureId)('2024/01/15', '1234', 1)).toThrow(errors_1.ValidationError);
            expect(() => (0, disclosure_id_1.generateDisclosureId)('', '1234', 1)).toThrow(errors_1.ValidationError);
        });
        it('不正な企業コードでエラー', () => {
            const disclosedAt = '2024-01-15T10:30:00Z';
            expect(() => (0, disclosure_id_1.generateDisclosureId)(disclosedAt, '123', 1)).toThrow(errors_1.ValidationError); // 3桁
            expect(() => (0, disclosure_id_1.generateDisclosureId)(disclosedAt, '12345', 1)).toThrow(errors_1.ValidationError); // 5桁
            expect(() => (0, disclosure_id_1.generateDisclosureId)(disclosedAt, 'ABCD', 1)).toThrow(errors_1.ValidationError); // 非数字
            expect(() => (0, disclosure_id_1.generateDisclosureId)(disclosedAt, '', 1)).toThrow(errors_1.ValidationError); // 空文字
        });
        it('不正な連番でエラー', () => {
            const disclosedAt = '2024-01-15T10:30:00Z';
            const companyCode = '1234';
            expect(() => (0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, -1)).toThrow(errors_1.ValidationError); // 負数
            expect(() => (0, disclosure_id_1.generateDisclosureId)(disclosedAt, companyCode, 1000)).toThrow(errors_1.ValidationError); // 1000以上
        });
    });
    describe('Edge Cases', () => {
        it('月またぎの日付を正しく処理', () => {
            // UTC: 2024-01-31 23:59:59 → JST: 2024-02-01 08:59:59 (翌日)
            const id1 = (0, disclosure_id_1.generateDisclosureId)('2024-01-31T23:59:59Z', '1234', 1);
            // UTC: 2024-02-01 00:00:00 → JST: 2024-02-01 09:00:00 (同日)
            const id2 = (0, disclosure_id_1.generateDisclosureId)('2024-02-01T00:00:00Z', '1234', 1);
            // JST基準で日付を抽出するため、両方とも2024-02-01になる
            expect(id1).toBe('20240201_1234_001');
            expect(id2).toBe('20240201_1234_001');
        });
        it('年またぎの日付を正しく処理', () => {
            // UTC: 2023-12-31 23:59:59 → JST: 2024-01-01 08:59:59 (翌年)
            const id1 = (0, disclosure_id_1.generateDisclosureId)('2023-12-31T23:59:59Z', '1234', 1);
            // UTC: 2024-01-01 00:00:00 → JST: 2024-01-01 09:00:00 (同日)
            const id2 = (0, disclosure_id_1.generateDisclosureId)('2024-01-01T00:00:00Z', '1234', 1);
            // JST基準で日付を抽出するため、両方とも2024-01-01になる
            expect(id1).toBe('20240101_1234_001');
            expect(id2).toBe('20240101_1234_001');
        });
        it('うるう年の日付を正しく処理', () => {
            const id = (0, disclosure_id_1.generateDisclosureId)('2024-02-29T12:00:00Z', '1234', 1);
            expect(id).toBe('20240229_1234_001');
        });
        it('タイムゾーン付き日付を正しく処理', () => {
            const id1 = (0, disclosure_id_1.generateDisclosureId)('2024-01-15T10:30:00Z', '1234', 1);
            const id2 = (0, disclosure_id_1.generateDisclosureId)('2024-01-15T10:30:00+09:00', '1234', 1);
            // JST基準で日付を抽出
            // UTC 2024-01-15T10:30:00Z → JST 2024-01-15T19:30:00+09:00 → 20240115
            // JST 2024-01-15T10:30:00+09:00 → UTC 2024-01-15T01:30:00Z → JST 2024-01-15T10:30:00+09:00 → 20240115
            expect(id1).toBe('20240115_1234_001');
            expect(id2).toBe('20240115_1234_001');
        });
        it('月またぎのエッジケース（UTC深夜→JST翌日）を正しく処理', () => {
            // UTC: 2024-01-31T15:30:00Z → JST: 2024-02-01T00:30:00+09:00
            // UTCでは1月31日だが、JSTでは2月1日になる
            const id = (0, disclosure_id_1.generateDisclosureId)('2024-01-31T15:30:00Z', '1234', 1);
            expect(id).toBe('20240201_1234_001'); // JST基準で2月1日
        });
        it('年またぎのエッジケース（UTC深夜→JST翌年）を正しく処理', () => {
            // UTC: 2023-12-31T15:30:00Z → JST: 2024-01-01T00:30:00+09:00
            // UTCでは2023年12月31日だが、JSTでは2024年1月1日になる
            const id = (0, disclosure_id_1.generateDisclosureId)('2023-12-31T15:30:00Z', '1234', 1);
            expect(id).toBe('20240101_1234_001'); // JST基準で2024年1月1日
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFx1dGlsc1xcX190ZXN0c19fXFxkaXNjbG9zdXJlLWlkLnByb3BlcnR5LnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7OztHQVFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVILCtDQUFpQztBQUNqQyxvREFBd0Q7QUFDeEQseUNBQStDO0FBRS9DLFFBQVEsQ0FBQyx1Q0FBdUMsRUFBRSxHQUFHLEVBQUU7SUFDckQsUUFBUSxDQUFDLHNCQUFzQixFQUFFLEdBQUcsRUFBRTtRQUNwQyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1lBQ3hCLEVBQUUsQ0FBQyxNQUFNLENBQ1AsRUFBRSxDQUFDLFFBQVEsQ0FDVCxFQUFFLENBQUMsS0FBSyxDQUNOLEVBQUUsQ0FBQyxNQUFNLENBQUM7Z0JBQ1IsV0FBVyxFQUFFLEVBQUU7cUJBQ1osSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLEdBQUcsRUFBRSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDO3FCQUNsRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDOUIsV0FBVyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUM7Z0JBQzdELFFBQVEsRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7YUFDM0MsQ0FBQyxFQUNGLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLENBQ2pDLEVBQ0QsQ0FBQyxNQUFNLEVBQUUsRUFBRTtnQkFD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QkFBc0IsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDbkUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsYUFBYTtRQUNyRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxHQUFHLEVBQUU7WUFDeEMsNkRBQTZEO1lBQzdELHVDQUF1QztZQUN2QyxNQUFNLEVBQUUsR0FBRyxJQUFBLG9DQUFvQixFQUFDLHNCQUFzQixFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNuRSxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxrQkFBa0I7UUFDMUQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcdGkxOThcXGludmVzdG1lbnRfYW5hbHlzaXNfb3BvcG9cXHNyY1xcdXRpbHNcXF9fdGVzdHNfX1xcZGlzY2xvc3VyZS1pZC5wcm9wZXJ0eS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDplovnpLpJROeUn+aIkOOBruODl+ODreODkeODhuOCo+ODmeODvOOCueODhuOCueODiFxyXG4gKlxyXG4gKiBQcm9wZXJ0eSA0OiDplovnpLpJROOBruS4gOaEj+aAp1xyXG4gKiAtIOeVsOOBquOCi+WFpeWKm+OBr+eVsOOBquOCi0lE44KS55Sf5oiQXHJcbiAqIC0g5ZCM44GY5YWl5Yqb44Gv5ZCM44GYSUTjgpLnlJ/miJBcclxuICpcclxuICogUmVxdWlyZW1lbnRzOiDopoHku7YyLjPvvIjplovnpLpJROeUn+aIkO+8iVxyXG4gKi9cclxuXHJcbmltcG9ydCAqIGFzIGZjIGZyb20gJ2Zhc3QtY2hlY2snO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZURpc2Nsb3N1cmVJZCB9IGZyb20gJy4uL2Rpc2Nsb3N1cmUtaWQnO1xyXG5pbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tICcuLi8uLi9lcnJvcnMnO1xyXG5cclxuZGVzY3JpYmUoJ2dlbmVyYXRlRGlzY2xvc3VyZUlkIC0gUHJvcGVydHkgVGVzdHMnLCAoKSA9PiB7XHJcbiAgZGVzY3JpYmUoJ1Byb3BlcnR5IDQ6IOmWi+ekuklE44Gu5LiA5oSP5oCnJywgKCkgPT4ge1xyXG4gICAgaXQoJ+eVsOOBquOCi+WFpeWKm+OBr+eVsOOBquOCi0lE44KS55Sf5oiQJywgKCkgPT4ge1xyXG4gICAgICBmYy5hc3NlcnQoXHJcbiAgICAgICAgZmMucHJvcGVydHkoXHJcbiAgICAgICAgICBmYy5hcnJheShcclxuICAgICAgICAgICAgZmMucmVjb3JkKHtcclxuICAgICAgICAgICAgICBkaXNjbG9zZWRBdDogZmNcclxuICAgICAgICAgICAgICAgIC5kYXRlKHsgbWluOiBuZXcgRGF0ZSgnMjAyMC0wMS0wMScpLCBtYXg6IG5ldyBEYXRlKCcyMDMwLTEyLTMxJykgfSlcclxuICAgICAgICAgICAgICAgIC5tYXAoKGQpID0+IGQudG9JU09TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgY29tcGFueUNvZGU6IGZjLmludGVnZXIoeyBtaW46IDEwMDAsIG1heDogOTk5OSB9KS5tYXAoU3RyaW5nKSxcclxuICAgICAgICAgICAgICBzZXF1ZW5jZTogZmMuaW50ZWdlcih7IG1pbjogMSwgbWF4OiA5OTkgfSksXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICB7IG1pbkxlbmd0aDogMiwgbWF4TGVuZ3RoOiAxMDAgfVxyXG4gICAgICAgICAgKSxcclxuICAgICAgICAgIChpbnB1dHMpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaWRzID0gaW5wdXRzLm1hcCgoaW5wdXQpID0+XHJcbiAgICAgICAgICAgICAgZ2VuZXJhdGVEaXNjbG9zdXJlSWQoaW5wdXQuZGlzY2xvc2VkQXQsIGlucHV0LmNvbXBhbnlDb2RlLCBpbnB1dC5zZXF1ZW5jZSlcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOOBmeOBueOBpuOBrklE44GM5LiA5oSP44Gn44GC44KL44GT44Go44KS56K66KqNXHJcbiAgICAgICAgICAgIGNvbnN0IHVuaXF1ZUlkcyA9IG5ldyBTZXQoaWRzKTtcclxuICAgICAgICAgICAgZXhwZWN0KHVuaXF1ZUlkcy5zaXplKS50b0JlKGlkcy5sZW5ndGgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICksXHJcbiAgICAgICAgeyBudW1SdW5zOiAxMDAgfVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+WQjOOBmOWFpeWKm+OBr+WQjOOBmElE44KS55Sf5oiQ77yI5Yaq562J5oCn77yJJywgKCkgPT4ge1xyXG4gICAgICBmYy5hc3NlcnQoXHJcbiAgICAgICAgZmMucHJvcGVydHkoXHJcbiAgICAgICAgICBmYy5yZWNvcmQoe1xyXG4gICAgICAgICAgICBkaXNjbG9zZWRBdDogZmNcclxuICAgICAgICAgICAgICAuZGF0ZSh7IG1pbjogbmV3IERhdGUoJzIwMjAtMDEtMDEnKSwgbWF4OiBuZXcgRGF0ZSgnMjAzMC0xMi0zMScpIH0pXHJcbiAgICAgICAgICAgICAgLm1hcCgoZCkgPT4gZC50b0lTT1N0cmluZygpKSxcclxuICAgICAgICAgICAgY29tcGFueUNvZGU6IGZjLmludGVnZXIoeyBtaW46IDEwMDAsIG1heDogOTk5OSB9KS5tYXAoU3RyaW5nKSxcclxuICAgICAgICAgICAgc2VxdWVuY2U6IGZjLmludGVnZXIoeyBtaW46IDEsIG1heDogOTk5IH0pLFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaWQxID0gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoaW5wdXQuZGlzY2xvc2VkQXQsIGlucHV0LmNvbXBhbnlDb2RlLCBpbnB1dC5zZXF1ZW5jZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkMiA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKGlucHV0LmRpc2Nsb3NlZEF0LCBpbnB1dC5jb21wYW55Q29kZSwgaW5wdXQuc2VxdWVuY2UpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGlkMSkudG9CZShpZDIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICksXHJcbiAgICAgICAgeyBudW1SdW5zOiAxMDAgfVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdVbml0IFRlc3RzJywgKCkgPT4ge1xyXG4gICAgaXQoJ+ato+OBl+OBhOODleOCqeODvOODnuODg+ODiOOBp0lE44KS55Sf5oiQJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkaXNjbG9zZWRBdCA9ICcyMDI0LTAxLTE1VDEwOjMwOjAwWic7XHJcbiAgICAgIGNvbnN0IGNvbXBhbnlDb2RlID0gJzEyMzQnO1xyXG4gICAgICBjb25zdCBzZXF1ZW5jZSA9IDE7XHJcblxyXG4gICAgICBjb25zdCBpZCA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKGRpc2Nsb3NlZEF0LCBjb21wYW55Q29kZSwgc2VxdWVuY2UpO1xyXG5cclxuICAgICAgZXhwZWN0KGlkKS50b0JlKCcyMDI0MDExNV8xMjM0XzAwMScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+mAo+eVquOCkjPmoYHjgavjgrzjg63jg5Hjg4fjgqPjg7PjgrAnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRpc2Nsb3NlZEF0ID0gJzIwMjQtMDEtMTVUMTA6MzA6MDBaJztcclxuICAgICAgY29uc3QgY29tcGFueUNvZGUgPSAnMTIzNCc7XHJcblxyXG4gICAgICBleHBlY3QoZ2VuZXJhdGVEaXNjbG9zdXJlSWQoZGlzY2xvc2VkQXQsIGNvbXBhbnlDb2RlLCAxKSkudG9CZSgnMjAyNDAxMTVfMTIzNF8wMDEnKTtcclxuICAgICAgZXhwZWN0KGdlbmVyYXRlRGlzY2xvc3VyZUlkKGRpc2Nsb3NlZEF0LCBjb21wYW55Q29kZSwgMTApKS50b0JlKCcyMDI0MDExNV8xMjM0XzAxMCcpO1xyXG4gICAgICBleHBlY3QoZ2VuZXJhdGVEaXNjbG9zdXJlSWQoZGlzY2xvc2VkQXQsIGNvbXBhbnlDb2RlLCAxMDApKS50b0JlKCcyMDI0MDExNV8xMjM0XzEwMCcpO1xyXG4gICAgICBleHBlY3QoZ2VuZXJhdGVEaXNjbG9zdXJlSWQoZGlzY2xvc2VkQXQsIGNvbXBhbnlDb2RlLCA5OTkpKS50b0JlKCcyMDI0MDExNV8xMjM0Xzk5OScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+eVsOOBquOCi+aXpeS7mOOBp+eVsOOBquOCi0lE44KS55Sf5oiQJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb21wYW55Q29kZSA9ICcxMjM0JztcclxuICAgICAgY29uc3Qgc2VxdWVuY2UgPSAxO1xyXG5cclxuICAgICAgY29uc3QgaWQxID0gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoJzIwMjQtMDEtMTVUMTA6MzA6MDBaJywgY29tcGFueUNvZGUsIHNlcXVlbmNlKTtcclxuICAgICAgY29uc3QgaWQyID0gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoJzIwMjQtMDEtMTZUMTA6MzA6MDBaJywgY29tcGFueUNvZGUsIHNlcXVlbmNlKTtcclxuXHJcbiAgICAgIGV4cGVjdChpZDEpLm5vdC50b0JlKGlkMik7XHJcbiAgICAgIGV4cGVjdChpZDEpLnRvQmUoJzIwMjQwMTE1XzEyMzRfMDAxJyk7XHJcbiAgICAgIGV4cGVjdChpZDIpLnRvQmUoJzIwMjQwMTE2XzEyMzRfMDAxJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn55Ww44Gq44KL5LyB5qWt44Kz44O844OJ44Gn55Ww44Gq44KLSUTjgpLnlJ/miJAnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRpc2Nsb3NlZEF0ID0gJzIwMjQtMDEtMTVUMTA6MzA6MDBaJztcclxuICAgICAgY29uc3Qgc2VxdWVuY2UgPSAxO1xyXG5cclxuICAgICAgY29uc3QgaWQxID0gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoZGlzY2xvc2VkQXQsICcxMjM0Jywgc2VxdWVuY2UpO1xyXG4gICAgICBjb25zdCBpZDIgPSBnZW5lcmF0ZURpc2Nsb3N1cmVJZChkaXNjbG9zZWRBdCwgJzU2NzgnLCBzZXF1ZW5jZSk7XHJcblxyXG4gICAgICBleHBlY3QoaWQxKS5ub3QudG9CZShpZDIpO1xyXG4gICAgICBleHBlY3QoaWQxKS50b0JlKCcyMDI0MDExNV8xMjM0XzAwMScpO1xyXG4gICAgICBleHBlY3QoaWQyKS50b0JlKCcyMDI0MDExNV81Njc4XzAwMScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+eVsOOBquOCi+mAo+eVquOBp+eVsOOBquOCi0lE44KS55Sf5oiQJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkaXNjbG9zZWRBdCA9ICcyMDI0LTAxLTE1VDEwOjMwOjAwWic7XHJcbiAgICAgIGNvbnN0IGNvbXBhbnlDb2RlID0gJzEyMzQnO1xyXG5cclxuICAgICAgY29uc3QgaWQxID0gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoZGlzY2xvc2VkQXQsIGNvbXBhbnlDb2RlLCAxKTtcclxuICAgICAgY29uc3QgaWQyID0gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoZGlzY2xvc2VkQXQsIGNvbXBhbnlDb2RlLCAyKTtcclxuXHJcbiAgICAgIGV4cGVjdChpZDEpLm5vdC50b0JlKGlkMik7XHJcbiAgICAgIGV4cGVjdChpZDEpLnRvQmUoJzIwMjQwMTE1XzEyMzRfMDAxJyk7XHJcbiAgICAgIGV4cGVjdChpZDIpLnRvQmUoJzIwMjQwMTE1XzEyMzRfMDAyJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1ZhbGlkYXRpb24gVGVzdHMnLCAoKSA9PiB7XHJcbiAgICBpdCgn5LiN5q2j44Gq5pel5LuY44OV44Kp44O844Oe44OD44OI44Gn44Ko44Op44O8JywgKCkgPT4ge1xyXG4gICAgICBleHBlY3QoKCkgPT4gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoJ2ludmFsaWQnLCAnMTIzNCcsIDEpKS50b1Rocm93KFZhbGlkYXRpb25FcnJvcik7XHJcbiAgICAgIGV4cGVjdCgoKSA9PiBnZW5lcmF0ZURpc2Nsb3N1cmVJZCgnMjAyNC8wMS8xNScsICcxMjM0JywgMSkpLnRvVGhyb3coVmFsaWRhdGlvbkVycm9yKTtcclxuICAgICAgZXhwZWN0KCgpID0+IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcnLCAnMTIzNCcsIDEpKS50b1Rocm93KFZhbGlkYXRpb25FcnJvcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5LiN5q2j44Gq5LyB5qWt44Kz44O844OJ44Gn44Ko44Op44O8JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkaXNjbG9zZWRBdCA9ICcyMDI0LTAxLTE1VDEwOjMwOjAwWic7XHJcblxyXG4gICAgICBleHBlY3QoKCkgPT4gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoZGlzY2xvc2VkQXQsICcxMjMnLCAxKSkudG9UaHJvdyhWYWxpZGF0aW9uRXJyb3IpOyAvLyAz5qGBXHJcbiAgICAgIGV4cGVjdCgoKSA9PiBnZW5lcmF0ZURpc2Nsb3N1cmVJZChkaXNjbG9zZWRBdCwgJzEyMzQ1JywgMSkpLnRvVGhyb3coVmFsaWRhdGlvbkVycm9yKTsgLy8gNeahgVxyXG4gICAgICBleHBlY3QoKCkgPT4gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoZGlzY2xvc2VkQXQsICdBQkNEJywgMSkpLnRvVGhyb3coVmFsaWRhdGlvbkVycm9yKTsgLy8g6Z2e5pWw5a2XXHJcbiAgICAgIGV4cGVjdCgoKSA9PiBnZW5lcmF0ZURpc2Nsb3N1cmVJZChkaXNjbG9zZWRBdCwgJycsIDEpKS50b1Rocm93KFZhbGlkYXRpb25FcnJvcik7IC8vIOepuuaWh+Wtl1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+S4jeato+OBqumAo+eVquOBp+OCqOODqeODvCcsICgpID0+IHtcclxuICAgICAgY29uc3QgZGlzY2xvc2VkQXQgPSAnMjAyNC0wMS0xNVQxMDozMDowMFonO1xyXG4gICAgICBjb25zdCBjb21wYW55Q29kZSA9ICcxMjM0JztcclxuXHJcbiAgICAgIGV4cGVjdCgoKSA9PiBnZW5lcmF0ZURpc2Nsb3N1cmVJZChkaXNjbG9zZWRBdCwgY29tcGFueUNvZGUsIC0xKSkudG9UaHJvdyhWYWxpZGF0aW9uRXJyb3IpOyAvLyDosqDmlbBcclxuICAgICAgZXhwZWN0KCgpID0+IGdlbmVyYXRlRGlzY2xvc3VyZUlkKGRpc2Nsb3NlZEF0LCBjb21wYW55Q29kZSwgMTAwMCkpLnRvVGhyb3coVmFsaWRhdGlvbkVycm9yKTsgLy8gMTAwMOS7peS4ilxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdFZGdlIENhc2VzJywgKCkgPT4ge1xyXG4gICAgaXQoJ+aciOOBvuOBn+OBjuOBruaXpeS7mOOCkuato+OBl+OBj+WHpueQhicsICgpID0+IHtcclxuICAgICAgLy8gVVRDOiAyMDI0LTAxLTMxIDIzOjU5OjU5IOKGkiBKU1Q6IDIwMjQtMDItMDEgMDg6NTk6NTkgKOe/jOaXpSlcclxuICAgICAgY29uc3QgaWQxID0gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoJzIwMjQtMDEtMzFUMjM6NTk6NTlaJywgJzEyMzQnLCAxKTtcclxuICAgICAgLy8gVVRDOiAyMDI0LTAyLTAxIDAwOjAwOjAwIOKGkiBKU1Q6IDIwMjQtMDItMDEgMDk6MDA6MDAgKOWQjOaXpSlcclxuICAgICAgY29uc3QgaWQyID0gZ2VuZXJhdGVEaXNjbG9zdXJlSWQoJzIwMjQtMDItMDFUMDA6MDA6MDBaJywgJzEyMzQnLCAxKTtcclxuXHJcbiAgICAgIC8vIEpTVOWfuua6luOBp+aXpeS7mOOCkuaKveWHuuOBmeOCi+OBn+OCgeOAgeS4oeaWueOBqOOCgjIwMjQtMDItMDHjgavjgarjgotcclxuICAgICAgZXhwZWN0KGlkMSkudG9CZSgnMjAyNDAyMDFfMTIzNF8wMDEnKTtcclxuICAgICAgZXhwZWN0KGlkMikudG9CZSgnMjAyNDAyMDFfMTIzNF8wMDEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCflubTjgb7jgZ/jgY7jga7ml6Xku5jjgpLmraPjgZfjgY/lh6bnkIYnLCAoKSA9PiB7XHJcbiAgICAgIC8vIFVUQzogMjAyMy0xMi0zMSAyMzo1OTo1OSDihpIgSlNUOiAyMDI0LTAxLTAxIDA4OjU5OjU5ICjnv4zlubQpXHJcbiAgICAgIGNvbnN0IGlkMSA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcyMDIzLTEyLTMxVDIzOjU5OjU5WicsICcxMjM0JywgMSk7XHJcbiAgICAgIC8vIFVUQzogMjAyNC0wMS0wMSAwMDowMDowMCDihpIgSlNUOiAyMDI0LTAxLTAxIDA5OjAwOjAwICjlkIzml6UpXHJcbiAgICAgIGNvbnN0IGlkMiA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcyMDI0LTAxLTAxVDAwOjAwOjAwWicsICcxMjM0JywgMSk7XHJcblxyXG4gICAgICAvLyBKU1Tln7rmupbjgafml6Xku5jjgpLmir3lh7rjgZnjgovjgZ/jgoHjgIHkuKHmlrnjgajjgoIyMDI0LTAxLTAx44Gr44Gq44KLXHJcbiAgICAgIGV4cGVjdChpZDEpLnRvQmUoJzIwMjQwMTAxXzEyMzRfMDAxJyk7XHJcbiAgICAgIGV4cGVjdChpZDIpLnRvQmUoJzIwMjQwMTAxXzEyMzRfMDAxJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn44GG44KL44GG5bm044Gu5pel5LuY44KS5q2j44GX44GP5Yem55CGJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpZCA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcyMDI0LTAyLTI5VDEyOjAwOjAwWicsICcxMjM0JywgMSk7XHJcbiAgICAgIGV4cGVjdChpZCkudG9CZSgnMjAyNDAyMjlfMTIzNF8wMDEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfjgr/jgqTjg6Djgr7jg7zjg7Pku5jjgY3ml6Xku5jjgpLmraPjgZfjgY/lh6bnkIYnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGlkMSA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcyMDI0LTAxLTE1VDEwOjMwOjAwWicsICcxMjM0JywgMSk7XHJcbiAgICAgIGNvbnN0IGlkMiA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcyMDI0LTAxLTE1VDEwOjMwOjAwKzA5OjAwJywgJzEyMzQnLCAxKTtcclxuXHJcbiAgICAgIC8vIEpTVOWfuua6luOBp+aXpeS7mOOCkuaKveWHulxyXG4gICAgICAvLyBVVEMgMjAyNC0wMS0xNVQxMDozMDowMFog4oaSIEpTVCAyMDI0LTAxLTE1VDE5OjMwOjAwKzA5OjAwIOKGkiAyMDI0MDExNVxyXG4gICAgICAvLyBKU1QgMjAyNC0wMS0xNVQxMDozMDowMCswOTowMCDihpIgVVRDIDIwMjQtMDEtMTVUMDE6MzA6MDBaIOKGkiBKU1QgMjAyNC0wMS0xNVQxMDozMDowMCswOTowMCDihpIgMjAyNDAxMTVcclxuICAgICAgZXhwZWN0KGlkMSkudG9CZSgnMjAyNDAxMTVfMTIzNF8wMDEnKTtcclxuICAgICAgZXhwZWN0KGlkMikudG9CZSgnMjAyNDAxMTVfMTIzNF8wMDEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfmnIjjgb7jgZ/jgY7jga7jgqjjg4PjgrjjgrHjg7zjgrnvvIhVVEPmt7HlpJzihpJKU1Tnv4zml6XvvInjgpLmraPjgZfjgY/lh6bnkIYnLCAoKSA9PiB7XHJcbiAgICAgIC8vIFVUQzogMjAyNC0wMS0zMVQxNTozMDowMFog4oaSIEpTVDogMjAyNC0wMi0wMVQwMDozMDowMCswOTowMFxyXG4gICAgICAvLyBVVEPjgafjga8x5pyIMzHml6XjgaDjgYzjgIFKU1Tjgafjga8y5pyIMeaXpeOBq+OBquOCi1xyXG4gICAgICBjb25zdCBpZCA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcyMDI0LTAxLTMxVDE1OjMwOjAwWicsICcxMjM0JywgMSk7XHJcbiAgICAgIGV4cGVjdChpZCkudG9CZSgnMjAyNDAyMDFfMTIzNF8wMDEnKTsgLy8gSlNU5Z+65rqW44GnMuaciDHml6VcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCflubTjgb7jgZ/jgY7jga7jgqjjg4PjgrjjgrHjg7zjgrnvvIhVVEPmt7HlpJzihpJKU1Tnv4zlubTvvInjgpLmraPjgZfjgY/lh6bnkIYnLCAoKSA9PiB7XHJcbiAgICAgIC8vIFVUQzogMjAyMy0xMi0zMVQxNTozMDowMFog4oaSIEpTVDogMjAyNC0wMS0wMVQwMDozMDowMCswOTowMFxyXG4gICAgICAvLyBVVEPjgafjga8yMDIz5bm0MTLmnIgzMeaXpeOBoOOBjOOAgUpTVOOBp+OBrzIwMjTlubQx5pyIMeaXpeOBq+OBquOCi1xyXG4gICAgICBjb25zdCBpZCA9IGdlbmVyYXRlRGlzY2xvc3VyZUlkKCcyMDIzLTEyLTMxVDE1OjMwOjAwWicsICcxMjM0JywgMSk7XHJcbiAgICAgIGV4cGVjdChpZCkudG9CZSgnMjAyNDAxMDFfMTIzNF8wMDEnKTsgLy8gSlNU5Z+65rqW44GnMjAyNOW5tDHmnIgx5pelXHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJ2ZXJzaW9uIjozfQ==