1105f8aad976bab315c25616410f7c94
"use strict";
/**
 * プロジェクト構造の検証テスト
 *
 * このテストは、TDnet Data Collectorプロジェクトの初期セットアップが
 * 正しく完了していることを検証します。
 *
 * 検証項目:
 * - 必須ディレクトリの存在
 * - 必須ファイルの存在
 * - package.jsonの依存関係
 * - 設定ファイルの妥当性
 *
 * Requirements: 要件14.1（テスト）
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const fs = __importStar(require("fs"));
const path = __importStar(require("path"));
describe('プロジェクト構造の検証', () => {
    const rootDir = path.resolve(__dirname, '../..');
    describe('必須ディレクトリの存在確認', () => {
        const requiredDirectories = [
            'src',
            'cdk',
            'cdk/bin',
            'cdk/lib',
            'docs',
            '.kiro',
            '.kiro/specs',
            '.kiro/specs/tdnet-data-collector',
            '.kiro/steering',
        ];
        test.each(requiredDirectories)('ディレクトリ "%s" が存在すること', (dir) => {
            const dirPath = path.join(rootDir, dir);
            expect(fs.existsSync(dirPath)).toBe(true);
            expect(fs.statSync(dirPath).isDirectory()).toBe(true);
        });
    });
    describe('必須ファイルの存在確認', () => {
        const requiredFiles = [
            'package.json',
            'tsconfig.json',
            'jest.config.js',
            '.eslintrc.json',
            '.prettierrc.json',
            '.gitignore',
            'cdk.json',
            'README.md',
            'LICENSE',
            'cdk/bin/tdnet-data-collector.ts',
            'cdk/lib/tdnet-data-collector-stack.ts',
            '.kiro/specs/tdnet-data-collector/tasks.md',
        ];
        test.each(requiredFiles)('ファイル "%s" が存在すること', (file) => {
            const filePath = path.join(rootDir, file);
            expect(fs.existsSync(filePath)).toBe(true);
            expect(fs.statSync(filePath).isFile()).toBe(true);
        });
    });
    describe('package.jsonの検証', () => {
        let packageJson;
        beforeAll(() => {
            const packageJsonPath = path.join(rootDir, 'package.json');
            const content = fs.readFileSync(packageJsonPath, 'utf-8');
            packageJson = JSON.parse(content);
        });
        test('プロジェクト名が正しいこと', () => {
            expect(packageJson.name).toBe('tdnet-data-collector');
        });
        test('Node.jsバージョンが20.x以上であること', () => {
            expect(packageJson.engines.node).toMatch(/>=20/);
        });
        describe('必須の依存関係がインストールされていること', () => {
            const requiredDependencies = [
                'aws-cdk-lib',
                'constructs',
                'axios',
                'cheerio',
                'winston',
                'fast-check',
                '@aws-sdk/client-dynamodb',
                '@aws-sdk/client-s3',
                '@aws-sdk/client-cloudwatch',
                '@aws-sdk/client-secrets-manager',
                '@aws-sdk/client-sns',
            ];
            test.each(requiredDependencies)('依存関係 "%s" が存在すること', (dependency) => {
                expect(packageJson.dependencies).toHaveProperty(dependency);
            });
        });
        describe('必須のdevDependenciesがインストールされていること', () => {
            const requiredDevDependencies = [
                'typescript',
                'ts-node',
                'ts-jest',
                'jest',
                '@types/jest',
                '@types/node',
                'eslint',
                '@typescript-eslint/eslint-plugin',
                '@typescript-eslint/parser',
                'prettier',
                'eslint-config-prettier',
                'eslint-plugin-prettier',
                'aws-cdk',
            ];
            test.each(requiredDevDependencies)('devDependency "%s" が存在すること', (dependency) => {
                expect(packageJson.devDependencies).toHaveProperty(dependency);
            });
        });
        describe('必須のスクリプトが定義されていること', () => {
            const requiredScripts = [
                'build',
                'test',
                'test:coverage',
                'lint',
                'lint:fix',
                'format',
                'format:check',
                'cdk',
                'cdk:deploy',
                'cdk:diff',
                'cdk:synth',
            ];
            test.each(requiredScripts)('スクリプト "%s" が定義されていること', (script) => {
                expect(packageJson.scripts).toHaveProperty(script);
            });
        });
    });
    describe('tsconfig.jsonの検証', () => {
        let tsconfig;
        beforeAll(() => {
            const tsconfigPath = path.join(rootDir, 'tsconfig.json');
            const content = fs.readFileSync(tsconfigPath, 'utf-8');
            tsconfig = JSON.parse(content);
        });
        test('targetがES2022であること', () => {
            expect(tsconfig.compilerOptions.target).toBe('ES2022');
        });
        test('strictモードが有効であること', () => {
            expect(tsconfig.compilerOptions.strict).toBe(true);
        });
        test('必須のcompilerOptionsが設定されていること', () => {
            const requiredOptions = [
                'esModuleInterop',
                'skipLibCheck',
                'forceConsistentCasingInFileNames',
                'resolveJsonModule',
                'moduleResolution',
            ];
            requiredOptions.forEach((option) => {
                expect(tsconfig.compilerOptions).toHaveProperty(option);
            });
        });
        test('includeにsrcとcdkが含まれていること', () => {
            expect(tsconfig.include).toContain('src/**/*');
            expect(tsconfig.include).toContain('cdk/**/*');
        });
        test('excludeにnode_modulesが含まれていること', () => {
            expect(tsconfig.exclude).toContain('node_modules');
        });
    });
    describe('jest.config.jsの検証', () => {
        let jestConfig;
        beforeAll(() => {
            const jestConfigPath = path.join(rootDir, 'jest.config.js');
            // eslint-disable-next-line @typescript-eslint/no-var-requires
            jestConfig = require(jestConfigPath);
        });
        test('presetがts-jestであること', () => {
            expect(jestConfig.preset).toBe('ts-jest');
        });
        test('testEnvironmentがnodeであること', () => {
            expect(jestConfig.testEnvironment).toBe('node');
        });
        test('rootsにsrcとcdkが含まれていること', () => {
            expect(jestConfig.roots).toContain('<rootDir>/src');
            expect(jestConfig.roots).toContain('<rootDir>/cdk');
        });
        test('coverageThresholdが80%以上に設定されていること', () => {
            expect(jestConfig.coverageThreshold.global.branches).toBeGreaterThanOrEqual(80);
            expect(jestConfig.coverageThreshold.global.functions).toBeGreaterThanOrEqual(80);
            expect(jestConfig.coverageThreshold.global.lines).toBeGreaterThanOrEqual(80);
            expect(jestConfig.coverageThreshold.global.statements).toBeGreaterThanOrEqual(80);
        });
    });
    describe('.eslintrc.jsonの検証', () => {
        let eslintConfig;
        beforeAll(() => {
            const eslintConfigPath = path.join(rootDir, '.eslintrc.json');
            const content = fs.readFileSync(eslintConfigPath, 'utf-8');
            eslintConfig = JSON.parse(content);
        });
        test('TypeScriptパーサーが設定されていること', () => {
            expect(eslintConfig.parser).toBe('@typescript-eslint/parser');
        });
        test('必須のプラグインが設定されていること', () => {
            expect(eslintConfig.plugins).toContain('@typescript-eslint');
            expect(eslintConfig.plugins).toContain('prettier');
        });
        test('必須のextendsが設定されていること', () => {
            expect(eslintConfig.extends).toContain('eslint:recommended');
            expect(eslintConfig.extends).toContain('plugin:@typescript-eslint/recommended');
            expect(eslintConfig.extends).toContain('plugin:prettier/recommended');
        });
    });
    describe('.prettierrc.jsonの検証', () => {
        let prettierConfig;
        beforeAll(() => {
            const prettierConfigPath = path.join(rootDir, '.prettierrc.json');
            const content = fs.readFileSync(prettierConfigPath, 'utf-8');
            prettierConfig = JSON.parse(content);
        });
        test('Prettier設定が存在すること', () => {
            expect(prettierConfig).toBeDefined();
            expect(typeof prettierConfig).toBe('object');
        });
        test('基本的なフォーマット設定が含まれていること', () => {
            expect(prettierConfig).toHaveProperty('semi');
            expect(prettierConfig).toHaveProperty('singleQuote');
            expect(prettierConfig).toHaveProperty('trailingComma');
        });
    });
    describe('cdk.jsonの検証', () => {
        let cdkConfig;
        beforeAll(() => {
            const cdkConfigPath = path.join(rootDir, 'cdk.json');
            const content = fs.readFileSync(cdkConfigPath, 'utf-8');
            cdkConfig = JSON.parse(content);
        });
        test('appエントリーポイントが設定されていること', () => {
            expect(cdkConfig.app).toBeDefined();
            expect(cdkConfig.app).toContain('ts-node');
            expect(cdkConfig.app).toContain('cdk/bin/tdnet-data-collector.ts');
        });
        test('contextが設定されていること', () => {
            expect(cdkConfig.context).toBeDefined();
            expect(typeof cdkConfig.context).toBe('object');
        });
    });
    describe('node_modulesの検証', () => {
        test('node_modulesディレクトリが存在すること', () => {
            const nodeModulesPath = path.join(rootDir, 'node_modules');
            expect(fs.existsSync(nodeModulesPath)).toBe(true);
            expect(fs.statSync(nodeModulesPath).isDirectory()).toBe(true);
        });
        test('主要な依存関係がインストールされていること', () => {
            const criticalDependencies = [
                'aws-cdk-lib',
                'constructs',
                'typescript',
                'jest',
                'fast-check',
            ];
            criticalDependencies.forEach((dep) => {
                const depPath = path.join(rootDir, 'node_modules', dep);
                expect(fs.existsSync(depPath)).toBe(true);
            });
        });
    });
    describe('CDKファイルの検証', () => {
        test('CDK binファイルが有効なTypeScriptファイルであること', () => {
            const binFilePath = path.join(rootDir, 'cdk/bin/tdnet-data-collector.ts');
            const content = fs.readFileSync(binFilePath, 'utf-8');
            // 基本的な構文チェック
            expect(content).toContain('#!/usr/bin/env node');
            expect(content).toContain('import');
            expect(content).toContain('App');
        });
        test('CDK stackファイルが有効なTypeScriptファイルであること', () => {
            const stackFilePath = path.join(rootDir, 'cdk/lib/tdnet-data-collector-stack.ts');
            const content = fs.readFileSync(stackFilePath, 'utf-8');
            // 基本的な構文チェック
            expect(content).toContain('import');
            expect(content).toContain('Stack');
            expect(content).toContain('class');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxfX3Rlc3RzX19cXHByb2plY3Qtc3RydWN0dXJlLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7O0dBYUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUgsdUNBQXlCO0FBQ3pCLDJDQUE2QjtBQUU3QixRQUFRLENBQUMsYUFBYSxFQUFFLEdBQUcsRUFBRTtJQUMzQixNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUVqRCxRQUFRLENBQUMsZUFBZSxFQUFFLEdBQUcsRUFBRTtRQUM3QixNQUFNLG1CQUFtQixHQUFHO1lBQzFCLEtBQUs7WUFDTCxLQUFLO1lBQ0wsU0FBUztZQUNULFNBQVM7WUFDVCxNQUFNO1lBQ04sT0FBTztZQUNQLGFBQWE7WUFDYixrQ0FBa0M7WUFDbEMsZ0JBQWdCO1NBQ2pCLENBQUM7UUFFRixJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRTtZQUM1RCxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztZQUN4QyxNQUFNLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMxQyxNQUFNLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4RCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUU7UUFDM0IsTUFBTSxhQUFhLEdBQUc7WUFDcEIsY0FBYztZQUNkLGVBQWU7WUFDZixn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QUFDLFlBQVksQ0FBQyxhQUFhLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFFeEQsYUFBYTtZQUNiLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDcEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNuQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3JDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXHRpMTk4XFxpbnZlc3RtZW50X2FuYWx5c2lzX29wb3BvXFxzcmNcXF9fdGVzdHNfX1xccHJvamVjdC1zdHJ1Y3R1cmUudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOODl+ODreOCuOOCp+OCr+ODiOani+mAoOOBruaknOiovOODhuOCueODiFxuICpcbiAqIOOBk+OBruODhuOCueODiOOBr+OAgVREbmV0IERhdGEgQ29sbGVjdG9y44OX44Ot44K444Kn44Kv44OI44Gu5Yid5pyf44K744OD44OI44Ki44OD44OX44GMXG4gKiDmraPjgZfjgY/lrozkuobjgZfjgabjgYTjgovjgZPjgajjgpLmpJzoqLzjgZfjgb7jgZnjgIJcbiAqXG4gKiDmpJzoqLzpoIXnm646XG4gKiAtIOW/hemgiOODh+OCo+ODrOOCr+ODiOODquOBruWtmOWcqFxuICogLSDlv4XpoIjjg5XjgqHjgqTjg6vjga7lrZjlnKhcbiAqIC0gcGFja2FnZS5qc29u44Gu5L6d5a2Y6Zai5L+CXG4gKiAtIOioreWumuODleOCoeOCpOODq+OBruWmpeW9k+aAp1xuICpcbiAqIFJlcXVpcmVtZW50czog6KaB5Lu2MTQuMe+8iOODhuOCueODiO+8iVxuICovXG5cbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5cbmRlc2NyaWJlKCfjg5fjg63jgrjjgqfjgq/jg4jmp4vpgKDjga7mpJzoqLwnLCAoKSA9PiB7XG4gIGNvbnN0IHJvb3REaXIgPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4vLi4nKTtcblxuICBkZXNjcmliZSgn5b+F6aCI44OH44Kj44Os44Kv44OI44Oq44Gu5a2Y5Zyo56K66KqNJywgKCkgPT4ge1xuICAgIGNvbnN0IHJlcXVpcmVkRGlyZWN0b3JpZXMgPSBbXG4gICAgICAnc3JjJyxcbiAgICAgICdjZGsnLFxuICAgICAgJ2Nkay9iaW4nLFxuICAgICAgJ2Nkay9saWInLFxuICAgICAgJ2RvY3MnLFxuICAgICAgJy5raXJvJyxcbiAgICAgICcua2lyby9zcGVjcycsXG4gICAgICAnLmtpcm8vc3BlY3MvdGRuZXQtZGF0YS1jb2xsZWN0b3InLFxuICAgICAgJy5raXJvL3N0ZWVyaW5nJyxcbiAgICBdO1xuXG4gICAgdGVzdC5lYWNoKHJlcXVpcmVkRGlyZWN0b3JpZXMpKCfjg4fjgqPjg6zjgq/jg4jjg6ogXCIlc1wiIOOBjOWtmOWcqOOBmeOCi+OBk+OBqCcsIChkaXIpID0+IHtcbiAgICAgIGNvbnN0IGRpclBhdGggPSBwYXRoLmpvaW4ocm9vdERpciwgZGlyKTtcbiAgICAgIGV4cGVjdChmcy5leGlzdHNTeW5jKGRpclBhdGgpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGZzLnN0YXRTeW5jKGRpclBhdGgpLmlzRGlyZWN0b3J5KCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCflv4XpoIjjg5XjgqHjgqTjg6vjga7lrZjlnKjnorroqo0nLCAoKSA9PiB7XG4gICAgY29uc3QgcmVxdWlyZWRGaWxlcyA9IFtcbiAgICAgICdwYWNrYWdlLmpzb24nLFxuICAgICAgJ3RzY29uZmlnLmpzb24nLFxuICAgICAgJ2plc3QuY29uZmlnLmpzJyxcbiAgICAgICcuZXNsaW50cmMuanNvbicsXG4gICAgICAnLnByZXR0aWVycmMuanNvbicsXG4gICAgICAnLmdpdGlnbm9yZScsXG4gICAgICAnY2RrLmpzb24nLFxuICAgICAgJ1JFQURNRS5tZCcsXG4gICAgICAnTElDRU5TRScsXG4gICAgICAnY2RrL2Jpbi90ZG5ldC1kYXRhLWNvbGxlY3Rvci50cycsXG4gICAgICAnY2RrL2xpYi90ZG5ldC1kYXRhLWNvbGxlY3Rvci1zdGFjay50cycsXG4gICAgICAnLmtpcm8vc3BlY3MvdGRuZXQtZGF0YS1jb2xsZWN0b3IvdGFza3MubWQnLFxuICAgIF07XG5cbiAgICB0ZXN0LmVhY2gocmVxdWlyZWRGaWxlcykoJ+ODleOCoeOCpOODqyBcIiVzXCIg44GM5a2Y5Zyo44GZ44KL44GT44GoJywgKGZpbGUpID0+IHtcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKHJvb3REaXIsIGZpbGUpO1xuICAgICAgZXhwZWN0KGZzLmV4aXN0c1N5bmMoZmlsZVBhdGgpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGZzLnN0YXRTeW5jKGZpbGVQYXRoKS5pc0ZpbGUoKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3BhY2thZ2UuanNvbuOBruaknOiovCcsICgpID0+IHtcbiAgICBsZXQgcGFja2FnZUpzb246IGFueTtcblxuICAgIGJlZm9yZUFsbCgoKSA9PiB7XG4gICAgICBjb25zdCBwYWNrYWdlSnNvblBhdGggPSBwYXRoLmpvaW4ocm9vdERpciwgJ3BhY2thZ2UuanNvbicpO1xuICAgICAgY29uc3QgY29udGVudCA9IGZzLnJlYWRGaWxlU3luYyhwYWNrYWdlSnNvblBhdGgsICd1dGYtOCcpO1xuICAgICAgcGFja2FnZUpzb24gPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgn44OX44Ot44K444Kn44Kv44OI5ZCN44GM5q2j44GX44GE44GT44GoJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHBhY2thZ2VKc29uLm5hbWUpLnRvQmUoJ3RkbmV0LWRhdGEtY29sbGVjdG9yJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdOb2RlLmpz44OQ44O844K444On44Oz44GMMjAueOS7peS4iuOBp+OBguOCi+OBk+OBqCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChwYWNrYWdlSnNvbi5lbmdpbmVzLm5vZGUpLnRvTWF0Y2goLz49MjAvKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCflv4XpoIjjga7kvp3lrZjplqLkv4LjgYzjgqTjg7Pjgrnjg4jjg7zjg6vjgZXjgozjgabjgYTjgovjgZPjgagnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1aXJlZERlcGVuZGVuY2llcyA9IFtcbiAgICAgICAgJ2F3cy1jZGstbGliJyxcbiAgICAgICAgJ2NvbnN0cnVjdHMnLFxuICAgICAgICAnYXhpb3MnLFxuICAgICAgICAnY2hlZXJpbycsXG4gICAgICAgICd3aW5zdG9uJyxcbiAgICAgICAgJ2Zhc3QtY2hlY2snLFxuICAgICAgICAnQGF3cy1zZGsvY2xpZW50LWR5bmFtb2RiJyxcbiAgICAgICAgJ0Bhd3Mtc2RrL2NsaWVudC1zMycsXG4gICAgICAgICdAYXdzLXNkay9jbGllbnQtY2xvdWR3YXRjaCcsXG4gICAgICAgICdAYXdzLXNkay9jbGllbnQtc2VjcmV0cy1tYW5hZ2VyJyxcbiAgICAgICAgJ0Bhd3Mtc2RrL2NsaWVudC1zbnMnLFxuICAgICAgXTtcblxuICAgICAgdGVzdC5lYWNoKHJlcXVpcmVkRGVwZW5kZW5jaWVzKSgn5L6d5a2Y6Zai5L+CIFwiJXNcIiDjgYzlrZjlnKjjgZnjgovjgZPjgagnLCAoZGVwZW5kZW5jeSkgPT4ge1xuICAgICAgICBleHBlY3QocGFja2FnZUpzb24uZGVwZW5kZW5jaWVzKS50b0hhdmVQcm9wZXJ0eShkZXBlbmRlbmN5KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ+W/hemgiOOBrmRldkRlcGVuZGVuY2llc+OBjOOCpOODs+OCueODiOODvOODq+OBleOCjOOBpuOBhOOCi+OBk+OBqCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVpcmVkRGV2RGVwZW5kZW5jaWVzID0gW1xuICAgICAgICAndHlwZXNjcmlwdCcsXG4gICAgICAgICd0cy1ub2RlJyxcbiAgICAgICAgJ3RzLWplc3QnLFxuICAgICAgICAnamVzdCcsXG4gICAgICAgICdAdHlwZXMvamVzdCcsXG4gICAgICAgICdAdHlwZXMvbm9kZScsXG4gICAgICAgICdlc2xpbnQnLFxuICAgICAgICAnQHR5cGVzY3JpcHQtZXNsaW50L2VzbGludC1wbHVnaW4nLFxuICAgICAgICAnQHR5cGVzY3JpcHQtZXNsaW50L3BhcnNlcicsXG4gICAgICAgICdwcmV0dGllcicsXG4gICAgICAgICdlc2xpbnQtY29uZmlnLXByZXR0aWVyJyxcbiAgICAgICAgJ2VzbGludC1wbHVnaW4tcHJldHRpZXInLFxuICAgICAgICAnYXdzLWNkaycsXG4gICAgICBdO1xuXG4gICAgICB0ZXN0LmVhY2gocmVxdWlyZWREZXZEZXBlbmRlbmNpZXMpKCdkZXZEZXBlbmRlbmN5IFwiJXNcIiDjgYzlrZjlnKjjgZnjgovjgZPjgagnLCAoZGVwZW5kZW5jeSkgPT4ge1xuICAgICAgICBleHBlY3QocGFja2FnZUpzb24uZGV2RGVwZW5kZW5jaWVzKS50b0hhdmVQcm9wZXJ0eShkZXBlbmRlbmN5KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ+W/hemgiOOBruOCueOCr+ODquODl+ODiOOBjOWumue+qeOBleOCjOOBpuOBhOOCi+OBk+OBqCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVpcmVkU2NyaXB0cyA9IFtcbiAgICAgICAgJ2J1aWxkJyxcbiAgICAgICAgJ3Rlc3QnLFxuICAgICAgICAndGVzdDpjb3ZlcmFnZScsXG4gICAgICAgICdsaW50JyxcbiAgICAgICAgJ2xpbnQ6Zml4JyxcbiAgICAgICAgJ2Zvcm1hdCcsXG4gICAgICAgICdmb3JtYXQ6Y2hlY2snLFxuICAgICAgICAnY2RrJyxcbiAgICAgICAgJ2NkazpkZXBsb3knLFxuICAgICAgICAnY2RrOmRpZmYnLFxuICAgICAgICAnY2RrOnN5bnRoJyxcbiAgICAgIF07XG5cbiAgICAgIHRlc3QuZWFjaChyZXF1aXJlZFNjcmlwdHMpKCfjgrnjgq/jg6rjg5fjg4ggXCIlc1wiIOOBjOWumue+qeOBleOCjOOBpuOBhOOCi+OBk+OBqCcsIChzY3JpcHQpID0+IHtcbiAgICAgICAgZXhwZWN0KHBhY2thZ2VKc29uLnNjcmlwdHMpLnRvSGF2ZVByb3BlcnR5KHNjcmlwdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3RzY29uZmlnLmpzb27jga7mpJzoqLwnLCAoKSA9PiB7XG4gICAgbGV0IHRzY29uZmlnOiBhbnk7XG5cbiAgICBiZWZvcmVBbGwoKCkgPT4ge1xuICAgICAgY29uc3QgdHNjb25maWdQYXRoID0gcGF0aC5qb2luKHJvb3REaXIsICd0c2NvbmZpZy5qc29uJyk7XG4gICAgICBjb25zdCBjb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKHRzY29uZmlnUGF0aCwgJ3V0Zi04Jyk7XG4gICAgICB0c2NvbmZpZyA9IEpTT04ucGFyc2UoY29udGVudCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCd0YXJnZXTjgYxFUzIwMjLjgafjgYLjgovjgZPjgagnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodHNjb25maWcuY29tcGlsZXJPcHRpb25zLnRhcmdldCkudG9CZSgnRVMyMDIyJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzdHJpY3Tjg6Ljg7zjg4njgYzmnInlirnjgafjgYLjgovjgZPjgagnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodHNjb25maWcuY29tcGlsZXJPcHRpb25zLnN0cmljdCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ+W/hemgiOOBrmNvbXBpbGVyT3B0aW9uc+OBjOioreWumuOBleOCjOOBpuOBhOOCi+OBk+OBqCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVpcmVkT3B0aW9ucyA9IFtcbiAgICAgICAgJ2VzTW9kdWxlSW50ZXJvcCcsXG4gICAgICAgICdza2lwTGliQ2hlY2snLFxuICAgICAgICAnZm9yY2VDb25zaXN0ZW50Q2FzaW5nSW5GaWxlTmFtZXMnLFxuICAgICAgICAncmVzb2x2ZUpzb25Nb2R1bGUnLFxuICAgICAgICAnbW9kdWxlUmVzb2x1dGlvbicsXG4gICAgICBdO1xuXG4gICAgICByZXF1aXJlZE9wdGlvbnMuZm9yRWFjaCgob3B0aW9uKSA9PiB7XG4gICAgICAgIGV4cGVjdCh0c2NvbmZpZy5jb21waWxlck9wdGlvbnMpLnRvSGF2ZVByb3BlcnR5KG9wdGlvbik7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2luY2x1ZGXjgatzcmPjgahjZGvjgYzlkKvjgb7jgozjgabjgYTjgovjgZPjgagnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodHNjb25maWcuaW5jbHVkZSkudG9Db250YWluKCdzcmMvKiovKicpO1xuICAgICAgZXhwZWN0KHRzY29uZmlnLmluY2x1ZGUpLnRvQ29udGFpbignY2RrLyoqLyonKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2V4Y2x1ZGXjgatub2RlX21vZHVsZXPjgYzlkKvjgb7jgozjgabjgYTjgovjgZPjgagnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodHNjb25maWcuZXhjbHVkZSkudG9Db250YWluKCdub2RlX21vZHVsZXMnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2plc3QuY29uZmlnLmpz44Gu5qSc6Ki8JywgKCkgPT4ge1xuICAgIGxldCBqZXN0Q29uZmlnOiBhbnk7XG5cbiAgICBiZWZvcmVBbGwoKCkgPT4ge1xuICAgICAgY29uc3QgamVzdENvbmZpZ1BhdGggPSBwYXRoLmpvaW4ocm9vdERpciwgJ2plc3QuY29uZmlnLmpzJyk7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlc1xuICAgICAgamVzdENvbmZpZyA9IHJlcXVpcmUoamVzdENvbmZpZ1BhdGgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgncHJlc2V044GMdHMtamVzdOOBp+OBguOCi+OBk+OBqCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChqZXN0Q29uZmlnLnByZXNldCkudG9CZSgndHMtamVzdCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgndGVzdEVudmlyb25tZW5044GMbm9kZeOBp+OBguOCi+OBk+OBqCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChqZXN0Q29uZmlnLnRlc3RFbnZpcm9ubWVudCkudG9CZSgnbm9kZScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgncm9vdHPjgatzcmPjgahjZGvjgYzlkKvjgb7jgozjgabjgYTjgovjgZPjgagnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoamVzdENvbmZpZy5yb290cykudG9Db250YWluKCc8cm9vdERpcj4vc3JjJyk7XG4gICAgICBleHBlY3QoamVzdENvbmZpZy5yb290cykudG9Db250YWluKCc8cm9vdERpcj4vY2RrJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdjb3ZlcmFnZVRocmVzaG9sZOOBjDgwJeS7peS4iuOBq+ioreWumuOBleOCjOOBpuOBhOOCi+OBk+OBqCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChqZXN0Q29uZmlnLmNvdmVyYWdlVGhyZXNob2xkLmdsb2JhbC5icmFuY2hlcykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCg4MCk7XG4gICAgICBleHBlY3QoamVzdENvbmZpZy5jb3ZlcmFnZVRocmVzaG9sZC5nbG9iYWwuZnVuY3Rpb25zKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDgwKTtcbiAgICAgIGV4cGVjdChqZXN0Q29uZmlnLmNvdmVyYWdlVGhyZXNob2xkLmdsb2JhbC5saW5lcykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCg4MCk7XG4gICAgICBleHBlY3QoamVzdENvbmZpZy5jb3ZlcmFnZVRocmVzaG9sZC5nbG9iYWwuc3RhdGVtZW50cykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCg4MCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCcuZXNsaW50cmMuanNvbuOBruaknOiovCcsICgpID0+IHtcbiAgICBsZXQgZXNsaW50Q29uZmlnOiBhbnk7XG5cbiAgICBiZWZvcmVBbGwoKCkgPT4ge1xuICAgICAgY29uc3QgZXNsaW50Q29uZmlnUGF0aCA9IHBhdGguam9pbihyb290RGlyLCAnLmVzbGludHJjLmpzb24nKTtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMoZXNsaW50Q29uZmlnUGF0aCwgJ3V0Zi04Jyk7XG4gICAgICBlc2xpbnRDb25maWcgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnVHlwZVNjcmlwdOODkeODvOOCteODvOOBjOioreWumuOBleOCjOOBpuOBhOOCi+OBk+OBqCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChlc2xpbnRDb25maWcucGFyc2VyKS50b0JlKCdAdHlwZXNjcmlwdC1lc2xpbnQvcGFyc2VyJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCflv4XpoIjjga7jg5fjg6njgrDjgqTjg7PjgYzoqK3lrprjgZXjgozjgabjgYTjgovjgZPjgagnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoZXNsaW50Q29uZmlnLnBsdWdpbnMpLnRvQ29udGFpbignQHR5cGVzY3JpcHQtZXNsaW50Jyk7XG4gICAgICBleHBlY3QoZXNsaW50Q29uZmlnLnBsdWdpbnMpLnRvQ29udGFpbigncHJldHRpZXInKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ+W/hemgiOOBrmV4dGVuZHPjgYzoqK3lrprjgZXjgozjgabjgYTjgovjgZPjgagnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoZXNsaW50Q29uZmlnLmV4dGVuZHMpLnRvQ29udGFpbignZXNsaW50OnJlY29tbWVuZGVkJyk7XG4gICAgICBleHBlY3QoZXNsaW50Q29uZmlnLmV4dGVuZHMpLnRvQ29udGFpbigncGx1Z2luOkB0eXBlc2NyaXB0LWVzbGludC9yZWNvbW1lbmRlZCcpO1xuICAgICAgZXhwZWN0KGVzbGludENvbmZpZy5leHRlbmRzKS50b0NvbnRhaW4oJ3BsdWdpbjpwcmV0dGllci9yZWNvbW1lbmRlZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnLnByZXR0aWVycmMuanNvbuOBruaknOiovCcsICgpID0+IHtcbiAgICBsZXQgcHJldHRpZXJDb25maWc6IGFueTtcblxuICAgIGJlZm9yZUFsbCgoKSA9PiB7XG4gICAgICBjb25zdCBwcmV0dGllckNvbmZpZ1BhdGggPSBwYXRoLmpvaW4ocm9vdERpciwgJy5wcmV0dGllcnJjLmpzb24nKTtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMocHJldHRpZXJDb25maWdQYXRoLCAndXRmLTgnKTtcbiAgICAgIHByZXR0aWVyQ29uZmlnID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ1ByZXR0aWVy6Kit5a6a44GM5a2Y5Zyo44GZ44KL44GT44GoJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHByZXR0aWVyQ29uZmlnKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBwcmV0dGllckNvbmZpZykudG9CZSgnb2JqZWN0Jyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCfln7rmnKznmoTjgarjg5Xjgqnjg7zjg57jg4Pjg4joqK3lrprjgYzlkKvjgb7jgozjgabjgYTjgovjgZPjgagnLCAoKSA9PiB7XG4gICAgICBleHBlY3QocHJldHRpZXJDb25maWcpLnRvSGF2ZVByb3BlcnR5KCdzZW1pJyk7XG4gICAgICBleHBlY3QocHJldHRpZXJDb25maWcpLnRvSGF2ZVByb3BlcnR5KCdzaW5nbGVRdW90ZScpO1xuICAgICAgZXhwZWN0KHByZXR0aWVyQ29uZmlnKS50b0hhdmVQcm9wZXJ0eSgndHJhaWxpbmdDb21tYScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY2RrLmpzb27jga7mpJzoqLwnLCAoKSA9PiB7XG4gICAgbGV0IGNka0NvbmZpZzogYW55O1xuXG4gICAgYmVmb3JlQWxsKCgpID0+IHtcbiAgICAgIGNvbnN0IGNka0NvbmZpZ1BhdGggPSBwYXRoLmpvaW4ocm9vdERpciwgJ2Nkay5qc29uJyk7XG4gICAgICBjb25zdCBjb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKGNka0NvbmZpZ1BhdGgsICd1dGYtOCcpO1xuICAgICAgY2RrQ29uZmlnID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2FwcOOCqOODs+ODiOODquODvOODneOCpOODs+ODiOOBjOioreWumuOBleOCjOOBpuOBhOOCi+OBk+OBqCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChjZGtDb25maWcuYXBwKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNka0NvbmZpZy5hcHApLnRvQ29udGFpbigndHMtbm9kZScpO1xuICAgICAgZXhwZWN0KGNka0NvbmZpZy5hcHApLnRvQ29udGFpbignY2RrL2Jpbi90ZG5ldC1kYXRhLWNvbGxlY3Rvci50cycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnY29udGV4dOOBjOioreWumuOBleOCjOOBpuOBhOOCi+OBk+OBqCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChjZGtDb25maWcuY29udGV4dCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgY2RrQ29uZmlnLmNvbnRleHQpLnRvQmUoJ29iamVjdCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbm9kZV9tb2R1bGVz44Gu5qSc6Ki8JywgKCkgPT4ge1xuICAgIHRlc3QoJ25vZGVfbW9kdWxlc+ODh+OCo+ODrOOCr+ODiOODquOBjOWtmOWcqOOBmeOCi+OBk+OBqCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG5vZGVNb2R1bGVzUGF0aCA9IHBhdGguam9pbihyb290RGlyLCAnbm9kZV9tb2R1bGVzJyk7XG4gICAgICBleHBlY3QoZnMuZXhpc3RzU3luYyhub2RlTW9kdWxlc1BhdGgpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGZzLnN0YXRTeW5jKG5vZGVNb2R1bGVzUGF0aCkuaXNEaXJlY3RvcnkoKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ+S4u+imgeOBquS+neWtmOmWouS/guOBjOOCpOODs+OCueODiOODvOODq+OBleOCjOOBpuOBhOOCi+OBk+OBqCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGNyaXRpY2FsRGVwZW5kZW5jaWVzID0gW1xuICAgICAgICAnYXdzLWNkay1saWInLFxuICAgICAgICAnY29uc3RydWN0cycsXG4gICAgICAgICd0eXBlc2NyaXB0JyxcbiAgICAgICAgJ2plc3QnLFxuICAgICAgICAnZmFzdC1jaGVjaycsXG4gICAgICBdO1xuXG4gICAgICBjcml0aWNhbERlcGVuZGVuY2llcy5mb3JFYWNoKChkZXApID0+IHtcbiAgICAgICAgY29uc3QgZGVwUGF0aCA9IHBhdGguam9pbihyb290RGlyLCAnbm9kZV9tb2R1bGVzJywgZGVwKTtcbiAgICAgICAgZXhwZWN0KGZzLmV4aXN0c1N5bmMoZGVwUGF0aCkpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NES+ODleOCoeOCpOODq+OBruaknOiovCcsICgpID0+IHtcbiAgICB0ZXN0KCdDREsgYmlu44OV44Kh44Kk44Or44GM5pyJ5Yq544GqVHlwZVNjcmlwdOODleOCoeOCpOODq+OBp+OBguOCi+OBk+OBqCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGJpbkZpbGVQYXRoID0gcGF0aC5qb2luKHJvb3REaXIsICdjZGsvYmluL3RkbmV0LWRhdGEtY29sbGVjdG9yLnRzJyk7XG4gICAgICBjb25zdCBjb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKGJpbkZpbGVQYXRoLCAndXRmLTgnKTtcblxuICAgICAgLy8g5Z+65pys55qE44Gq5qeL5paH44OB44Kn44OD44KvXG4gICAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCcjIS91c3IvYmluL2VudiBub2RlJyk7XG4gICAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdpbXBvcnQnKTtcbiAgICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ0FwcCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnQ0RLIHN0YWNr44OV44Kh44Kk44Or44GM5pyJ5Yq544GqVHlwZVNjcmlwdOODleOCoeOCpOODq+OBp+OBguOCi+OBk+OBqCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YWNrRmlsZVBhdGggPSBwYXRoLmpvaW4ocm9vdERpciwgJ2Nkay9saWIvdGRuZXQtZGF0YS1jb2xsZWN0b3Itc3RhY2sudHMnKTtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMoc3RhY2tGaWxlUGF0aCwgJ3V0Zi04Jyk7XG5cbiAgICAgIC8vIOWfuuacrOeahOOBquani+aWh+ODgeOCp+ODg+OCr1xuICAgICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignaW1wb3J0Jyk7XG4gICAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdTdGFjaycpO1xuICAgICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignY2xhc3MnKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==