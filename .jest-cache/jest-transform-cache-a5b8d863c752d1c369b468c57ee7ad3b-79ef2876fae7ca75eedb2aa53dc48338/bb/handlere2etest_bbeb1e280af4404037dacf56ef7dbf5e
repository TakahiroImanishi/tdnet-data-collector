a887db38265c55b689b33243f43f6a1c
"use strict";
/**
 * Lambda Query Handler E2E Tests
 *
 * Property 9: APIキー認証の必須性
 *
 * Requirements: 要件11.3, 14.4（E2Eテスト、API認証）
 *
 * このE2Eテストは、LocalStack環境または開発環境で実行され、
 * 実際のAWS SDKクライアントを使用してAPIキー認証を検証します。
 */
Object.defineProperty(exports, "__esModule", { value: true });
const handler_1 = require("../handler");
const client_dynamodb_1 = require("@aws-sdk/client-dynamodb");
const lib_dynamodb_1 = require("@aws-sdk/lib-dynamodb");
// LocalStack環境設定
const isLocalStack = process.env.AWS_ENDPOINT_URL !== undefined;
const dynamoClient = new client_dynamodb_1.DynamoDBClient({
    region: process.env.AWS_REGION || 'ap-northeast-1',
    ...(isLocalStack && {
        endpoint: process.env.AWS_ENDPOINT_URL,
        credentials: {
            accessKeyId: process.env.AWS_ACCESS_KEY_ID || 'test',
            secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY || 'test',
        },
    }),
});
const docClient = lib_dynamodb_1.DynamoDBDocumentClient.from(dynamoClient, {
    marshallOptions: {
        removeUndefinedValues: true,
        convertClassInstanceToMap: true,
    },
});
describe('Lambda Query Handler E2E Tests - Property 9: API Key Authentication', () => {
    let mockContext;
    let mockEvent;
    const tableName = process.env.DYNAMODB_TABLE_NAME || 'tdnet_disclosures';
    beforeAll(async () => {
        // テストデータをDynamoDBに挿入
        const testDisclosure = {
            disclosure_id: 'TD20240115001',
            company_code: '7203',
            company_name: 'トヨタ自動車',
            disclosure_type: '決算短信',
            title: '2024年3月期 第3四半期決算短信',
            disclosed_at: '2024-01-15T10:30:00Z',
            pdf_url: 'https://www.release.tdnet.info/inbs/140120240115001.pdf',
            s3_key: '2024/01/15/TD20240115001_7203.pdf',
            collected_at: '2024-01-15T10:35:00Z',
            date_partition: '2024-01',
        };
        try {
            await docClient.send(new lib_dynamodb_1.PutCommand({
                TableName: tableName,
                Item: testDisclosure,
            }));
            console.log('Test data inserted successfully');
        }
        catch (error) {
            console.error('Failed to insert test data:', error);
            throw error;
        }
    });
    beforeEach(() => {
        // モックコンテキスト
        mockContext = {
            awsRequestId: 'test-request-id-e2e',
            functionName: 'tdnet-query-e2e',
            functionVersion: '1',
            invokedFunctionArn: 'arn:aws:lambda:ap-northeast-1:123456789012:function:tdnet-query-e2e',
            memoryLimitInMB: '256',
            logGroupName: '/aws/lambda/tdnet-query-e2e',
            logStreamName: '2024/01/15/[$LATEST]e2e-test',
            getRemainingTimeInMillis: () => 30000,
            callbackWaitsForEmptyEventLoop: true,
            done: jest.fn(),
            fail: jest.fn(),
            succeed: jest.fn(),
        };
        // モックイベント（基本）
        mockEvent = {
            body: null,
            headers: {},
            multiValueHeaders: {},
            httpMethod: 'GET',
            isBase64Encoded: false,
            path: '/disclosures',
            pathParameters: null,
            queryStringParameters: null,
            multiValueQueryStringParameters: null,
            stageVariables: null,
            requestContext: {
                accountId: '123456789012',
                apiId: 'test-api-id-e2e',
                protocol: 'HTTP/1.1',
                httpMethod: 'GET',
                path: '/disclosures',
                stage: 'test',
                requestId: 'test-request-id-e2e',
                requestTime: '15/Jan/2024:10:30:00 +0000',
                requestTimeEpoch: 1705315800000,
                identity: {
                    accessKey: null,
                    accountId: null,
                    apiKey: null,
                    apiKeyId: null,
                    caller: null,
                    clientCert: null,
                    cognitoAuthenticationProvider: null,
                    cognitoAuthenticationType: null,
                    cognitoIdentityId: null,
                    cognitoIdentityPoolId: null,
                    principalOrgId: null,
                    sourceIp: '192.168.1.1',
                    user: null,
                    userAgent: 'Mozilla/5.0',
                    userArn: null,
                },
                authorizer: null,
                domainName: 'api.example.com',
                domainPrefix: 'api',
                resourceId: 'test-resource-id',
                resourcePath: '/disclosures',
            },
            resource: '/disclosures',
        };
        // 環境変数設定
        process.env.API_KEY = 'test-api-key-e2e';
        process.env.DYNAMODB_TABLE_NAME = tableName;
        process.env.S3_BUCKET_NAME = 'tdnet-pdfs-local';
    });
    describe('Property 9.1: 無効なAPIキーで401 Unauthorizedが返される', () => {
        it('無効なAPIキーの場合は401エラーを返す', async () => {
            // Arrange
            mockEvent.headers = {
                'x-api-key': 'invalid-api-key',
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.error_code).toBe('UNAUTHORIZED');
            expect(body.message).toContain('Invalid API key');
            expect(body.request_id).toBe(mockContext.awsRequestId);
            // CORSヘッダーの確認
            expect(result.headers?.['Access-Control-Allow-Origin']).toBe('*');
        });
        it('APIキーが未設定の場合は401エラーを返す', async () => {
            // Arrange
            mockEvent.headers = {}; // APIキーなし
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.error_code).toBe('UNAUTHORIZED');
            expect(body.message).toContain('API key is required');
            expect(body.request_id).toBe(mockContext.awsRequestId);
            // CORSヘッダーの確認
            expect(result.headers?.['Access-Control-Allow-Origin']).toBe('*');
        });
        it('大文字小文字が異なるヘッダー名でも認証が機能する', async () => {
            // Arrange
            mockEvent.headers = {
                'X-Api-Key': 'invalid-api-key', // 大文字
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.error_code).toBe('UNAUTHORIZED');
            expect(body.message).toContain('Invalid API key');
        });
    });
    describe('Property 9.2: 有効なAPIキーで正常にレスポンスが返される', () => {
        it('有効なAPIキーで認証成功し、データが取得できる', async () => {
            // Arrange
            mockEvent.headers = {
                'x-api-key': 'test-api-key-e2e',
            };
            mockEvent.queryStringParameters = {
                company_code: '7203',
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Debug: Log error if status is not 200
            if (result.statusCode !== 200) {
                console.error('Test failed with status:', result.statusCode);
                console.error('Response body:', result.body);
            }
            // Assert
            expect(result.statusCode).toBe(200);
            expect(result.headers?.['Content-Type']).toBe('application/json');
            expect(result.headers?.['Access-Control-Allow-Origin']).toBe('*');
            const body = JSON.parse(result.body);
            expect(body).toHaveProperty('disclosures');
            expect(body).toHaveProperty('total');
            expect(body).toHaveProperty('count');
            expect(body).toHaveProperty('offset');
            expect(body).toHaveProperty('limit');
            // データの検証
            expect(Array.isArray(body.disclosures)).toBe(true);
            if (body.disclosures.length > 0) {
                const disclosure = body.disclosures[0];
                expect(disclosure).toHaveProperty('disclosure_id');
                expect(disclosure).toHaveProperty('company_code');
                expect(disclosure).toHaveProperty('company_name');
                expect(disclosure).toHaveProperty('disclosed_at');
            }
        });
        it('有効なAPIキーで日付範囲検索が機能する', async () => {
            // Arrange
            mockEvent.headers = {
                'x-api-key': 'test-api-key-e2e',
            };
            mockEvent.queryStringParameters = {
                start_date: '2024-01-15',
                end_date: '2024-01-20',
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(200);
            const body = JSON.parse(result.body);
            expect(body).toHaveProperty('disclosures');
            expect(body).toHaveProperty('total');
        });
        it('有効なAPIキーでCSV形式のレスポンスが取得できる', async () => {
            // Arrange
            mockEvent.headers = {
                'x-api-key': 'test-api-key-e2e',
            };
            mockEvent.queryStringParameters = {
                format: 'csv',
                company_code: '7203',
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(200);
            expect(result.headers?.['Content-Type']).toBe('text/csv');
            expect(result.headers?.['Content-Disposition']).toContain('attachment');
            expect(result.headers?.['Access-Control-Allow-Origin']).toBe('*');
            // CSVヘッダーの確認
            expect(result.body).toContain('disclosure_id');
            expect(result.body).toContain('company_code');
            expect(result.body).toContain('company_name');
        });
    });
    describe('Property 9.3: APIキー認証とバリデーションの組み合わせ', () => {
        it('有効なAPIキーでも不正なクエリパラメータは400エラーを返す', async () => {
            // Arrange
            mockEvent.headers = {
                'x-api-key': 'test-api-key-e2e',
            };
            mockEvent.queryStringParameters = {
                company_code: '123', // 4桁でない
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error_code).toBe('VALIDATION_ERROR');
            expect(body.message).toContain('Invalid company_code');
        });
        it('有効なAPIキーでも不正な日付形式は400エラーを返す', async () => {
            // Arrange
            mockEvent.headers = {
                'x-api-key': 'test-api-key-e2e',
            };
            mockEvent.queryStringParameters = {
                start_date: '2024/01/15', // YYYY-MM-DD形式でない
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error_code).toBe('VALIDATION_ERROR');
            expect(body.message).toContain('Invalid start_date format');
        });
        it('有効なAPIキーでも開始日が終了日より後の場合は400エラーを返す', async () => {
            // Arrange
            mockEvent.headers = {
                'x-api-key': 'test-api-key-e2e',
            };
            mockEvent.queryStringParameters = {
                start_date: '2024-01-20',
                end_date: '2024-01-15',
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.error_code).toBe('VALIDATION_ERROR');
            expect(body.message).toContain('start_date');
            expect(body.message).toContain('must be before or equal to');
            expect(body.message).toContain('end_date');
        });
    });
    describe('Property 9.4: エラーレスポンスの一貫性', () => {
        it('すべてのエラーレスポンスにCORSヘッダーが含まれる', async () => {
            // Arrange: APIキーなし
            mockEvent.headers = {};
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(401);
            expect(result.headers?.['Access-Control-Allow-Origin']).toBe('*');
            expect(result.headers?.['Content-Type']).toBe('application/json');
        });
        it('すべてのエラーレスポンスにrequest_idが含まれる', async () => {
            // Arrange: 無効なAPIキー
            mockEvent.headers = {
                'x-api-key': 'invalid-api-key',
            };
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            expect(result.statusCode).toBe(401);
            const body = JSON.parse(result.body);
            expect(body.request_id).toBe(mockContext.awsRequestId);
        });
        it('エラーレスポンスの構造が一貫している', async () => {
            // Arrange: APIキーなし
            mockEvent.headers = {};
            // Act
            const result = await (0, handler_1.handler)(mockEvent, mockContext);
            // Assert
            const body = JSON.parse(result.body);
            expect(body).toHaveProperty('error_code');
            expect(body).toHaveProperty('message');
            expect(body).toHaveProperty('request_id');
            expect(typeof body.error_code).toBe('string');
            expect(typeof body.message).toBe('string');
            expect(typeof body.request_id).toBe('string');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxsYW1iZGFcXHF1ZXJ5XFxfX3Rlc3RzX19cXGhhbmRsZXIuZTJlLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7R0FTRzs7QUFHSCx3Q0FBcUM7QUFDckMsOERBQTBEO0FBQzFELHdEQUEyRTtBQUczRSxpQkFBaUI7QUFDakIsTUFBTSxZQUFZLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsS0FBSyxTQUFTLENBQUM7QUFDaEUsTUFBTSxZQUFZLEdBQUcsSUFBSSxnQ0FBYyxDQUFDO0lBQ3RDLE1BQU0sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsSUFBSSxnQkFBZ0I7SUFDbEQsR0FBRyxDQUFDLFlBQVksSUFBSTtRQUNsQixRQUFRLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0I7UUFDdEMsV0FBVyxFQUFFO1lBQ1gsV0FBVyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLElBQUksTUFBTTtZQUNwRCxlQUFlLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsSUFBSSxNQUFNO1NBQzdEO0tBQ0YsQ0FBQztDQUNILENBQUMsQ0FBQztBQUVILE1BQU0sU0FBUyxHQUFHLHFDQUFzQixDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUU7SUFDMUQsZUFBZSxFQUFFO1FBQ2YscUJBQXFCLEVBQUUsSUFBSTtRQUMzQix5QkFBeUIsRUFBRSxJQUFJO0tBQ2hDO0NBQ0YsQ0FBQyxDQUFDO0FBRUgsUUFBUSxDQUFDLHFFQUFxRSxFQUFFLEdBQUcsRUFBRTtJQUNuRixJQUFJLFdBQW9CLENBQUM7SUFDekIsSUFBSSxTQUErQixDQUFDO0lBQ3BDLE1BQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLElBQUksbUJBQW1CLENBQUM7SUFFekUsU0FBUyxDQUFDLEtBQUssSUFBSSxFQUFFO1FBQ25CLHFCQUFxQjtRQUNyQixNQUFNLGNB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QUMsSUFBSSxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUMxQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3ZDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDMUMsTUFBTSxDQUFDLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sQ0FBQyxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDaEQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcdGkxOThcXGludmVzdG1lbnRfYW5hbHlzaXNfb3BvcG9cXHNyY1xcbGFtYmRhXFxxdWVyeVxcX190ZXN0c19fXFxoYW5kbGVyLmUyZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBMYW1iZGEgUXVlcnkgSGFuZGxlciBFMkUgVGVzdHNcclxuICpcclxuICogUHJvcGVydHkgOTogQVBJ44Kt44O86KqN6Ki844Gu5b+F6aCI5oCnXHJcbiAqXHJcbiAqIFJlcXVpcmVtZW50czog6KaB5Lu2MTEuMywgMTQuNO+8iEUyReODhuOCueODiOOAgUFQSeiqjeiovO+8iVxyXG4gKlxyXG4gKiDjgZPjga5FMkXjg4bjgrnjg4jjga/jgIFMb2NhbFN0YWNr55Kw5aKD44G+44Gf44Gv6ZaL55m655Kw5aKD44Gn5a6f6KGM44GV44KM44CBXHJcbiAqIOWun+mam+OBrkFXUyBTREvjgq/jg6njgqTjgqLjg7Pjg4jjgpLkvb/nlKjjgZfjgaZBUEnjgq3jg7zoqo3oqLzjgpLmpJzoqLzjgZfjgb7jgZnjgIJcclxuICovXHJcblxyXG5pbXBvcnQgeyBDb250ZXh0LCBBUElHYXRld2F5UHJveHlFdmVudCB9IGZyb20gJ2F3cy1sYW1iZGEnO1xyXG5pbXBvcnQgeyBoYW5kbGVyIH0gZnJvbSAnLi4vaGFuZGxlcic7XHJcbmltcG9ydCB7IER5bmFtb0RCQ2xpZW50IH0gZnJvbSAnQGF3cy1zZGsvY2xpZW50LWR5bmFtb2RiJztcclxuaW1wb3J0IHsgRHluYW1vREJEb2N1bWVudENsaWVudCwgUHV0Q29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2xpYi1keW5hbW9kYic7XHJcbmltcG9ydCB7IERpc2Nsb3N1cmUgfSBmcm9tICcuLi8uLi8uLi90eXBlcyc7XHJcblxyXG4vLyBMb2NhbFN0YWNr55Kw5aKD6Kit5a6aXHJcbmNvbnN0IGlzTG9jYWxTdGFjayA9IHByb2Nlc3MuZW52LkFXU19FTkRQT0lOVF9VUkwgIT09IHVuZGVmaW5lZDtcclxuY29uc3QgZHluYW1vQ2xpZW50ID0gbmV3IER5bmFtb0RCQ2xpZW50KHtcclxuICByZWdpb246IHByb2Nlc3MuZW52LkFXU19SRUdJT04gfHwgJ2FwLW5vcnRoZWFzdC0xJyxcclxuICAuLi4oaXNMb2NhbFN0YWNrICYmIHtcclxuICAgIGVuZHBvaW50OiBwcm9jZXNzLmVudi5BV1NfRU5EUE9JTlRfVVJMLFxyXG4gICAgY3JlZGVudGlhbHM6IHtcclxuICAgICAgYWNjZXNzS2V5SWQ6IHByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lEIHx8ICd0ZXN0JyxcclxuICAgICAgc2VjcmV0QWNjZXNzS2V5OiBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgfHwgJ3Rlc3QnLFxyXG4gICAgfSxcclxuICB9KSxcclxufSk7XHJcblxyXG5jb25zdCBkb2NDbGllbnQgPSBEeW5hbW9EQkRvY3VtZW50Q2xpZW50LmZyb20oZHluYW1vQ2xpZW50LCB7XHJcbiAgbWFyc2hhbGxPcHRpb25zOiB7XHJcbiAgICByZW1vdmVVbmRlZmluZWRWYWx1ZXM6IHRydWUsXHJcbiAgICBjb252ZXJ0Q2xhc3NJbnN0YW5jZVRvTWFwOiB0cnVlLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuZGVzY3JpYmUoJ0xhbWJkYSBRdWVyeSBIYW5kbGVyIEUyRSBUZXN0cyAtIFByb3BlcnR5IDk6IEFQSSBLZXkgQXV0aGVudGljYXRpb24nLCAoKSA9PiB7XHJcbiAgbGV0IG1vY2tDb250ZXh0OiBDb250ZXh0O1xyXG4gIGxldCBtb2NrRXZlbnQ6IEFQSUdhdGV3YXlQcm94eUV2ZW50O1xyXG4gIGNvbnN0IHRhYmxlTmFtZSA9IHByb2Nlc3MuZW52LkRZTkFNT0RCX1RBQkxFX05BTUUgfHwgJ3RkbmV0X2Rpc2Nsb3N1cmVzJztcclxuXHJcbiAgYmVmb3JlQWxsKGFzeW5jICgpID0+IHtcclxuICAgIC8vIOODhuOCueODiOODh+ODvOOCv+OCkkR5bmFtb0RC44Gr5oy/5YWlXHJcbiAgICBjb25zdCB0ZXN0RGlzY2xvc3VyZTogRGlzY2xvc3VyZSA9IHtcclxuICAgICAgZGlzY2xvc3VyZV9pZDogJ1REMjAyNDAxMTUwMDEnLFxyXG4gICAgICBjb21wYW55X2NvZGU6ICc3MjAzJyxcclxuICAgICAgY29tcGFueV9uYW1lOiAn44OI44Oo44K/6Ieq5YuV6LuKJyxcclxuICAgICAgZGlzY2xvc3VyZV90eXBlOiAn5rG6566X55+t5L+hJyxcclxuICAgICAgdGl0bGU6ICcyMDI05bm0M+aciOacnyDnrKwz5Zub5Y2K5pyf5rG6566X55+t5L+hJyxcclxuICAgICAgZGlzY2xvc2VkX2F0OiAnMjAyNC0wMS0xNVQxMDozMDowMFonLFxyXG4gICAgICBwZGZfdXJsOiAnaHR0cHM6Ly93d3cucmVsZWFzZS50ZG5ldC5pbmZvL2luYnMvMTQwMTIwMjQwMTE1MDAxLnBkZicsXHJcbiAgICAgIHMzX2tleTogJzIwMjQvMDEvMTUvVEQyMDI0MDExNTAwMV83MjAzLnBkZicsXHJcbiAgICAgIGNvbGxlY3RlZF9hdDogJzIwMjQtMDEtMTVUMTA6MzU6MDBaJyxcclxuICAgICAgZGF0ZV9wYXJ0aXRpb246ICcyMDI0LTAxJyxcclxuICAgIH07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgZG9jQ2xpZW50LnNlbmQoXHJcbiAgICAgICAgbmV3IFB1dENvbW1hbmQoe1xyXG4gICAgICAgICAgVGFibGVOYW1lOiB0YWJsZU5hbWUsXHJcbiAgICAgICAgICBJdGVtOiB0ZXN0RGlzY2xvc3VyZSxcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgICBjb25zb2xlLmxvZygnVGVzdCBkYXRhIGluc2VydGVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGluc2VydCB0ZXN0IGRhdGE6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAvLyDjg6Ljg4Pjgq/jgrPjg7Pjg4bjgq3jgrnjg4hcclxuICAgIG1vY2tDb250ZXh0ID0ge1xyXG4gICAgICBhd3NSZXF1ZXN0SWQ6ICd0ZXN0LXJlcXVlc3QtaWQtZTJlJyxcclxuICAgICAgZnVuY3Rpb25OYW1lOiAndGRuZXQtcXVlcnktZTJlJyxcclxuICAgICAgZnVuY3Rpb25WZXJzaW9uOiAnMScsXHJcbiAgICAgIGludm9rZWRGdW5jdGlvbkFybjogJ2Fybjphd3M6bGFtYmRhOmFwLW5vcnRoZWFzdC0xOjEyMzQ1Njc4OTAxMjpmdW5jdGlvbjp0ZG5ldC1xdWVyeS1lMmUnLFxyXG4gICAgICBtZW1vcnlMaW1pdEluTUI6ICcyNTYnLFxyXG4gICAgICBsb2dHcm91cE5hbWU6ICcvYXdzL2xhbWJkYS90ZG5ldC1xdWVyeS1lMmUnLFxyXG4gICAgICBsb2dTdHJlYW1OYW1lOiAnMjAyNC8wMS8xNS9bJExBVEVTVF1lMmUtdGVzdCcsXHJcbiAgICAgIGdldFJlbWFpbmluZ1RpbWVJbk1pbGxpczogKCkgPT4gMzAwMDAsXHJcbiAgICAgIGNhbGxiYWNrV2FpdHNGb3JFbXB0eUV2ZW50TG9vcDogdHJ1ZSxcclxuICAgICAgZG9uZTogamVzdC5mbigpLFxyXG4gICAgICBmYWlsOiBqZXN0LmZuKCksXHJcbiAgICAgIHN1Y2NlZWQ6IGplc3QuZm4oKSxcclxuICAgIH07XHJcblxyXG4gICAgLy8g44Oi44OD44Kv44Kk44OZ44Oz44OI77yI5Z+65pys77yJXHJcbiAgICBtb2NrRXZlbnQgPSB7XHJcbiAgICAgIGJvZHk6IG51bGwsXHJcbiAgICAgIGhlYWRlcnM6IHt9LFxyXG4gICAgICBtdWx0aVZhbHVlSGVhZGVyczoge30sXHJcbiAgICAgIGh0dHBNZXRob2Q6ICdHRVQnLFxyXG4gICAgICBpc0Jhc2U2NEVuY29kZWQ6IGZhbHNlLFxyXG4gICAgICBwYXRoOiAnL2Rpc2Nsb3N1cmVzJyxcclxuICAgICAgcGF0aFBhcmFtZXRlcnM6IG51bGwsXHJcbiAgICAgIHF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogbnVsbCxcclxuICAgICAgbXVsdGlWYWx1ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogbnVsbCxcclxuICAgICAgc3RhZ2VWYXJpYWJsZXM6IG51bGwsXHJcbiAgICAgIHJlcXVlc3RDb250ZXh0OiB7XHJcbiAgICAgICAgYWNjb3VudElkOiAnMTIzNDU2Nzg5MDEyJyxcclxuICAgICAgICBhcGlJZDogJ3Rlc3QtYXBpLWlkLWUyZScsXHJcbiAgICAgICAgcHJvdG9jb2w6ICdIVFRQLzEuMScsXHJcbiAgICAgICAgaHR0cE1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgcGF0aDogJy9kaXNjbG9zdXJlcycsXHJcbiAgICAgICAgc3RhZ2U6ICd0ZXN0JyxcclxuICAgICAgICByZXF1ZXN0SWQ6ICd0ZXN0LXJlcXVlc3QtaWQtZTJlJyxcclxuICAgICAgICByZXF1ZXN0VGltZTogJzE1L0phbi8yMDI0OjEwOjMwOjAwICswMDAwJyxcclxuICAgICAgICByZXF1ZXN0VGltZUVwb2NoOiAxNzA1MzE1ODAwMDAwLFxyXG4gICAgICAgIGlkZW50aXR5OiB7XHJcbiAgICAgICAgICBhY2Nlc3NLZXk6IG51bGwsXHJcbiAgICAgICAgICBhY2NvdW50SWQ6IG51bGwsXHJcbiAgICAgICAgICBhcGlLZXk6IG51bGwsXHJcbiAgICAgICAgICBhcGlLZXlJZDogbnVsbCxcclxuICAgICAgICAgIGNhbGxlcjogbnVsbCxcclxuICAgICAgICAgIGNsaWVudENlcnQ6IG51bGwsXHJcbiAgICAgICAgICBjb2duaXRvQXV0aGVudGljYXRpb25Qcm92aWRlcjogbnVsbCxcclxuICAgICAgICAgIGNvZ25pdG9BdXRoZW50aWNhdGlvblR5cGU6IG51bGwsXHJcbiAgICAgICAgICBjb2duaXRvSWRlbnRpdHlJZDogbnVsbCxcclxuICAgICAgICAgIGNvZ25pdG9JZGVudGl0eVBvb2xJZDogbnVsbCxcclxuICAgICAgICAgIHByaW5jaXBhbE9yZ0lkOiBudWxsLFxyXG4gICAgICAgICAgc291cmNlSXA6ICcxOTIuMTY4LjEuMScsXHJcbiAgICAgICAgICB1c2VyOiBudWxsLFxyXG4gICAgICAgICAgdXNlckFnZW50OiAnTW96aWxsYS81LjAnLFxyXG4gICAgICAgICAgdXNlckFybjogbnVsbCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGF1dGhvcml6ZXI6IG51bGwsXHJcbiAgICAgICAgZG9tYWluTmFtZTogJ2FwaS5leGFtcGxlLmNvbScsXHJcbiAgICAgICAgZG9tYWluUHJlZml4OiAnYXBpJyxcclxuICAgICAgICByZXNvdXJjZUlkOiAndGVzdC1yZXNvdXJjZS1pZCcsXHJcbiAgICAgICAgcmVzb3VyY2VQYXRoOiAnL2Rpc2Nsb3N1cmVzJyxcclxuICAgICAgfSxcclxuICAgICAgcmVzb3VyY2U6ICcvZGlzY2xvc3VyZXMnLFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyDnkrDlooPlpInmlbDoqK3lrppcclxuICAgIHByb2Nlc3MuZW52LkFQSV9LRVkgPSAndGVzdC1hcGkta2V5LWUyZSc7XHJcbiAgICBwcm9jZXNzLmVudi5EWU5BTU9EQl9UQUJMRV9OQU1FID0gdGFibGVOYW1lO1xyXG4gICAgcHJvY2Vzcy5lbnYuUzNfQlVDS0VUX05BTUUgPSAndGRuZXQtcGRmcy1sb2NhbCc7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQcm9wZXJ0eSA5LjE6IOeEoeWKueOBqkFQSeOCreODvOOBpzQwMSBVbmF1dGhvcml6ZWTjgYzov5TjgZXjgozjgosnLCAoKSA9PiB7XHJcbiAgICBpdCgn54Sh5Yq544GqQVBJ44Kt44O844Gu5aC05ZCI44GvNDAx44Ko44Op44O844KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIG1vY2tFdmVudC5oZWFkZXJzID0ge1xyXG4gICAgICAgICd4LWFwaS1rZXknOiAnaW52YWxpZC1hcGkta2V5JyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKG1vY2tFdmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDEpO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yX2NvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xyXG4gICAgICBleHBlY3QoYm9keS5tZXNzYWdlKS50b0NvbnRhaW4oJ0ludmFsaWQgQVBJIGtleScpO1xyXG4gICAgICBleHBlY3QoYm9keS5yZXF1ZXN0X2lkKS50b0JlKG1vY2tDb250ZXh0LmF3c1JlcXVlc3RJZCk7XHJcblxyXG4gICAgICAvLyBDT1JT44OY44OD44OA44O844Gu56K66KqNXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaGVhZGVycz8uWydBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nXSkudG9CZSgnKicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ0FQSeOCreODvOOBjOacquioreWumuOBruWgtOWQiOOBrzQwMeOCqOODqeODvOOCkui/lOOBmScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICBtb2NrRXZlbnQuaGVhZGVycyA9IHt9OyAvLyBBUEnjgq3jg7zjgarjgZdcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKG1vY2tFdmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDEpO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yX2NvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xyXG4gICAgICBleHBlY3QoYm9keS5tZXNzYWdlKS50b0NvbnRhaW4oJ0FQSSBrZXkgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgZXhwZWN0KGJvZHkucmVxdWVzdF9pZCkudG9CZShtb2NrQ29udGV4dC5hd3NSZXF1ZXN0SWQpO1xyXG5cclxuICAgICAgLy8gQ09SU+ODmOODg+ODgOODvOOBrueiuuiqjVxyXG4gICAgICBleHBlY3QocmVzdWx0LmhlYWRlcnM/LlsnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJ10pLnRvQmUoJyonKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCflpKfmloflrZflsI/mloflrZfjgYznlbDjgarjgovjg5jjg4Pjg4Djg7zlkI3jgafjgoLoqo3oqLzjgYzmqZ/og73jgZnjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgbW9ja0V2ZW50LmhlYWRlcnMgPSB7XHJcbiAgICAgICAgJ1gtQXBpLUtleSc6ICdpbnZhbGlkLWFwaS1rZXknLCAvLyDlpKfmloflrZdcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKG1vY2tFdmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDEpO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yX2NvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xyXG4gICAgICBleHBlY3QoYm9keS5tZXNzYWdlKS50b0NvbnRhaW4oJ0ludmFsaWQgQVBJIGtleScpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQcm9wZXJ0eSA5LjI6IOacieWKueOBqkFQSeOCreODvOOBp+ato+W4uOOBq+ODrOOCueODneODs+OCueOBjOi/lOOBleOCjOOCiycsICgpID0+IHtcclxuICAgIGl0KCfmnInlirnjgapBUEnjgq3jg7zjgafoqo3oqLzmiJDlip/jgZfjgIHjg4fjg7zjgr/jgYzlj5blvpfjgafjgY3jgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgbW9ja0V2ZW50LmhlYWRlcnMgPSB7XHJcbiAgICAgICAgJ3gtYXBpLWtleSc6ICd0ZXN0LWFwaS1rZXktZTJlJyxcclxuICAgICAgfTtcclxuICAgICAgbW9ja0V2ZW50LnF1ZXJ5U3RyaW5nUGFyYW1ldGVycyA9IHtcclxuICAgICAgICBjb21wYW55X2NvZGU6ICc3MjAzJyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKG1vY2tFdmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgLy8gRGVidWc6IExvZyBlcnJvciBpZiBzdGF0dXMgaXMgbm90IDIwMFxyXG4gICAgICBpZiAocmVzdWx0LnN0YXR1c0NvZGUgIT09IDIwMCkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Rlc3QgZmFpbGVkIHdpdGggc3RhdHVzOicsIHJlc3VsdC5zdGF0dXNDb2RlKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdSZXNwb25zZSBib2R5OicsIHJlc3VsdC5ib2R5KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSgyMDApO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmhlYWRlcnM/LlsnQ29udGVudC1UeXBlJ10pLnRvQmUoJ2FwcGxpY2F0aW9uL2pzb24nKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5oZWFkZXJzPy5bJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiddKS50b0JlKCcqJyk7XHJcblxyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5KS50b0hhdmVQcm9wZXJ0eSgnZGlzY2xvc3VyZXMnKTtcclxuICAgICAgZXhwZWN0KGJvZHkpLnRvSGF2ZVByb3BlcnR5KCd0b3RhbCcpO1xyXG4gICAgICBleHBlY3QoYm9keSkudG9IYXZlUHJvcGVydHkoJ2NvdW50Jyk7XHJcbiAgICAgIGV4cGVjdChib2R5KS50b0hhdmVQcm9wZXJ0eSgnb2Zmc2V0Jyk7XHJcbiAgICAgIGV4cGVjdChib2R5KS50b0hhdmVQcm9wZXJ0eSgnbGltaXQnKTtcclxuXHJcbiAgICAgIC8vIOODh+ODvOOCv+OBruaknOiovFxyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShib2R5LmRpc2Nsb3N1cmVzKSkudG9CZSh0cnVlKTtcclxuICAgICAgaWYgKGJvZHkuZGlzY2xvc3VyZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGRpc2Nsb3N1cmUgPSBib2R5LmRpc2Nsb3N1cmVzWzBdO1xyXG4gICAgICAgIGV4cGVjdChkaXNjbG9zdXJlKS50b0hhdmVQcm9wZXJ0eSgnZGlzY2xvc3VyZV9pZCcpO1xyXG4gICAgICAgIGV4cGVjdChkaXNjbG9zdXJlKS50b0hhdmVQcm9wZXJ0eSgnY29tcGFueV9jb2RlJyk7XHJcbiAgICAgICAgZXhwZWN0KGRpc2Nsb3N1cmUpLnRvSGF2ZVByb3BlcnR5KCdjb21wYW55X25hbWUnKTtcclxuICAgICAgICBleHBlY3QoZGlzY2xvc3VyZSkudG9IYXZlUHJvcGVydHkoJ2Rpc2Nsb3NlZF9hdCcpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5pyJ5Yq544GqQVBJ44Kt44O844Gn5pel5LuY56+E5Zuy5qSc57Si44GM5qmf6IO944GZ44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIG1vY2tFdmVudC5oZWFkZXJzID0ge1xyXG4gICAgICAgICd4LWFwaS1rZXknOiAndGVzdC1hcGkta2V5LWUyZScsXHJcbiAgICAgIH07XHJcbiAgICAgIG1vY2tFdmVudC5xdWVyeVN0cmluZ1BhcmFtZXRlcnMgPSB7XHJcbiAgICAgICAgc3RhcnRfZGF0ZTogJzIwMjQtMDEtMTUnLFxyXG4gICAgICAgIGVuZF9kYXRlOiAnMjAyNC0wMS0yMCcsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihtb2NrRXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoMjAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keSkudG9IYXZlUHJvcGVydHkoJ2Rpc2Nsb3N1cmVzJyk7XHJcbiAgICAgIGV4cGVjdChib2R5KS50b0hhdmVQcm9wZXJ0eSgndG90YWwnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfmnInlirnjgapBUEnjgq3jg7zjgadDU1blvaLlvI/jga7jg6zjgrnjg53jg7PjgrnjgYzlj5blvpfjgafjgY3jgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgbW9ja0V2ZW50LmhlYWRlcnMgPSB7XHJcbiAgICAgICAgJ3gtYXBpLWtleSc6ICd0ZXN0LWFwaS1rZXktZTJlJyxcclxuICAgICAgfTtcclxuICAgICAgbW9ja0V2ZW50LnF1ZXJ5U3RyaW5nUGFyYW1ldGVycyA9IHtcclxuICAgICAgICBmb3JtYXQ6ICdjc3YnLFxyXG4gICAgICAgIGNvbXBhbnlfY29kZTogJzcyMDMnLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gQWN0XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIobW9ja0V2ZW50LCBtb2NrQ29udGV4dCk7XHJcblxyXG4gICAgICAvLyBBc3NlcnRcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDIwMCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaGVhZGVycz8uWydDb250ZW50LVR5cGUnXSkudG9CZSgndGV4dC9jc3YnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5oZWFkZXJzPy5bJ0NvbnRlbnQtRGlzcG9zaXRpb24nXSkudG9Db250YWluKCdhdHRhY2htZW50Jyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaGVhZGVycz8uWydBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nXSkudG9CZSgnKicpO1xyXG5cclxuICAgICAgLy8gQ1NW44OY44OD44OA44O844Gu56K66KqNXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuYm9keSkudG9Db250YWluKCdkaXNjbG9zdXJlX2lkJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuYm9keSkudG9Db250YWluKCdjb21wYW55X2NvZGUnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5ib2R5KS50b0NvbnRhaW4oJ2NvbXBhbnlfbmFtZScpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQcm9wZXJ0eSA5LjM6IEFQSeOCreODvOiqjeiovOOBqOODkOODquODh+ODvOOCt+ODp+ODs+OBrue1hOOBv+WQiOOCj+OBmycsICgpID0+IHtcclxuICAgIGl0KCfmnInlirnjgapBUEnjgq3jg7zjgafjgoLkuI3mraPjgarjgq/jgqjjg6rjg5Hjg6njg6Hjg7zjgr/jga80MDDjgqjjg6njg7zjgpLov5TjgZknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgbW9ja0V2ZW50LmhlYWRlcnMgPSB7XHJcbiAgICAgICAgJ3gtYXBpLWtleSc6ICd0ZXN0LWFwaS1rZXktZTJlJyxcclxuICAgICAgfTtcclxuICAgICAgbW9ja0V2ZW50LnF1ZXJ5U3RyaW5nUGFyYW1ldGVycyA9IHtcclxuICAgICAgICBjb21wYW55X2NvZGU6ICcxMjMnLCAvLyA05qGB44Gn44Gq44GEXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihtb2NrRXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvcl9jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XHJcbiAgICAgIGV4cGVjdChib2R5Lm1lc3NhZ2UpLnRvQ29udGFpbignSW52YWxpZCBjb21wYW55X2NvZGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfmnInlirnjgapBUEnjgq3jg7zjgafjgoLkuI3mraPjgarml6Xku5jlvaLlvI/jga80MDDjgqjjg6njg7zjgpLov5TjgZknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgbW9ja0V2ZW50LmhlYWRlcnMgPSB7XHJcbiAgICAgICAgJ3gtYXBpLWtleSc6ICd0ZXN0LWFwaS1rZXktZTJlJyxcclxuICAgICAgfTtcclxuICAgICAgbW9ja0V2ZW50LnF1ZXJ5U3RyaW5nUGFyYW1ldGVycyA9IHtcclxuICAgICAgICBzdGFydF9kYXRlOiAnMjAyNC8wMS8xNScsIC8vIFlZWVktTU0tRETlvaLlvI/jgafjgarjgYRcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKG1vY2tFdmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LmVycm9yX2NvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcclxuICAgICAgZXhwZWN0KGJvZHkubWVzc2FnZSkudG9Db250YWluKCdJbnZhbGlkIHN0YXJ0X2RhdGUgZm9ybWF0Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5pyJ5Yq544GqQVBJ44Kt44O844Gn44KC6ZaL5aeL5pel44GM57WC5LqG5pel44KI44KK5b6M44Gu5aC05ZCI44GvNDAw44Ko44Op44O844KS6L+U44GZJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlXHJcbiAgICAgIG1vY2tFdmVudC5oZWFkZXJzID0ge1xyXG4gICAgICAgICd4LWFwaS1rZXknOiAndGVzdC1hcGkta2V5LWUyZScsXHJcbiAgICAgIH07XHJcbiAgICAgIG1vY2tFdmVudC5xdWVyeVN0cmluZ1BhcmFtZXRlcnMgPSB7XHJcbiAgICAgICAgc3RhcnRfZGF0ZTogJzIwMjQtMDEtMjAnLFxyXG4gICAgICAgIGVuZF9kYXRlOiAnMjAyNC0wMS0xNScsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihtb2NrRXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvcl9jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XHJcbiAgICAgIGV4cGVjdChib2R5Lm1lc3NhZ2UpLnRvQ29udGFpbignc3RhcnRfZGF0ZScpO1xyXG4gICAgICBleHBlY3QoYm9keS5tZXNzYWdlKS50b0NvbnRhaW4oJ211c3QgYmUgYmVmb3JlIG9yIGVxdWFsIHRvJyk7XHJcbiAgICAgIGV4cGVjdChib2R5Lm1lc3NhZ2UpLnRvQ29udGFpbignZW5kX2RhdGUnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUHJvcGVydHkgOS40OiDjgqjjg6njg7zjg6zjgrnjg53jg7Pjgrnjga7kuIDosqvmgKcnLCAoKSA9PiB7XHJcbiAgICBpdCgn44GZ44G544Gm44Gu44Ko44Op44O844Os44K544Od44Oz44K544GrQ09SU+ODmOODg+ODgOODvOOBjOWQq+OBvuOCjOOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQXJyYW5nZTogQVBJ44Kt44O844Gq44GXXHJcbiAgICAgIG1vY2tFdmVudC5oZWFkZXJzID0ge307XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihtb2NrRXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDAxKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5oZWFkZXJzPy5bJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiddKS50b0JlKCcqJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaGVhZGVycz8uWydDb250ZW50LVR5cGUnXSkudG9CZSgnYXBwbGljYXRpb24vanNvbicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+OBmeOBueOBpuOBruOCqOODqeODvOODrOOCueODneODs+OCueOBq3JlcXVlc3RfaWTjgYzlkKvjgb7jgozjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEFycmFuZ2U6IOeEoeWKueOBqkFQSeOCreODvFxyXG4gICAgICBtb2NrRXZlbnQuaGVhZGVycyA9IHtcclxuICAgICAgICAneC1hcGkta2V5JzogJ2ludmFsaWQtYXBpLWtleScsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBBY3RcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihtb2NrRXZlbnQsIG1vY2tDb250ZXh0KTtcclxuXHJcbiAgICAgIC8vIEFzc2VydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoNDAxKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS5yZXF1ZXN0X2lkKS50b0JlKG1vY2tDb250ZXh0LmF3c1JlcXVlc3RJZCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn44Ko44Op44O844Os44K544Od44Oz44K544Gu5qeL6YCg44GM5LiA6LKr44GX44Gm44GE44KLJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBcnJhbmdlOiBBUEnjgq3jg7zjgarjgZdcclxuICAgICAgbW9ja0V2ZW50LmhlYWRlcnMgPSB7fTtcclxuXHJcbiAgICAgIC8vIEFjdFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKG1vY2tFdmVudCwgbW9ja0NvbnRleHQpO1xyXG5cclxuICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkpLnRvSGF2ZVByb3BlcnR5KCdlcnJvcl9jb2RlJyk7XHJcbiAgICAgIGV4cGVjdChib2R5KS50b0hhdmVQcm9wZXJ0eSgnbWVzc2FnZScpO1xyXG4gICAgICBleHBlY3QoYm9keSkudG9IYXZlUHJvcGVydHkoJ3JlcXVlc3RfaWQnKTtcclxuICAgICAgZXhwZWN0KHR5cGVvZiBib2R5LmVycm9yX2NvZGUpLnRvQmUoJ3N0cmluZycpO1xyXG4gICAgICBleHBlY3QodHlwZW9mIGJvZHkubWVzc2FnZSkudG9CZSgnc3RyaW5nJyk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgYm9keS5yZXF1ZXN0X2lkKS50b0JlKCdzdHJpbmcnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sInZlcnNpb24iOjN9