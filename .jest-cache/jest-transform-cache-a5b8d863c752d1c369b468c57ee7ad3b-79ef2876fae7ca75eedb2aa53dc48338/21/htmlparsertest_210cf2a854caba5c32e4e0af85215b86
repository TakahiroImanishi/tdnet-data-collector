449f4a5a8735bf2a9e37430046200ffd
"use strict";
/**
 * HTMLパーサーのユニットテスト
 *
 * steeringファイル準拠:
 * - development/tdnet-scraping-patterns.md
 * - core/error-handling-patterns.md
 *
 * Requirements: 要件1.2（メタデータ抽出）
 */
Object.defineProperty(exports, "__esModule", { value: true });
const html_parser_1 = require("../html-parser");
const errors_1 = require("../../errors");
describe('HTML Parser', () => {
    describe('正常系: HTMLパース成功', () => {
        it('should parse valid HTML with disclosure table', () => {
            const html = `
        <html>
          <body>
            <table class="disclosure-list">
              <tr>
                <th>企業コード</th>
                <th>企業名</th>
                <th>開示種類</th>
                <th>タイトル</th>
                <th>開示日時</th>
                <th>PDF</th>
              </tr>
              <tr>
                <td>7203</td>
                <td>トヨタ自動車株式会社</td>
                <td>決算短信</td>
                <td>2024年3月期 第3四半期決算短信</td>
                <td>2024/01/15 15:00</td>
                <td><a href="https://example.com/test.pdf">PDF</a></td>
              </tr>
            </table>
          </body>
        </html>
      `;
            const disclosures = (0, html_parser_1.parseDisclosureList)(html);
            expect(disclosures).toHaveLength(1);
            expect(disclosures[0].company_code).toBe('7203');
            expect(disclosures[0].company_name).toBe('トヨタ自動車株式会社');
            expect(disclosures[0].disclosure_type).toBe('決算短信');
            expect(disclosures[0].title).toBe('2024年3月期 第3四半期決算短信');
            expect(disclosures[0].disclosed_at).toBe('2024-01-15T06:00:00.000Z'); // JST 15:00 → UTC 06:00
            expect(disclosures[0].pdf_url).toBe('https://example.com/test.pdf');
        });
        it('should parse multiple disclosure rows', () => {
            const html = `
        <html>
          <body>
            <table class="disclosure-list">
              <tr><th>Header</th></tr>
              <tr>
                <td>7203</td>
                <td>トヨタ自動車株式会社</td>
                <td>決算短信</td>
                <td>決算短信タイトル</td>
                <td>2024/01/15 15:00</td>
                <td><a href="https://example.com/test1.pdf">PDF</a></td>
              </tr>
              <tr>
                <td>9984</td>
                <td>ソフトバンクグループ株式会社</td>
                <td>業績予想</td>
                <td>業績予想修正</td>
                <td>2024/01/15 16:00</td>
                <td><a href="https://example.com/test2.pdf">PDF</a></td>
              </tr>
            </table>
          </body>
        </html>
      `;
            const disclosures = (0, html_parser_1.parseDisclosureList)(html);
            expect(disclosures).toHaveLength(2);
            expect(disclosures[0].company_code).toBe('7203');
            expect(disclosures[1].company_code).toBe('9984');
        });
        it('should skip header row', () => {
            const html = `
        <html>
          <body>
            <table class="disclosure-list">
              <tr>
                <th>企業コード</th>
                <th>企業名</th>
                <th>開示種類</th>
                <th>タイトル</th>
                <th>開示日時</th>
                <th>PDF</th>
              </tr>
              <tr>
                <td>7203</td>
                <td>トヨタ自動車株式会社</td>
                <td>決算短信</td>
                <td>決算短信タイトル</td>
                <td>2024/01/15 15:00</td>
                <td><a href="https://example.com/test.pdf">PDF</a></td>
              </tr>
            </table>
          </body>
        </html>
      `;
            const disclosures = (0, html_parser_1.parseDisclosureList)(html);
            expect(disclosures).toHaveLength(1);
            expect(disclosures[0].company_code).toBe('7203');
        });
    });
    describe('異常系: エラーハンドリング', () => {
        it('should throw ValidationError for empty HTML', () => {
            expect(() => (0, html_parser_1.parseDisclosureList)('')).toThrow(errors_1.ValidationError);
            expect(() => (0, html_parser_1.parseDisclosureList)('')).toThrow(/empty/);
        });
        it('should throw ValidationError for whitespace-only HTML', () => {
            expect(() => (0, html_parser_1.parseDisclosureList)('   \n\t  ')).toThrow(errors_1.ValidationError);
            expect(() => (0, html_parser_1.parseDisclosureList)('   \n\t  ')).toThrow(/empty/);
        });
        it('should return empty array when no disclosure table found', () => {
            const html = `
        <html>
          <body>
            <p>No table here</p>
          </body>
        </html>
      `;
            const disclosures = (0, html_parser_1.parseDisclosureList)(html);
            expect(disclosures).toHaveLength(0);
        });
        it('should skip rows with insufficient cells', () => {
            const html = `
        <html>
          <body>
            <table class="disclosure-list">
              <tr><th>Header</th></tr>
              <tr>
                <td>7203</td>
                <td>トヨタ自動車株式会社</td>
                <!-- 不完全な行: セルが不足 -->
              </tr>
              <tr>
                <td>9984</td>
                <td>ソフトバンクグループ株式会社</td>
                <td>業績予想</td>
                <td>業績予想修正</td>
                <td>2024/01/15 16:00</td>
                <td><a href="https://example.com/test.pdf">PDF</a></td>
              </tr>
            </table>
          </body>
        </html>
      `;
            const disclosures = (0, html_parser_1.parseDisclosureList)(html);
            // 不完全な行はスキップされ、有効な行のみパースされる
            expect(disclosures).toHaveLength(1);
            expect(disclosures[0].company_code).toBe('9984');
        });
        it('should skip rows with invalid company code', () => {
            const html = `
        <html>
          <body>
            <table class="disclosure-list">
              <tr><th>Header</th></tr>
              <tr>
                <td>INVALID</td>
                <td>無効な企業</td>
                <td>決算短信</td>
                <td>タイトル</td>
                <td>2024/01/15 15:00</td>
                <td><a href="https://example.com/test.pdf">PDF</a></td>
              </tr>
              <tr>
                <td>7203</td>
                <td>トヨタ自動車株式会社</td>
                <td>決算短信</td>
                <td>決算短信タイトル</td>
                <td>2024/01/15 15:00</td>
                <td><a href="https://example.com/test.pdf">PDF</a></td>
              </tr>
            </table>
          </body>
        </html>
      `;
            const disclosures = (0, html_parser_1.parseDisclosureList)(html);
            // 無効な企業コードの行はスキップされる
            expect(disclosures).toHaveLength(1);
            expect(disclosures[0].company_code).toBe('7203');
        });
        it('should skip rows with invalid date format', () => {
            const html = `
        <html>
          <body>
            <table class="disclosure-list">
              <tr><th>Header</th></tr>
              <tr>
                <td>7203</td>
                <td>トヨタ自動車株式会社</td>
                <td>決算短信</td>
                <td>タイトル</td>
                <td>INVALID_DATE</td>
                <td><a href="https://example.com/test.pdf">PDF</a></td>
              </tr>
              <tr>
                <td>9984</td>
                <td>ソフトバンクグループ株式会社</td>
                <td>業績予想</td>
                <td>業績予想修正</td>
                <td>2024/01/15 16:00</td>
                <td><a href="https://example.com/test.pdf">PDF</a></td>
              </tr>
            </table>
          </body>
        </html>
      `;
            const disclosures = (0, html_parser_1.parseDisclosureList)(html);
            // 無効な日付の行はスキップされる
            expect(disclosures).toHaveLength(1);
            expect(disclosures[0].company_code).toBe('9984');
        });
        it('should skip rows with invalid PDF URL', () => {
            const html = `
        <html>
          <body>
            <table class="disclosure-list">
              <tr><th>Header</th></tr>
              <tr>
                <td>7203</td>
                <td>トヨタ自動車株式会社</td>
                <td>決算短信</td>
                <td>タイトル</td>
                <td>2024/01/15 15:00</td>
                <td><a href="invalid_url">PDF</a></td>
              </tr>
              <tr>
                <td>9984</td>
                <td>ソフトバンクグループ株式会社</td>
                <td>業績予想</td>
                <td>業績予想修正</td>
                <td>2024/01/15 16:00</td>
                <td><a href="https://example.com/test.pdf">PDF</a></td>
              </tr>
            </table>
          </body>
        </html>
      `;
            const disclosures = (0, html_parser_1.parseDisclosureList)(html);
            // 無効なPDF URLの行はスキップされる
            expect(disclosures).toHaveLength(1);
            expect(disclosures[0].company_code).toBe('9984');
        });
    });
    describe('部分的失敗の処理（Graceful Degradation）', () => {
        it('should continue parsing after encountering invalid rows', () => {
            const html = `
        <html>
          <body>
            <table class="disclosure-list">
              <tr><th>Header</th></tr>
              <tr>
                <td>7203</td>
                <td>トヨタ自動車株式会社</td>
                <td>決算短信</td>
                <td>タイトル1</td>
                <td>2024/01/15 15:00</td>
                <td><a href="https://example.com/test1.pdf">PDF</a></td>
              </tr>
              <tr>
                <td>INVALID</td>
                <td>無効な企業</td>
                <td>決算短信</td>
                <td>タイトル2</td>
                <td>2024/01/15 16:00</td>
                <td><a href="https://example.com/test2.pdf">PDF</a></td>
              </tr>
              <tr>
                <td>9984</td>
                <td>ソフトバンクグループ株式会社</td>
                <td>業績予想</td>
                <td>タイトル3</td>
                <td>2024/01/15 17:00</td>
                <td><a href="https://example.com/test3.pdf">PDF</a></td>
              </tr>
            </table>
          </body>
        </html>
      `;
            const disclosures = (0, html_parser_1.parseDisclosureList)(html);
            // 無効な行をスキップして、有効な行のみパースされる
            expect(disclosures).toHaveLength(2);
            expect(disclosures[0].company_code).toBe('7203');
            expect(disclosures[1].company_code).toBe('9984');
        });
    });
    describe('エッジケース', () => {
        it('should handle empty table (only header)', () => {
            const html = `
        <html>
          <body>
            <table class="disclosure-list">
              <tr><th>Header</th></tr>
            </table>
          </body>
        </html>
      `;
            const disclosures = (0, html_parser_1.parseDisclosureList)(html);
            expect(disclosures).toHaveLength(0);
        });
        it('should handle table with no rows', () => {
            const html = `
        <html>
          <body>
            <table class="disclosure-list">
            </table>
          </body>
        </html>
      `;
            const disclosures = (0, html_parser_1.parseDisclosureList)(html);
            expect(disclosures).toHaveLength(0);
        });
        it('should trim whitespace from cell values', () => {
            const html = `
        <html>
          <body>
            <table class="disclosure-list">
              <tr><th>Header</th></tr>
              <tr>
                <td>  7203  </td>
                <td>  トヨタ自動車株式会社  </td>
                <td>  決算短信  </td>
                <td>  決算短信タイトル  </td>
                <td>  2024/01/15 15:00  </td>
                <td><a href="https://example.com/test.pdf">PDF</a></td>
              </tr>
            </table>
          </body>
        </html>
      `;
            const disclosures = (0, html_parser_1.parseDisclosureList)(html);
            expect(disclosures).toHaveLength(1);
            expect(disclosures[0].company_code).toBe('7203');
            expect(disclosures[0].company_name).toBe('トヨタ自動車株式会社');
            expect(disclosures[0].disclosure_type).toBe('決算短信');
            expect(disclosures[0].title).toBe('決算短信タイトル');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxzY3JhcGVyXFxfX3Rlc3RzX19cXGh0bWwtcGFyc2VyLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7OztHQVFHOztBQUVILGdEQUFxRDtBQUNyRCx5Q0FBK0M7QUFFL0MsUUFBUSxDQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUU7SUFDM0IsUUFBUSxDQUFDLGdCQUFnQixFQUFFLEdBQUcsRUFBRTtRQUM5QixFQUFFLENBQUMsK0NBQStDLEVBQUUsR0FBRyxFQUFFO1lBQ3ZELE1BQU0sSUFBSSxHQUFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztPQXVCWixDQUFDO1lBRUYsTUFBTSxXQUFXLEdBQUcsSUFBQSxpQ0FBbUIsRUFBQyxJQUFJLENBQUMsQ0FBQztZQUU5QyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3BDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2pELE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ3ZELE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3BELE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUM7WUFDeEQsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsMEJBQTBCLENBQUMsQ0FBQyxDQUFDLHdCQUF3QjtZQUM5RixNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FB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TUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx5Q0FBeUMsRUFBRSxHQUFHLEVBQUU7WUFDakQsTUFBTSxJQUFJLEdBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7T0FnQlosQ0FBQztZQUVGLE1BQU0sV0FBVyxHQUFHLElBQUEsaUNBQW1CLEVBQUMsSUFBSSxDQUFDLENBQUM7WUFFOUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNqRCxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUN2RCxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNwRCxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNoRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFxzY3JhcGVyXFxfX3Rlc3RzX19cXGh0bWwtcGFyc2VyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEhUTUzjg5Hjg7zjgrXjg7zjga7jg6bjg4vjg4Pjg4jjg4bjgrnjg4hcclxuICpcclxuICogc3RlZXJpbmfjg5XjgqHjgqTjg6vmupbmi6A6XHJcbiAqIC0gZGV2ZWxvcG1lbnQvdGRuZXQtc2NyYXBpbmctcGF0dGVybnMubWRcclxuICogLSBjb3JlL2Vycm9yLWhhbmRsaW5nLXBhdHRlcm5zLm1kXHJcbiAqXHJcbiAqIFJlcXVpcmVtZW50czog6KaB5Lu2MS4y77yI44Oh44K/44OH44O844K/5oq95Ye677yJXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgcGFyc2VEaXNjbG9zdXJlTGlzdCB9IGZyb20gJy4uL2h0bWwtcGFyc2VyJztcclxuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAnLi4vLi4vZXJyb3JzJztcclxuXHJcbmRlc2NyaWJlKCdIVE1MIFBhcnNlcicsICgpID0+IHtcclxuICBkZXNjcmliZSgn5q2j5bi457O7OiBIVE1M44OR44O844K55oiQ5YqfJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBwYXJzZSB2YWxpZCBIVE1MIHdpdGggZGlzY2xvc3VyZSB0YWJsZScsICgpID0+IHtcclxuICAgICAgY29uc3QgaHRtbCA9IGBcclxuICAgICAgICA8aHRtbD5cclxuICAgICAgICAgIDxib2R5PlxyXG4gICAgICAgICAgICA8dGFibGUgY2xhc3M9XCJkaXNjbG9zdXJlLWxpc3RcIj5cclxuICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICA8dGg+5LyB5qWt44Kz44O844OJPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD7kvIHmpa3lkI08L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoPumWi+ekuueorumhnjwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGg+44K/44Kk44OI44OrPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD7plovnpLrml6XmmYI8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoPlBERjwvdGg+XHJcbiAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICA8dGQ+NzIwMzwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+44OI44Oo44K/6Ieq5YuV6LuK5qCq5byP5Lya56S+PC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7msbrnrpfnn63kv6E8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPjIwMjTlubQz5pyI5pyfIOesrDPlm5vljYrmnJ/msbrnrpfnn63kv6E8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPjIwMjQvMDEvMTUgMTU6MDA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPjxhIGhyZWY9XCJodHRwczovL2V4YW1wbGUuY29tL3Rlc3QucGRmXCI+UERGPC9hPjwvdGQ+XHJcbiAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgIDwvYm9keT5cclxuICAgICAgICA8L2h0bWw+XHJcbiAgICAgIGA7XHJcblxyXG4gICAgICBjb25zdCBkaXNjbG9zdXJlcyA9IHBhcnNlRGlzY2xvc3VyZUxpc3QoaHRtbCk7XHJcblxyXG4gICAgICBleHBlY3QoZGlzY2xvc3VyZXMpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgZXhwZWN0KGRpc2Nsb3N1cmVzWzBdLmNvbXBhbnlfY29kZSkudG9CZSgnNzIwMycpO1xyXG4gICAgICBleHBlY3QoZGlzY2xvc3VyZXNbMF0uY29tcGFueV9uYW1lKS50b0JlKCfjg4jjg6jjgr/oh6rli5Xou4rmoKrlvI/kvJrnpL4nKTtcclxuICAgICAgZXhwZWN0KGRpc2Nsb3N1cmVzWzBdLmRpc2Nsb3N1cmVfdHlwZSkudG9CZSgn5rG6566X55+t5L+hJyk7XHJcbiAgICAgIGV4cGVjdChkaXNjbG9zdXJlc1swXS50aXRsZSkudG9CZSgnMjAyNOW5tDPmnIjmnJ8g56ysM+Wbm+WNiuacn+axuueul+efreS/oScpO1xyXG4gICAgICBleHBlY3QoZGlzY2xvc3VyZXNbMF0uZGlzY2xvc2VkX2F0KS50b0JlKCcyMDI0LTAxLTE1VDA2OjAwOjAwLjAwMFonKTsgLy8gSlNUIDE1OjAwIOKGkiBVVEMgMDY6MDBcclxuICAgICAgZXhwZWN0KGRpc2Nsb3N1cmVzWzBdLnBkZl91cmwpLnRvQmUoJ2h0dHBzOi8vZXhhbXBsZS5jb20vdGVzdC5wZGYnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcGFyc2UgbXVsdGlwbGUgZGlzY2xvc3VyZSByb3dzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBodG1sID0gYFxyXG4gICAgICAgIDxodG1sPlxyXG4gICAgICAgICAgPGJvZHk+XHJcbiAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cImRpc2Nsb3N1cmUtbGlzdFwiPlxyXG4gICAgICAgICAgICAgIDx0cj48dGg+SGVhZGVyPC90aD48L3RyPlxyXG4gICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0ZD43MjAzPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7jg4jjg6jjgr/oh6rli5Xou4rmoKrlvI/kvJrnpL48L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPuaxuueul+efreS/oTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+5rG6566X55+t5L+h44K/44Kk44OI44OrPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD4yMDI0LzAxLzE1IDE1OjAwPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD48YSBocmVmPVwiaHR0cHM6Ly9leGFtcGxlLmNvbS90ZXN0MS5wZGZcIj5QREY8L2E+PC90ZD5cclxuICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0ZD45OTg0PC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7jgr3jg5Xjg4jjg5Djg7Pjgq/jgrDjg6vjg7zjg5fmoKrlvI/kvJrnpL48L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPualree4vuS6iOaDszwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+5qWt57i+5LqI5oOz5L+u5q2jPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD4yMDI0LzAxLzE1IDE2OjAwPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD48YSBocmVmPVwiaHR0cHM6Ly9leGFtcGxlLmNvbS90ZXN0Mi5wZGZcIj5QREY8L2E+PC90ZD5cclxuICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgPC9ib2R5PlxyXG4gICAgICAgIDwvaHRtbD5cclxuICAgICAgYDtcclxuXHJcbiAgICAgIGNvbnN0IGRpc2Nsb3N1cmVzID0gcGFyc2VEaXNjbG9zdXJlTGlzdChodG1sKTtcclxuXHJcbiAgICAgIGV4cGVjdChkaXNjbG9zdXJlcykudG9IYXZlTGVuZ3RoKDIpO1xyXG4gICAgICBleHBlY3QoZGlzY2xvc3VyZXNbMF0uY29tcGFueV9jb2RlKS50b0JlKCc3MjAzJyk7XHJcbiAgICAgIGV4cGVjdChkaXNjbG9zdXJlc1sxXS5jb21wYW55X2NvZGUpLnRvQmUoJzk5ODQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2tpcCBoZWFkZXIgcm93JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBodG1sID0gYFxyXG4gICAgICAgIDxodG1sPlxyXG4gICAgICAgICAgPGJvZHk+XHJcbiAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cImRpc2Nsb3N1cmUtbGlzdFwiPlxyXG4gICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0aD7kvIHmpa3jgrPjg7zjg4k8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoPuS8gealreWQjTwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGg+6ZaL56S656iu6aGePC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD7jgr/jgqTjg4jjg6s8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoPumWi+ekuuaXpeaZgjwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGg+UERGPC90aD5cclxuICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0ZD43MjAzPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7jg4jjg6jjgr/oh6rli5Xou4rmoKrlvI/kvJrnpL48L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPuaxuueul+efreS/oTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+5rG6566X55+t5L+h44K/44Kk44OI44OrPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD4yMDI0LzAxLzE1IDE1OjAwPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD48YSBocmVmPVwiaHR0cHM6Ly9leGFtcGxlLmNvbS90ZXN0LnBkZlwiPlBERjwvYT48L3RkPlxyXG4gICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICA8L2JvZHk+XHJcbiAgICAgICAgPC9odG1sPlxyXG4gICAgICBgO1xyXG5cclxuICAgICAgY29uc3QgZGlzY2xvc3VyZXMgPSBwYXJzZURpc2Nsb3N1cmVMaXN0KGh0bWwpO1xyXG5cclxuICAgICAgZXhwZWN0KGRpc2Nsb3N1cmVzKS50b0hhdmVMZW5ndGgoMSk7XHJcbiAgICAgIGV4cGVjdChkaXNjbG9zdXJlc1swXS5jb21wYW55X2NvZGUpLnRvQmUoJzcyMDMnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgn55Ww5bi457O7OiDjgqjjg6njg7zjg4/jg7Pjg4njg6rjg7PjgrAnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHRocm93IFZhbGlkYXRpb25FcnJvciBmb3IgZW1wdHkgSFRNTCcsICgpID0+IHtcclxuICAgICAgZXhwZWN0KCgpID0+IHBhcnNlRGlzY2xvc3VyZUxpc3QoJycpKS50b1Rocm93KFZhbGlkYXRpb25FcnJvcik7XHJcbiAgICAgIGV4cGVjdCgoKSA9PiBwYXJzZURpc2Nsb3N1cmVMaXN0KCcnKSkudG9UaHJvdygvZW1wdHkvKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGhyb3cgVmFsaWRhdGlvbkVycm9yIGZvciB3aGl0ZXNwYWNlLW9ubHkgSFRNTCcsICgpID0+IHtcclxuICAgICAgZXhwZWN0KCgpID0+IHBhcnNlRGlzY2xvc3VyZUxpc3QoJyAgIFxcblxcdCAgJykpLnRvVGhyb3coVmFsaWRhdGlvbkVycm9yKTtcclxuICAgICAgZXhwZWN0KCgpID0+IHBhcnNlRGlzY2xvc3VyZUxpc3QoJyAgIFxcblxcdCAgJykpLnRvVGhyb3coL2VtcHR5Lyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSB3aGVuIG5vIGRpc2Nsb3N1cmUgdGFibGUgZm91bmQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGh0bWwgPSBgXHJcbiAgICAgICAgPGh0bWw+XHJcbiAgICAgICAgICA8Ym9keT5cclxuICAgICAgICAgICAgPHA+Tm8gdGFibGUgaGVyZTwvcD5cclxuICAgICAgICAgIDwvYm9keT5cclxuICAgICAgICA8L2h0bWw+XHJcbiAgICAgIGA7XHJcblxyXG4gICAgICBjb25zdCBkaXNjbG9zdXJlcyA9IHBhcnNlRGlzY2xvc3VyZUxpc3QoaHRtbCk7XHJcblxyXG4gICAgICBleHBlY3QoZGlzY2xvc3VyZXMpLnRvSGF2ZUxlbmd0aCgwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2tpcCByb3dzIHdpdGggaW5zdWZmaWNpZW50IGNlbGxzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBodG1sID0gYFxyXG4gICAgICAgIDxodG1sPlxyXG4gICAgICAgICAgPGJvZHk+XHJcbiAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cImRpc2Nsb3N1cmUtbGlzdFwiPlxyXG4gICAgICAgICAgICAgIDx0cj48dGg+SGVhZGVyPC90aD48L3RyPlxyXG4gICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0ZD43MjAzPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7jg4jjg6jjgr/oh6rli5Xou4rmoKrlvI/kvJrnpL48L3RkPlxyXG4gICAgICAgICAgICAgICAgPCEtLSDkuI3lrozlhajjgarooYw6IOOCu+ODq+OBjOS4jei2syAtLT5cclxuICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0ZD45OTg0PC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7jgr3jg5Xjg4jjg5Djg7Pjgq/jgrDjg6vjg7zjg5fmoKrlvI/kvJrnpL48L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPualree4vuS6iOaDszwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+5qWt57i+5LqI5oOz5L+u5q2jPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD4yMDI0LzAxLzE1IDE2OjAwPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD48YSBocmVmPVwiaHR0cHM6Ly9leGFtcGxlLmNvbS90ZXN0LnBkZlwiPlBERjwvYT48L3RkPlxyXG4gICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICA8L2JvZHk+XHJcbiAgICAgICAgPC9odG1sPlxyXG4gICAgICBgO1xyXG5cclxuICAgICAgY29uc3QgZGlzY2xvc3VyZXMgPSBwYXJzZURpc2Nsb3N1cmVMaXN0KGh0bWwpO1xyXG5cclxuICAgICAgLy8g5LiN5a6M5YWo44Gq6KGM44Gv44K544Kt44OD44OX44GV44KM44CB5pyJ5Yq544Gq6KGM44Gu44G/44OR44O844K544GV44KM44KLXHJcbiAgICAgIGV4cGVjdChkaXNjbG9zdXJlcykudG9IYXZlTGVuZ3RoKDEpO1xyXG4gICAgICBleHBlY3QoZGlzY2xvc3VyZXNbMF0uY29tcGFueV9jb2RlKS50b0JlKCc5OTg0Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNraXAgcm93cyB3aXRoIGludmFsaWQgY29tcGFueSBjb2RlJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBodG1sID0gYFxyXG4gICAgICAgIDxodG1sPlxyXG4gICAgICAgICAgPGJvZHk+XHJcbiAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cImRpc2Nsb3N1cmUtbGlzdFwiPlxyXG4gICAgICAgICAgICAgIDx0cj48dGg+SGVhZGVyPC90aD48L3RyPlxyXG4gICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0ZD5JTlZBTElEPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7nhKHlirnjgarkvIHmpa08L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPuaxuueul+efreS/oTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+44K/44Kk44OI44OrPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD4yMDI0LzAxLzE1IDE1OjAwPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD48YSBocmVmPVwiaHR0cHM6Ly9leGFtcGxlLmNvbS90ZXN0LnBkZlwiPlBERjwvYT48L3RkPlxyXG4gICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgPHRkPjcyMDM8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPuODiOODqOOCv+iHquWLlei7iuagquW8j+S8muekvjwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+5rG6566X55+t5L+hPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7msbrnrpfnn63kv6Hjgr/jgqTjg4jjg6s8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPjIwMjQvMDEvMTUgMTU6MDA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPjxhIGhyZWY9XCJodHRwczovL2V4YW1wbGUuY29tL3Rlc3QucGRmXCI+UERGPC9hPjwvdGQ+XHJcbiAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgIDwvYm9keT5cclxuICAgICAgICA8L2h0bWw+XHJcbiAgICAgIGA7XHJcblxyXG4gICAgICBjb25zdCBkaXNjbG9zdXJlcyA9IHBhcnNlRGlzY2xvc3VyZUxpc3QoaHRtbCk7XHJcblxyXG4gICAgICAvLyDnhKHlirnjgarkvIHmpa3jgrPjg7zjg4njga7ooYzjga/jgrnjgq3jg4Pjg5fjgZXjgozjgotcclxuICAgICAgZXhwZWN0KGRpc2Nsb3N1cmVzKS50b0hhdmVMZW5ndGgoMSk7XHJcbiAgICAgIGV4cGVjdChkaXNjbG9zdXJlc1swXS5jb21wYW55X2NvZGUpLnRvQmUoJzcyMDMnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2tpcCByb3dzIHdpdGggaW52YWxpZCBkYXRlIGZvcm1hdCcsICgpID0+IHtcclxuICAgICAgY29uc3QgaHRtbCA9IGBcclxuICAgICAgICA8aHRtbD5cclxuICAgICAgICAgIDxib2R5PlxyXG4gICAgICAgICAgICA8dGFibGUgY2xhc3M9XCJkaXNjbG9zdXJlLWxpc3RcIj5cclxuICAgICAgICAgICAgICA8dHI+PHRoPkhlYWRlcjwvdGg+PC90cj5cclxuICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICA8dGQ+NzIwMzwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+44OI44Oo44K/6Ieq5YuV6LuK5qCq5byP5Lya56S+PC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7msbrnrpfnn63kv6E8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPuOCv+OCpOODiOODqzwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+SU5WQUxJRF9EQVRFPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD48YSBocmVmPVwiaHR0cHM6Ly9leGFtcGxlLmNvbS90ZXN0LnBkZlwiPlBERjwvYT48L3RkPlxyXG4gICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgPHRkPjk5ODQ8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPuOCveODleODiOODkOODs+OCr+OCsOODq+ODvOODl+agquW8j+S8muekvjwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+5qWt57i+5LqI5oOzPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7mpa3nuL7kuojmg7Pkv67mraM8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPjIwMjQvMDEvMTUgMTY6MDA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPjxhIGhyZWY9XCJodHRwczovL2V4YW1wbGUuY29tL3Rlc3QucGRmXCI+UERGPC9hPjwvdGQ+XHJcbiAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgIDwvYm9keT5cclxuICAgICAgICA8L2h0bWw+XHJcbiAgICAgIGA7XHJcblxyXG4gICAgICBjb25zdCBkaXNjbG9zdXJlcyA9IHBhcnNlRGlzY2xvc3VyZUxpc3QoaHRtbCk7XHJcblxyXG4gICAgICAvLyDnhKHlirnjgarml6Xku5jjga7ooYzjga/jgrnjgq3jg4Pjg5fjgZXjgozjgotcclxuICAgICAgZXhwZWN0KGRpc2Nsb3N1cmVzKS50b0hhdmVMZW5ndGgoMSk7XHJcbiAgICAgIGV4cGVjdChkaXNjbG9zdXJlc1swXS5jb21wYW55X2NvZGUpLnRvQmUoJzk5ODQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2tpcCByb3dzIHdpdGggaW52YWxpZCBQREYgVVJMJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBodG1sID0gYFxyXG4gICAgICAgIDxodG1sPlxyXG4gICAgICAgICAgPGJvZHk+XHJcbiAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cImRpc2Nsb3N1cmUtbGlzdFwiPlxyXG4gICAgICAgICAgICAgIDx0cj48dGg+SGVhZGVyPC90aD48L3RyPlxyXG4gICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0ZD43MjAzPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7jg4jjg6jjgr/oh6rli5Xou4rmoKrlvI/kvJrnpL48L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPuaxuueul+efreS/oTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+44K/44Kk44OI44OrPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD4yMDI0LzAxLzE1IDE1OjAwPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD48YSBocmVmPVwiaW52YWxpZF91cmxcIj5QREY8L2E+PC90ZD5cclxuICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0ZD45OTg0PC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7jgr3jg5Xjg4jjg5Djg7Pjgq/jgrDjg6vjg7zjg5fmoKrlvI/kvJrnpL48L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPualree4vuS6iOaDszwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+5qWt57i+5LqI5oOz5L+u5q2jPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD4yMDI0LzAxLzE1IDE2OjAwPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD48YSBocmVmPVwiaHR0cHM6Ly9leGFtcGxlLmNvbS90ZXN0LnBkZlwiPlBERjwvYT48L3RkPlxyXG4gICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICA8L2JvZHk+XHJcbiAgICAgICAgPC9odG1sPlxyXG4gICAgICBgO1xyXG5cclxuICAgICAgY29uc3QgZGlzY2xvc3VyZXMgPSBwYXJzZURpc2Nsb3N1cmVMaXN0KGh0bWwpO1xyXG5cclxuICAgICAgLy8g54Sh5Yq544GqUERGIFVSTOOBruihjOOBr+OCueOCreODg+ODl+OBleOCjOOCi1xyXG4gICAgICBleHBlY3QoZGlzY2xvc3VyZXMpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgZXhwZWN0KGRpc2Nsb3N1cmVzWzBdLmNvbXBhbnlfY29kZSkudG9CZSgnOTk4NCcpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfpg6jliIbnmoTlpLHmlZfjga7lh6bnkIbvvIhHcmFjZWZ1bCBEZWdyYWRhdGlvbu+8iScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY29udGludWUgcGFyc2luZyBhZnRlciBlbmNvdW50ZXJpbmcgaW52YWxpZCByb3dzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBodG1sID0gYFxyXG4gICAgICAgIDxodG1sPlxyXG4gICAgICAgICAgPGJvZHk+XHJcbiAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cImRpc2Nsb3N1cmUtbGlzdFwiPlxyXG4gICAgICAgICAgICAgIDx0cj48dGg+SGVhZGVyPC90aD48L3RyPlxyXG4gICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0ZD43MjAzPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7jg4jjg6jjgr/oh6rli5Xou4rmoKrlvI/kvJrnpL48L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPuaxuueul+efreS/oTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+44K/44Kk44OI44OrMTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+MjAyNC8wMS8xNSAxNTowMDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+PGEgaHJlZj1cImh0dHBzOi8vZXhhbXBsZS5jb20vdGVzdDEucGRmXCI+UERGPC9hPjwvdGQ+XHJcbiAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICA8dGQ+SU5WQUxJRDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+54Sh5Yq544Gq5LyB5qWtPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7msbrnrpfnn63kv6E8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPuOCv+OCpOODiOODqzI8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPjIwMjQvMDEvMTUgMTY6MDA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPjxhIGhyZWY9XCJodHRwczovL2V4YW1wbGUuY29tL3Rlc3QyLnBkZlwiPlBERjwvYT48L3RkPlxyXG4gICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgPHRkPjk5ODQ8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPuOCveODleODiOODkOODs+OCr+OCsOODq+ODvOODl+agquW8j+S8muekvjwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+5qWt57i+5LqI5oOzPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7jgr/jgqTjg4jjg6szPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD4yMDI0LzAxLzE1IDE3OjAwPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD48YSBocmVmPVwiaHR0cHM6Ly9leGFtcGxlLmNvbS90ZXN0My5wZGZcIj5QREY8L2E+PC90ZD5cclxuICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgPC9ib2R5PlxyXG4gICAgICAgIDwvaHRtbD5cclxuICAgICAgYDtcclxuXHJcbiAgICAgIGNvbnN0IGRpc2Nsb3N1cmVzID0gcGFyc2VEaXNjbG9zdXJlTGlzdChodG1sKTtcclxuXHJcbiAgICAgIC8vIOeEoeWKueOBquihjOOCkuOCueOCreODg+ODl+OBl+OBpuOAgeacieWKueOBquihjOOBruOBv+ODkeODvOOCueOBleOCjOOCi1xyXG4gICAgICBleHBlY3QoZGlzY2xvc3VyZXMpLnRvSGF2ZUxlbmd0aCgyKTtcclxuICAgICAgZXhwZWN0KGRpc2Nsb3N1cmVzWzBdLmNvbXBhbnlfY29kZSkudG9CZSgnNzIwMycpO1xyXG4gICAgICBleHBlY3QoZGlzY2xvc3VyZXNbMV0uY29tcGFueV9jb2RlKS50b0JlKCc5OTg0Jyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+OCqOODg+OCuOOCseODvOOCuScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHRhYmxlIChvbmx5IGhlYWRlciknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGh0bWwgPSBgXHJcbiAgICAgICAgPGh0bWw+XHJcbiAgICAgICAgICA8Ym9keT5cclxuICAgICAgICAgICAgPHRhYmxlIGNsYXNzPVwiZGlzY2xvc3VyZS1saXN0XCI+XHJcbiAgICAgICAgICAgICAgPHRyPjx0aD5IZWFkZXI8L3RoPjwvdHI+XHJcbiAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICA8L2JvZHk+XHJcbiAgICAgICAgPC9odG1sPlxyXG4gICAgICBgO1xyXG5cclxuICAgICAgY29uc3QgZGlzY2xvc3VyZXMgPSBwYXJzZURpc2Nsb3N1cmVMaXN0KGh0bWwpO1xyXG5cclxuICAgICAgZXhwZWN0KGRpc2Nsb3N1cmVzKS50b0hhdmVMZW5ndGgoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB0YWJsZSB3aXRoIG5vIHJvd3MnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGh0bWwgPSBgXHJcbiAgICAgICAgPGh0bWw+XHJcbiAgICAgICAgICA8Ym9keT5cclxuICAgICAgICAgICAgPHRhYmxlIGNsYXNzPVwiZGlzY2xvc3VyZS1saXN0XCI+XHJcbiAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICA8L2JvZHk+XHJcbiAgICAgICAgPC9odG1sPlxyXG4gICAgICBgO1xyXG5cclxuICAgICAgY29uc3QgZGlzY2xvc3VyZXMgPSBwYXJzZURpc2Nsb3N1cmVMaXN0KGh0bWwpO1xyXG5cclxuICAgICAgZXhwZWN0KGRpc2Nsb3N1cmVzKS50b0hhdmVMZW5ndGgoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRyaW0gd2hpdGVzcGFjZSBmcm9tIGNlbGwgdmFsdWVzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBodG1sID0gYFxyXG4gICAgICAgIDxodG1sPlxyXG4gICAgICAgICAgPGJvZHk+XHJcbiAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cImRpc2Nsb3N1cmUtbGlzdFwiPlxyXG4gICAgICAgICAgICAgIDx0cj48dGg+SGVhZGVyPC90aD48L3RyPlxyXG4gICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0ZD4gIDcyMDMgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+ICDjg4jjg6jjgr/oh6rli5Xou4rmoKrlvI/kvJrnpL4gIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+ICDmsbrnrpfnn63kv6EgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+ICDmsbrnrpfnn63kv6Hjgr/jgqTjg4jjg6sgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+ICAyMDI0LzAxLzE1IDE1OjAwICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPjxhIGhyZWY9XCJodHRwczovL2V4YW1wbGUuY29tL3Rlc3QucGRmXCI+UERGPC9hPjwvdGQ+XHJcbiAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgIDwvYm9keT5cclxuICAgICAgICA8L2h0bWw+XHJcbiAgICAgIGA7XHJcblxyXG4gICAgICBjb25zdCBkaXNjbG9zdXJlcyA9IHBhcnNlRGlzY2xvc3VyZUxpc3QoaHRtbCk7XHJcblxyXG4gICAgICBleHBlY3QoZGlzY2xvc3VyZXMpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgZXhwZWN0KGRpc2Nsb3N1cmVzWzBdLmNvbXBhbnlfY29kZSkudG9CZSgnNzIwMycpO1xyXG4gICAgICBleHBlY3QoZGlzY2xvc3VyZXNbMF0uY29tcGFueV9uYW1lKS50b0JlKCfjg4jjg6jjgr/oh6rli5Xou4rmoKrlvI/kvJrnpL4nKTtcclxuICAgICAgZXhwZWN0KGRpc2Nsb3N1cmVzWzBdLmRpc2Nsb3N1cmVfdHlwZSkudG9CZSgn5rG6566X55+t5L+hJyk7XHJcbiAgICAgIGV4cGVjdChkaXNjbG9zdXJlc1swXS50aXRsZSkudG9CZSgn5rG6566X55+t5L+h44K/44Kk44OI44OrJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJ2ZXJzaW9uIjozfQ==