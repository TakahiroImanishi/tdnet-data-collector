8cf75e98db0149fd76e76de9f3d069e5
"use strict";
/**
 * retry.ts のテスト
 *
 * カバレッジ目標: 80%以上（ブランチカバレッジ）
 * 現状: 66.66% (10/15ブランチ) → 目標: 80%以上 (12/15ブランチ以上)
 */
Object.defineProperty(exports, "__esModule", { value: true });
const retry_1 = require("../retry");
const errors_1 = require("../../errors");
describe('retry.ts', () => {
    describe('retryWithBackoff()', () => {
        it('成功時は即座に結果を返す', async () => {
            const operation = jest.fn().mockResolvedValue('success');
            const result = await (0, retry_1.retryWithBackoff)(operation);
            expect(result).toBe('success');
            expect(operation).toHaveBeenCalledTimes(1);
        });
        it('RetryableErrorの場合は再試行する', async () => {
            const operation = jest
                .fn()
                .mockRejectedValueOnce(new errors_1.RetryableError('Temporary error'))
                .mockResolvedValueOnce('success');
            const result = await (0, retry_1.retryWithBackoff)(operation, {
                maxRetries: 3,
                initialDelay: 10,
                backoffMultiplier: 2,
                jitter: false,
            });
            expect(result).toBe('success');
            expect(operation).toHaveBeenCalledTimes(2);
        });
        it('最大再試行回数に達したらエラーをスロー', async () => {
            const error = new errors_1.RetryableError('Persistent error');
            const operation = jest.fn().mockRejectedValue(error);
            await expect((0, retry_1.retryWithBackoff)(operation, {
                maxRetries: 2,
                initialDelay: 10,
                backoffMultiplier: 2,
                jitter: false,
            })).rejects.toThrow('Persistent error');
            expect(operation).toHaveBeenCalledTimes(3); // 初回 + 2回再試行
        });
        it('再試行不可能なエラーは即座にスロー', async () => {
            const error = new errors_1.ValidationError('Invalid input');
            const operation = jest.fn().mockRejectedValue(error);
            await expect((0, retry_1.retryWithBackoff)(operation, {
                maxRetries: 3,
                initialDelay: 10,
                backoffMultiplier: 2,
                jitter: false,
            })).rejects.toThrow('Invalid input');
            expect(operation).toHaveBeenCalledTimes(1); // 再試行なし
        });
        it('カスタムshouldRetry関数を使用', async () => {
            const operation = jest
                .fn()
                .mockRejectedValueOnce(new Error('ECONNRESET'))
                .mockResolvedValueOnce('success');
            const result = await (0, retry_1.retryWithBackoff)(operation, {
                maxRetries: 3,
                initialDelay: 10,
                backoffMultiplier: 2,
                jitter: false,
                shouldRetry: (error) => error.message.includes('ECONNRESET'),
            });
            expect(result).toBe('success');
            expect(operation).toHaveBeenCalledTimes(2);
        });
        it('カスタムshouldRetryで再試行不可と判定されたら即座にスロー', async () => {
            const error = new Error('Non-retryable error');
            const operation = jest.fn().mockRejectedValue(error);
            await expect((0, retry_1.retryWithBackoff)(operation, {
                maxRetries: 3,
                initialDelay: 10,
                backoffMultiplier: 2,
                jitter: false,
                shouldRetry: () => false,
            })).rejects.toThrow('Non-retryable error');
            expect(operation).toHaveBeenCalledTimes(1);
        });
        it('指数バックオフで遅延時間が増加する（ジッターなし）', async () => {
            const operation = jest
                .fn()
                .mockRejectedValueOnce(new errors_1.RetryableError('Error 1'))
                .mockRejectedValueOnce(new errors_1.RetryableError('Error 2'))
                .mockResolvedValueOnce('success');
            const startTime = Date.now();
            await (0, retry_1.retryWithBackoff)(operation, {
                maxRetries: 3,
                initialDelay: 100,
                backoffMultiplier: 2,
                jitter: false,
            });
            const elapsedTime = Date.now() - startTime;
            // 1回目: 100ms, 2回目: 200ms = 合計300ms以上
            expect(elapsedTime).toBeGreaterThanOrEqual(290);
            expect(operation).toHaveBeenCalledTimes(3);
        });
        it('ジッターありの場合、遅延時間がランダム化される', async () => {
            const operation = jest
                .fn()
                .mockRejectedValueOnce(new errors_1.RetryableError('Error 1'))
                .mockResolvedValueOnce('success');
            const startTime = Date.now();
            await (0, retry_1.retryWithBackoff)(operation, {
                maxRetries: 3,
                initialDelay: 100,
                backoffMultiplier: 2,
                jitter: true,
            });
            const elapsedTime = Date.now() - startTime;
            // ジッターにより0〜100msの範囲でランダム
            expect(elapsedTime).toBeGreaterThanOrEqual(0);
            expect(elapsedTime).toBeLessThan(150); // 100ms + マージン
            expect(operation).toHaveBeenCalledTimes(2);
        });
        it('非Errorオブジェクトのエラーを適切に処理', async () => {
            const operation = jest.fn().mockRejectedValue('String error');
            await expect((0, retry_1.retryWithBackoff)(operation, {
                maxRetries: 1,
                initialDelay: 10,
                backoffMultiplier: 2,
                jitter: false,
            })).rejects.toThrow('String error');
            // 非Errorオブジェクトは再試行不可能と判定されるため、1回のみ実行
            expect(operation).toHaveBeenCalledTimes(1);
        });
        it('デフォルトオプションを使用', async () => {
            const operation = jest
                .fn()
                .mockRejectedValueOnce(new errors_1.RetryableError('Error'))
                .mockResolvedValueOnce('success');
            const result = await (0, retry_1.retryWithBackoff)(operation);
            expect(result).toBe('success');
            expect(operation).toHaveBeenCalledTimes(2);
        });
        it('部分的なオプション指定でデフォルト値がマージされる', async () => {
            const operation = jest
                .fn()
                .mockRejectedValueOnce(new errors_1.RetryableError('Error'))
                .mockResolvedValueOnce('success');
            const result = await (0, retry_1.retryWithBackoff)(operation, {
                maxRetries: 5, // カスタム
                // 他はデフォルト値を使用
            });
            expect(result).toBe('success');
            expect(operation).toHaveBeenCalledTimes(2);
        });
        it('attempt=0の場合の遅延時間計算（ジッターなし）', async () => {
            const operation = jest
                .fn()
                .mockRejectedValueOnce(new errors_1.RetryableError('Error'))
                .mockResolvedValueOnce('success');
            const startTime = Date.now();
            await (0, retry_1.retryWithBackoff)(operation, {
                maxRetries: 3,
                initialDelay: 100,
                backoffMultiplier: 2,
                jitter: false,
            });
            const elapsedTime = Date.now() - startTime;
            // attempt=0: 100 * (2^0) = 100ms
            expect(elapsedTime).toBeGreaterThanOrEqual(90);
            expect(elapsedTime).toBeLessThan(150);
        });
        it('attempt=1の場合の遅延時間計算（ジッターなし）', async () => {
            const operation = jest
                .fn()
                .mockRejectedValueOnce(new errors_1.RetryableError('Error 1'))
                .mockRejectedValueOnce(new errors_1.RetryableError('Error 2'))
                .mockResolvedValueOnce('success');
            const startTime = Date.now();
            await (0, retry_1.retryWithBackoff)(operation, {
                maxRetries: 3,
                initialDelay: 100,
                backoffMultiplier: 2,
                jitter: false,
            });
            const elapsedTime = Date.now() - startTime;
            // attempt=0: 100ms, attempt=1: 200ms = 合計300ms
            expect(elapsedTime).toBeGreaterThanOrEqual(290);
            expect(elapsedTime).toBeLessThan(350);
        });
        it('maxRetries=0の場合、再試行なし', async () => {
            const error = new errors_1.RetryableError('Error');
            const operation = jest.fn().mockRejectedValue(error);
            await expect((0, retry_1.retryWithBackoff)(operation, {
                maxRetries: 0,
                initialDelay: 10,
                backoffMultiplier: 2,
                jitter: false,
            })).rejects.toThrow('Error');
            expect(operation).toHaveBeenCalledTimes(1);
        });
    });
    describe('isRetryableError()', () => {
        it('RetryableErrorの場合はtrue', () => {
            const error = new errors_1.RetryableError('Temporary error');
            expect((0, retry_1.isRetryableError)(error)).toBe(true);
        });
        it('ValidationErrorの場合はfalse', () => {
            const error = new errors_1.ValidationError('Invalid input');
            expect((0, retry_1.isRetryableError)(error)).toBe(false);
        });
        it('NotFoundErrorの場合はfalse', () => {
            const error = new errors_1.NotFoundError('Resource not found');
            expect((0, retry_1.isRetryableError)(error)).toBe(false);
        });
        it('ECONNRESETエラーの場合はtrue', () => {
            const error = new Error('Connection reset: ECONNRESET');
            expect((0, retry_1.isRetryableError)(error)).toBe(true);
        });
        it('ETIMEDOUTエラーの場合はtrue', () => {
            const error = new Error('Connection timed out: ETIMEDOUT');
            expect((0, retry_1.isRetryableError)(error)).toBe(true);
        });
        it('ENOTFOUNDエラーの場合はtrue', () => {
            const error = new Error('DNS lookup failed: ENOTFOUND');
            expect((0, retry_1.isRetryableError)(error)).toBe(true);
        });
        it('ECONNREFUSEDエラーの場合はtrue', () => {
            const error = new Error('Connection refused: ECONNREFUSED');
            expect((0, retry_1.isRetryableError)(error)).toBe(true);
        });
        it('timeoutを含むエラーの場合はtrue', () => {
            const error = new Error('Request timeout occurred');
            expect((0, retry_1.isRetryableError)(error)).toBe(true);
        });
        it('ThrottlingExceptionの場合はtrue', () => {
            const error = new Error('ThrottlingException: Rate exceeded');
            expect((0, retry_1.isRetryableError)(error)).toBe(true);
        });
        it('ServiceUnavailableの場合はtrue', () => {
            const error = new Error('ServiceUnavailable: Service is down');
            expect((0, retry_1.isRetryableError)(error)).toBe(true);
        });
        it('RequestTimeoutの場合はtrue', () => {
            const error = new Error('RequestTimeout: Request timed out');
            expect((0, retry_1.isRetryableError)(error)).toBe(true);
        });
        it('非Errorオブジェクトの場合はfalse', () => {
            expect((0, retry_1.isRetryableError)('string error')).toBe(false);
            expect((0, retry_1.isRetryableError)(123)).toBe(false);
            expect((0, retry_1.isRetryableError)(null)).toBe(false);
            expect((0, retry_1.isRetryableError)(undefined)).toBe(false);
            expect((0, retry_1.isRetryableError)({})).toBe(false);
        });
        it('通常のErrorの場合はfalse', () => {
            const error = new Error('Generic error');
            expect((0, retry_1.isRetryableError)(error)).toBe(false);
        });
        it('空のエラーメッセージの場合はfalse', () => {
            const error = new Error('');
            expect((0, retry_1.isRetryableError)(error)).toBe(false);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFx1dGlsc1xcX190ZXN0c19fXFxyZXRyeS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7QUFFSCxvQ0FBNEU7QUFDNUUseUNBQThFO0FBRTlFLFFBQVEsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO0lBQ3hCLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLEVBQUU7UUFDbEMsRUFBRSxDQUFDLGNBQWMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUM1QixNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLENBQUM7WUFFekQsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFBLHdCQUFnQixFQUFDLFNBQVMsQ0FBQyxDQUFDO1lBRWpELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDL0IsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHlCQUF5QixFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ3ZDLE1BQU0sU0FBUyxHQUFHLElBQUk7aUJBQ25CLEVBQUUsRUFBRTtpQkFDSixxQkFBcUIsQ0FBQyxJQUFJLHVCQUFjLENBQUMsaUJBQWlCLENBQUMsQ0FBQztpQkFDNUQscUJBQXFCLENBQUMsU0FBUyxDQUFDLENBQUM7WUFFcEMsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFBLHdCQUFnQixFQUFDLFNBQVMsRUFBRTtnQkFDL0MsVUFBVSxFQUFFLENBQUM7Z0JBQ2IsWUFBWSxFQUFFLEVBQUU7Z0JBQ2hCLGlCQUFpQixFQUFFLENBQUM7Z0JBQ3BCLE1BQU0sRUFBRSxLQUFLO2FBQ2QsQ0FBQyxDQUFDO1lBRUgsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENB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O0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcc3JjXFx1dGlsc1xcX190ZXN0c19fXFxyZXRyeS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiByZXRyeS50cyDjga7jg4bjgrnjg4hcclxuICpcclxuICog44Kr44OQ44Os44OD44K455uu5qiZOiA4MCXku6XkuIrvvIjjg5bjg6njg7Pjg4Hjgqvjg5Djg6zjg4PjgrjvvIlcclxuICog54++54q2OiA2Ni42NiUgKDEwLzE144OW44Op44Oz44OBKSDihpIg55uu5qiZOiA4MCXku6XkuIogKDEyLzE144OW44Op44Oz44OB5Lul5LiKKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IHJldHJ5V2l0aEJhY2tvZmYsIGlzUmV0cnlhYmxlRXJyb3IsIFJldHJ5T3B0aW9ucyB9IGZyb20gJy4uL3JldHJ5JztcclxuaW1wb3J0IHsgUmV0cnlhYmxlRXJyb3IsIFZhbGlkYXRpb25FcnJvciwgTm90Rm91bmRFcnJvciB9IGZyb20gJy4uLy4uL2Vycm9ycyc7XHJcblxyXG5kZXNjcmliZSgncmV0cnkudHMnLCAoKSA9PiB7XHJcbiAgZGVzY3JpYmUoJ3JldHJ5V2l0aEJhY2tvZmYoKScsICgpID0+IHtcclxuICAgIGl0KCfmiJDlip/mmYLjga/ljbPluqfjgavntZDmnpzjgpLov5TjgZknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnc3VjY2VzcycpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmV0cnlXaXRoQmFja29mZihvcGVyYXRpb24pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnc3VjY2VzcycpO1xyXG4gICAgICBleHBlY3Qob3BlcmF0aW9uKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnUmV0cnlhYmxlRXJyb3Ljga7loLTlkIjjga/lho3oqabooYzjgZnjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IGplc3RcclxuICAgICAgICAuZm4oKVxyXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IFJldHJ5YWJsZUVycm9yKCdUZW1wb3JhcnkgZXJyb3InKSlcclxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKCdzdWNjZXNzJyk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXRyeVdpdGhCYWNrb2ZmKG9wZXJhdGlvbiwge1xyXG4gICAgICAgIG1heFJldHJpZXM6IDMsXHJcbiAgICAgICAgaW5pdGlhbERlbGF5OiAxMCxcclxuICAgICAgICBiYWNrb2ZmTXVsdGlwbGllcjogMixcclxuICAgICAgICBqaXR0ZXI6IGZhbHNlLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ3N1Y2Nlc3MnKTtcclxuICAgICAgZXhwZWN0KG9wZXJhdGlvbikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+acgOWkp+WGjeippuihjOWbnuaVsOOBq+mBlOOBl+OBn+OCieOCqOODqeODvOOCkuOCueODreODvCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgUmV0cnlhYmxlRXJyb3IoJ1BlcnNpc3RlbnQgZXJyb3InKTtcclxuICAgICAgY29uc3Qgb3BlcmF0aW9uID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKGVycm9yKTtcclxuXHJcbiAgICAgIGF3YWl0IGV4cGVjdChcclxuICAgICAgICByZXRyeVdpdGhCYWNrb2ZmKG9wZXJhdGlvbiwge1xyXG4gICAgICAgICAgbWF4UmV0cmllczogMixcclxuICAgICAgICAgIGluaXRpYWxEZWxheTogMTAsXHJcbiAgICAgICAgICBiYWNrb2ZmTXVsdGlwbGllcjogMixcclxuICAgICAgICAgIGppdHRlcjogZmFsc2UsXHJcbiAgICAgICAgfSlcclxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ1BlcnNpc3RlbnQgZXJyb3InKTtcclxuXHJcbiAgICAgIGV4cGVjdChvcGVyYXRpb24pLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygzKTsgLy8g5Yid5ZueICsgMuWbnuWGjeippuihjFxyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+WGjeippuihjOS4jeWPr+iDveOBquOCqOODqeODvOOBr+WNs+W6p+OBq+OCueODreODvCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgVmFsaWRhdGlvbkVycm9yKCdJbnZhbGlkIGlucHV0Jyk7XHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShlcnJvcik7XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3QoXHJcbiAgICAgICAgcmV0cnlXaXRoQmFja29mZihvcGVyYXRpb24sIHtcclxuICAgICAgICAgIG1heFJldHJpZXM6IDMsXHJcbiAgICAgICAgICBpbml0aWFsRGVsYXk6IDEwLFxyXG4gICAgICAgICAgYmFja29mZk11bHRpcGxpZXI6IDIsXHJcbiAgICAgICAgICBqaXR0ZXI6IGZhbHNlLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICkucmVqZWN0cy50b1Rocm93KCdJbnZhbGlkIGlucHV0Jyk7XHJcblxyXG4gICAgICBleHBlY3Qob3BlcmF0aW9uKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7IC8vIOWGjeippuihjOOBquOBl1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+OCq+OCueOCv+ODoHNob3VsZFJldHJ56Zai5pWw44KS5L2/55SoJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBvcGVyYXRpb24gPSBqZXN0XHJcbiAgICAgICAgLmZuKClcclxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignRUNPTk5SRVNFVCcpKVxyXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoJ3N1Y2Nlc3MnKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJldHJ5V2l0aEJhY2tvZmYob3BlcmF0aW9uLCB7XHJcbiAgICAgICAgbWF4UmV0cmllczogMyxcclxuICAgICAgICBpbml0aWFsRGVsYXk6IDEwLFxyXG4gICAgICAgIGJhY2tvZmZNdWx0aXBsaWVyOiAyLFxyXG4gICAgICAgIGppdHRlcjogZmFsc2UsXHJcbiAgICAgICAgc2hvdWxkUmV0cnk6IChlcnJvcikgPT4gZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnRUNPTk5SRVNFVCcpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ3N1Y2Nlc3MnKTtcclxuICAgICAgZXhwZWN0KG9wZXJhdGlvbikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+OCq+OCueOCv+ODoHNob3VsZFJldHJ544Gn5YaN6Kmm6KGM5LiN5Y+v44Go5Yik5a6a44GV44KM44Gf44KJ5Y2z5bqn44Gr44K544Ot44O8JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignTm9uLXJldHJ5YWJsZSBlcnJvcicpO1xyXG4gICAgICBjb25zdCBvcGVyYXRpb24gPSBqZXN0LmZuKCkubW9ja1JlamVjdGVkVmFsdWUoZXJyb3IpO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KFxyXG4gICAgICAgIHJldHJ5V2l0aEJhY2tvZmYob3BlcmF0aW9uLCB7XHJcbiAgICAgICAgICBtYXhSZXRyaWVzOiAzLFxyXG4gICAgICAgICAgaW5pdGlhbERlbGF5OiAxMCxcclxuICAgICAgICAgIGJhY2tvZmZNdWx0aXBsaWVyOiAyLFxyXG4gICAgICAgICAgaml0dGVyOiBmYWxzZSxcclxuICAgICAgICAgIHNob3VsZFJldHJ5OiAoKSA9PiBmYWxzZSxcclxuICAgICAgICB9KVxyXG4gICAgICApLnJlamVjdHMudG9UaHJvdygnTm9uLXJldHJ5YWJsZSBlcnJvcicpO1xyXG5cclxuICAgICAgZXhwZWN0KG9wZXJhdGlvbikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+aMh+aVsOODkOODg+OCr+OCquODleOBp+mBheW7tuaZgumWk+OBjOWil+WKoOOBmeOCi++8iOOCuOODg+OCv+ODvOOBquOBl++8iScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgb3BlcmF0aW9uID0gamVzdFxyXG4gICAgICAgIC5mbigpXHJcbiAgICAgICAgLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgUmV0cnlhYmxlRXJyb3IoJ0Vycm9yIDEnKSlcclxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBSZXRyeWFibGVFcnJvcignRXJyb3IgMicpKVxyXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoJ3N1Y2Nlc3MnKTtcclxuXHJcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcblxyXG4gICAgICBhd2FpdCByZXRyeVdpdGhCYWNrb2ZmKG9wZXJhdGlvbiwge1xyXG4gICAgICAgIG1heFJldHJpZXM6IDMsXHJcbiAgICAgICAgaW5pdGlhbERlbGF5OiAxMDAsXHJcbiAgICAgICAgYmFja29mZk11bHRpcGxpZXI6IDIsXHJcbiAgICAgICAgaml0dGVyOiBmYWxzZSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBlbGFwc2VkVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XHJcblxyXG4gICAgICAvLyAx5Zue55uuOiAxMDBtcywgMuWbnuebrjogMjAwbXMgPSDlkIjoqIgzMDBtc+S7peS4ilxyXG4gICAgICBleHBlY3QoZWxhcHNlZFRpbWUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMjkwKTtcclxuICAgICAgZXhwZWN0KG9wZXJhdGlvbikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+OCuOODg+OCv+ODvOOBguOCiuOBruWgtOWQiOOAgemBheW7tuaZgumWk+OBjOODqeODs+ODgOODoOWMluOBleOCjOOCiycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgb3BlcmF0aW9uID0gamVzdFxyXG4gICAgICAgIC5mbigpXHJcbiAgICAgICAgLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgUmV0cnlhYmxlRXJyb3IoJ0Vycm9yIDEnKSlcclxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKCdzdWNjZXNzJyk7XHJcblxyXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgICAgYXdhaXQgcmV0cnlXaXRoQmFja29mZihvcGVyYXRpb24sIHtcclxuICAgICAgICBtYXhSZXRyaWVzOiAzLFxyXG4gICAgICAgIGluaXRpYWxEZWxheTogMTAwLFxyXG4gICAgICAgIGJhY2tvZmZNdWx0aXBsaWVyOiAyLFxyXG4gICAgICAgIGppdHRlcjogdHJ1ZSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBlbGFwc2VkVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XHJcblxyXG4gICAgICAvLyDjgrjjg4Pjgr/jg7zjgavjgojjgoow44CcMTAwbXPjga7nr4Tlm7Ljgafjg6njg7Pjg4Djg6BcclxuICAgICAgZXhwZWN0KGVsYXBzZWRUaW1lKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgICBleHBlY3QoZWxhcHNlZFRpbWUpLnRvQmVMZXNzVGhhbigxNTApOyAvLyAxMDBtcyArIOODnuODvOOCuOODs1xyXG4gICAgICBleHBlY3Qob3BlcmF0aW9uKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn6Z2eRXJyb3Ljgqrjg5bjgrjjgqfjgq/jg4jjga7jgqjjg6njg7zjgpLpganliIfjgavlh6bnkIYnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZSgnU3RyaW5nIGVycm9yJyk7XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3QoXHJcbiAgICAgICAgcmV0cnlXaXRoQmFja29mZihvcGVyYXRpb24sIHtcclxuICAgICAgICAgIG1heFJldHJpZXM6IDEsXHJcbiAgICAgICAgICBpbml0aWFsRGVsYXk6IDEwLFxyXG4gICAgICAgICAgYmFja29mZk11bHRpcGxpZXI6IDIsXHJcbiAgICAgICAgICBqaXR0ZXI6IGZhbHNlLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICkucmVqZWN0cy50b1Rocm93KCdTdHJpbmcgZXJyb3InKTtcclxuXHJcbiAgICAgIC8vIOmdnkVycm9y44Kq44OW44K444Kn44Kv44OI44Gv5YaN6Kmm6KGM5LiN5Y+v6IO944Go5Yik5a6a44GV44KM44KL44Gf44KB44CBMeWbnuOBruOBv+Wun+ihjFxyXG4gICAgICBleHBlY3Qob3BlcmF0aW9uKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn44OH44OV44Kp44Or44OI44Kq44OX44K344On44Oz44KS5L2/55SoJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBvcGVyYXRpb24gPSBqZXN0XHJcbiAgICAgICAgLmZuKClcclxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBSZXRyeWFibGVFcnJvcignRXJyb3InKSlcclxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKCdzdWNjZXNzJyk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXRyeVdpdGhCYWNrb2ZmKG9wZXJhdGlvbik7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKCdzdWNjZXNzJyk7XHJcbiAgICAgIGV4cGVjdChvcGVyYXRpb24pLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCfpg6jliIbnmoTjgarjgqrjg5fjgrfjg6fjg7PmjIflrprjgafjg4fjg5Xjgqnjg6vjg4jlgKTjgYzjg57jg7zjgrjjgZXjgozjgosnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IGplc3RcclxuICAgICAgICAuZm4oKVxyXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IFJldHJ5YWJsZUVycm9yKCdFcnJvcicpKVxyXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoJ3N1Y2Nlc3MnKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJldHJ5V2l0aEJhY2tvZmYob3BlcmF0aW9uLCB7XHJcbiAgICAgICAgbWF4UmV0cmllczogNSwgLy8g44Kr44K544K/44OgXHJcbiAgICAgICAgLy8g5LuW44Gv44OH44OV44Kp44Or44OI5YCk44KS5L2/55SoXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnc3VjY2VzcycpO1xyXG4gICAgICBleHBlY3Qob3BlcmF0aW9uKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnYXR0ZW1wdD0w44Gu5aC05ZCI44Gu6YGF5bu25pmC6ZaT6KiI566X77yI44K444OD44K/44O844Gq44GX77yJJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBvcGVyYXRpb24gPSBqZXN0XHJcbiAgICAgICAgLmZuKClcclxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBSZXRyeWFibGVFcnJvcignRXJyb3InKSlcclxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKCdzdWNjZXNzJyk7XHJcblxyXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgICAgYXdhaXQgcmV0cnlXaXRoQmFja29mZihvcGVyYXRpb24sIHtcclxuICAgICAgICBtYXhSZXRyaWVzOiAzLFxyXG4gICAgICAgIGluaXRpYWxEZWxheTogMTAwLFxyXG4gICAgICAgIGJhY2tvZmZNdWx0aXBsaWVyOiAyLFxyXG4gICAgICAgIGppdHRlcjogZmFsc2UsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgZWxhcHNlZFRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xyXG5cclxuICAgICAgLy8gYXR0ZW1wdD0wOiAxMDAgKiAoMl4wKSA9IDEwMG1zXHJcbiAgICAgIGV4cGVjdChlbGFwc2VkVGltZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCg5MCk7XHJcbiAgICAgIGV4cGVjdChlbGFwc2VkVGltZSkudG9CZUxlc3NUaGFuKDE1MCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnYXR0ZW1wdD0x44Gu5aC05ZCI44Gu6YGF5bu25pmC6ZaT6KiI566X77yI44K444OD44K/44O844Gq44GX77yJJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBvcGVyYXRpb24gPSBqZXN0XHJcbiAgICAgICAgLmZuKClcclxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBSZXRyeWFibGVFcnJvcignRXJyb3IgMScpKVxyXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IFJldHJ5YWJsZUVycm9yKCdFcnJvciAyJykpXHJcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSgnc3VjY2VzcycpO1xyXG5cclxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICAgIGF3YWl0IHJldHJ5V2l0aEJhY2tvZmYob3BlcmF0aW9uLCB7XHJcbiAgICAgICAgbWF4UmV0cmllczogMyxcclxuICAgICAgICBpbml0aWFsRGVsYXk6IDEwMCxcclxuICAgICAgICBiYWNrb2ZmTXVsdGlwbGllcjogMixcclxuICAgICAgICBqaXR0ZXI6IGZhbHNlLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcclxuXHJcbiAgICAgIC8vIGF0dGVtcHQ9MDogMTAwbXMsIGF0dGVtcHQ9MTogMjAwbXMgPSDlkIjoqIgzMDBtc1xyXG4gICAgICBleHBlY3QoZWxhcHNlZFRpbWUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMjkwKTtcclxuICAgICAgZXhwZWN0KGVsYXBzZWRUaW1lKS50b0JlTGVzc1RoYW4oMzUwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdtYXhSZXRyaWVzPTDjga7loLTlkIjjgIHlho3oqabooYzjgarjgZcnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IFJldHJ5YWJsZUVycm9yKCdFcnJvcicpO1xyXG4gICAgICBjb25zdCBvcGVyYXRpb24gPSBqZXN0LmZuKCkubW9ja1JlamVjdGVkVmFsdWUoZXJyb3IpO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KFxyXG4gICAgICAgIHJldHJ5V2l0aEJhY2tvZmYob3BlcmF0aW9uLCB7XHJcbiAgICAgICAgICBtYXhSZXRyaWVzOiAwLFxyXG4gICAgICAgICAgaW5pdGlhbERlbGF5OiAxMCxcclxuICAgICAgICAgIGJhY2tvZmZNdWx0aXBsaWVyOiAyLFxyXG4gICAgICAgICAgaml0dGVyOiBmYWxzZSxcclxuICAgICAgICB9KVxyXG4gICAgICApLnJlamVjdHMudG9UaHJvdygnRXJyb3InKTtcclxuXHJcbiAgICAgIGV4cGVjdChvcGVyYXRpb24pLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnaXNSZXRyeWFibGVFcnJvcigpJywgKCkgPT4ge1xyXG4gICAgaXQoJ1JldHJ5YWJsZUVycm9y44Gu5aC05ZCI44GvdHJ1ZScsICgpID0+IHtcclxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgUmV0cnlhYmxlRXJyb3IoJ1RlbXBvcmFyeSBlcnJvcicpO1xyXG4gICAgICBleHBlY3QoaXNSZXRyeWFibGVFcnJvcihlcnJvcikpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnVmFsaWRhdGlvbkVycm9y44Gu5aC05ZCI44GvZmFsc2UnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IFZhbGlkYXRpb25FcnJvcignSW52YWxpZCBpbnB1dCcpO1xyXG4gICAgICBleHBlY3QoaXNSZXRyeWFibGVFcnJvcihlcnJvcikpLnRvQmUoZmFsc2UpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ05vdEZvdW5kRXJyb3Ljga7loLTlkIjjga9mYWxzZScsICgpID0+IHtcclxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgTm90Rm91bmRFcnJvcignUmVzb3VyY2Ugbm90IGZvdW5kJyk7XHJcbiAgICAgIGV4cGVjdChpc1JldHJ5YWJsZUVycm9yKGVycm9yKSkudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnRUNPTk5SRVNFVOOCqOODqeODvOOBruWgtOWQiOOBr3RydWUnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdDb25uZWN0aW9uIHJlc2V0OiBFQ09OTlJFU0VUJyk7XHJcbiAgICAgIGV4cGVjdChpc1JldHJ5YWJsZUVycm9yKGVycm9yKSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdFVElNRURPVVTjgqjjg6njg7zjga7loLTlkIjjga90cnVlJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignQ29ubmVjdGlvbiB0aW1lZCBvdXQ6IEVUSU1FRE9VVCcpO1xyXG4gICAgICBleHBlY3QoaXNSZXRyeWFibGVFcnJvcihlcnJvcikpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnRU5PVEZPVU5E44Ko44Op44O844Gu5aC05ZCI44GvdHJ1ZScsICgpID0+IHtcclxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ0ROUyBsb29rdXAgZmFpbGVkOiBFTk9URk9VTkQnKTtcclxuICAgICAgZXhwZWN0KGlzUmV0cnlhYmxlRXJyb3IoZXJyb3IpKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ0VDT05OUkVGVVNFROOCqOODqeODvOOBruWgtOWQiOOBr3RydWUnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdDb25uZWN0aW9uIHJlZnVzZWQ6IEVDT05OUkVGVVNFRCcpO1xyXG4gICAgICBleHBlY3QoaXNSZXRyeWFibGVFcnJvcihlcnJvcikpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgndGltZW91dOOCkuWQq+OCgOOCqOODqeODvOOBruWgtOWQiOOBr3RydWUnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdSZXF1ZXN0IHRpbWVvdXQgb2NjdXJyZWQnKTtcclxuICAgICAgZXhwZWN0KGlzUmV0cnlhYmxlRXJyb3IoZXJyb3IpKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ1Rocm90dGxpbmdFeGNlcHRpb27jga7loLTlkIjjga90cnVlJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignVGhyb3R0bGluZ0V4Y2VwdGlvbjogUmF0ZSBleGNlZWRlZCcpO1xyXG4gICAgICBleHBlY3QoaXNSZXRyeWFibGVFcnJvcihlcnJvcikpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnU2VydmljZVVuYXZhaWxhYmxl44Gu5aC05ZCI44GvdHJ1ZScsICgpID0+IHtcclxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1NlcnZpY2VVbmF2YWlsYWJsZTogU2VydmljZSBpcyBkb3duJyk7XHJcbiAgICAgIGV4cGVjdChpc1JldHJ5YWJsZUVycm9yKGVycm9yKSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdSZXF1ZXN0VGltZW91dOOBruWgtOWQiOOBr3RydWUnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdSZXF1ZXN0VGltZW91dDogUmVxdWVzdCB0aW1lZCBvdXQnKTtcclxuICAgICAgZXhwZWN0KGlzUmV0cnlhYmxlRXJyb3IoZXJyb3IpKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+mdnkVycm9y44Kq44OW44K444Kn44Kv44OI44Gu5aC05ZCI44GvZmFsc2UnLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChpc1JldHJ5YWJsZUVycm9yKCdzdHJpbmcgZXJyb3InKSkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChpc1JldHJ5YWJsZUVycm9yKDEyMykpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QoaXNSZXRyeWFibGVFcnJvcihudWxsKSkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChpc1JldHJ5YWJsZUVycm9yKHVuZGVmaW5lZCkpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QoaXNSZXRyeWFibGVFcnJvcih7fSkpLnRvQmUoZmFsc2UpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+mAmuW4uOOBrkVycm9y44Gu5aC05ZCI44GvZmFsc2UnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdHZW5lcmljIGVycm9yJyk7XHJcbiAgICAgIGV4cGVjdChpc1JldHJ5YWJsZUVycm9yKGVycm9yKSkudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn56m644Gu44Ko44Op44O844Oh44OD44K744O844K444Gu5aC05ZCI44GvZmFsc2UnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCcnKTtcclxuICAgICAgZXhwZWN0KGlzUmV0cnlhYmxlRXJyb3IoZXJyb3IpKS50b0JlKGZhbHNlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sInZlcnNpb24iOjN9