957937693dcef4d7032d94a98b8e4e22
"use strict";
/**
 * API Gateway Query & Export Endpoints Tests
 *
 * GET /disclosures および POST /exports エンドポイントの統合テスト
 *
 * Requirements: タスク13.3, 13.4 - API Gateway エンドポイント実装
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const cdk = __importStar(require("aws-cdk-lib"));
const assertions_1 = require("aws-cdk-lib/assertions");
const tdnet_data_collector_stack_1 = require("../lib/tdnet-data-collector-stack");
describe('API Gateway Query & Export Endpoints', () => {
    let template;
    beforeAll(() => {
        const app = new cdk.App();
        const stack = new tdnet_data_collector_stack_1.TdnetDataCollectorStack(app, 'TestStack');
        template = assertions_1.Template.fromStack(stack);
    });
    describe('GET /disclosures エンドポイント', () => {
        it('should create /disclosures resource', () => {
            // /disclosures リソースが作成されていることを確認
            template.hasResourceProperties('AWS::ApiGateway::Resource', {
                PathPart: 'disclosures',
            });
        });
        it('should create GET method with API key required', () => {
            // GET メソッドが作成され、APIキー認証が必須であることを確認
            template.hasResourceProperties('AWS::ApiGateway::Method', {
                HttpMethod: 'GET',
                ApiKeyRequired: true,
                ResourceId: assertions_1.Match.objectLike({
                    Ref: assertions_1.Match.stringLikeRegexp('.*disclosures.*'),
                }),
            });
        });
        it('should configure query parameters', () => {
            // クエリパラメータが設定されていることを確認
            template.hasResourceProperties('AWS::ApiGateway::Method', {
                HttpMethod: 'GET',
                RequestParameters: {
                    'method.request.querystring.company_code': false,
                    'method.request.querystring.start_date': false,
                    'method.request.querystring.end_date': false,
                    'method.request.querystring.disclosure_type': false,
                    'method.request.querystring.format': false,
                    'method.request.querystring.limit': false,
                    'method.request.querystring.offset': false,
                },
            });
        });
        it('should configure Lambda integration', () => {
            // Lambda統合が設定されていることを確認
            template.hasResourceProperties('AWS::ApiGateway::Method', {
                HttpMethod: 'GET',
                Integration: {
                    Type: 'AWS_PROXY',
                    IntegrationHttpMethod: 'POST',
                    Uri: assertions_1.Match.objectLike({
                        'Fn::Join': assertions_1.Match.arrayWith([
                            assertions_1.Match.arrayWith([
                                assertions_1.Match.stringLikeRegexp('.*lambda.*'),
                            ]),
                        ]),
                    }),
                },
            });
        });
        it('should configure CORS headers', () => {
            // CORSヘッダーが設定されていることを確認
            template.hasResourceProperties('AWS::ApiGateway::Method', {
                HttpMethod: 'GET',
                MethodResponses: assertions_1.Match.arrayWith([
                    assertions_1.Match.objectLike({
                        StatusCode: '200',
                        ResponseParameters: {
                            'method.response.header.Access-Control-Allow-Origin': true,
                            'method.response.header.Content-Type': true,
                        },
                    }),
                ]),
            });
        });
        it('should configure error responses (400, 401, 500)', () => {
            // エラーレスポンスが設定されていることを確認
            template.hasResourceProperties('AWS::ApiGateway::Method', {
                HttpMethod: 'GET',
                MethodResponses: assertions_1.Match.arrayWith([
                    assertions_1.Match.objectLike({ StatusCode: '200' }),
                    assertions_1.Match.objectLike({ StatusCode: '400' }),
                    assertions_1.Match.objectLike({ StatusCode: '401' }),
                    assertions_1.Match.objectLike({ StatusCode: '500' }),
                ]),
            });
        });
        it('should grant Query Lambda permission to be invoked by API Gateway', () => {
            // API GatewayがQuery Lambdaを呼び出す権限が付与されていることを確認
            template.hasResourceProperties('AWS::Lambda::Permission', {
                Action: 'lambda:InvokeFunction',
                Principal: 'apigateway.amazonaws.com',
                FunctionName: assertions_1.Match.objectLike({
                    'Fn::GetAtt': assertions_1.Match.arrayWith([
                        assertions_1.Match.stringLikeRegexp('QueryFunction.*'),
                        'Arn',
                    ]),
                }),
            });
        });
    });
    describe('POST /exports エンドポイント', () => {
        it('should create /exports resource', () => {
            // /exports リソースが作成されていることを確認
            template.hasResourceProperties('AWS::ApiGateway::Resource', {
                PathPart: 'exports',
            });
        });
        it('should create POST method with API key required', () => {
            // POST メソッドが作成され、APIキー認証が必須であることを確認
            template.hasResourceProperties('AWS::ApiGateway::Method', {
                HttpMethod: 'POST',
                ApiKeyRequired: true,
                ResourceId: assertions_1.Match.objectLike({
                    Ref: assertions_1.Match.stringLikeRegexp('.*exports.*'),
                }),
            });
        });
        it('should configure Lambda integration', () => {
            // Lambda統合が設定されていることを確認
            template.hasResourceProperties('AWS::ApiGateway::Method', {
                HttpMethod: 'POST',
                Integration: {
                    Type: 'AWS_PROXY',
                    IntegrationHttpMethod: 'POST',
                    Uri: assertions_1.Match.objectLike({
                        'Fn::Join': assertions_1.Match.arrayWith([
                            assertions_1.Match.arrayWith([
                                assertions_1.Match.stringLikeRegexp('.*lambda.*'),
                            ]),
                        ]),
                    }),
                },
            });
        });
        it('should configure CORS headers', () => {
            // CORSヘッダーが設定されていることを確認
            template.hasResourceProperties('AWS::ApiGateway::Method', {
                HttpMethod: 'POST',
                MethodResponses: assertions_1.Match.arrayWith([
                    assertions_1.Match.objectLike({
                        StatusCode: '202',
                        ResponseParameters: {
                            'method.response.header.Access-Control-Allow-Origin': true,
                        },
                    }),
                ]),
            });
        });
        it('should configure success response (202 Accepted)', () => {
            // 成功レスポンス（202 Accepted）が設定されていることを確認
            template.hasResourceProperties('AWS::ApiGateway::Method', {
                HttpMethod: 'POST',
                MethodResponses: assertions_1.Match.arrayWith([
                    assertions_1.Match.objectLike({ StatusCode: '202' }),
                ]),
            });
        });
        it('should configure error responses (400, 401, 500)', () => {
            // エラーレスポンスが設定されていることを確認
            template.hasResourceProperties('AWS::ApiGateway::Method', {
                HttpMethod: 'POST',
                MethodResponses: assertions_1.Match.arrayWith([
                    assertions_1.Match.objectLike({ StatusCode: '202' }),
                    assertions_1.Match.objectLike({ StatusCode: '400' }),
                    assertions_1.Match.objectLike({ StatusCode: '401' }),
                    assertions_1.Match.objectLike({ StatusCode: '500' }),
                ]),
            });
        });
        it('should grant Export Lambda permission to be invoked by API Gateway', () => {
            // API GatewayがExport Lambdaを呼び出す権限が付与されていることを確認
            template.hasResourceProperties('AWS::Lambda::Permission', {
                Action: 'lambda:InvokeFunction',
                Principal: 'apigateway.amazonaws.com',
                FunctionName: assertions_1.Match.objectLike({
                    'Fn::GetAtt': assertions_1.Match.arrayWith([
                        assertions_1.Match.stringLikeRegexp('ExportFunction.*'),
                        'Arn',
                    ]),
                }),
            });
        });
    });
    describe('CloudFormation Outputs', () => {
        it('should export Disclosures endpoint URL', () => {
            // Disclosures エンドポイントURLがエクスポートされていることを確認
            template.hasOutput('DisclosuresEndpoint', {
                Description: 'Disclosures query API endpoint URL',
                Export: {
                    Name: 'TdnetDisclosuresEndpoint',
                },
            });
        });
        it('should export Exports endpoint URL', () => {
            // Exports エンドポイントURLがエクスポートされていることを確認
            template.hasOutput('ExportsEndpoint', {
                Description: 'Export API endpoint URL',
                Export: {
                    Name: 'TdnetExportsEndpoint',
                },
            });
        });
    });
    describe('API Gateway統合の整合性', () => {
        it('should have consistent API Gateway configuration', () => {
            // API Gatewayの基本設定が存在することを確認
            template.hasResourceProperties('AWS::ApiGateway::RestApi', {
                Name: 'tdnet-data-collector-api',
                Description: 'TDnet Data Collector REST API',
            });
        });
        it('should have deployment stage configured', () => {
            // デプロイステージが設定されていることを確認
            template.hasResourceProperties('AWS::ApiGateway::Stage', {
                StageName: 'prod',
            });
        });
        it('should have usage plan with API key', () => {
            // Usage PlanとAPIキーが設定されていることを確認
            template.hasResourceProperties('AWS::ApiGateway::UsagePlan', {
                UsagePlanName: 'tdnet-usage-plan',
                Description: 'Usage plan for TDnet Data Collector API',
            });
        });
        it('should associate API key with usage plan', () => {
            // APIキーがUsage Planに関連付けられていることを確認
            template.hasResourceProperties('AWS::ApiGateway::UsagePlanKey', {
                KeyType: 'API_KEY',
            });
        });
    });
    describe('Lambda関数の権限', () => {
        it('should grant Query Lambda read access to DynamoDB', () => {
            // Query LambdaにDynamoDBの読み取り権限が付与されていることを確認
            template.hasResourceProperties('AWS::IAM::Policy', {
                PolicyDocument: {
                    Statement: assertions_1.Match.arrayWith([
                        assertions_1.Match.objectLike({
                            Action: assertions_1.Match.arrayWith([
                                'dynamodb:BatchGetItem',
                                'dynamodb:Query',
                                'dynamodb:GetItem',
                                'dynamodb:Scan',
                            ]),
                            Effect: 'Allow',
                        }),
                    ]),
                },
                Roles: assertions_1.Match.arrayWith([
                    assertions_1.Match.objectLike({
                        Ref: assertions_1.Match.stringLikeRegexp('QueryFunction.*Role.*'),
                    }),
                ]),
            });
        });
        it('should grant Export Lambda read access to DynamoDB', () => {
            // Export LambdaにDynamoDBの読み取り権限が付与されていることを確認
            template.hasResourceProperties('AWS::IAM::Policy', {
                PolicyDocument: {
                    Statement: assertions_1.Match.arrayWith([
                        assertions_1.Match.objectLike({
                            Action: assertions_1.Match.arrayWith([
                                'dynamodb:BatchGetItem',
                                'dynamodb:Query',
                                'dynamodb:GetItem',
                                'dynamodb:Scan',
                            ]),
                            Effect: 'Allow',
                        }),
                    ]),
                },
                Roles: assertions_1.Match.arrayWith([
                    assertions_1.Match.objectLike({
                        Ref: assertions_1.Match.stringLikeRegexp('ExportFunction.*Role.*'),
                    }),
                ]),
            });
        });
        it('should grant Export Lambda write access to S3 exports bucket', () => {
            // Export LambdaにS3 exportsバケットへの書き込み権限が付与されていることを確認
            template.hasResourceProperties('AWS::IAM::Policy', {
                PolicyDocument: {
                    Statement: assertions_1.Match.arrayWith([
                        assertions_1.Match.objectLike({
                            Action: assertions_1.Match.arrayWith([
                                's3:PutObject',
                                's3:PutObjectLegalHold',
                                's3:PutObjectRetention',
                                's3:PutObjectTagging',
                                's3:PutObjectVersionTagging',
                                's3:Abort*',
                            ]),
                            Effect: 'Allow',
                        }),
                    ]),
                },
                Roles: assertions_1.Match.arrayWith([
                    assertions_1.Match.objectLike({
                        Ref: assertions_1.Match.stringLikeRegexp('ExportFunction.*Role.*'),
                    }),
                ]),
            });
        });
        it('should grant Query Lambda read access to S3 PDFs bucket', () => {
            // Query LambdaにS3 PDFsバケットへの読み取り権限が付与されていることを確認
            template.hasResourceProperties('AWS::IAM::Policy', {
                PolicyDocument: {
                    Statement: assertions_1.Match.arrayWith([
                        assertions_1.Match.objectLike({
                            Action: assertions_1.Match.arrayWith([
                                's3:GetObject*',
                                's3:GetBucket*',
                                's3:List*',
                            ]),
                            Effect: 'Allow',
                        }),
                    ]),
                },
                Roles: assertions_1.Match.arrayWith([
                    assertions_1.Match.objectLike({
                        Ref: assertions_1.Match.stringLikeRegexp('QueryFunction.*Role.*'),
                    }),
                ]),
            });
        });
    });
    describe('WAF統合', () => {
        it('should associate WAF Web ACL with API Gateway', () => {
            // WAF Web ACLがAPI Gatewayに関連付けられていることを確認
            template.hasResourceProperties('AWS::WAFv2::WebACLAssociation', {
                ResourceArn: assertions_1.Match.objectLike({
                    'Fn::Join': assertions_1.Match.arrayWith([
                        '',
                        assertions_1.Match.arrayWith([
                            assertions_1.Match.stringLikeRegexp('arn:'),
                            assertions_1.Match.stringLikeRegexp(':apigateway:'),
                        ]),
                    ]),
                }),
                WebACLArn: assertions_1.Match.objectLike({
                    'Fn::GetAtt': assertions_1.Match.arrayWith([
                        assertions_1.Match.stringLikeRegexp('.*WebAcl.*'),
                        'Arn',
                    ]),
                }),
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aTE5OFxcaW52ZXN0bWVudF9hbmFseXNpc19vcG9wb1xcY2RrXFxfX3Rlc3RzX19cXGFwaS1xdWVyeS1leHBvcnQtZW5kcG9pbnRzLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7R0FNRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFSCxpREFBbUM7QUFDbkMsdURBQXlEO0FBQ3pELGtGQUE0RTtBQUU1RSxRQUFRLENBQUMsc0NBQXNDLEVBQUUsR0FBRyxFQUFFO0lBQ3BELElBQUksUUFBa0IsQ0FBQztJQUV2QixTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2IsTUFBTSxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDMUIsTUFBTSxLQUFLLEdBQUcsSUFBSSxvREFBdUIsQ0FBQyxHQUFHLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFDNUQsUUFBUSxHQUFHLHFCQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3ZDLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLDBCQUEwQixFQUFFLEdBQUcsRUFBRTtRQUN4QyxFQUFFLENBQUMscUNBQXFDLEVBQUUsR0FBRyxFQUFFO1lBQzdDLGlDQUFpQztZQUNqQyxRQUFRLENBQUMscUJBQXFCLENBQUMsMkJBQTJCLEVBQUU7Z0JBQzFELFFBQVEsRUFBRSxhQUFhO2FBQ3hCLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGdEQUFnRCxFQUFFLEdBQUcsRUFBRTtZQUN4RCxtQ0FBbUM7WUFDbkMsUUFBUSxDQUFDLHFCQUFxQixDQUFDLHlCQUF5QixFQUFFO2dCQUN4RCxVQUFVLEVBQUUsS0FBSztnQkFDakIsY0FBYyxFQUFFLElBQUk7Z0JBQ3BCLFVBQVUsRUFBRSxrQkFBSyxDQUFDLFVBQVUsQ0FBQztvQkFDM0IsR0FBRyxFQUFFLGtCQUFLLENBQUMsZ0JBQWdCLENBQUMsaUJBQWlCLENBQUM7aUJBQy9DLENBQUM7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QzthQUNILENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRTtRQUNyQixFQUFFLENBQUMsK0NBQStDLEVBQUUsR0FBRyxFQUFFO1lBQ3ZELHlDQUF5QztZQUN6QyxRQUFRLENBQUMscUJBQXFCLENBQUMsK0JBQStCLEVBQUU7Z0JBQzlELFdBQVcsRUFBRSxrQkFBSyxDQUFDLFVBQVUsQ0FBQztvQkFDNUIsVUFBVSxFQUFFLGtCQUFLLENBQUMsU0FBUyxDQUFDO3dCQUMxQixFQUFFO3dCQUNGLGtCQUFLLENBQUMsU0FBUyxDQUFDOzRCQUNkLGtCQUFLLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDOzRCQUM5QixrQkFBSyxDQUFDLGdCQUFnQixDQUFDLGNBQWMsQ0FBQzt5QkFDdkMsQ0FBQztxQkFDSCxDQUFDO2lCQUNILENBQUM7Z0JBQ0YsU0FBUyxFQUFFLGtCQUFLLENBQUMsVUFBVSxDQUFDO29CQUMxQixZQUFZLEVBQUUsa0JBQUssQ0FBQyxTQUFTLENBQUM7d0JBQzVCLGtCQUFLLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxDQUFDO3dCQUNwQyxLQUFLO3FCQUNOLENBQUM7aUJBQ0gsQ0FBQzthQUNILENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXHRpMTk4XFxpbnZlc3RtZW50X2FuYWx5c2lzX29wb3BvXFxjZGtcXF9fdGVzdHNfX1xcYXBpLXF1ZXJ5LWV4cG9ydC1lbmRwb2ludHMudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQVBJIEdhdGV3YXkgUXVlcnkgJiBFeHBvcnQgRW5kcG9pbnRzIFRlc3RzXHJcbiAqXHJcbiAqIEdFVCAvZGlzY2xvc3VyZXMg44GK44KI44GzIFBPU1QgL2V4cG9ydHMg44Ko44Oz44OJ44Od44Kk44Oz44OI44Gu57Wx5ZCI44OG44K544OIXHJcbiAqXHJcbiAqIFJlcXVpcmVtZW50czog44K/44K544KvMTMuMywgMTMuNCAtIEFQSSBHYXRld2F5IOOCqOODs+ODieODneOCpOODs+ODiOWun+ijhVxyXG4gKi9cclxuXHJcbmltcG9ydCAqIGFzIGNkayBmcm9tICdhd3MtY2RrLWxpYic7XHJcbmltcG9ydCB7IFRlbXBsYXRlLCBNYXRjaCB9IGZyb20gJ2F3cy1jZGstbGliL2Fzc2VydGlvbnMnO1xyXG5pbXBvcnQgeyBUZG5ldERhdGFDb2xsZWN0b3JTdGFjayB9IGZyb20gJy4uL2xpYi90ZG5ldC1kYXRhLWNvbGxlY3Rvci1zdGFjayc7XHJcblxyXG5kZXNjcmliZSgnQVBJIEdhdGV3YXkgUXVlcnkgJiBFeHBvcnQgRW5kcG9pbnRzJywgKCkgPT4ge1xyXG4gIGxldCB0ZW1wbGF0ZTogVGVtcGxhdGU7XHJcblxyXG4gIGJlZm9yZUFsbCgoKSA9PiB7XHJcbiAgICBjb25zdCBhcHAgPSBuZXcgY2RrLkFwcCgpO1xyXG4gICAgY29uc3Qgc3RhY2sgPSBuZXcgVGRuZXREYXRhQ29sbGVjdG9yU3RhY2soYXBwLCAnVGVzdFN0YWNrJyk7XHJcbiAgICB0ZW1wbGF0ZSA9IFRlbXBsYXRlLmZyb21TdGFjayhzdGFjayk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdHRVQgL2Rpc2Nsb3N1cmVzIOOCqOODs+ODieODneOCpOODs+ODiCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY3JlYXRlIC9kaXNjbG9zdXJlcyByZXNvdXJjZScsICgpID0+IHtcclxuICAgICAgLy8gL2Rpc2Nsb3N1cmVzIOODquOCveODvOOCueOBjOS9nOaIkOOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBpR2F0ZXdheTo6UmVzb3VyY2UnLCB7XHJcbiAgICAgICAgUGF0aFBhcnQ6ICdkaXNjbG9zdXJlcycsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgR0VUIG1ldGhvZCB3aXRoIEFQSSBrZXkgcmVxdWlyZWQnLCAoKSA9PiB7XHJcbiAgICAgIC8vIEdFVCDjg6Hjgr3jg4Pjg4njgYzkvZzmiJDjgZXjgozjgIFBUEnjgq3jg7zoqo3oqLzjgYzlv4XpoIjjgafjgYLjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwaUdhdGV3YXk6Ok1ldGhvZCcsIHtcclxuICAgICAgICBIdHRwTWV0aG9kOiAnR0VUJyxcclxuICAgICAgICBBcGlLZXlSZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICBSZXNvdXJjZUlkOiBNYXRjaC5vYmplY3RMaWtlKHtcclxuICAgICAgICAgIFJlZjogTWF0Y2guc3RyaW5nTGlrZVJlZ2V4cCgnLipkaXNjbG9zdXJlcy4qJyksXHJcbiAgICAgICAgfSksXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjb25maWd1cmUgcXVlcnkgcGFyYW1ldGVycycsICgpID0+IHtcclxuICAgICAgLy8g44Kv44Ko44Oq44OR44Op44Oh44O844K/44GM6Kit5a6a44GV44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcGlHYXRld2F5OjpNZXRob2QnLCB7XHJcbiAgICAgICAgSHR0cE1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlcnM6IHtcclxuICAgICAgICAgICdtZXRob2QucmVxdWVzdC5xdWVyeXN0cmluZy5jb21wYW55X2NvZGUnOiBmYWxzZSxcclxuICAgICAgICAgICdtZXRob2QucmVxdWVzdC5xdWVyeXN0cmluZy5zdGFydF9kYXRlJzogZmFsc2UsXHJcbiAgICAgICAgICAnbWV0aG9kLnJlcXVlc3QucXVlcnlzdHJpbmcuZW5kX2RhdGUnOiBmYWxzZSxcclxuICAgICAgICAgICdtZXRob2QucmVxdWVzdC5xdWVyeXN0cmluZy5kaXNjbG9zdXJlX3R5cGUnOiBmYWxzZSxcclxuICAgICAgICAgICdtZXRob2QucmVxdWVzdC5xdWVyeXN0cmluZy5mb3JtYXQnOiBmYWxzZSxcclxuICAgICAgICAgICdtZXRob2QucmVxdWVzdC5xdWVyeXN0cmluZy5saW1pdCc6IGZhbHNlLFxyXG4gICAgICAgICAgJ21ldGhvZC5yZXF1ZXN0LnF1ZXJ5c3RyaW5nLm9mZnNldCc6IGZhbHNlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjb25maWd1cmUgTGFtYmRhIGludGVncmF0aW9uJywgKCkgPT4ge1xyXG4gICAgICAvLyBMYW1iZGHntbHlkIjjgYzoqK3lrprjgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwaUdhdGV3YXk6Ok1ldGhvZCcsIHtcclxuICAgICAgICBIdHRwTWV0aG9kOiAnR0VUJyxcclxuICAgICAgICBJbnRlZ3JhdGlvbjoge1xyXG4gICAgICAgICAgVHlwZTogJ0FXU19QUk9YWScsXHJcbiAgICAgICAgICBJbnRlZ3JhdGlvbkh0dHBNZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgIFVyaTogTWF0Y2gub2JqZWN0TGlrZSh7XHJcbiAgICAgICAgICAgICdGbjo6Sm9pbic6IE1hdGNoLmFycmF5V2l0aChbXHJcbiAgICAgICAgICAgICAgTWF0Y2guYXJyYXlXaXRoKFtcclxuICAgICAgICAgICAgICAgIE1hdGNoLnN0cmluZ0xpa2VSZWdleHAoJy4qbGFtYmRhLionKSxcclxuICAgICAgICAgICAgICBdKSxcclxuICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgY29uZmlndXJlIENPUlMgaGVhZGVycycsICgpID0+IHtcclxuICAgICAgLy8gQ09SU+ODmOODg+ODgOODvOOBjOioreWumuOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBpR2F0ZXdheTo6TWV0aG9kJywge1xyXG4gICAgICAgIEh0dHBNZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIE1ldGhvZFJlc3BvbnNlczogTWF0Y2guYXJyYXlXaXRoKFtcclxuICAgICAgICAgIE1hdGNoLm9iamVjdExpa2Uoe1xyXG4gICAgICAgICAgICBTdGF0dXNDb2RlOiAnMjAwJyxcclxuICAgICAgICAgICAgUmVzcG9uc2VQYXJhbWV0ZXJzOiB7XHJcbiAgICAgICAgICAgICAgJ21ldGhvZC5yZXNwb25zZS5oZWFkZXIuQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogdHJ1ZSxcclxuICAgICAgICAgICAgICAnbWV0aG9kLnJlc3BvbnNlLmhlYWRlci5Db250ZW50LVR5cGUnOiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgXSksXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjb25maWd1cmUgZXJyb3IgcmVzcG9uc2VzICg0MDAsIDQwMSwgNTAwKScsICgpID0+IHtcclxuICAgICAgLy8g44Ko44Op44O844Os44K544Od44Oz44K544GM6Kit5a6a44GV44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpBcGlHYXRld2F5OjpNZXRob2QnLCB7XHJcbiAgICAgICAgSHR0cE1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgTWV0aG9kUmVzcG9uc2VzOiBNYXRjaC5hcnJheVdpdGgoW1xyXG4gICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7IFN0YXR1c0NvZGU6ICcyMDAnIH0pLFxyXG4gICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7IFN0YXR1c0NvZGU6ICc0MDAnIH0pLFxyXG4gICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7IFN0YXR1c0NvZGU6ICc0MDEnIH0pLFxyXG4gICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7IFN0YXR1c0NvZGU6ICc1MDAnIH0pLFxyXG4gICAgICAgIF0pLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZ3JhbnQgUXVlcnkgTGFtYmRhIHBlcm1pc3Npb24gdG8gYmUgaW52b2tlZCBieSBBUEkgR2F0ZXdheScsICgpID0+IHtcclxuICAgICAgLy8gQVBJIEdhdGV3YXnjgYxRdWVyeSBMYW1iZGHjgpLlkbzjgbPlh7rjgZnmqKnpmZDjgYzku5jkuI7jgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkxhbWJkYTo6UGVybWlzc2lvbicsIHtcclxuICAgICAgICBBY3Rpb246ICdsYW1iZGE6SW52b2tlRnVuY3Rpb24nLFxyXG4gICAgICAgIFByaW5jaXBhbDogJ2FwaWdhdGV3YXkuYW1hem9uYXdzLmNvbScsXHJcbiAgICAgICAgRnVuY3Rpb25OYW1lOiBNYXRjaC5vYmplY3RMaWtlKHtcclxuICAgICAgICAgICdGbjo6R2V0QXR0JzogTWF0Y2guYXJyYXlXaXRoKFtcclxuICAgICAgICAgICAgTWF0Y2guc3RyaW5nTGlrZVJlZ2V4cCgnUXVlcnlGdW5jdGlvbi4qJyksXHJcbiAgICAgICAgICAgICdBcm4nLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSksXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQT1NUIC9leHBvcnRzIOOCqOODs+ODieODneOCpOODs+ODiCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY3JlYXRlIC9leHBvcnRzIHJlc291cmNlJywgKCkgPT4ge1xyXG4gICAgICAvLyAvZXhwb3J0cyDjg6rjgr3jg7zjgrnjgYzkvZzmiJDjgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwaUdhdGV3YXk6OlJlc291cmNlJywge1xyXG4gICAgICAgIFBhdGhQYXJ0OiAnZXhwb3J0cycsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgUE9TVCBtZXRob2Qgd2l0aCBBUEkga2V5IHJlcXVpcmVkJywgKCkgPT4ge1xyXG4gICAgICAvLyBQT1NUIOODoeOCveODg+ODieOBjOS9nOaIkOOBleOCjOOAgUFQSeOCreODvOiqjeiovOOBjOW/hemgiOOBp+OBguOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBpR2F0ZXdheTo6TWV0aG9kJywge1xyXG4gICAgICAgIEh0dHBNZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBBcGlLZXlSZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICBSZXNvdXJjZUlkOiBNYXRjaC5vYmplY3RMaWtlKHtcclxuICAgICAgICAgIFJlZjogTWF0Y2guc3RyaW5nTGlrZVJlZ2V4cCgnLipleHBvcnRzLionKSxcclxuICAgICAgICB9KSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNvbmZpZ3VyZSBMYW1iZGEgaW50ZWdyYXRpb24nLCAoKSA9PiB7XHJcbiAgICAgIC8vIExhbWJkYee1seWQiOOBjOioreWumuOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBpR2F0ZXdheTo6TWV0aG9kJywge1xyXG4gICAgICAgIEh0dHBNZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBJbnRlZ3JhdGlvbjoge1xyXG4gICAgICAgICAgVHlwZTogJ0FXU19QUk9YWScsXHJcbiAgICAgICAgICBJbnRlZ3JhdGlvbkh0dHBNZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgIFVyaTogTWF0Y2gub2JqZWN0TGlrZSh7XHJcbiAgICAgICAgICAgICdGbjo6Sm9pbic6IE1hdGNoLmFycmF5V2l0aChbXHJcbiAgICAgICAgICAgICAgTWF0Y2guYXJyYXlXaXRoKFtcclxuICAgICAgICAgICAgICAgIE1hdGNoLnN0cmluZ0xpa2VSZWdleHAoJy4qbGFtYmRhLionKSxcclxuICAgICAgICAgICAgICBdKSxcclxuICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgY29uZmlndXJlIENPUlMgaGVhZGVycycsICgpID0+IHtcclxuICAgICAgLy8gQ09SU+ODmOODg+ODgOODvOOBjOioreWumuOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBpR2F0ZXdheTo6TWV0aG9kJywge1xyXG4gICAgICAgIEh0dHBNZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBNZXRob2RSZXNwb25zZXM6IE1hdGNoLmFycmF5V2l0aChbXHJcbiAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHtcclxuICAgICAgICAgICAgU3RhdHVzQ29kZTogJzIwMicsXHJcbiAgICAgICAgICAgIFJlc3BvbnNlUGFyYW1ldGVyczoge1xyXG4gICAgICAgICAgICAgICdtZXRob2QucmVzcG9uc2UuaGVhZGVyLkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICBdKSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNvbmZpZ3VyZSBzdWNjZXNzIHJlc3BvbnNlICgyMDIgQWNjZXB0ZWQpJywgKCkgPT4ge1xyXG4gICAgICAvLyDmiJDlip/jg6zjgrnjg53jg7PjgrnvvIgyMDIgQWNjZXB0ZWTvvInjgYzoqK3lrprjgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwaUdhdGV3YXk6Ok1ldGhvZCcsIHtcclxuICAgICAgICBIdHRwTWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgTWV0aG9kUmVzcG9uc2VzOiBNYXRjaC5hcnJheVdpdGgoW1xyXG4gICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7IFN0YXR1c0NvZGU6ICcyMDInIH0pLFxyXG4gICAgICAgIF0pLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgY29uZmlndXJlIGVycm9yIHJlc3BvbnNlcyAoNDAwLCA0MDEsIDUwMCknLCAoKSA9PiB7XHJcbiAgICAgIC8vIOOCqOODqeODvOODrOOCueODneODs+OCueOBjOioreWumuOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBpR2F0ZXdheTo6TWV0aG9kJywge1xyXG4gICAgICAgIEh0dHBNZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBNZXRob2RSZXNwb25zZXM6IE1hdGNoLmFycmF5V2l0aChbXHJcbiAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHsgU3RhdHVzQ29kZTogJzIwMicgfSksXHJcbiAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHsgU3RhdHVzQ29kZTogJzQwMCcgfSksXHJcbiAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHsgU3RhdHVzQ29kZTogJzQwMScgfSksXHJcbiAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHsgU3RhdHVzQ29kZTogJzUwMCcgfSksXHJcbiAgICAgICAgXSksXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBncmFudCBFeHBvcnQgTGFtYmRhIHBlcm1pc3Npb24gdG8gYmUgaW52b2tlZCBieSBBUEkgR2F0ZXdheScsICgpID0+IHtcclxuICAgICAgLy8gQVBJIEdhdGV3YXnjgYxFeHBvcnQgTGFtYmRh44KS5ZG844Gz5Ye644GZ5qip6ZmQ44GM5LuY5LiO44GV44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpMYW1iZGE6OlBlcm1pc3Npb24nLCB7XHJcbiAgICAgICAgQWN0aW9uOiAnbGFtYmRhOkludm9rZUZ1bmN0aW9uJyxcclxuICAgICAgICBQcmluY2lwYWw6ICdhcGlnYXRld2F5LmFtYXpvbmF3cy5jb20nLFxyXG4gICAgICAgIEZ1bmN0aW9uTmFtZTogTWF0Y2gub2JqZWN0TGlrZSh7XHJcbiAgICAgICAgICAnRm46OkdldEF0dCc6IE1hdGNoLmFycmF5V2l0aChbXHJcbiAgICAgICAgICAgIE1hdGNoLnN0cmluZ0xpa2VSZWdleHAoJ0V4cG9ydEZ1bmN0aW9uLionKSxcclxuICAgICAgICAgICAgJ0FybicsXHJcbiAgICAgICAgICBdKSxcclxuICAgICAgICB9KSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0Nsb3VkRm9ybWF0aW9uIE91dHB1dHMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGV4cG9ydCBEaXNjbG9zdXJlcyBlbmRwb2ludCBVUkwnLCAoKSA9PiB7XHJcbiAgICAgIC8vIERpc2Nsb3N1cmVzIOOCqOODs+ODieODneOCpOODs+ODiFVSTOOBjOOCqOOCr+OCueODneODvOODiOOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5oYXNPdXRwdXQoJ0Rpc2Nsb3N1cmVzRW5kcG9pbnQnLCB7XHJcbiAgICAgICAgRGVzY3JpcHRpb246ICdEaXNjbG9zdXJlcyBxdWVyeSBBUEkgZW5kcG9pbnQgVVJMJyxcclxuICAgICAgICBFeHBvcnQ6IHtcclxuICAgICAgICAgIE5hbWU6ICdUZG5ldERpc2Nsb3N1cmVzRW5kcG9pbnQnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBleHBvcnQgRXhwb3J0cyBlbmRwb2ludCBVUkwnLCAoKSA9PiB7XHJcbiAgICAgIC8vIEV4cG9ydHMg44Ko44Oz44OJ44Od44Kk44Oz44OIVVJM44GM44Ko44Kv44K544Od44O844OI44GV44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIHRlbXBsYXRlLmhhc091dHB1dCgnRXhwb3J0c0VuZHBvaW50Jywge1xyXG4gICAgICAgIERlc2NyaXB0aW9uOiAnRXhwb3J0IEFQSSBlbmRwb2ludCBVUkwnLFxyXG4gICAgICAgIEV4cG9ydDoge1xyXG4gICAgICAgICAgTmFtZTogJ1RkbmV0RXhwb3J0c0VuZHBvaW50JyxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQVBJIEdhdGV3YXnntbHlkIjjga7mlbTlkIjmgKcnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgY29uc2lzdGVudCBBUEkgR2F0ZXdheSBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xyXG4gICAgICAvLyBBUEkgR2F0ZXdheeOBruWfuuacrOioreWumuOBjOWtmOWcqOOBmeOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBpR2F0ZXdheTo6UmVzdEFwaScsIHtcclxuICAgICAgICBOYW1lOiAndGRuZXQtZGF0YS1jb2xsZWN0b3ItYXBpJyxcclxuICAgICAgICBEZXNjcmlwdGlvbjogJ1REbmV0IERhdGEgQ29sbGVjdG9yIFJFU1QgQVBJJyxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgZGVwbG95bWVudCBzdGFnZSBjb25maWd1cmVkJywgKCkgPT4ge1xyXG4gICAgICAvLyDjg4fjg5fjg63jgqTjgrnjg4bjg7zjgrjjgYzoqK3lrprjgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwaUdhdGV3YXk6OlN0YWdlJywge1xyXG4gICAgICAgIFN0YWdlTmFtZTogJ3Byb2QnLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGF2ZSB1c2FnZSBwbGFuIHdpdGggQVBJIGtleScsICgpID0+IHtcclxuICAgICAgLy8gVXNhZ2UgUGxhbuOBqEFQSeOCreODvOOBjOioreWumuOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6QXBpR2F0ZXdheTo6VXNhZ2VQbGFuJywge1xyXG4gICAgICAgIFVzYWdlUGxhbk5hbWU6ICd0ZG5ldC11c2FnZS1wbGFuJyxcclxuICAgICAgICBEZXNjcmlwdGlvbjogJ1VzYWdlIHBsYW4gZm9yIFREbmV0IERhdGEgQ29sbGVjdG9yIEFQSScsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBhc3NvY2lhdGUgQVBJIGtleSB3aXRoIHVzYWdlIHBsYW4nLCAoKSA9PiB7XHJcbiAgICAgIC8vIEFQSeOCreODvOOBjFVzYWdlIFBsYW7jgavplqLpgKPku5jjgZHjgonjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkFwaUdhdGV3YXk6OlVzYWdlUGxhbktleScsIHtcclxuICAgICAgICBLZXlUeXBlOiAnQVBJX0tFWScsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdMYW1iZGHplqLmlbDjga7mqKnpmZAnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGdyYW50IFF1ZXJ5IExhbWJkYSByZWFkIGFjY2VzcyB0byBEeW5hbW9EQicsICgpID0+IHtcclxuICAgICAgLy8gUXVlcnkgTGFtYmRh44GrRHluYW1vRELjga7oqq3jgb/lj5bjgormqKnpmZDjgYzku5jkuI7jgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OklBTTo6UG9saWN5Jywge1xyXG4gICAgICAgIFBvbGljeURvY3VtZW50OiB7XHJcbiAgICAgICAgICBTdGF0ZW1lbnQ6IE1hdGNoLmFycmF5V2l0aChbXHJcbiAgICAgICAgICAgIE1hdGNoLm9iamVjdExpa2Uoe1xyXG4gICAgICAgICAgICAgIEFjdGlvbjogTWF0Y2guYXJyYXlXaXRoKFtcclxuICAgICAgICAgICAgICAgICdkeW5hbW9kYjpCYXRjaEdldEl0ZW0nLFxyXG4gICAgICAgICAgICAgICAgJ2R5bmFtb2RiOlF1ZXJ5JyxcclxuICAgICAgICAgICAgICAgICdkeW5hbW9kYjpHZXRJdGVtJyxcclxuICAgICAgICAgICAgICAgICdkeW5hbW9kYjpTY2FuJyxcclxuICAgICAgICAgICAgICBdKSxcclxuICAgICAgICAgICAgICBFZmZlY3Q6ICdBbGxvdycsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSxcclxuICAgICAgICBSb2xlczogTWF0Y2guYXJyYXlXaXRoKFtcclxuICAgICAgICAgIE1hdGNoLm9iamVjdExpa2Uoe1xyXG4gICAgICAgICAgICBSZWY6IE1hdGNoLnN0cmluZ0xpa2VSZWdleHAoJ1F1ZXJ5RnVuY3Rpb24uKlJvbGUuKicpLFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgXSksXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBncmFudCBFeHBvcnQgTGFtYmRhIHJlYWQgYWNjZXNzIHRvIER5bmFtb0RCJywgKCkgPT4ge1xyXG4gICAgICAvLyBFeHBvcnQgTGFtYmRh44GrRHluYW1vRELjga7oqq3jgb/lj5bjgormqKnpmZDjgYzku5jkuI7jgZXjgozjgabjgYTjgovjgZPjgajjgpLnorroqo1cclxuICAgICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OklBTTo6UG9saWN5Jywge1xyXG4gICAgICAgIFBvbGljeURvY3VtZW50OiB7XHJcbiAgICAgICAgICBTdGF0ZW1lbnQ6IE1hdGNoLmFycmF5V2l0aChbXHJcbiAgICAgICAgICAgIE1hdGNoLm9iamVjdExpa2Uoe1xyXG4gICAgICAgICAgICAgIEFjdGlvbjogTWF0Y2guYXJyYXlXaXRoKFtcclxuICAgICAgICAgICAgICAgICdkeW5hbW9kYjpCYXRjaEdldEl0ZW0nLFxyXG4gICAgICAgICAgICAgICAgJ2R5bmFtb2RiOlF1ZXJ5JyxcclxuICAgICAgICAgICAgICAgICdkeW5hbW9kYjpHZXRJdGVtJyxcclxuICAgICAgICAgICAgICAgICdkeW5hbW9kYjpTY2FuJyxcclxuICAgICAgICAgICAgICBdKSxcclxuICAgICAgICAgICAgICBFZmZlY3Q6ICdBbGxvdycsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSxcclxuICAgICAgICBSb2xlczogTWF0Y2guYXJyYXlXaXRoKFtcclxuICAgICAgICAgIE1hdGNoLm9iamVjdExpa2Uoe1xyXG4gICAgICAgICAgICBSZWY6IE1hdGNoLnN0cmluZ0xpa2VSZWdleHAoJ0V4cG9ydEZ1bmN0aW9uLipSb2xlLionKSxcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgIF0pLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZ3JhbnQgRXhwb3J0IExhbWJkYSB3cml0ZSBhY2Nlc3MgdG8gUzMgZXhwb3J0cyBidWNrZXQnLCAoKSA9PiB7XHJcbiAgICAgIC8vIEV4cG9ydCBMYW1iZGHjgatTMyBleHBvcnRz44OQ44Kx44OD44OI44G444Gu5pu444GN6L6844G/5qip6ZmQ44GM5LuY5LiO44GV44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpJQU06OlBvbGljeScsIHtcclxuICAgICAgICBQb2xpY3lEb2N1bWVudDoge1xyXG4gICAgICAgICAgU3RhdGVtZW50OiBNYXRjaC5hcnJheVdpdGgoW1xyXG4gICAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHtcclxuICAgICAgICAgICAgICBBY3Rpb246IE1hdGNoLmFycmF5V2l0aChbXHJcbiAgICAgICAgICAgICAgICAnczM6UHV0T2JqZWN0JyxcclxuICAgICAgICAgICAgICAgICdzMzpQdXRPYmplY3RMZWdhbEhvbGQnLFxyXG4gICAgICAgICAgICAgICAgJ3MzOlB1dE9iamVjdFJldGVudGlvbicsXHJcbiAgICAgICAgICAgICAgICAnczM6UHV0T2JqZWN0VGFnZ2luZycsXHJcbiAgICAgICAgICAgICAgICAnczM6UHV0T2JqZWN0VmVyc2lvblRhZ2dpbmcnLFxyXG4gICAgICAgICAgICAgICAgJ3MzOkFib3J0KicsXHJcbiAgICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgICAgRWZmZWN0OiAnQWxsb3cnLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgUm9sZXM6IE1hdGNoLmFycmF5V2l0aChbXHJcbiAgICAgICAgICBNYXRjaC5vYmplY3RMaWtlKHtcclxuICAgICAgICAgICAgUmVmOiBNYXRjaC5zdHJpbmdMaWtlUmVnZXhwKCdFeHBvcnRGdW5jdGlvbi4qUm9sZS4qJyksXHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICBdKSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGdyYW50IFF1ZXJ5IExhbWJkYSByZWFkIGFjY2VzcyB0byBTMyBQREZzIGJ1Y2tldCcsICgpID0+IHtcclxuICAgICAgLy8gUXVlcnkgTGFtYmRh44GrUzMgUERGc+ODkOOCseODg+ODiOOBuOOBruiqreOBv+WPluOCiuaoqemZkOOBjOS7mOS4juOBleOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjVxyXG4gICAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6SUFNOjpQb2xpY3knLCB7XHJcbiAgICAgICAgUG9saWN5RG9jdW1lbnQ6IHtcclxuICAgICAgICAgIFN0YXRlbWVudDogTWF0Y2guYXJyYXlXaXRoKFtcclxuICAgICAgICAgICAgTWF0Y2gub2JqZWN0TGlrZSh7XHJcbiAgICAgICAgICAgICAgQWN0aW9uOiBNYXRjaC5hcnJheVdpdGgoW1xyXG4gICAgICAgICAgICAgICAgJ3MzOkdldE9iamVjdConLFxyXG4gICAgICAgICAgICAgICAgJ3MzOkdldEJ1Y2tldConLFxyXG4gICAgICAgICAgICAgICAgJ3MzOkxpc3QqJyxcclxuICAgICAgICAgICAgICBdKSxcclxuICAgICAgICAgICAgICBFZmZlY3Q6ICdBbGxvdycsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgfSxcclxuICAgICAgICBSb2xlczogTWF0Y2guYXJyYXlXaXRoKFtcclxuICAgICAgICAgIE1hdGNoLm9iamVjdExpa2Uoe1xyXG4gICAgICAgICAgICBSZWY6IE1hdGNoLnN0cmluZ0xpa2VSZWdleHAoJ1F1ZXJ5RnVuY3Rpb24uKlJvbGUuKicpLFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgXSksXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdXQUbntbHlkIgnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGFzc29jaWF0ZSBXQUYgV2ViIEFDTCB3aXRoIEFQSSBHYXRld2F5JywgKCkgPT4ge1xyXG4gICAgICAvLyBXQUYgV2ViIEFDTOOBjEFQSSBHYXRld2F544Gr6Zai6YCj5LuY44GR44KJ44KM44Gm44GE44KL44GT44Go44KS56K66KqNXHJcbiAgICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpXQUZ2Mjo6V2ViQUNMQXNzb2NpYXRpb24nLCB7XHJcbiAgICAgICAgUmVzb3VyY2VBcm46IE1hdGNoLm9iamVjdExpa2Uoe1xyXG4gICAgICAgICAgJ0ZuOjpKb2luJzogTWF0Y2guYXJyYXlXaXRoKFtcclxuICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgIE1hdGNoLmFycmF5V2l0aChbXHJcbiAgICAgICAgICAgICAgTWF0Y2guc3RyaW5nTGlrZVJlZ2V4cCgnYXJuOicpLFxyXG4gICAgICAgICAgICAgIE1hdGNoLnN0cmluZ0xpa2VSZWdleHAoJzphcGlnYXRld2F5OicpLFxyXG4gICAgICAgICAgICBdKSxcclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIFdlYkFDTEFybjogTWF0Y2gub2JqZWN0TGlrZSh7XHJcbiAgICAgICAgICAnRm46OkdldEF0dCc6IE1hdGNoLmFycmF5V2l0aChbXHJcbiAgICAgICAgICAgIE1hdGNoLnN0cmluZ0xpa2VSZWdleHAoJy4qV2ViQWNsLionKSxcclxuICAgICAgICAgICAgJ0FybicsXHJcbiAgICAgICAgICBdKSxcclxuICAgICAgICB9KSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJ2ZXJzaW9uIjozfQ==